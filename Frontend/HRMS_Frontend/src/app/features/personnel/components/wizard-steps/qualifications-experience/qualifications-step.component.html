<div class="space-y-8 animate-in fade-in slide-in-from-bottom-5 duration-500">
  
  <!-- Section Header Card -->
  <div class="bg-gradient-to-r from-blue-700 to-indigo-800 rounded-[2.5rem] p-8 text-white shadow-xl shadow-blue-500/20 relative overflow-hidden group">
    <div class="absolute -top-10 -right-10 w-40 h-40 bg-white/10 rounded-full blur-2xl"></div>
    <div class="relative z-10 flex items-center gap-6">
      <div class="w-16 h-16 rounded-2xl bg-white/10 backdrop-blur-md flex items-center justify-center text-white border border-white/20">
        <i class="pi pi-graduation-cap text-3xl"></i>
      </div>
      <div>
        <h2 class="text-2xl font-black tracking-tight">المؤهلات والخبرات</h2>
        <p class="text-sm text-blue-100/80 font-medium">سجل السيرة الذاتية والمؤهلات العلمية والشهادات المهنية</p>
      </div>
    </div>
  </div>

  <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
    <!-- Qualifications Section -->
    <section class="space-y-4">
      <app-dynamic-array-list
        [items]="data.qualifications || []"
        title="المؤهلات العلمية"
        itemLabel="مؤهل"
        icon="pi pi-book"
        [columns]="qualColumns"
        (save)="onSaveQualification($event)"
        (delete)="onDeleteQualification($event)">
        
        <ng-template #formTemplate let-item>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-5 p-2">
            <div class="space-y-1.5">
              <label class="text-[11px] font-black text-slate-400 uppercase tracking-widest mr-1">الدرجة العلمية <span class="text-red-500">*</span></label>
              <input pInputText [(ngModel)]="item.degreeType" placeholder="بكالوريوس، ماجستير..." class="w-full !h-11 !rounded-xl !bg-slate-50 dark:!bg-slate-900/50 !text-sm !font-bold" />
            </div>
            <div class="space-y-1.5">
              <label class="text-[11px] font-black text-slate-400 uppercase tracking-widest mr-1">التخصص <span class="text-red-500">*</span></label>
              <input pInputText [(ngModel)]="item.majorAr" placeholder="مجال الدراسة" class="w-full !h-11 !rounded-xl !bg-slate-50 dark:!bg-slate-900/50 !text-sm !font-bold" />
            </div>
            <div class="space-y-1.5">
              <label class="text-[11px] font-black text-slate-400 uppercase tracking-widest mr-1">المؤسسة التعليمية</label>
              <input pInputText [(ngModel)]="item.universityAr" placeholder="اسم الجامعة" class="w-full !h-11 !rounded-xl !bg-slate-50 dark:!bg-slate-900/50 !text-sm" />
            </div>
            <div class="space-y-1.5">
              <label class="text-[11px] font-black text-slate-400 uppercase tracking-widest mr-1">سنة التخرج</label>
              <p-inputNumber [(ngModel)]="item.graduationYear" [useGrouping]="false" placeholder="YYYY" styleClass="w-full" inputStyleClass="!h-11 !rounded-xl !bg-slate-50 dark:!bg-slate-900/50 !text-sm !font-bold"></p-inputNumber>
            </div>
            <div class="md:col-span-2 pt-2">
              <div class="flex items-center gap-4 p-4 bg-blue-50/50 dark:bg-blue-900/10 rounded-xl border border-dashed border-blue-200 dark:border-blue-900/40">
                <p-fileUpload mode="basic" [auto]="true" chooseLabel="إرفاق الشهادة" styleClass="p-button-sm !rounded-xl !bg-blue-600 !border-none text-[10px]" (onSelect)="onQualFileSelect($event, item)"></p-fileUpload>
                <span class="text-[10px] text-slate-400 font-bold truncate max-w-[150px]">{{ item.file ? item.file.name : 'PDF/JPG' }}</span>
              </div>
            </div>
          </div>
        </ng-template>
      </app-dynamic-array-list>
    </section>

    <!-- Experience Section -->
    <section class="space-y-4">
      <app-dynamic-array-list
        [items]="data.experiences || []"
        title="الخبرات السابقة"
        itemLabel="خبرة"
        icon="pi pi-history"
        [columns]="expColumns"
        (save)="onSaveExperience($event)"
        (delete)="onDeleteExperience($event)">
        
        <ng-template #formTemplate let-item>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-5 p-2">
            <div class="space-y-1.5">
              <label class="text-[11px] font-black text-slate-400 uppercase tracking-widest mr-1">المسمى السابق <span class="text-red-500">*</span></label>
              <input pInputText [(ngModel)]="item.jobTitleAr" class="w-full !h-11 !rounded-xl !bg-slate-50 dark:!bg-slate-900/50 !text-sm !font-bold" />
            </div>
            <div class="space-y-1.5">
              <label class="text-[11px] font-black text-slate-400 uppercase tracking-widest mr-1">الشركة <span class="text-red-500">*</span></label>
              <input pInputText [(ngModel)]="item.companyNameAr" class="w-full !h-11 !rounded-xl !bg-slate-50 dark:!bg-slate-900/50 !text-sm !font-bold" />
            </div>
            <div class="space-y-1.5">
              <label class="text-[11px] font-black text-slate-400 uppercase tracking-widest mr-1">تاريخ البدء</label>
              <p-datePicker [(ngModel)]="item.startDate" [showIcon]="true" appendTo="body" dateFormat="yy-mm-dd" styleClass="w-full" inputStyleClass="!h-11 !rounded-xl !bg-slate-50 dark:!bg-slate-900/50 !text-sm"></p-datePicker>
            </div>
            <div class="space-y-1.5">
              <label class="text-[11px] font-black text-slate-400 uppercase tracking-widest mr-1">تاريخ الانتهاء</label>
              <p-datePicker [(ngModel)]="item.endDate" [showIcon]="true" appendTo="body" dateFormat="yy-mm-dd" styleClass="w-full" inputStyleClass="!h-11 !rounded-xl !bg-slate-50 dark:!bg-slate-900/50 !text-sm"></p-datePicker>
            </div>
          </div>
        </ng-template>
      </app-dynamic-array-list>
    </section>
  </div>

  <!-- Professional Certifications (Full Width) -->
  <app-dynamic-array-list
    [items]="data.certifications || []"
    title="الشهادات المهنية والدورات التدريبية"
    itemLabel="شهادة"
    icon="pi pi-verified"
    [columns]="certColumns"
    (save)="onSaveCertification($event)"
    (delete)="onDeleteCertification($event)">
    <ng-template #formTemplate let-item>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6 p-2">
        <div class="md:col-span-2 space-y-1.5">
          <label class="text-[11px] font-black text-slate-400 uppercase tracking-widest mr-1">اسم الشهادة <span class="text-red-500">*</span></label>
          <input pInputText [(ngModel)]="item.certificationName" class="w-full !h-11 !rounded-xl !bg-slate-50 dark:!bg-slate-900/50 !text-sm !font-bold" />
        </div>
        <div class="space-y-1.5">
            <label class="text-[11px] font-black text-slate-400 uppercase tracking-widest mr-1">جهة الإصدار</label>
            <input pInputText [(ngModel)]="item.issuingOrganization" class="w-full !h-11 !rounded-xl !bg-slate-50 dark:!bg-slate-900/50 !text-sm" />
        </div>
      </div>
    </ng-template>
  </app-dynamic-array-list>
</div>
