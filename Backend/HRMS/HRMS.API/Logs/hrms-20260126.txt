2026-01-26 01:52:21.757 +03:00 [INF] üöÄ Starting HRMS Hospital API...
2026-01-26 01:52:28.493 +03:00 [FTL] ‚ùå Application terminated unexpectedly
System.AggregateException: Some services are not able to be constructed (Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[HRMS.Application.Features.Personnel.Employees.Commands.UploadEmployeeDocument.UploadEmployeeDocumentCommand,System.Int32] Lifetime: Transient ImplementationType: HRMS.Application.Features.Personnel.Employees.Commands.UploadEmployeeDocument.UploadEmployeeDocumentCommandHandler': Unable to resolve service for type 'HRMS.Application.Interfaces.IFileService' while attempting to activate 'HRMS.Application.Features.Personnel.Employees.Commands.UploadEmployeeDocument.UploadEmployeeDocumentCommandHandler'.)
 ---> System.InvalidOperationException: Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[HRMS.Application.Features.Personnel.Employees.Commands.UploadEmployeeDocument.UploadEmployeeDocumentCommand,System.Int32] Lifetime: Transient ImplementationType: HRMS.Application.Features.Personnel.Employees.Commands.UploadEmployeeDocument.UploadEmployeeDocumentCommandHandler': Unable to resolve service for type 'HRMS.Application.Interfaces.IFileService' while attempting to activate 'HRMS.Application.Features.Personnel.Employees.Commands.UploadEmployeeDocument.UploadEmployeeDocumentCommandHandler'.
 ---> System.InvalidOperationException: Unable to resolve service for type 'HRMS.Application.Interfaces.IFileService' while attempting to activate 'HRMS.Application.Features.Personnel.Employees.Commands.UploadEmployeeDocument.UploadEmployeeDocumentCommandHandler'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceDescriptor serviceDescriptor, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)
   at Microsoft.Extensions.DependencyInjection.ServiceCollectionContainerBuilderExtensions.BuildServiceProvider(IServiceCollection services, ServiceProviderOptions options)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at Program.<Main>$(String[] args) in G:\HRMS_Hospital\Backend\HRMS\HRMS.API\Program.cs:line 65
2026-01-26 01:53:07.048 +03:00 [INF] üöÄ Starting HRMS Hospital API...
2026-01-26 01:53:10.053 +03:00 [FTL] ‚ùå Application terminated unexpectedly
System.AggregateException: Some services are not able to be constructed (Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[HRMS.Application.Features.Personnel.Employees.Commands.UploadEmployeeDocument.UploadEmployeeDocumentCommand,System.Int32] Lifetime: Transient ImplementationType: HRMS.Application.Features.Personnel.Employees.Commands.UploadEmployeeDocument.UploadEmployeeDocumentCommandHandler': Unable to resolve service for type 'HRMS.Application.Interfaces.IFileService' while attempting to activate 'HRMS.Application.Features.Personnel.Employees.Commands.UploadEmployeeDocument.UploadEmployeeDocumentCommandHandler'.)
 ---> System.InvalidOperationException: Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[HRMS.Application.Features.Personnel.Employees.Commands.UploadEmployeeDocument.UploadEmployeeDocumentCommand,System.Int32] Lifetime: Transient ImplementationType: HRMS.Application.Features.Personnel.Employees.Commands.UploadEmployeeDocument.UploadEmployeeDocumentCommandHandler': Unable to resolve service for type 'HRMS.Application.Interfaces.IFileService' while attempting to activate 'HRMS.Application.Features.Personnel.Employees.Commands.UploadEmployeeDocument.UploadEmployeeDocumentCommandHandler'.
 ---> System.InvalidOperationException: Unable to resolve service for type 'HRMS.Application.Interfaces.IFileService' while attempting to activate 'HRMS.Application.Features.Personnel.Employees.Commands.UploadEmployeeDocument.UploadEmployeeDocumentCommandHandler'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceDescriptor serviceDescriptor, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)
   at Microsoft.Extensions.DependencyInjection.ServiceCollectionContainerBuilderExtensions.BuildServiceProvider(IServiceCollection services, ServiceProviderOptions options)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at Program.<Main>$(String[] args) in G:\HRMS_Hospital\Backend\HRMS\HRMS.API\Program.cs:line 65
2026-01-26 01:53:21.049 +03:00 [INF] üöÄ Starting HRMS Hospital API...
2026-01-26 01:53:26.689 +03:00 [FTL] ‚ùå Application terminated unexpectedly
System.AggregateException: Some services are not able to be constructed (Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[HRMS.Application.Features.Personnel.Employees.Commands.UploadEmployeeDocument.UploadEmployeeDocumentCommand,System.Int32] Lifetime: Transient ImplementationType: HRMS.Application.Features.Personnel.Employees.Commands.UploadEmployeeDocument.UploadEmployeeDocumentCommandHandler': Unable to resolve service for type 'HRMS.Application.Interfaces.IFileService' while attempting to activate 'HRMS.Application.Features.Personnel.Employees.Commands.UploadEmployeeDocument.UploadEmployeeDocumentCommandHandler'.)
 ---> System.InvalidOperationException: Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[HRMS.Application.Features.Personnel.Employees.Commands.UploadEmployeeDocument.UploadEmployeeDocumentCommand,System.Int32] Lifetime: Transient ImplementationType: HRMS.Application.Features.Personnel.Employees.Commands.UploadEmployeeDocument.UploadEmployeeDocumentCommandHandler': Unable to resolve service for type 'HRMS.Application.Interfaces.IFileService' while attempting to activate 'HRMS.Application.Features.Personnel.Employees.Commands.UploadEmployeeDocument.UploadEmployeeDocumentCommandHandler'.
 ---> System.InvalidOperationException: Unable to resolve service for type 'HRMS.Application.Interfaces.IFileService' while attempting to activate 'HRMS.Application.Features.Personnel.Employees.Commands.UploadEmployeeDocument.UploadEmployeeDocumentCommandHandler'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceDescriptor serviceDescriptor, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)
   at Microsoft.Extensions.DependencyInjection.ServiceCollectionContainerBuilderExtensions.BuildServiceProvider(IServiceCollection services, ServiceProviderOptions options)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at Program.<Main>$(String[] args) in G:\HRMS_Hospital\Backend\HRMS\HRMS.API\Program.cs:line 65
2026-01-26 01:53:55.351 +03:00 [INF] üöÄ Starting HRMS Hospital API...
2026-01-26 01:53:58.386 +03:00 [FTL] ‚ùå Application terminated unexpectedly
System.AggregateException: Some services are not able to be constructed (Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[HRMS.Application.Features.Personnel.Employees.Commands.UploadEmployeeDocument.UploadEmployeeDocumentCommand,System.Int32] Lifetime: Transient ImplementationType: HRMS.Application.Features.Personnel.Employees.Commands.UploadEmployeeDocument.UploadEmployeeDocumentCommandHandler': Unable to resolve service for type 'HRMS.Application.Interfaces.IFileService' while attempting to activate 'HRMS.Application.Features.Personnel.Employees.Commands.UploadEmployeeDocument.UploadEmployeeDocumentCommandHandler'.)
 ---> System.InvalidOperationException: Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[HRMS.Application.Features.Personnel.Employees.Commands.UploadEmployeeDocument.UploadEmployeeDocumentCommand,System.Int32] Lifetime: Transient ImplementationType: HRMS.Application.Features.Personnel.Employees.Commands.UploadEmployeeDocument.UploadEmployeeDocumentCommandHandler': Unable to resolve service for type 'HRMS.Application.Interfaces.IFileService' while attempting to activate 'HRMS.Application.Features.Personnel.Employees.Commands.UploadEmployeeDocument.UploadEmployeeDocumentCommandHandler'.
 ---> System.InvalidOperationException: Unable to resolve service for type 'HRMS.Application.Interfaces.IFileService' while attempting to activate 'HRMS.Application.Features.Personnel.Employees.Commands.UploadEmployeeDocument.UploadEmployeeDocumentCommandHandler'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceDescriptor serviceDescriptor, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)
   at Microsoft.Extensions.DependencyInjection.ServiceCollectionContainerBuilderExtensions.BuildServiceProvider(IServiceCollection services, ServiceProviderOptions options)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at Program.<Main>$(String[] args) in G:\HRMS_Hospital\Backend\HRMS\HRMS.API\Program.cs:line 65
2026-01-26 01:54:18.393 +03:00 [INF] üöÄ Starting HRMS Hospital API...
2026-01-26 01:54:18.820 +03:00 [FTL] ‚ùå Application terminated unexpectedly
System.AggregateException: Some services are not able to be constructed (Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[HRMS.Application.Features.Personnel.Employees.Commands.UploadEmployeeDocument.UploadEmployeeDocumentCommand,System.Int32] Lifetime: Transient ImplementationType: HRMS.Application.Features.Personnel.Employees.Commands.UploadEmployeeDocument.UploadEmployeeDocumentCommandHandler': Unable to resolve service for type 'HRMS.Application.Interfaces.IFileService' while attempting to activate 'HRMS.Application.Features.Personnel.Employees.Commands.UploadEmployeeDocument.UploadEmployeeDocumentCommandHandler'.)
 ---> System.InvalidOperationException: Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[HRMS.Application.Features.Personnel.Employees.Commands.UploadEmployeeDocument.UploadEmployeeDocumentCommand,System.Int32] Lifetime: Transient ImplementationType: HRMS.Application.Features.Personnel.Employees.Commands.UploadEmployeeDocument.UploadEmployeeDocumentCommandHandler': Unable to resolve service for type 'HRMS.Application.Interfaces.IFileService' while attempting to activate 'HRMS.Application.Features.Personnel.Employees.Commands.UploadEmployeeDocument.UploadEmployeeDocumentCommandHandler'.
 ---> System.InvalidOperationException: Unable to resolve service for type 'HRMS.Application.Interfaces.IFileService' while attempting to activate 'HRMS.Application.Features.Personnel.Employees.Commands.UploadEmployeeDocument.UploadEmployeeDocumentCommandHandler'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceDescriptor serviceDescriptor, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)
   at Microsoft.Extensions.DependencyInjection.ServiceCollectionContainerBuilderExtensions.BuildServiceProvider(IServiceCollection services, ServiceProviderOptions options)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at Program.<Main>$(String[] args) in G:\HRMS_Hospital\Backend\HRMS\HRMS.API\Program.cs:line 65
2026-01-26 01:55:42.970 +03:00 [INF] üöÄ Starting HRMS Hospital API...
2026-01-26 01:55:47.295 +03:00 [FTL] ‚ùå Application terminated unexpectedly
System.AggregateException: Some services are not able to be constructed (Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[HRMS.Application.Features.Personnel.Employees.Commands.UploadEmployeeDocument.UploadEmployeeDocumentCommand,System.Int32] Lifetime: Transient ImplementationType: HRMS.Application.Features.Personnel.Employees.Commands.UploadEmployeeDocument.UploadEmployeeDocumentCommandHandler': Unable to resolve service for type 'HRMS.Application.Interfaces.IFileService' while attempting to activate 'HRMS.Application.Features.Personnel.Employees.Commands.UploadEmployeeDocument.UploadEmployeeDocumentCommandHandler'.)
 ---> System.InvalidOperationException: Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[HRMS.Application.Features.Personnel.Employees.Commands.UploadEmployeeDocument.UploadEmployeeDocumentCommand,System.Int32] Lifetime: Transient ImplementationType: HRMS.Application.Features.Personnel.Employees.Commands.UploadEmployeeDocument.UploadEmployeeDocumentCommandHandler': Unable to resolve service for type 'HRMS.Application.Interfaces.IFileService' while attempting to activate 'HRMS.Application.Features.Personnel.Employees.Commands.UploadEmployeeDocument.UploadEmployeeDocumentCommandHandler'.
 ---> System.InvalidOperationException: Unable to resolve service for type 'HRMS.Application.Interfaces.IFileService' while attempting to activate 'HRMS.Application.Features.Personnel.Employees.Commands.UploadEmployeeDocument.UploadEmployeeDocumentCommandHandler'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceDescriptor serviceDescriptor, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)
   at Microsoft.Extensions.DependencyInjection.ServiceCollectionContainerBuilderExtensions.BuildServiceProvider(IServiceCollection services, ServiceProviderOptions options)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at Program.<Main>$(String[] args) in G:\HRMS_Hospital\Backend\HRMS\HRMS.API\Program.cs:line 65
2026-01-26 02:04:20.959 +03:00 [INF] üöÄ Starting HRMS Hospital API...
2026-01-26 02:04:27.842 +03:00 [INF] User profile is available. Using 'C:\Users\MT\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-26 02:04:30.745 +03:00 [WRN] No store type was specified for the decimal property 'HoursCount' on entity type 'ShiftType'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-01-26 02:04:30.749 +03:00 [WRN] No store type was specified for the decimal property 'MaxSalary' on entity type 'JobGrade'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-01-26 02:04:30.751 +03:00 [WRN] No store type was specified for the decimal property 'MinSalary' on entity type 'JobGrade'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-01-26 02:04:35.000 +03:00 [INF] Executed DbCommand (251ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Description], [a].[Name], [a].[NameAr], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2026-01-26 02:04:35.206 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Description], [a].[Name], [a].[NameAr], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2026-01-26 02:04:35.215 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Description], [a].[Name], [a].[NameAr], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2026-01-26 02:04:35.220 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Description], [a].[Name], [a].[NameAr], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2026-01-26 02:04:35.226 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Description], [a].[Name], [a].[NameAr], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2026-01-26 02:04:35.232 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Description], [a].[Name], [a].[NameAr], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2026-01-26 02:04:35.238 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Description], [a].[Name], [a].[NameAr], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2026-01-26 02:04:35.244 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Description], [a].[Name], [a].[NameAr], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2026-01-26 02:04:35.249 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Description], [a].[Name], [a].[NameAr], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2026-01-26 02:04:35.261 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Description], [a].[Name], [a].[NameAr], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2026-01-26 02:04:35.266 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Description], [a].[Name], [a].[NameAr], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2026-01-26 02:04:35.272 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Description], [a].[Name], [a].[NameAr], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2026-01-26 02:04:35.280 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Description], [a].[Name], [a].[NameAr], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2026-01-26 02:04:35.349 +03:00 [INF] Executed DbCommand (32ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[EmployeeId], [a].[FullNameAr], [a].[FullNameEn], [a].[IsActive], [a].[LastLoginAt], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2026-01-26 02:04:35.476 +03:00 [INF] ‚úÖ Default roles and admin user seeded successfully
2026-01-26 02:04:35.487 +03:00 [INF] ‚úÖ HRMS Hospital API started successfully
2026-01-26 02:04:36.123 +03:00 [INF] Now listening on: https://localhost:7053
2026-01-26 02:04:36.147 +03:00 [INF] Now listening on: http://localhost:5212
2026-01-26 02:04:36.420 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-26 02:04:36.474 +03:00 [INF] Hosting environment: Development
2026-01-26 02:04:36.477 +03:00 [INF] Content root path: G:\HRMS_Hospital\Backend\HRMS\HRMS.API
2026-01-26 02:04:36.562 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7053/swagger/index.html - null null
2026-01-26 02:04:40.065 +03:00 [INF] HTTP GET /swagger/index.html responded 200 in 3185.4979 ms
2026-01-26 02:04:40.081 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7053/_framework/aspnetcore-browser-refresh.js - null null
2026-01-26 02:04:40.090 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7053/swagger/index.html - 200 null text/html;charset=utf-8 3537.7623ms
2026-01-26 02:04:40.100 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7053/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 19.6598ms
2026-01-26 02:04:40.850 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7053/_vs/browserLink - null null
2026-01-26 02:04:40.955 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7053/_vs/browserLink - 200 null text/javascript; charset=UTF-8 104.9543ms
2026-01-26 02:04:41.929 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7053/swagger/v1/swagger.json - null null
2026-01-26 02:04:42.180 +03:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 247.3000 ms
2026-01-26 02:04:42.188 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7053/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 259.5237ms
2026-01-26 02:23:33.761 +03:00 [INF] üöÄ Starting HRMS Hospital API...
2026-01-26 02:23:35.672 +03:00 [FTL] ‚ùå Application terminated unexpectedly
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at Program.<Main>$(String[] args) in G:\HRMS_Hospital\Backend\HRMS\HRMS.API\Program.cs:line 65
2026-01-26 02:24:21.348 +03:00 [INF] üöÄ Starting HRMS Hospital API...
2026-01-26 02:24:22.112 +03:00 [FTL] ‚ùå Application terminated unexpectedly
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at Program.<Main>$(String[] args) in G:\HRMS_Hospital\Backend\HRMS\HRMS.API\Program.cs:line 65
2026-01-26 03:18:17.775 +03:00 [INF] üöÄ Starting HRMS Hospital API...
2026-01-26 03:18:24.160 +03:00 [INF] ‚úÖ HRMS Hospital API started successfully
2026-01-26 03:18:24.245 +03:00 [INF] User profile is available. Using 'C:\Users\MT\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-26 03:18:24.848 +03:00 [INF] Now listening on: https://localhost:5001
2026-01-26 03:18:24.850 +03:00 [INF] Now listening on: http://localhost:5000
2026-01-26 03:18:24.987 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-26 03:18:24.989 +03:00 [INF] Hosting environment: Development
2026-01-26 03:18:24.991 +03:00 [INF] Content root path: G:\HRMS_Hospital\Backend\HRMS\HRMS.API
2026-01-26 03:18:26.639 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger - null null
2026-01-26 03:18:30.838 +03:00 [INF] HTTP GET /swagger responded 301 in 3782.0655 ms
2026-01-26 03:18:30.865 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger - 301 0 null 4237.6109ms
2026-01-26 03:18:30.919 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - null null
2026-01-26 03:18:31.272 +03:00 [INF] HTTP GET /swagger/index.html responded 200 in 330.0823 ms
2026-01-26 03:18:31.380 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/swagger-ui.css - null null
2026-01-26 03:18:31.390 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/swagger-ui-bundle.js - null null
2026-01-26 03:18:31.413 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/swagger-ui-standalone-preset.js - null null
2026-01-26 03:18:31.500 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - 200 null text/html;charset=utf-8 580.8237ms
2026-01-26 03:18:31.565 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - null null
2026-01-26 03:18:31.985 +03:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2026-01-26 03:18:32.125 +03:00 [INF] HTTP GET /swagger/swagger-ui-standalone-preset.js responded 200 in 168.6433 ms
2026-01-26 03:18:32.129 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/swagger-ui-standalone-preset.js - 200 230280 text/javascript 716.0625ms
2026-01-26 03:18:32.117 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 551.7037ms
2026-01-26 03:18:31.986 +03:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2026-01-26 03:18:32.087 +03:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2026-01-26 03:18:32.165 +03:00 [INF] HTTP GET /swagger/swagger-ui.css responded 200 in 644.0315 ms
2026-01-26 03:18:32.166 +03:00 [INF] HTTP GET /swagger/swagger-ui-bundle.js responded 200 in 224.3474 ms
2026-01-26 03:18:32.172 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/swagger-ui-bundle.js - 200 1456926 text/javascript 782.1792ms
2026-01-26 03:18:32.170 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/swagger-ui.css - 200 152034 text/css 789.3917ms
2026-01-26 03:18:32.456 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_vs/browserLink - null null
2026-01-26 03:18:32.626 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_vs/browserLink - 200 null text/javascript; charset=UTF-8 169.4218ms
2026-01-26 03:18:34.357 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - null null
2026-01-26 03:18:34.371 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/favicon-32x32.png - null null
2026-01-26 03:18:34.869 +03:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2026-01-26 03:18:34.884 +03:00 [INF] HTTP GET /swagger/favicon-32x32.png responded 200 in 14.5954 ms
2026-01-26 03:18:34.914 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/favicon-32x32.png - 200 628 image/png 543.707ms
2026-01-26 03:18:35.212 +03:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 345.8357 ms
2026-01-26 03:18:35.222 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 864.6203ms
2026-01-26 03:30:22.323 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Employees - application/json 775
2026-01-26 03:30:22.398 +03:00 [INF] CORS policy execution successful.
2026-01-26 03:30:22.506 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.Create (HRMS.API)'
2026-01-26 03:30:22.558 +03:00 [INF] Route matched with {action = "Create", controller = "Employees"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] Create(HRMS.Application.DTOs.Personnel.CreateEmployeeDto) on controller HRMS.API.Controllers.Personnel.EmployeesController (HRMS.API).
2026-01-26 03:30:26.975 +03:00 [WRN] No store type was specified for the decimal property 'HoursCount' on entity type 'ShiftType'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-01-26 03:30:26.978 +03:00 [WRN] No store type was specified for the decimal property 'MaxSalary' on entity type 'JobGrade'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-01-26 03:30:26.982 +03:00 [WRN] No store type was specified for the decimal property 'MinSalary' on entity type 'JobGrade'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-01-26 03:30:30.396 +03:00 [INF] Executed DbCommand (220ms) [Parameters=[@__ToString_0_startswith='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
WHERE [e].[EMPLOYEE_NUMBER] LIKE @__ToString_0_startswith ESCAPE N'\'
ORDER BY [e].[EMPLOYEE_NUMBER] DESC
2026-01-26 03:30:31.616 +03:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2026-01-26 03:30:31.650 +03:00 [INF] Executed DbCommand (23ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?' (Size = 100), @p5='?' (Size = 20), @p6='?' (Size = 50), @p7='?' (Size = 200), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2), @p10='?' (Size = 1) (DbType = Byte), @p11='?' (DbType = Int32), @p12='?' (Size = 50), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (DbType = Int32), @p16='?' (Size = 20), @p17='?' (Size = 20), @p18='?' (Size = 20), @p19='?' (DbType = Int32), @p20='?' (Size = 50), @p21='?' (Size = 100), @p22='?' (Size = 50), @p23='?' (DbType = DateTime2), @p24='?' (Size = 50), @p25='?' (Size = 450), @p26='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_PERSONNEL].[EMPLOYEES] ([BIRTH_DATE], [CREATED_AT], [CREATED_BY], [DEPARTMENT_ID], [EMAIL], [EMPLOYEE_NUMBER], [FIRST_NAME_AR], [FULL_NAME_EN], [GENDER], [HIRE_DATE], [IS_DELETED], [JOB_ID], [LAST_NAME_AR], [LICENSE_EXPIRY_DATE], [LICENSE_NUMBER], [MANAGER_ID], [MARITAL_STATUS], [MOBILE], [NATIONAL_ID], [NATIONALITY_ID], [SECOND_NAME_AR], [SPECIALTY], [THIRD_NAME_AR], [UPDATED_AT], [UPDATED_BY], [USER_ID], [VERSION_NO])
OUTPUT INSERTED.[EMPLOYEE_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26);
2026-01-26 03:30:31.772 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'HRMS.Infrastructure.Data.HRMSDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): String or binary data would be truncated in table 'HRMS_Hospital.HR_PERSONNEL.EMPLOYEES', column 'GENDER'. Truncated value: 'M'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:57750c59-2823-48fc-b87d-3455b27bb60a
Error Number:2628,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): String or binary data would be truncated in table 'HRMS_Hospital.HR_PERSONNEL.EMPLOYEES', column 'GENDER'. Truncated value: 'M'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:57750c59-2823-48fc-b87d-3455b27bb60a
Error Number:2628,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2026-01-26 03:31:17.158 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeesController.Create (HRMS.API) in 54588.4315ms
2026-01-26 03:31:17.277 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.Create (HRMS.API)'
2026-01-26 03:31:17.313 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): String or binary data would be truncated in table 'HRMS_Hospital.HR_PERSONNEL.EMPLOYEES', column 'GENDER'. Truncated value: 'M'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:57750c59-2823-48fc-b87d-3455b27bb60a
Error Number:2628,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at HRMS.Application.Features.Personnel.Employees.Commands.CreateEmployee.CreateEmployeeCommandHandler.Handle(CreateEmployeeCommand request, CancellationToken cancellationToken) in G:\HRMS_Hospital\Backend\HRMS\HRMS.Application\Features\Personnel\Employees\Commands\CreateEmployee\CreateEmployeeCommandHandler.cs:line 58
   at HRMS.Application.Features.Personnel.Employees.Commands.CreateEmployee.CreateEmployeeCommandHandler.Handle(CreateEmployeeCommand request, CancellationToken cancellationToken) in G:\HRMS_Hospital\Backend\HRMS\HRMS.Application\Features\Personnel\Employees\Commands\CreateEmployee\CreateEmployeeCommandHandler.cs:line 68
   at HRMS.API.Controllers.Personnel.EmployeesController.Create(CreateEmployeeDto dto) in G:\HRMS_Hospital\Backend\HRMS\HRMS.API\Controllers\Personnel\EmployeesController.cs:line 37
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2026-01-26 03:31:17.635 +03:00 [ERR] HTTP POST /api/Employees responded 500 in 55242.0439 ms
2026-01-26 03:31:17.655 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Employees - 500 null text/plain; charset=utf-8 55332.5619ms
2026-01-26 03:31:26.364 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Employees - application/json 770
2026-01-26 03:31:26.377 +03:00 [INF] CORS policy execution successful.
2026-01-26 03:31:26.384 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.Create (HRMS.API)'
2026-01-26 03:31:26.389 +03:00 [INF] Route matched with {action = "Create", controller = "Employees"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] Create(HRMS.Application.DTOs.Personnel.CreateEmployeeDto) on controller HRMS.API.Controllers.Personnel.EmployeesController (HRMS.API).
2026-01-26 03:31:26.532 +03:00 [INF] Executed DbCommand (25ms) [Parameters=[@__ToString_0_startswith='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
WHERE [e].[EMPLOYEE_NUMBER] LIKE @__ToString_0_startswith ESCAPE N'\'
ORDER BY [e].[EMPLOYEE_NUMBER] DESC
2026-01-26 03:31:26.559 +03:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2026-01-26 03:31:26.587 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?' (Size = 100), @p5='?' (Size = 20), @p6='?' (Size = 50), @p7='?' (Size = 200), @p8='?' (Size = 1), @p9='?' (DbType = DateTime2), @p10='?' (Size = 1) (DbType = Byte), @p11='?' (DbType = Int32), @p12='?' (Size = 50), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (DbType = Int32), @p16='?' (Size = 20), @p17='?' (Size = 20), @p18='?' (Size = 20), @p19='?' (DbType = Int32), @p20='?' (Size = 50), @p21='?' (Size = 100), @p22='?' (Size = 50), @p23='?' (DbType = DateTime2), @p24='?' (Size = 50), @p25='?' (Size = 450), @p26='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_PERSONNEL].[EMPLOYEES] ([BIRTH_DATE], [CREATED_AT], [CREATED_BY], [DEPARTMENT_ID], [EMAIL], [EMPLOYEE_NUMBER], [FIRST_NAME_AR], [FULL_NAME_EN], [GENDER], [HIRE_DATE], [IS_DELETED], [JOB_ID], [LAST_NAME_AR], [LICENSE_EXPIRY_DATE], [LICENSE_NUMBER], [MANAGER_ID], [MARITAL_STATUS], [MOBILE], [NATIONAL_ID], [NATIONALITY_ID], [SECOND_NAME_AR], [SPECIALTY], [THIRD_NAME_AR], [UPDATED_AT], [UPDATED_BY], [USER_ID], [VERSION_NO])
OUTPUT INSERTED.[EMPLOYEE_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26);
2026-01-26 03:31:26.609 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'HRMS.Infrastructure.Data.HRMSDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_EMPLOYEES_COUNTRIES_NATIONALITY_ID". The conflict occurred in database "HRMS_Hospital", table "HR_CORE.COUNTRIES", column 'COUNTRY_ID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:57750c59-2823-48fc-b87d-3455b27bb60a
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_EMPLOYEES_COUNTRIES_NATIONALITY_ID". The conflict occurred in database "HRMS_Hospital", table "HR_CORE.COUNTRIES", column 'COUNTRY_ID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:57750c59-2823-48fc-b87d-3455b27bb60a
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2026-01-26 16:00:43.268 +03:00 [INF] üöÄ Starting HRMS Hospital API...
2026-01-26 16:00:50.486 +03:00 [INF] ‚úÖ HRMS Hospital API started successfully
2026-01-26 16:00:50.568 +03:00 [INF] User profile is available. Using 'C:\Users\MT\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-26 16:00:51.257 +03:00 [INF] Now listening on: https://localhost:5001
2026-01-26 16:00:51.259 +03:00 [INF] Now listening on: http://localhost:5000
2026-01-26 16:00:51.400 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-26 16:00:51.404 +03:00 [INF] Hosting environment: Development
2026-01-26 16:00:51.405 +03:00 [INF] Content root path: G:\HRMS_Hospital\Backend\HRMS\HRMS.API
2026-01-26 16:00:57.685 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - null null
2026-01-26 16:01:01.801 +03:00 [INF] HTTP GET /swagger/index.html responded 200 in 3660.5103 ms
2026-01-26 16:01:01.835 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - 200 null text/html;charset=utf-8 4159.7182ms
2026-01-26 16:01:02.597 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_vs/browserLink - null null
2026-01-26 16:01:02.597 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - null null
2026-01-26 16:01:02.618 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 20.5594ms
2026-01-26 16:01:02.740 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_vs/browserLink - 200 null text/javascript; charset=UTF-8 143.3181ms
2026-01-26 16:01:04.227 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - null null
2026-01-26 16:01:04.477 +03:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 142.7351 ms
2026-01-26 16:01:04.481 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 253.7743ms
2026-01-26 16:03:16.809 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Employees - application/json 770
2026-01-26 16:03:16.823 +03:00 [INF] CORS policy execution successful.
2026-01-26 16:03:16.836 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.Create (HRMS.API)'
2026-01-26 16:03:16.883 +03:00 [INF] Route matched with {action = "Create", controller = "Employees"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] Create(HRMS.Application.DTOs.Personnel.CreateEmployeeDto) on controller HRMS.API.Controllers.Personnel.EmployeesController (HRMS.API).
2026-01-26 16:03:20.962 +03:00 [WRN] No store type was specified for the decimal property 'HoursCount' on entity type 'ShiftType'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-01-26 16:03:20.965 +03:00 [WRN] No store type was specified for the decimal property 'MaxSalary' on entity type 'JobGrade'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-01-26 16:03:20.967 +03:00 [WRN] No store type was specified for the decimal property 'MinSalary' on entity type 'JobGrade'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-01-26 16:03:24.299 +03:00 [INF] Executed DbCommand (222ms) [Parameters=[@__ToString_0_startswith='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
WHERE [e].[EMPLOYEE_NUMBER] LIKE @__ToString_0_startswith ESCAPE N'\'
ORDER BY [e].[EMPLOYEE_NUMBER] DESC
2026-01-26 16:03:24.943 +03:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2026-01-26 16:03:24.963 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?' (Size = 100), @p5='?' (Size = 20), @p6='?' (Size = 50), @p7='?' (Size = 200), @p8='?' (Size = 1), @p9='?' (DbType = DateTime2), @p10='?' (Size = 1) (DbType = Byte), @p11='?' (DbType = Int32), @p12='?' (Size = 50), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (DbType = Int32), @p16='?' (Size = 20), @p17='?' (Size = 20), @p18='?' (Size = 20), @p19='?' (DbType = Int32), @p20='?' (Size = 50), @p21='?' (Size = 100), @p22='?' (Size = 50), @p23='?' (DbType = DateTime2), @p24='?' (Size = 50), @p25='?' (Size = 450), @p26='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_PERSONNEL].[EMPLOYEES] ([BIRTH_DATE], [CREATED_AT], [CREATED_BY], [DEPARTMENT_ID], [EMAIL], [EMPLOYEE_NUMBER], [FIRST_NAME_AR], [FULL_NAME_EN], [GENDER], [HIRE_DATE], [IS_DELETED], [JOB_ID], [LAST_NAME_AR], [LICENSE_EXPIRY_DATE], [LICENSE_NUMBER], [MANAGER_ID], [MARITAL_STATUS], [MOBILE], [NATIONAL_ID], [NATIONALITY_ID], [SECOND_NAME_AR], [SPECIALTY], [THIRD_NAME_AR], [UPDATED_AT], [UPDATED_BY], [USER_ID], [VERSION_NO])
OUTPUT INSERTED.[EMPLOYEE_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26);
2026-01-26 16:03:25.046 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'HRMS.Infrastructure.Data.HRMSDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_EMPLOYEES_COUNTRIES_NATIONALITY_ID". The conflict occurred in database "HRMS_Hospital", table "HR_CORE.COUNTRIES", column 'COUNTRY_ID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:e9653ed3-28c2-4819-9088-5608df8f101b
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_EMPLOYEES_COUNTRIES_NATIONALITY_ID". The conflict occurred in database "HRMS_Hospital", table "HR_CORE.COUNTRIES", column 'COUNTRY_ID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:e9653ed3-28c2-4819-9088-5608df8f101b
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2026-01-26 16:03:53.940 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeesController.Create (HRMS.API) in 37046.2328ms
2026-01-26 16:03:53.994 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.Create (HRMS.API)'
2026-01-26 16:03:53.999 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_EMPLOYEES_COUNTRIES_NATIONALITY_ID". The conflict occurred in database "HRMS_Hospital", table "HR_CORE.COUNTRIES", column 'COUNTRY_ID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:e9653ed3-28c2-4819-9088-5608df8f101b
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at HRMS.Application.Features.Personnel.Employees.Commands.CreateEmployee.CreateEmployeeCommandHandler.Handle(CreateEmployeeCommand request, CancellationToken cancellationToken) in G:\HRMS_Hospital\Backend\HRMS\HRMS.Application\Features\Personnel\Employees\Commands\CreateEmployee\CreateEmployeeCommandHandler.cs:line 58
   at HRMS.Application.Features.Personnel.Employees.Commands.CreateEmployee.CreateEmployeeCommandHandler.Handle(CreateEmployeeCommand request, CancellationToken cancellationToken) in G:\HRMS_Hospital\Backend\HRMS\HRMS.Application\Features\Personnel\Employees\Commands\CreateEmployee\CreateEmployeeCommandHandler.cs:line 68
   at HRMS.API.Controllers.Personnel.EmployeesController.Create(CreateEmployeeDto dto) in G:\HRMS_Hospital\Backend\HRMS\HRMS.API\Controllers\Personnel\EmployeesController.cs:line 37
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2026-01-26 16:03:54.112 +03:00 [ERR] HTTP POST /api/Employees responded 500 in 37294.2016 ms
2026-01-26 16:03:54.135 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Employees - 500 null text/plain; charset=utf-8 37356.2877ms
2026-01-26 16:04:11.643 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Countries - null null
2026-01-26 16:04:11.706 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Core.CountriesController.GetAll (HRMS.API)'
2026-01-26 16:04:11.723 +03:00 [INF] Route matched with {action = "GetAll", controller = "Countries"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(HRMS.Application.Features.Core.Countries.Queries.GetAllCountries.GetAllCountriesQuery) on controller HRMS.API.Controllers.Core.CountriesController (HRMS.API).
2026-01-26 16:04:11.899 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [HR_CORE].[COUNTRIES] AS [c]
2026-01-26 16:04:12.300 +03:00 [INF] Executed DbCommand (50ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[COUNTRY_ID], [c].[CITIZENSHIP_NAME_AR], [c].[CITIZENSHIP_NAME_EN], [c].[COUNTRY_NAME_AR], [c].[COUNTRY_NAME_EN], [c].[ISO_CODE], [c].[CREATED_AT], [c].[CREATED_BY], [c].[IS_DELETED], [c].[UPDATED_AT], [c].[UPDATED_BY], [c].[VERSION_NO], (
    SELECT COUNT(*)
    FROM [HR_CORE].[CITIES] AS [c0]
    WHERE [c].[COUNTRY_ID] = [c0].[COUNTRY_ID])
FROM [HR_CORE].[COUNTRIES] AS [c]
ORDER BY [c].[COUNTRY_NAME_AR]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2026-01-26 16:04:12.411 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[HRMS.Application.DTOs.Core.PagedResult`1[[HRMS.Application.DTOs.Core.CountryListDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-26 16:04:12.446 +03:00 [INF] Executed action HRMS.API.Controllers.Core.CountriesController.GetAll (HRMS.API) in 715.4535ms
2026-01-26 16:04:12.460 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Core.CountriesController.GetAll (HRMS.API)'
2026-01-26 16:04:12.462 +03:00 [INF] HTTP GET /api/Countries responded 200 in 758.6174 ms
2026-01-26 16:04:12.465 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Countries - 200 null application/json; charset=utf-8 821.7431ms
2026-01-26 16:04:46.205 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Employees - application/json 770
2026-01-26 16:04:46.211 +03:00 [INF] CORS policy execution successful.
2026-01-26 16:04:46.213 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.Create (HRMS.API)'
2026-01-26 16:04:46.215 +03:00 [INF] Route matched with {action = "Create", controller = "Employees"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] Create(HRMS.Application.DTOs.Personnel.CreateEmployeeDto) on controller HRMS.API.Controllers.Personnel.EmployeesController (HRMS.API).
2026-01-26 16:04:46.554 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__ToString_0_startswith='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
WHERE [e].[EMPLOYEE_NUMBER] LIKE @__ToString_0_startswith ESCAPE N'\'
ORDER BY [e].[EMPLOYEE_NUMBER] DESC
2026-01-26 16:04:46.568 +03:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2026-01-26 16:04:46.571 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?' (Size = 100), @p5='?' (Size = 20), @p6='?' (Size = 50), @p7='?' (Size = 200), @p8='?' (Size = 1), @p9='?' (DbType = DateTime2), @p10='?' (Size = 1) (DbType = Byte), @p11='?' (DbType = Int32), @p12='?' (Size = 50), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (DbType = Int32), @p16='?' (Size = 20), @p17='?' (Size = 20), @p18='?' (Size = 20), @p19='?' (DbType = Int32), @p20='?' (Size = 50), @p21='?' (Size = 100), @p22='?' (Size = 50), @p23='?' (DbType = DateTime2), @p24='?' (Size = 50), @p25='?' (Size = 450), @p26='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_PERSONNEL].[EMPLOYEES] ([BIRTH_DATE], [CREATED_AT], [CREATED_BY], [DEPARTMENT_ID], [EMAIL], [EMPLOYEE_NUMBER], [FIRST_NAME_AR], [FULL_NAME_EN], [GENDER], [HIRE_DATE], [IS_DELETED], [JOB_ID], [LAST_NAME_AR], [LICENSE_EXPIRY_DATE], [LICENSE_NUMBER], [MANAGER_ID], [MARITAL_STATUS], [MOBILE], [NATIONAL_ID], [NATIONALITY_ID], [SECOND_NAME_AR], [SPECIALTY], [THIRD_NAME_AR], [UPDATED_AT], [UPDATED_BY], [USER_ID], [VERSION_NO])
OUTPUT INSERTED.[EMPLOYEE_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26);
2026-01-26 16:04:46.584 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'HRMS.Infrastructure.Data.HRMSDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_EMPLOYEES_JOBS_JOB_ID". The conflict occurred in database "HRMS_Hospital", table "HR_CORE.JOBS", column 'JOB_ID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:e9653ed3-28c2-4819-9088-5608df8f101b
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_EMPLOYEES_JOBS_JOB_ID". The conflict occurred in database "HRMS_Hospital", table "HR_CORE.JOBS", column 'JOB_ID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:e9653ed3-28c2-4819-9088-5608df8f101b
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2026-01-26 16:04:59.075 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeesController.Create (HRMS.API) in 12855.115ms
2026-01-26 16:04:59.118 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.Create (HRMS.API)'
2026-01-26 16:04:59.120 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_EMPLOYEES_JOBS_JOB_ID". The conflict occurred in database "HRMS_Hospital", table "HR_CORE.JOBS", column 'JOB_ID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:e9653ed3-28c2-4819-9088-5608df8f101b
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at HRMS.Application.Features.Personnel.Employees.Commands.CreateEmployee.CreateEmployeeCommandHandler.Handle(CreateEmployeeCommand request, CancellationToken cancellationToken) in G:\HRMS_Hospital\Backend\HRMS\HRMS.Application\Features\Personnel\Employees\Commands\CreateEmployee\CreateEmployeeCommandHandler.cs:line 58
   at HRMS.Application.Features.Personnel.Employees.Commands.CreateEmployee.CreateEmployeeCommandHandler.Handle(CreateEmployeeCommand request, CancellationToken cancellationToken) in G:\HRMS_Hospital\Backend\HRMS\HRMS.Application\Features\Personnel\Employees\Commands\CreateEmployee\CreateEmployeeCommandHandler.cs:line 68
   at HRMS.API.Controllers.Personnel.EmployeesController.Create(CreateEmployeeDto dto) in G:\HRMS_Hospital\Backend\HRMS\HRMS.API\Controllers\Personnel\EmployeesController.cs:line 37
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2026-01-26 16:04:59.239 +03:00 [ERR] HTTP POST /api/Employees responded 500 in 13028.7806 ms
2026-01-26 16:04:59.241 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Employees - 500 null text/plain; charset=utf-8 13035.902ms
2026-01-26 16:05:28.406 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Jobs - null null
2026-01-26 16:05:28.466 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Core.JobsController.GetAll (HRMS.API)'
2026-01-26 16:05:28.478 +03:00 [INF] Route matched with {action = "GetAll", controller = "Jobs"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(HRMS.Application.Features.Core.Jobs.Queries.GetAllJobs.GetAllJobsQuery) on controller HRMS.API.Controllers.Core.JobsController (HRMS.API).
2026-01-26 16:05:28.510 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [HR_CORE].[JOBS] AS [j]
WHERE [j].[IS_DELETED] = CAST(0 AS tinyint)
2026-01-26 16:05:28.587 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [j1].[JOB_ID] AS [JobId], [j1].[JOB_TITLE_AR] AS [JobTitleAr], [j1].[JOB_TITLE_EN] AS [JobTitleEn], [j1].[DEFAULT_GRADE_ID] AS [DefaultGradeId], [j1].[IS_MEDICAL] AS [IsMedical], [j0].[GRADE_NAME_AR] AS [GradeNameAr]
FROM (
    SELECT [j].[JOB_ID], [j].[DEFAULT_GRADE_ID], [j].[IS_MEDICAL], [j].[JOB_TITLE_AR], [j].[JOB_TITLE_EN]
    FROM [HR_CORE].[JOBS] AS [j]
    WHERE [j].[IS_DELETED] = CAST(0 AS tinyint)
    ORDER BY [j].[JOB_TITLE_AR]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [j1]
LEFT JOIN [HR_CORE].[JOB_GRADES] AS [j0] ON [j1].[DEFAULT_GRADE_ID] = [j0].[JOB_GRADE_ID]
ORDER BY [j1].[JOB_TITLE_AR]
2026-01-26 16:05:28.596 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[HRMS.Application.DTOs.Core.PagedResult`1[[HRMS.Application.DTOs.Core.JobDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-26 16:05:31.742 +03:00 [INF] Executed action HRMS.API.Controllers.Core.JobsController.GetAll (HRMS.API) in 3260.9036ms
2026-01-26 16:05:31.760 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Core.JobsController.GetAll (HRMS.API)'
2026-01-26 16:05:31.762 +03:00 [INF] HTTP GET /api/Jobs responded 200 in 3296.9214 ms
2026-01-26 16:05:31.764 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Jobs - 200 null application/json; charset=utf-8 3359.5898ms
2026-01-26 16:06:04.010 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Employees - application/json 770
2026-01-26 16:06:04.022 +03:00 [INF] CORS policy execution successful.
2026-01-26 16:06:04.023 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.Create (HRMS.API)'
2026-01-26 16:06:04.025 +03:00 [INF] Route matched with {action = "Create", controller = "Employees"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] Create(HRMS.Application.DTOs.Personnel.CreateEmployeeDto) on controller HRMS.API.Controllers.Personnel.EmployeesController (HRMS.API).
2026-01-26 16:06:04.160 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[@__ToString_0_startswith='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
WHERE [e].[EMPLOYEE_NUMBER] LIKE @__ToString_0_startswith ESCAPE N'\'
ORDER BY [e].[EMPLOYEE_NUMBER] DESC
2026-01-26 16:06:04.252 +03:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2026-01-26 16:06:04.260 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?' (Size = 100), @p5='?' (Size = 20), @p6='?' (Size = 50), @p7='?' (Size = 200), @p8='?' (Size = 1), @p9='?' (DbType = DateTime2), @p10='?' (Size = 1) (DbType = Byte), @p11='?' (DbType = Int32), @p12='?' (Size = 50), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (DbType = Int32), @p16='?' (Size = 20), @p17='?' (Size = 20), @p18='?' (Size = 20), @p19='?' (DbType = Int32), @p20='?' (Size = 50), @p21='?' (Size = 100), @p22='?' (Size = 50), @p23='?' (DbType = DateTime2), @p24='?' (Size = 50), @p25='?' (Size = 450), @p26='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_PERSONNEL].[EMPLOYEES] ([BIRTH_DATE], [CREATED_AT], [CREATED_BY], [DEPARTMENT_ID], [EMAIL], [EMPLOYEE_NUMBER], [FIRST_NAME_AR], [FULL_NAME_EN], [GENDER], [HIRE_DATE], [IS_DELETED], [JOB_ID], [LAST_NAME_AR], [LICENSE_EXPIRY_DATE], [LICENSE_NUMBER], [MANAGER_ID], [MARITAL_STATUS], [MOBILE], [NATIONAL_ID], [NATIONALITY_ID], [SECOND_NAME_AR], [SPECIALTY], [THIRD_NAME_AR], [UPDATED_AT], [UPDATED_BY], [USER_ID], [VERSION_NO])
OUTPUT INSERTED.[EMPLOYEE_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26);
2026-01-26 16:06:04.272 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'HRMS.Infrastructure.Data.HRMSDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_EMPLOYEES_DEPARTMENTS_DEPARTMENT_ID". The conflict occurred in database "HRMS_Hospital", table "HR_CORE.DEPARTMENTS", column 'DEPT_ID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:e9653ed3-28c2-4819-9088-5608df8f101b
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_EMPLOYEES_DEPARTMENTS_DEPARTMENT_ID". The conflict occurred in database "HRMS_Hospital", table "HR_CORE.DEPARTMENTS", column 'DEPT_ID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:e9653ed3-28c2-4819-9088-5608df8f101b
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2026-01-26 16:06:17.391 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeesController.Create (HRMS.API) in 13350.8505ms
2026-01-26 16:06:17.402 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.Create (HRMS.API)'
2026-01-26 16:06:17.415 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_EMPLOYEES_DEPARTMENTS_DEPARTMENT_ID". The conflict occurred in database "HRMS_Hospital", table "HR_CORE.DEPARTMENTS", column 'DEPT_ID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:e9653ed3-28c2-4819-9088-5608df8f101b
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at HRMS.Application.Features.Personnel.Employees.Commands.CreateEmployee.CreateEmployeeCommandHandler.Handle(CreateEmployeeCommand request, CancellationToken cancellationToken) in G:\HRMS_Hospital\Backend\HRMS\HRMS.Application\Features\Personnel\Employees\Commands\CreateEmployee\CreateEmployeeCommandHandler.cs:line 58
   at HRMS.Application.Features.Personnel.Employees.Commands.CreateEmployee.CreateEmployeeCommandHandler.Handle(CreateEmployeeCommand request, CancellationToken cancellationToken) in G:\HRMS_Hospital\Backend\HRMS\HRMS.Application\Features\Personnel\Employees\Commands\CreateEmployee\CreateEmployeeCommandHandler.cs:line 68
   at HRMS.API.Controllers.Personnel.EmployeesController.Create(CreateEmployeeDto dto) in G:\HRMS_Hospital\Backend\HRMS\HRMS.API\Controllers\Personnel\EmployeesController.cs:line 37
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2026-01-26 16:06:17.525 +03:00 [ERR] HTTP POST /api/Employees responded 500 in 13503.7604 ms
2026-01-26 16:06:17.530 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Employees - 500 null text/plain; charset=utf-8 13519.5102ms
2026-01-26 16:06:26.456 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Employees - application/json 770
2026-01-26 16:06:26.467 +03:00 [INF] CORS policy execution successful.
2026-01-26 16:06:26.469 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.Create (HRMS.API)'
2026-01-26 16:06:26.478 +03:00 [INF] Route matched with {action = "Create", controller = "Employees"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] Create(HRMS.Application.DTOs.Personnel.CreateEmployeeDto) on controller HRMS.API.Controllers.Personnel.EmployeesController (HRMS.API).
2026-01-26 16:06:26.498 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__ToString_0_startswith='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
WHERE [e].[EMPLOYEE_NUMBER] LIKE @__ToString_0_startswith ESCAPE N'\'
ORDER BY [e].[EMPLOYEE_NUMBER] DESC
2026-01-26 16:06:26.511 +03:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2026-01-26 16:06:26.515 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?' (Size = 100), @p5='?' (Size = 20), @p6='?' (Size = 50), @p7='?' (Size = 200), @p8='?' (Size = 1), @p9='?' (DbType = DateTime2), @p10='?' (Size = 1) (DbType = Byte), @p11='?' (DbType = Int32), @p12='?' (Size = 50), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (DbType = Int32), @p16='?' (Size = 20), @p17='?' (Size = 20), @p18='?' (Size = 20), @p19='?' (DbType = Int32), @p20='?' (Size = 50), @p21='?' (Size = 100), @p22='?' (Size = 50), @p23='?' (DbType = DateTime2), @p24='?' (Size = 50), @p25='?' (Size = 450), @p26='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_PERSONNEL].[EMPLOYEES] ([BIRTH_DATE], [CREATED_AT], [CREATED_BY], [DEPARTMENT_ID], [EMAIL], [EMPLOYEE_NUMBER], [FIRST_NAME_AR], [FULL_NAME_EN], [GENDER], [HIRE_DATE], [IS_DELETED], [JOB_ID], [LAST_NAME_AR], [LICENSE_EXPIRY_DATE], [LICENSE_NUMBER], [MANAGER_ID], [MARITAL_STATUS], [MOBILE], [NATIONAL_ID], [NATIONALITY_ID], [SECOND_NAME_AR], [SPECIALTY], [THIRD_NAME_AR], [UPDATED_AT], [UPDATED_BY], [USER_ID], [VERSION_NO])
OUTPUT INSERTED.[EMPLOYEE_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26);
2026-01-26 16:06:26.535 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'HRMS.Infrastructure.Data.HRMSDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY SAME TABLE constraint "FK_EMPLOYEES_EMPLOYEES_MANAGER_ID". The conflict occurred in database "HRMS_Hospital", table "HR_PERSONNEL.EMPLOYEES", column 'EMPLOYEE_ID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:e9653ed3-28c2-4819-9088-5608df8f101b
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY SAME TABLE constraint "FK_EMPLOYEES_EMPLOYEES_MANAGER_ID". The conflict occurred in database "HRMS_Hospital", table "HR_PERSONNEL.EMPLOYEES", column 'EMPLOYEE_ID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:e9653ed3-28c2-4819-9088-5608df8f101b
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2026-01-26 16:06:37.874 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeesController.Create (HRMS.API) in 11382.4426ms
2026-01-26 16:06:37.898 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.Create (HRMS.API)'
2026-01-26 16:06:37.901 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY SAME TABLE constraint "FK_EMPLOYEES_EMPLOYEES_MANAGER_ID". The conflict occurred in database "HRMS_Hospital", table "HR_PERSONNEL.EMPLOYEES", column 'EMPLOYEE_ID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:e9653ed3-28c2-4819-9088-5608df8f101b
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at HRMS.Application.Features.Personnel.Employees.Commands.CreateEmployee.CreateEmployeeCommandHandler.Handle(CreateEmployeeCommand request, CancellationToken cancellationToken) in G:\HRMS_Hospital\Backend\HRMS\HRMS.Application\Features\Personnel\Employees\Commands\CreateEmployee\CreateEmployeeCommandHandler.cs:line 58
   at HRMS.Application.Features.Personnel.Employees.Commands.CreateEmployee.CreateEmployeeCommandHandler.Handle(CreateEmployeeCommand request, CancellationToken cancellationToken) in G:\HRMS_Hospital\Backend\HRMS\HRMS.Application\Features\Personnel\Employees\Commands\CreateEmployee\CreateEmployeeCommandHandler.cs:line 68
   at HRMS.API.Controllers.Personnel.EmployeesController.Create(CreateEmployeeDto dto) in G:\HRMS_Hospital\Backend\HRMS\HRMS.API\Controllers\Personnel\EmployeesController.cs:line 37
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2026-01-26 16:06:37.990 +03:00 [ERR] HTTP POST /api/Employees responded 500 in 11523.7493 ms
2026-01-26 16:06:37.994 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Employees - 500 null text/plain; charset=utf-8 11538.3766ms
2026-01-26 16:06:51.839 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Employees - null null
2026-01-26 16:06:51.846 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.GetAll (HRMS.API)'
2026-01-26 16:06:51.852 +03:00 [INF] Route matched with {action = "GetAll", controller = "Employees"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Application.DTOs.Core.PagedResult`1[HRMS.Application.DTOs.Personnel.EmployeeListDto]]] GetAll(HRMS.Application.Features.Personnel.Employees.Queries.GetAllEmployees.GetAllEmployeesQuery) on controller HRMS.API.Controllers.Personnel.EmployeesController (HRMS.API).
2026-01-26 16:06:51.973 +03:00 [INF] Executed DbCommand (63ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
WHERE [e].[IS_DELETED] = CAST(0 AS tinyint)
2026-01-26 16:06:52.085 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [e0].[EMPLOYEE_ID], [e0].[EMPLOYEE_NUMBER], [e0].[FIRST_NAME_AR], [e0].[SECOND_NAME_AR], [e0].[LAST_NAME_AR], [e0].[FULL_NAME_EN], [d].[DEPT_NAME_AR], [j].[JOB_TITLE_AR], [e0].[MOBILE], [e0].[HIRE_DATE], ~CAST([e0].[IS_DELETED] ^ CAST(0 AS tinyint) AS bit)
FROM (
    SELECT [e].[EMPLOYEE_ID], [e].[CREATED_AT], [e].[DEPARTMENT_ID], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[MOBILE], [e].[SECOND_NAME_AR]
    FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
    WHERE [e].[IS_DELETED] = CAST(0 AS tinyint)
    ORDER BY [e].[CREATED_AT] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [e0]
INNER JOIN [HR_CORE].[DEPARTMENTS] AS [d] ON [e0].[DEPARTMENT_ID] = [d].[DEPT_ID]
INNER JOIN [HR_CORE].[JOBS] AS [j] ON [e0].[JOB_ID] = [j].[JOB_ID]
ORDER BY [e0].[CREATED_AT] DESC
2026-01-26 16:06:52.096 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Application.DTOs.Core.PagedResult`1[[HRMS.Application.DTOs.Personnel.EmployeeListDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-26 16:06:52.103 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeesController.GetAll (HRMS.API) in 243.1984ms
2026-01-26 16:06:52.109 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.GetAll (HRMS.API)'
2026-01-26 16:06:52.111 +03:00 [INF] HTTP GET /api/Employees responded 200 in 265.4376 ms
2026-01-26 16:06:52.114 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Employees - 200 null application/json; charset=utf-8 275.806ms
2026-01-26 16:07:46.223 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Employees - application/json 773
2026-01-26 16:07:46.238 +03:00 [INF] CORS policy execution successful.
2026-01-26 16:07:46.239 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.Create (HRMS.API)'
2026-01-26 16:07:46.241 +03:00 [INF] Route matched with {action = "Create", controller = "Employees"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] Create(HRMS.Application.DTOs.Personnel.CreateEmployeeDto) on controller HRMS.API.Controllers.Personnel.EmployeesController (HRMS.API).
2026-01-26 16:07:46.249 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__ToString_0_startswith='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
WHERE [e].[EMPLOYEE_NUMBER] LIKE @__ToString_0_startswith ESCAPE N'\'
ORDER BY [e].[EMPLOYEE_NUMBER] DESC
2026-01-26 16:07:46.256 +03:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2026-01-26 16:07:46.260 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?' (Size = 100), @p5='?' (Size = 20), @p6='?' (Size = 50), @p7='?' (Size = 200), @p8='?' (Size = 1), @p9='?' (DbType = DateTime2), @p10='?' (Size = 1) (DbType = Byte), @p11='?' (DbType = Int32), @p12='?' (Size = 50), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (DbType = Int32), @p16='?' (Size = 20), @p17='?' (Size = 20), @p18='?' (Size = 20), @p19='?' (DbType = Int32), @p20='?' (Size = 50), @p21='?' (Size = 100), @p22='?' (Size = 50), @p23='?' (DbType = DateTime2), @p24='?' (Size = 50), @p25='?' (Size = 450), @p26='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_PERSONNEL].[EMPLOYEES] ([BIRTH_DATE], [CREATED_AT], [CREATED_BY], [DEPARTMENT_ID], [EMAIL], [EMPLOYEE_NUMBER], [FIRST_NAME_AR], [FULL_NAME_EN], [GENDER], [HIRE_DATE], [IS_DELETED], [JOB_ID], [LAST_NAME_AR], [LICENSE_EXPIRY_DATE], [LICENSE_NUMBER], [MANAGER_ID], [MARITAL_STATUS], [MOBILE], [NATIONAL_ID], [NATIONALITY_ID], [SECOND_NAME_AR], [SPECIALTY], [THIRD_NAME_AR], [UPDATED_AT], [UPDATED_BY], [USER_ID], [VERSION_NO])
OUTPUT INSERTED.[EMPLOYEE_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26);
2026-01-26 16:07:46.351 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@p27='?' (DbType = Int32), @p28='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p29='?' (DbType = DateTime2), @p30='?' (Size = 50), @p31='?' (DbType = Int32), @p32='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p33='?' (Size = 30), @p34='?' (Size = 1) (DbType = Byte), @p35='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p36='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p37='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p38='?' (DbType = DateTime2), @p39='?' (Size = 50), @p40='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_COMPENSATIONS] ([BANK_ID], [BASIC_SALARY], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [HOUSING_ALLOWANCE], [IBAN_NUMBER], [IS_DELETED], [MEDICAL_ALLOWANCE], [OTHER_ALLOWANCES], [TRANSPORT_ALLOWANCE], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[COMPENSATION_ID]
VALUES (@p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40);
2026-01-26 16:07:46.396 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'System.Int32'.
2026-01-26 16:07:46.428 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeesController.Create (HRMS.API) in 183.2561ms
2026-01-26 16:07:46.430 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.Create (HRMS.API)'
2026-01-26 16:07:46.433 +03:00 [INF] HTTP POST /api/Employees responded 201 in 195.3697 ms
2026-01-26 16:07:46.436 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Employees - 201 null application/json; charset=utf-8 213.2002ms
2026-01-26 16:12:00.279 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Employees - null null
2026-01-26 16:12:00.287 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.GetAll (HRMS.API)'
2026-01-26 16:12:00.291 +03:00 [INF] Route matched with {action = "GetAll", controller = "Employees"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Application.DTOs.Core.PagedResult`1[HRMS.Application.DTOs.Personnel.EmployeeListDto]]] GetAll(HRMS.Application.Features.Personnel.Employees.Queries.GetAllEmployees.GetAllEmployeesQuery) on controller HRMS.API.Controllers.Personnel.EmployeesController (HRMS.API).
2026-01-26 16:12:00.303 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
WHERE [e].[IS_DELETED] = CAST(0 AS tinyint)
2026-01-26 16:12:00.332 +03:00 [INF] Executed DbCommand (23ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [e0].[EMPLOYEE_ID], [e0].[EMPLOYEE_NUMBER], [e0].[FIRST_NAME_AR], [e0].[SECOND_NAME_AR], [e0].[LAST_NAME_AR], [e0].[FULL_NAME_EN], [d].[DEPT_NAME_AR], [j].[JOB_TITLE_AR], [e0].[MOBILE], [e0].[HIRE_DATE], ~CAST([e0].[IS_DELETED] ^ CAST(0 AS tinyint) AS bit)
FROM (
    SELECT [e].[EMPLOYEE_ID], [e].[CREATED_AT], [e].[DEPARTMENT_ID], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[MOBILE], [e].[SECOND_NAME_AR]
    FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
    WHERE [e].[IS_DELETED] = CAST(0 AS tinyint)
    ORDER BY [e].[CREATED_AT] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [e0]
INNER JOIN [HR_CORE].[DEPARTMENTS] AS [d] ON [e0].[DEPARTMENT_ID] = [d].[DEPT_ID]
INNER JOIN [HR_CORE].[JOBS] AS [j] ON [e0].[JOB_ID] = [j].[JOB_ID]
ORDER BY [e0].[CREATED_AT] DESC
2026-01-26 16:12:00.342 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Application.DTOs.Core.PagedResult`1[[HRMS.Application.DTOs.Personnel.EmployeeListDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-26 16:12:00.350 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeesController.GetAll (HRMS.API) in 55.1808ms
2026-01-26 16:12:00.352 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.GetAll (HRMS.API)'
2026-01-26 16:12:00.355 +03:00 [INF] HTTP GET /api/Employees responded 200 in 67.8829 ms
2026-01-26 16:12:00.358 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Employees - 200 null application/json; charset=utf-8 84.2868ms
2026-01-26 16:13:00.542 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/DocumentTypes - null null
2026-01-26 16:13:00.556 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Core.DocumentTypesController.GetAll (HRMS.API)'
2026-01-26 16:13:00.583 +03:00 [INF] Route matched with {action = "GetAll", controller = "DocumentTypes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(HRMS.Application.Features.Core.DocumentTypes.Queries.GetAllDocumentTypes.GetAllDocumentTypesQuery) on controller HRMS.API.Controllers.Core.DocumentTypesController (HRMS.API).
2026-01-26 16:13:00.635 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [HR_CORE].[DOCUMENT_TYPES] AS [d]
WHERE [d].[IS_DELETED] = CAST(0 AS tinyint)
2026-01-26 16:13:00.660 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DOCUMENT_TYPE_ID] AS [DocumentTypeId], [d].[DOCUMENT_TYPE_NAME_AR] AS [DocumentTypeNameAr], [d].[DOCUMENT_TYPE_NAME_EN] AS [DocumentTypeNameEn], [d].[IS_REQUIRED] AS [IsRequired], [d].[HAS_EXPIRY] AS [HasExpiry]
FROM [HR_CORE].[DOCUMENT_TYPES] AS [d]
WHERE [d].[IS_DELETED] = CAST(0 AS tinyint)
ORDER BY [d].[DOCUMENT_TYPE_NAME_AR]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2026-01-26 16:13:00.670 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[HRMS.Application.DTOs.Core.PagedResult`1[[HRMS.Application.DTOs.Core.DocumentTypeListDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-26 16:13:00.680 +03:00 [INF] Executed action HRMS.API.Controllers.Core.DocumentTypesController.GetAll (HRMS.API) in 73.3614ms
2026-01-26 16:13:00.717 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Core.DocumentTypesController.GetAll (HRMS.API)'
2026-01-26 16:13:00.718 +03:00 [INF] HTTP GET /api/DocumentTypes responded 200 in 162.5030 ms
2026-01-26 16:13:00.721 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/DocumentTypes - 200 null application/json; charset=utf-8 179.2408ms
2026-01-26 16:13:44.803 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Employees/7/documents - multipart/form-data; boundary=----WebKitFormBoundaryYRzmmInb2zw61kEK 200463
2026-01-26 16:13:44.821 +03:00 [INF] CORS policy execution successful.
2026-01-26 16:13:44.823 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.UploadDocument (HRMS.API)'
2026-01-26 16:13:44.832 +03:00 [INF] Route matched with {action = "UploadDocument", controller = "Employees"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] UploadDocument(Int32, HRMS.Application.Features.Personnel.Employees.Commands.UploadEmployeeDocument.UploadEmployeeDocumentCommand) on controller HRMS.API.Controllers.Personnel.EmployeesController (HRMS.API).
2026-01-26 16:13:44.967 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__p_0
2026-01-26 16:14:07.442 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeesController.UploadDocument (HRMS.API) in 22604.8158ms
2026-01-26 16:14:07.507 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.UploadDocument (HRMS.API)'
2026-01-26 16:14:07.510 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentNullException: Value cannot be null. (Parameter 'path1')
   at System.ArgumentNullException.Throw(String paramName)
   at System.IO.Path.Combine(String path1, String path2)
   at HRMS.Infrastructure.Services.FileService.UploadFileAsync(IFormFile file, String folderName) in G:\HRMS_Hospital\Backend\HRMS\HRMS.Infrastructure\Services\FileService.cs:line 22
   at HRMS.Application.Features.Personnel.Employees.Commands.UploadEmployeeDocument.UploadEmployeeDocumentCommandHandler.Handle(UploadEmployeeDocumentCommand request, CancellationToken cancellationToken) in G:\HRMS_Hospital\Backend\HRMS\HRMS.Application\Features\Personnel\Employees\Commands\UploadEmployeeDocument\UploadEmployeeDocumentCommandHandler.cs:line 28
   at HRMS.API.Controllers.Personnel.EmployeesController.UploadDocument(Int32 id, UploadEmployeeDocumentCommand command) in G:\HRMS_Hospital\Backend\HRMS\HRMS.API\Controllers\Personnel\EmployeesController.cs:line 46
   at lambda_method882(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2026-01-26 16:14:07.562 +03:00 [ERR] HTTP POST /api/Employees/7/documents responded 500 in 22740.8670 ms
2026-01-26 16:14:07.571 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Employees/7/documents - 500 null text/plain; charset=utf-8 22767.4797ms
2026-01-26 16:14:48.042 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Employees/7/documents - multipart/form-data; boundary=----WebKitFormBoundaryzJPhAFYH6DEQawPm 200463
2026-01-26 16:14:48.058 +03:00 [INF] CORS policy execution successful.
2026-01-26 16:14:48.060 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.UploadDocument (HRMS.API)'
2026-01-26 16:14:48.095 +03:00 [INF] Route matched with {action = "UploadDocument", controller = "Employees"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] UploadDocument(Int32, HRMS.Application.Features.Personnel.Employees.Commands.UploadEmployeeDocument.UploadEmployeeDocumentCommand) on controller HRMS.API.Controllers.Personnel.EmployeesController (HRMS.API).
2026-01-26 16:14:48.242 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__p_0
2026-01-26 16:16:26.749 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeesController.UploadDocument (HRMS.API) in 98650.7269ms
2026-01-26 16:16:26.752 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.UploadDocument (HRMS.API)'
2026-01-26 16:16:26.755 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentNullException: Value cannot be null. (Parameter 'path1')
   at System.ArgumentNullException.Throw(String paramName)
   at System.IO.Path.Combine(String path1, String path2)
   at HRMS.Infrastructure.Services.FileService.UploadFileAsync(IFormFile file, String folderName) in G:\HRMS_Hospital\Backend\HRMS\HRMS.Infrastructure\Services\FileService.cs:line 22
   at HRMS.Application.Features.Personnel.Employees.Commands.UploadEmployeeDocument.UploadEmployeeDocumentCommandHandler.Handle(UploadEmployeeDocumentCommand request, CancellationToken cancellationToken) in G:\HRMS_Hospital\Backend\HRMS\HRMS.Application\Features\Personnel\Employees\Commands\UploadEmployeeDocument\UploadEmployeeDocumentCommandHandler.cs:line 28
   at HRMS.API.Controllers.Personnel.EmployeesController.UploadDocument(Int32 id, UploadEmployeeDocumentCommand command) in G:\HRMS_Hospital\Backend\HRMS\HRMS.API\Controllers\Personnel\EmployeesController.cs:line 46
   at lambda_method882(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2026-01-26 16:16:26.799 +03:00 [ERR] HTTP POST /api/Employees/7/documents responded 500 in 98741.2512 ms
2026-01-26 16:16:26.807 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Employees/7/documents - 500 null text/plain; charset=utf-8 98764.9548ms
2026-01-26 16:19:17.965 +03:00 [INF] üöÄ Starting HRMS Hospital API...
2026-01-26 16:19:23.279 +03:00 [INF] ‚úÖ HRMS Hospital API started successfully
2026-01-26 16:19:23.376 +03:00 [INF] User profile is available. Using 'C:\Users\MT\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-26 16:19:24.307 +03:00 [INF] Now listening on: https://localhost:5001
2026-01-26 16:19:24.511 +03:00 [INF] Now listening on: http://localhost:5000
2026-01-26 16:19:24.957 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-26 16:19:25.260 +03:00 [INF] Hosting environment: Development
2026-01-26 16:19:25.391 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - null null
2026-01-26 16:19:25.509 +03:00 [INF] Content root path: G:\HRMS_Hospital\Backend\HRMS\HRMS.API
2026-01-26 16:19:30.851 +03:00 [INF] HTTP GET /swagger/index.html responded 200 in 3920.1019 ms
2026-01-26 16:19:30.861 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - 200 null text/html;charset=utf-8 5480.9735ms
2026-01-26 16:19:30.916 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - null null
2026-01-26 16:19:30.963 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 46.5926ms
2026-01-26 16:19:31.820 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_vs/browserLink - null null
2026-01-26 16:19:32.041 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_vs/browserLink - 200 null text/javascript; charset=UTF-8 220.591ms
2026-01-26 16:19:33.905 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - null null
2026-01-26 16:19:34.107 +03:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 195.3620 ms
2026-01-26 16:19:34.110 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 205.0246ms
2026-01-26 16:20:19.503 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Employees/1/documents - multipart/form-data; boundary=----WebKitFormBoundarytuqpCQ3DybOIqTTn 200463
2026-01-26 16:20:19.601 +03:00 [INF] CORS policy execution successful.
2026-01-26 16:20:19.795 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.UploadDocument (HRMS.API)'
2026-01-26 16:20:19.849 +03:00 [INF] Route matched with {action = "UploadDocument", controller = "Employees"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] UploadDocument(Int32, HRMS.Application.Features.Personnel.Employees.Commands.UploadEmployeeDocument.UploadEmployeeDocumentCommand) on controller HRMS.API.Controllers.Personnel.EmployeesController (HRMS.API).
2026-01-26 16:20:19.961 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2026-01-26 16:20:19.977 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeesController.UploadDocument (HRMS.API) in 117.013ms
2026-01-26 16:20:19.980 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.UploadDocument (HRMS.API)'
2026-01-26 16:20:19.983 +03:00 [INF] HTTP POST /api/Employees/1/documents responded 400 in 389.7828 ms
2026-01-26 16:20:19.992 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Employees/1/documents - 400 null text/plain; charset=utf-8 489.4688ms
2026-01-26 16:20:41.148 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Employees - null null
2026-01-26 16:20:41.361 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.GetAll (HRMS.API)'
2026-01-26 16:20:41.369 +03:00 [INF] Route matched with {action = "GetAll", controller = "Employees"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Application.DTOs.Core.PagedResult`1[HRMS.Application.DTOs.Personnel.EmployeeListDto]]] GetAll(HRMS.Application.Features.Personnel.Employees.Queries.GetAllEmployees.GetAllEmployeesQuery) on controller HRMS.API.Controllers.Personnel.EmployeesController (HRMS.API).
2026-01-26 16:20:43.779 +03:00 [WRN] No store type was specified for the decimal property 'HoursCount' on entity type 'ShiftType'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-01-26 16:20:43.783 +03:00 [WRN] No store type was specified for the decimal property 'MaxSalary' on entity type 'JobGrade'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-01-26 16:20:43.786 +03:00 [WRN] No store type was specified for the decimal property 'MinSalary' on entity type 'JobGrade'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-01-26 16:20:46.345 +03:00 [INF] Executed DbCommand (70ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
WHERE [e].[IS_DELETED] = CAST(0 AS tinyint)
2026-01-26 16:20:46.859 +03:00 [INF] Executed DbCommand (258ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [e0].[EMPLOYEE_ID], [e0].[EMPLOYEE_NUMBER], [e0].[FIRST_NAME_AR], [e0].[SECOND_NAME_AR], [e0].[LAST_NAME_AR], [e0].[FULL_NAME_EN], [d].[DEPT_NAME_AR], [j].[JOB_TITLE_AR], [e0].[MOBILE], [e0].[HIRE_DATE], ~CAST([e0].[IS_DELETED] ^ CAST(0 AS tinyint) AS bit)
FROM (
    SELECT [e].[EMPLOYEE_ID], [e].[CREATED_AT], [e].[DEPARTMENT_ID], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[MOBILE], [e].[SECOND_NAME_AR]
    FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
    WHERE [e].[IS_DELETED] = CAST(0 AS tinyint)
    ORDER BY [e].[CREATED_AT] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [e0]
INNER JOIN [HR_CORE].[DEPARTMENTS] AS [d] ON [e0].[DEPARTMENT_ID] = [d].[DEPT_ID]
INNER JOIN [HR_CORE].[JOBS] AS [j] ON [e0].[JOB_ID] = [j].[JOB_ID]
ORDER BY [e0].[CREATED_AT] DESC
2026-01-26 16:20:46.873 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Application.DTOs.Core.PagedResult`1[[HRMS.Application.DTOs.Personnel.EmployeeListDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-26 16:20:46.888 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeesController.GetAll (HRMS.API) in 5515.4715ms
2026-01-26 16:20:46.896 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.GetAll (HRMS.API)'
2026-01-26 16:20:46.898 +03:00 [INF] HTTP GET /api/Employees responded 200 in 5537.2611 ms
2026-01-26 16:20:46.926 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Employees - 200 null application/json; charset=utf-8 5778.3869ms
2026-01-26 16:21:05.561 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Employees/7/documents - multipart/form-data; boundary=----WebKitFormBoundary1lzOsOXART9zCAnB 558
2026-01-26 16:21:05.577 +03:00 [INF] CORS policy execution successful.
2026-01-26 16:21:05.580 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.UploadDocument (HRMS.API)'
2026-01-26 16:21:05.582 +03:00 [INF] Route matched with {action = "UploadDocument", controller = "Employees"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] UploadDocument(Int32, HRMS.Application.Features.Personnel.Employees.Commands.UploadEmployeeDocument.UploadEmployeeDocumentCommand) on controller HRMS.API.Controllers.Personnel.EmployeesController (HRMS.API).
2026-01-26 16:21:05.611 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2026-01-26 16:21:05.732 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeesController.UploadDocument (HRMS.API) in 132.5457ms
2026-01-26 16:21:05.737 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.UploadDocument (HRMS.API)'
2026-01-26 16:21:05.738 +03:00 [INF] HTTP POST /api/Employees/7/documents responded 400 in 161.6152 ms
2026-01-26 16:21:05.740 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Employees/7/documents - 400 null application/problem+json; charset=utf-8 178.9907ms
2026-01-26 16:21:24.040 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Employees/7/documents - multipart/form-data; boundary=----WebKitFormBoundary4RkiWZgVFSrljNI4 173654
2026-01-26 16:21:24.062 +03:00 [INF] CORS policy execution successful.
2026-01-26 16:21:24.064 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.UploadDocument (HRMS.API)'
2026-01-26 16:21:24.070 +03:00 [INF] Route matched with {action = "UploadDocument", controller = "Employees"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] UploadDocument(Int32, HRMS.Application.Features.Personnel.Employees.Commands.UploadEmployeeDocument.UploadEmployeeDocumentCommand) on controller HRMS.API.Controllers.Personnel.EmployeesController (HRMS.API).
2026-01-26 16:21:24.179 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__p_0
2026-01-26 16:21:24.952 +03:00 [INF] Executed DbCommand (55ms) [Parameters=[@p0='?' (Size = 100), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (Size = 50), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p7='?' (Size = 255), @p8='?' (Size = 500), @p9='?' (DbType = Int64), @p10='?' (Size = 1) (DbType = Byte), @p11='?' (DbType = DateTime2), @p12='?' (DbType = DateTime2), @p13='?' (Size = 50), @p14='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_DOCUMENTS] ([CONTENT_TYPE], [CREATED_AT], [CREATED_BY], [DOCUMENT_NUMBER], [DOCUMENT_TYPE_ID], [EMPLOYEE_ID], [EXPIRY_DATE], [FILE_NAME], [FILE_PATH], [FILE_SIZE], [IS_DELETED], [ISSUE_DATE], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[DOCUMENT_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2026-01-26 16:21:25.041 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Int32'.
2026-01-26 16:21:25.047 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeesController.UploadDocument (HRMS.API) in 970.1289ms
2026-01-26 16:21:25.051 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.UploadDocument (HRMS.API)'
2026-01-26 16:21:25.053 +03:00 [INF] HTTP POST /api/Employees/7/documents responded 200 in 990.7978 ms
2026-01-26 16:21:25.059 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Employees/7/documents - 200 null application/json; charset=utf-8 1018.367ms
2026-01-26 16:21:56.230 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Employees/7/documents - multipart/form-data; boundary=----WebKitFormBoundaryAjbrBbidsV064RHr 213789
2026-01-26 16:21:56.257 +03:00 [INF] CORS policy execution successful.
2026-01-26 16:21:56.259 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.UploadDocument (HRMS.API)'
2026-01-26 16:21:56.261 +03:00 [INF] Route matched with {action = "UploadDocument", controller = "Employees"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] UploadDocument(Int32, HRMS.Application.Features.Personnel.Employees.Commands.UploadEmployeeDocument.UploadEmployeeDocumentCommand) on controller HRMS.API.Controllers.Personnel.EmployeesController (HRMS.API).
2026-01-26 16:21:56.401 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__p_0
2026-01-26 16:21:56.416 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 100), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (Size = 50), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p7='?' (Size = 255), @p8='?' (Size = 500), @p9='?' (DbType = Int64), @p10='?' (Size = 1) (DbType = Byte), @p11='?' (DbType = DateTime2), @p12='?' (DbType = DateTime2), @p13='?' (Size = 50), @p14='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_DOCUMENTS] ([CONTENT_TYPE], [CREATED_AT], [CREATED_BY], [DOCUMENT_NUMBER], [DOCUMENT_TYPE_ID], [EMPLOYEE_ID], [EXPIRY_DATE], [FILE_NAME], [FILE_PATH], [FILE_SIZE], [IS_DELETED], [ISSUE_DATE], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[DOCUMENT_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2026-01-26 16:21:56.423 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Int32'.
2026-01-26 16:21:56.425 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeesController.UploadDocument (HRMS.API) in 158.6797ms
2026-01-26 16:21:56.428 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.UploadDocument (HRMS.API)'
2026-01-26 16:21:56.429 +03:00 [INF] HTTP POST /api/Employees/7/documents responded 200 in 172.6377 ms
2026-01-26 16:21:56.433 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Employees/7/documents - 200 null application/json; charset=utf-8 203.4112ms
2026-01-26 16:22:14.808 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Employees - null null
2026-01-26 16:22:14.812 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.GetAll (HRMS.API)'
2026-01-26 16:22:14.814 +03:00 [INF] Route matched with {action = "GetAll", controller = "Employees"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Application.DTOs.Core.PagedResult`1[HRMS.Application.DTOs.Personnel.EmployeeListDto]]] GetAll(HRMS.Application.Features.Personnel.Employees.Queries.GetAllEmployees.GetAllEmployeesQuery) on controller HRMS.API.Controllers.Personnel.EmployeesController (HRMS.API).
2026-01-26 16:22:14.823 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
WHERE [e].[IS_DELETED] = CAST(0 AS tinyint)
2026-01-26 16:22:14.836 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [e0].[EMPLOYEE_ID], [e0].[EMPLOYEE_NUMBER], [e0].[FIRST_NAME_AR], [e0].[SECOND_NAME_AR], [e0].[LAST_NAME_AR], [e0].[FULL_NAME_EN], [d].[DEPT_NAME_AR], [j].[JOB_TITLE_AR], [e0].[MOBILE], [e0].[HIRE_DATE], ~CAST([e0].[IS_DELETED] ^ CAST(0 AS tinyint) AS bit)
FROM (
    SELECT [e].[EMPLOYEE_ID], [e].[CREATED_AT], [e].[DEPARTMENT_ID], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[MOBILE], [e].[SECOND_NAME_AR]
    FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
    WHERE [e].[IS_DELETED] = CAST(0 AS tinyint)
    ORDER BY [e].[CREATED_AT] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [e0]
INNER JOIN [HR_CORE].[DEPARTMENTS] AS [d] ON [e0].[DEPARTMENT_ID] = [d].[DEPT_ID]
INNER JOIN [HR_CORE].[JOBS] AS [j] ON [e0].[JOB_ID] = [j].[JOB_ID]
ORDER BY [e0].[CREATED_AT] DESC
2026-01-26 16:22:14.850 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Application.DTOs.Core.PagedResult`1[[HRMS.Application.DTOs.Personnel.EmployeeListDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-26 16:22:14.856 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeesController.GetAll (HRMS.API) in 38.5478ms
2026-01-26 16:22:14.859 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.GetAll (HRMS.API)'
2026-01-26 16:22:14.861 +03:00 [INF] HTTP GET /api/Employees responded 200 in 49.0562 ms
2026-01-26 16:22:14.864 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Employees - 200 null application/json; charset=utf-8 56.1199ms
2026-01-26 16:27:18.411 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:5001/api/Employees/7 - application/json 804
2026-01-26 16:27:18.415 +03:00 [INF] CORS policy execution successful.
2026-01-26 16:27:18.417 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.Update (HRMS.API)'
2026-01-26 16:27:18.429 +03:00 [INF] Route matched with {action = "Update", controller = "Employees"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Update(Int32, HRMS.Application.DTOs.Personnel.CreateEmployeeDto) on controller HRMS.API.Controllers.Personnel.EmployeesController (HRMS.API).
2026-01-26 16:27:18.636 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO], [e0].[COMPENSATION_ID], [e0].[BANK_ID], [e0].[BASIC_SALARY], [e0].[CREATED_AT], [e0].[CREATED_BY], [e0].[EMPLOYEE_ID], [e0].[HOUSING_ALLOWANCE], [e0].[IBAN_NUMBER], [e0].[IS_DELETED], [e0].[MEDICAL_ALLOWANCE], [e0].[OTHER_ALLOWANCES], [e0].[TRANSPORT_ALLOWANCE], [e0].[UPDATED_AT], [e0].[UPDATED_BY], [e0].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
LEFT JOIN [HR_PERSONNEL].[EMPLOYEE_COMPENSATIONS] AS [e0] ON [e].[EMPLOYEE_ID] = [e0].[EMPLOYEE_ID]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0
2026-01-26 16:27:18.751 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 50), @p2='?' (Size = 200), @p3='?' (DbType = DateTime2), @p4='?' (Size = 50), @p5='?' (Size = 50), @p6='?' (Size = 100), @p7='?' (Size = 50), @p8='?' (DbType = DateTime2), @p10='?' (DbType = Int32), @p12='?' (DbType = Int32), @p11='?' (DbType = DateTime2), @p13='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [HR_PERSONNEL].[EMPLOYEES] SET [DEPARTMENT_ID] = @p0, [FIRST_NAME_AR] = @p1, [FULL_NAME_EN] = @p2, [LICENSE_EXPIRY_DATE] = @p3, [LICENSE_NUMBER] = @p4, [SECOND_NAME_AR] = @p5, [SPECIALTY] = @p6, [THIRD_NAME_AR] = @p7, [UPDATED_AT] = @p8
OUTPUT 1
WHERE [EMPLOYEE_ID] = @p9 AND [VERSION_NO] = @p10;
UPDATE [HR_PERSONNEL].[EMPLOYEE_COMPENSATIONS] SET [UPDATED_AT] = @p11
OUTPUT 1
WHERE [COMPENSATION_ID] = @p12 AND [VERSION_NO] = @p13;
2026-01-26 16:27:18.815 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'HRMS.Infrastructure.Data.HRMSDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_EMPLOYEES_DEPARTMENTS_DEPARTMENT_ID". The conflict occurred in database "HRMS_Hospital", table "HR_CORE.DEPARTMENTS", column 'DEPT_ID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:334bdcfb-82a1-4f9c-8c68-d1b958d8a5c1
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_EMPLOYEES_DEPARTMENTS_DEPARTMENT_ID". The conflict occurred in database "HRMS_Hospital", table "HR_CORE.DEPARTMENTS", column 'DEPT_ID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:334bdcfb-82a1-4f9c-8c68-d1b958d8a5c1
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2026-01-26 16:27:26.089 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeesController.Update (HRMS.API) in 7643.2842ms
2026-01-26 16:27:26.093 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.Update (HRMS.API)'
2026-01-26 16:27:26.098 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_EMPLOYEES_DEPARTMENTS_DEPARTMENT_ID". The conflict occurred in database "HRMS_Hospital", table "HR_CORE.DEPARTMENTS", column 'DEPT_ID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:334bdcfb-82a1-4f9c-8c68-d1b958d8a5c1
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at HRMS.Application.Features.Personnel.Employees.Commands.UpdateEmployee.UpdateEmployeeCommandHandler.Handle(UpdateEmployeeCommand request, CancellationToken cancellationToken) in G:\HRMS_Hospital\Backend\HRMS\HRMS.Application\Features\Personnel\Employees\Commands\UpdateEmployee\UpdateEmployeeCommandHandler.cs:line 41
   at HRMS.API.Controllers.Personnel.EmployeesController.Update(Int32 id, CreateEmployeeDto dto) in G:\HRMS_Hospital\Backend\HRMS\HRMS.API\Controllers\Personnel\EmployeesController.cs:line 61
   at lambda_method738(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2026-01-26 16:27:26.179 +03:00 [ERR] HTTP PUT /api/Employees/7 responded 500 in 7764.6766 ms
2026-01-26 16:27:26.225 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:5001/api/Employees/7 - 500 null text/plain; charset=utf-8 7815.5289ms
2026-01-26 16:28:03.375 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Departments - null null
2026-01-26 16:28:03.384 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Core.DepartmentsController.GetAll (HRMS.API)'
2026-01-26 16:28:03.393 +03:00 [INF] Route matched with {action = "GetAll", controller = "Departments"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(HRMS.Application.Features.Core.Departments.Queries.GetAllDepartments.GetAllDepartmentsQuery) on controller HRMS.API.Controllers.Core.DepartmentsController (HRMS.API).
2026-01-26 16:28:03.429 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [HR_CORE].[DEPARTMENTS] AS [d]
WHERE [d].[IS_DELETED] = CAST(0 AS tinyint)
2026-01-26 16:28:03.490 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d1].[DEPT_ID] AS [DeptId], [d1].[DEPT_NAME_AR] AS [DeptNameAr], [d1].[DEPT_NAME_EN] AS [DeptNameEn], [d1].[PARENT_DEPT_ID] AS [ParentDeptId], [d1].[COST_CENTER_CODE] AS [CostCenterCode], [d1].[MANAGER_ID] AS [ManagerId], [d1].[IS_ACTIVE] AS [IsActive], [d0].[DEPT_NAME_AR] AS [ParentDeptNameAr]
FROM (
    SELECT [d].[DEPT_ID], [d].[COST_CENTER_CODE], [d].[DEPT_NAME_AR], [d].[DEPT_NAME_EN], [d].[IS_ACTIVE], [d].[MANAGER_ID], [d].[PARENT_DEPT_ID]
    FROM [HR_CORE].[DEPARTMENTS] AS [d]
    WHERE [d].[IS_DELETED] = CAST(0 AS tinyint)
    ORDER BY [d].[DEPT_NAME_AR]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d1]
LEFT JOIN [HR_CORE].[DEPARTMENTS] AS [d0] ON [d1].[PARENT_DEPT_ID] = [d0].[DEPT_ID]
ORDER BY [d1].[DEPT_NAME_AR]
2026-01-26 16:28:03.499 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[HRMS.Application.DTOs.Core.PagedResult`1[[HRMS.Application.DTOs.Core.DepartmentDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-26 16:28:03.515 +03:00 [INF] Executed action HRMS.API.Controllers.Core.DepartmentsController.GetAll (HRMS.API) in 112.6962ms
2026-01-26 16:28:03.526 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Core.DepartmentsController.GetAll (HRMS.API)'
2026-01-26 16:28:03.527 +03:00 [INF] HTTP GET /api/Departments responded 200 in 144.8569 ms
2026-01-26 16:28:03.530 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Departments - 200 null application/json; charset=utf-8 154.8419ms
2026-01-26 16:28:25.536 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:5001/api/Employees/7 - application/json 804
2026-01-26 16:28:25.541 +03:00 [INF] CORS policy execution successful.
2026-01-26 16:28:25.543 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.Update (HRMS.API)'
2026-01-26 16:28:25.545 +03:00 [INF] Route matched with {action = "Update", controller = "Employees"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Update(Int32, HRMS.Application.DTOs.Personnel.CreateEmployeeDto) on controller HRMS.API.Controllers.Personnel.EmployeesController (HRMS.API).
2026-01-26 16:28:25.553 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO], [e0].[COMPENSATION_ID], [e0].[BANK_ID], [e0].[BASIC_SALARY], [e0].[CREATED_AT], [e0].[CREATED_BY], [e0].[EMPLOYEE_ID], [e0].[HOUSING_ALLOWANCE], [e0].[IBAN_NUMBER], [e0].[IS_DELETED], [e0].[MEDICAL_ALLOWANCE], [e0].[OTHER_ALLOWANCES], [e0].[TRANSPORT_ALLOWANCE], [e0].[UPDATED_AT], [e0].[UPDATED_BY], [e0].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
LEFT JOIN [HR_PERSONNEL].[EMPLOYEE_COMPENSATIONS] AS [e0] ON [e].[EMPLOYEE_ID] = [e0].[EMPLOYEE_ID]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0
2026-01-26 16:28:25.602 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (Size = 50), @p1='?' (Size = 200), @p2='?' (DbType = DateTime2), @p3='?' (Size = 50), @p4='?' (Size = 50), @p5='?' (Size = 100), @p6='?' (Size = 50), @p7='?' (DbType = DateTime2), @p9='?' (DbType = Int32), @p11='?' (DbType = Int32), @p10='?' (DbType = DateTime2), @p12='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [HR_PERSONNEL].[EMPLOYEES] SET [FIRST_NAME_AR] = @p0, [FULL_NAME_EN] = @p1, [LICENSE_EXPIRY_DATE] = @p2, [LICENSE_NUMBER] = @p3, [SECOND_NAME_AR] = @p4, [SPECIALTY] = @p5, [THIRD_NAME_AR] = @p6, [UPDATED_AT] = @p7
OUTPUT 1
WHERE [EMPLOYEE_ID] = @p8 AND [VERSION_NO] = @p9;
UPDATE [HR_PERSONNEL].[EMPLOYEE_COMPENSATIONS] SET [UPDATED_AT] = @p10
OUTPUT 1
WHERE [COMPENSATION_ID] = @p11 AND [VERSION_NO] = @p12;
2026-01-26 16:28:25.624 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2026-01-26 16:28:25.626 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeesController.Update (HRMS.API) in 78.1422ms
2026-01-26 16:28:25.628 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.Update (HRMS.API)'
2026-01-26 16:28:25.630 +03:00 [INF] HTTP PUT /api/Employees/7 responded 204 in 88.8424 ms
2026-01-26 16:28:25.633 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:5001/api/Employees/7 - 204 null null 96.8808ms
2026-01-26 16:30:19.434 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Employees - null null
2026-01-26 16:30:19.476 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.GetAll (HRMS.API)'
2026-01-26 16:30:19.478 +03:00 [INF] Route matched with {action = "GetAll", controller = "Employees"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Application.DTOs.Core.PagedResult`1[HRMS.Application.DTOs.Personnel.EmployeeListDto]]] GetAll(HRMS.Application.Features.Personnel.Employees.Queries.GetAllEmployees.GetAllEmployeesQuery) on controller HRMS.API.Controllers.Personnel.EmployeesController (HRMS.API).
2026-01-26 16:30:19.491 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
WHERE [e].[IS_DELETED] = CAST(0 AS tinyint)
2026-01-26 16:30:19.516 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [e0].[EMPLOYEE_ID], [e0].[EMPLOYEE_NUMBER], [e0].[FIRST_NAME_AR], [e0].[SECOND_NAME_AR], [e0].[LAST_NAME_AR], [e0].[FULL_NAME_EN], [d].[DEPT_NAME_AR], [j].[JOB_TITLE_AR], [e0].[MOBILE], [e0].[HIRE_DATE], ~CAST([e0].[IS_DELETED] ^ CAST(0 AS tinyint) AS bit)
FROM (
    SELECT [e].[EMPLOYEE_ID], [e].[CREATED_AT], [e].[DEPARTMENT_ID], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[MOBILE], [e].[SECOND_NAME_AR]
    FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
    WHERE [e].[IS_DELETED] = CAST(0 AS tinyint)
    ORDER BY [e].[CREATED_AT] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [e0]
INNER JOIN [HR_CORE].[DEPARTMENTS] AS [d] ON [e0].[DEPARTMENT_ID] = [d].[DEPT_ID]
INNER JOIN [HR_CORE].[JOBS] AS [j] ON [e0].[JOB_ID] = [j].[JOB_ID]
ORDER BY [e0].[CREATED_AT] DESC
2026-01-26 16:30:19.522 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Application.DTOs.Core.PagedResult`1[[HRMS.Application.DTOs.Personnel.EmployeeListDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-26 16:30:19.527 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeesController.GetAll (HRMS.API) in 45.8199ms
2026-01-26 16:30:19.529 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.GetAll (HRMS.API)'
2026-01-26 16:30:19.531 +03:00 [INF] HTTP GET /api/Employees responded 200 in 54.9805 ms
2026-01-26 16:30:19.535 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Employees - 200 null application/json; charset=utf-8 100.5505ms
2026-01-26 16:34:26.221 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Employees/7 - null null
2026-01-26 16:34:26.227 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.GetProfile (HRMS.API)'
2026-01-26 16:34:26.236 +03:00 [INF] Route matched with {action = "GetProfile", controller = "Employees"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Application.DTOs.Personnel.EmployeeProfileDto]] GetProfile(Int32) on controller HRMS.API.Controllers.Personnel.EmployeesController (HRMS.API).
2026-01-26 16:34:26.441 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[EMPLOYEE_ID], [s].[BIRTH_DATE], [s].[CREATED_AT], [s].[CREATED_BY], [s].[DEPARTMENT_ID], [s].[EMAIL], [s].[EMPLOYEE_NUMBER], [s].[FIRST_NAME_AR], [s].[FULL_NAME_EN], [s].[GENDER], [s].[HIRE_DATE], [s].[IS_DELETED], [s].[JOB_ID], [s].[LAST_NAME_AR], [s].[LICENSE_EXPIRY_DATE], [s].[LICENSE_NUMBER], [s].[MANAGER_ID], [s].[MARITAL_STATUS], [s].[MOBILE], [s].[NATIONAL_ID], [s].[NATIONALITY_ID], [s].[SECOND_NAME_AR], [s].[SPECIALTY], [s].[THIRD_NAME_AR], [s].[UPDATED_AT], [s].[UPDATED_BY], [s].[USER_ID], [s].[VERSION_NO], [s].[DEPT_ID], [s].[BranchId], [s].[COST_CENTER_CODE], [s].[CREATED_AT0], [s].[CREATED_BY0], [s].[DEPT_NAME_AR], [s].[DEPT_NAME_EN], [s].[IS_ACTIVE], [s].[IS_DELETED0], [s].[MANAGER_ID0], [s].[PARENT_DEPT_ID], [s].[UPDATED_AT0], [s].[UPDATED_BY0], [s].[VERSION_NO0], [s].[JOB_ID0], [s].[CREATED_AT1], [s].[CREATED_BY1], [s].[DEFAULT_GRADE_ID], [s].[DepartmentDeptId], [s].[IS_DELETED1], [s].[IS_MEDICAL], [s].[JOB_TITLE_AR], [s].[JOB_TITLE_EN], [s].[UPDATED_AT1], [s].[UPDATED_BY1], [s].[VERSION_NO1], [s].[COMPENSATION_ID], [s].[BANK_ID], [s].[BASIC_SALARY], [s].[CREATED_AT2], [s].[CREATED_BY2], [s].[EMPLOYEE_ID0], [s].[HOUSING_ALLOWANCE], [s].[IBAN_NUMBER], [s].[IS_DELETED2], [s].[MEDICAL_ALLOWANCE], [s].[OTHER_ALLOWANCES], [s].[TRANSPORT_ALLOWANCE], [s].[UPDATED_AT2], [s].[UPDATED_BY2], [s].[VERSION_NO2], [s0].[DOCUMENT_ID], [s0].[CONTENT_TYPE], [s0].[CREATED_AT], [s0].[CREATED_BY], [s0].[DOCUMENT_NUMBER], [s0].[DOCUMENT_TYPE_ID], [s0].[EMPLOYEE_ID], [s0].[EXPIRY_DATE], [s0].[FILE_NAME], [s0].[FILE_PATH], [s0].[FILE_SIZE], [s0].[IS_DELETED], [s0].[ISSUE_DATE], [s0].[UPDATED_AT], [s0].[UPDATED_BY], [s0].[VERSION_NO], [s0].[DOCUMENT_TYPE_ID0], [s0].[ALLOWED_EXTENSIONS], [s0].[CREATED_AT0], [s0].[CREATED_BY0], [s0].[DEFAULT_EXPIRY_DAYS], [s0].[DESCRIPTION], [s0].[DOCUMENT_TYPE_NAME_AR], [s0].[DOCUMENT_TYPE_NAME_EN], [s0].[HAS_EXPIRY], [s0].[IS_DELETED0], [s0].[IS_REQUIRED], [s0].[MAX_FILE_SIZE_MB], [s0].[UPDATED_AT0], [s0].[UPDATED_BY0], [s0].[VERSION_NO0]
FROM (
    SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO], [d].[DEPT_ID], [d].[BranchId], [d].[COST_CENTER_CODE], [d].[CREATED_AT] AS [CREATED_AT0], [d].[CREATED_BY] AS [CREATED_BY0], [d].[DEPT_NAME_AR], [d].[DEPT_NAME_EN], [d].[IS_ACTIVE], [d].[IS_DELETED] AS [IS_DELETED0], [d].[MANAGER_ID] AS [MANAGER_ID0], [d].[PARENT_DEPT_ID], [d].[UPDATED_AT] AS [UPDATED_AT0], [d].[UPDATED_BY] AS [UPDATED_BY0], [d].[VERSION_NO] AS [VERSION_NO0], [j].[JOB_ID] AS [JOB_ID0], [j].[CREATED_AT] AS [CREATED_AT1], [j].[CREATED_BY] AS [CREATED_BY1], [j].[DEFAULT_GRADE_ID], [j].[DepartmentDeptId], [j].[IS_DELETED] AS [IS_DELETED1], [j].[IS_MEDICAL], [j].[JOB_TITLE_AR], [j].[JOB_TITLE_EN], [j].[UPDATED_AT] AS [UPDATED_AT1], [j].[UPDATED_BY] AS [UPDATED_BY1], [j].[VERSION_NO] AS [VERSION_NO1], [e0].[COMPENSATION_ID], [e0].[BANK_ID], [e0].[BASIC_SALARY], [e0].[CREATED_AT] AS [CREATED_AT2], [e0].[CREATED_BY] AS [CREATED_BY2], [e0].[EMPLOYEE_ID] AS [EMPLOYEE_ID0], [e0].[HOUSING_ALLOWANCE], [e0].[IBAN_NUMBER], [e0].[IS_DELETED] AS [IS_DELETED2], [e0].[MEDICAL_ALLOWANCE], [e0].[OTHER_ALLOWANCES], [e0].[TRANSPORT_ALLOWANCE], [e0].[UPDATED_AT] AS [UPDATED_AT2], [e0].[UPDATED_BY] AS [UPDATED_BY2], [e0].[VERSION_NO] AS [VERSION_NO2]
    FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
    INNER JOIN [HR_CORE].[DEPARTMENTS] AS [d] ON [e].[DEPARTMENT_ID] = [d].[DEPT_ID]
    INNER JOIN [HR_CORE].[JOBS] AS [j] ON [e].[JOB_ID] = [j].[JOB_ID]
    LEFT JOIN [HR_PERSONNEL].[EMPLOYEE_COMPENSATIONS] AS [e0] ON [e].[EMPLOYEE_ID] = [e0].[EMPLOYEE_ID]
    WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0 AND [e].[IS_DELETED] = CAST(0 AS tinyint)
) AS [s]
LEFT JOIN (
    SELECT [e1].[DOCUMENT_ID], [e1].[CONTENT_TYPE], [e1].[CREATED_AT], [e1].[CREATED_BY], [e1].[DOCUMENT_NUMBER], [e1].[DOCUMENT_TYPE_ID], [e1].[EMPLOYEE_ID], [e1].[EXPIRY_DATE], [e1].[FILE_NAME], [e1].[FILE_PATH], [e1].[FILE_SIZE], [e1].[IS_DELETED], [e1].[ISSUE_DATE], [e1].[UPDATED_AT], [e1].[UPDATED_BY], [e1].[VERSION_NO], [d0].[DOCUMENT_TYPE_ID] AS [DOCUMENT_TYPE_ID0], [d0].[ALLOWED_EXTENSIONS], [d0].[CREATED_AT] AS [CREATED_AT0], [d0].[CREATED_BY] AS [CREATED_BY0], [d0].[DEFAULT_EXPIRY_DAYS], [d0].[DESCRIPTION], [d0].[DOCUMENT_TYPE_NAME_AR], [d0].[DOCUMENT_TYPE_NAME_EN], [d0].[HAS_EXPIRY], [d0].[IS_DELETED] AS [IS_DELETED0], [d0].[IS_REQUIRED], [d0].[MAX_FILE_SIZE_MB], [d0].[UPDATED_AT] AS [UPDATED_AT0], [d0].[UPDATED_BY] AS [UPDATED_BY0], [d0].[VERSION_NO] AS [VERSION_NO0]
    FROM [HR_PERSONNEL].[EMPLOYEE_DOCUMENTS] AS [e1]
    INNER JOIN [HR_CORE].[DOCUMENT_TYPES] AS [d0] ON [e1].[DOCUMENT_TYPE_ID] = [d0].[DOCUMENT_TYPE_ID]
) AS [s0] ON [s].[EMPLOYEE_ID] = [s0].[EMPLOYEE_ID]
ORDER BY [s].[EMPLOYEE_ID], [s].[DEPT_ID], [s].[JOB_ID0], [s].[COMPENSATION_ID], [s0].[DOCUMENT_ID]
2026-01-26 16:34:26.603 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Application.DTOs.Personnel.EmployeeProfileDto'.
2026-01-26 16:34:26.628 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeesController.GetProfile (HRMS.API) in 388.8927ms
2026-01-26 16:34:26.657 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.GetProfile (HRMS.API)'
2026-01-26 16:34:26.659 +03:00 [INF] HTTP GET /api/Employees/7 responded 200 in 433.0046 ms
2026-01-26 16:34:26.663 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Employees/7 - 200 null application/json; charset=utf-8 441.3578ms
2026-01-26 16:37:04.186 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Employees?PageNumber=1&PageSize=3&SearchTerm=%D9%85%D8%AD%D9%85%D8%AF - null null
2026-01-26 16:37:04.194 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.GetAll (HRMS.API)'
2026-01-26 16:37:04.196 +03:00 [INF] Route matched with {action = "GetAll", controller = "Employees"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Application.DTOs.Core.PagedResult`1[HRMS.Application.DTOs.Personnel.EmployeeListDto]]] GetAll(HRMS.Application.Features.Personnel.Employees.Queries.GetAllEmployees.GetAllEmployeesQuery) on controller HRMS.API.Controllers.Personnel.EmployeesController (HRMS.API).
2026-01-26 16:37:04.263 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__term_0_contains='?' (Size = 50), @__term_0_contains_1='?' (Size = 200), @__term_0_contains_2='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
WHERE ([e].[FIRST_NAME_AR] LIKE @__term_0_contains ESCAPE N'\' OR [e].[LAST_NAME_AR] LIKE @__term_0_contains ESCAPE N'\' OR LOWER([e].[FULL_NAME_EN]) LIKE @__term_0_contains_1 ESCAPE N'\' OR [e].[EMPLOYEE_NUMBER] LIKE @__term_0_contains_2 ESCAPE N'\' OR [e].[MOBILE] LIKE @__term_0_contains_2 ESCAPE N'\') AND [e].[IS_DELETED] = CAST(0 AS tinyint)
2026-01-26 16:37:04.292 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__term_0_contains='?' (Size = 50), @__term_0_contains_1='?' (Size = 200), @__term_0_contains_2='?' (Size = 20), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [e0].[EMPLOYEE_ID], [e0].[EMPLOYEE_NUMBER], [e0].[FIRST_NAME_AR], [e0].[SECOND_NAME_AR], [e0].[LAST_NAME_AR], [e0].[FULL_NAME_EN], [d].[DEPT_NAME_AR], [j].[JOB_TITLE_AR], [e0].[MOBILE], [e0].[HIRE_DATE], ~CAST([e0].[IS_DELETED] ^ CAST(0 AS tinyint) AS bit)
FROM (
    SELECT [e].[EMPLOYEE_ID], [e].[CREATED_AT], [e].[DEPARTMENT_ID], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[MOBILE], [e].[SECOND_NAME_AR]
    FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
    WHERE ([e].[FIRST_NAME_AR] LIKE @__term_0_contains ESCAPE N'\' OR [e].[LAST_NAME_AR] LIKE @__term_0_contains ESCAPE N'\' OR LOWER([e].[FULL_NAME_EN]) LIKE @__term_0_contains_1 ESCAPE N'\' OR [e].[EMPLOYEE_NUMBER] LIKE @__term_0_contains_2 ESCAPE N'\' OR [e].[MOBILE] LIKE @__term_0_contains_2 ESCAPE N'\') AND [e].[IS_DELETED] = CAST(0 AS tinyint)
    ORDER BY [e].[CREATED_AT] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [e0]
INNER JOIN [HR_CORE].[DEPARTMENTS] AS [d] ON [e0].[DEPARTMENT_ID] = [d].[DEPT_ID]
INNER JOIN [HR_CORE].[JOBS] AS [j] ON [e0].[JOB_ID] = [j].[JOB_ID]
ORDER BY [e0].[CREATED_AT] DESC
2026-01-26 16:37:04.299 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Application.DTOs.Core.PagedResult`1[[HRMS.Application.DTOs.Personnel.EmployeeListDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-26 16:37:04.302 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeesController.GetAll (HRMS.API) in 88.7854ms
2026-01-26 16:37:04.305 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.GetAll (HRMS.API)'
2026-01-26 16:37:04.307 +03:00 [INF] HTTP GET /api/Employees responded 200 in 112.3866 ms
2026-01-26 16:37:04.313 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Employees?PageNumber=1&PageSize=3&SearchTerm=%D9%85%D8%AD%D9%85%D8%AF - 200 null application/json; charset=utf-8 132.3063ms
2026-01-26 16:37:13.096 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Employees?PageNumber=1&PageSize=3&SearchTerm=%D8%B4%D8%A7%D9%87%D8%B1 - null null
2026-01-26 16:37:13.100 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.GetAll (HRMS.API)'
2026-01-26 16:37:13.102 +03:00 [INF] Route matched with {action = "GetAll", controller = "Employees"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Application.DTOs.Core.PagedResult`1[HRMS.Application.DTOs.Personnel.EmployeeListDto]]] GetAll(HRMS.Application.Features.Personnel.Employees.Queries.GetAllEmployees.GetAllEmployeesQuery) on controller HRMS.API.Controllers.Personnel.EmployeesController (HRMS.API).
2026-01-26 16:37:13.119 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__term_0_contains='?' (Size = 50), @__term_0_contains_1='?' (Size = 200), @__term_0_contains_2='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
WHERE ([e].[FIRST_NAME_AR] LIKE @__term_0_contains ESCAPE N'\' OR [e].[LAST_NAME_AR] LIKE @__term_0_contains ESCAPE N'\' OR LOWER([e].[FULL_NAME_EN]) LIKE @__term_0_contains_1 ESCAPE N'\' OR [e].[EMPLOYEE_NUMBER] LIKE @__term_0_contains_2 ESCAPE N'\' OR [e].[MOBILE] LIKE @__term_0_contains_2 ESCAPE N'\') AND [e].[IS_DELETED] = CAST(0 AS tinyint)
2026-01-26 16:37:13.133 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__term_0_contains='?' (Size = 50), @__term_0_contains_1='?' (Size = 200), @__term_0_contains_2='?' (Size = 20), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [e0].[EMPLOYEE_ID], [e0].[EMPLOYEE_NUMBER], [e0].[FIRST_NAME_AR], [e0].[SECOND_NAME_AR], [e0].[LAST_NAME_AR], [e0].[FULL_NAME_EN], [d].[DEPT_NAME_AR], [j].[JOB_TITLE_AR], [e0].[MOBILE], [e0].[HIRE_DATE], ~CAST([e0].[IS_DELETED] ^ CAST(0 AS tinyint) AS bit)
FROM (
    SELECT [e].[EMPLOYEE_ID], [e].[CREATED_AT], [e].[DEPARTMENT_ID], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[MOBILE], [e].[SECOND_NAME_AR]
    FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
    WHERE ([e].[FIRST_NAME_AR] LIKE @__term_0_contains ESCAPE N'\' OR [e].[LAST_NAME_AR] LIKE @__term_0_contains ESCAPE N'\' OR LOWER([e].[FULL_NAME_EN]) LIKE @__term_0_contains_1 ESCAPE N'\' OR [e].[EMPLOYEE_NUMBER] LIKE @__term_0_contains_2 ESCAPE N'\' OR [e].[MOBILE] LIKE @__term_0_contains_2 ESCAPE N'\') AND [e].[IS_DELETED] = CAST(0 AS tinyint)
    ORDER BY [e].[CREATED_AT] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [e0]
INNER JOIN [HR_CORE].[DEPARTMENTS] AS [d] ON [e0].[DEPARTMENT_ID] = [d].[DEPT_ID]
INNER JOIN [HR_CORE].[JOBS] AS [j] ON [e0].[JOB_ID] = [j].[JOB_ID]
ORDER BY [e0].[CREATED_AT] DESC
2026-01-26 16:37:13.146 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Application.DTOs.Core.PagedResult`1[[HRMS.Application.DTOs.Personnel.EmployeeListDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-26 16:37:13.149 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeesController.GetAll (HRMS.API) in 42.2674ms
2026-01-26 16:37:13.151 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.GetAll (HRMS.API)'
2026-01-26 16:37:13.154 +03:00 [INF] HTTP GET /api/Employees responded 200 in 54.4173 ms
2026-01-26 16:37:13.158 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Employees?PageNumber=1&PageSize=3&SearchTerm=%D8%B4%D8%A7%D9%87%D8%B1 - 200 null application/json; charset=utf-8 61.6726ms
2026-01-26 17:34:51.463 +03:00 [INF] üöÄ Starting HRMS Hospital API...
2026-01-26 17:34:56.015 +03:00 [INF] ‚úÖ HRMS Hospital API started successfully
2026-01-26 17:34:56.135 +03:00 [INF] User profile is available. Using 'C:\Users\MT\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-26 17:34:56.845 +03:00 [INF] Now listening on: https://localhost:5001
2026-01-26 17:34:56.874 +03:00 [INF] Now listening on: http://localhost:5000
2026-01-26 17:34:57.040 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-26 17:34:57.227 +03:00 [INF] Hosting environment: Development
2026-01-26 17:34:57.499 +03:00 [INF] Content root path: G:\HRMS_Hospital\Backend\HRMS\HRMS.API
2026-01-26 17:34:58.665 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - null null
2026-01-26 17:35:02.778 +03:00 [INF] HTTP GET /swagger/index.html responded 200 in 3810.0929 ms
2026-01-26 17:35:02.820 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - null null
2026-01-26 17:35:02.820 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - 200 null text/html;charset=utf-8 4166.0352ms
2026-01-26 17:35:02.842 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 21.9867ms
2026-01-26 17:35:03.539 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_vs/browserLink - null null
2026-01-26 17:35:03.667 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_vs/browserLink - 200 null text/javascript; charset=UTF-8 129.1189ms
2026-01-26 17:35:05.086 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - null null
2026-01-26 17:35:05.596 +03:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 441.4900 ms
2026-01-26 17:35:05.704 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 618.4713ms
2026-01-26 17:39:04.297 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/employees/7/qualifications - application/json 242
2026-01-26 17:39:04.538 +03:00 [INF] CORS policy execution successful.
2026-01-26 17:39:04.552 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeeDetailsController.AddQualification (HRMS.API)'
2026-01-26 17:39:04.611 +03:00 [INF] Route matched with {action = "AddQualification", controller = "EmployeeDetails"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] AddQualification(Int32, HRMS.Application.DTOs.Personnel.EmployeeQualificationDto) on controller HRMS.API.Controllers.Personnel.EmployeeDetailsController (HRMS.API).
2026-01-26 17:39:08.839 +03:00 [WRN] No store type was specified for the decimal property 'HoursCount' on entity type 'ShiftType'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-01-26 17:39:08.842 +03:00 [WRN] No store type was specified for the decimal property 'MaxSalary' on entity type 'JobGrade'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-01-26 17:39:08.845 +03:00 [WRN] No store type was specified for the decimal property 'MinSalary' on entity type 'JobGrade'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-01-26 17:39:12.128 +03:00 [INF] Executed DbCommand (238ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [e1].[EMPLOYEE_ID], [e1].[BIRTH_DATE], [e1].[CREATED_AT], [e1].[CREATED_BY], [e1].[DEPARTMENT_ID], [e1].[EMAIL], [e1].[EMPLOYEE_NUMBER], [e1].[FIRST_NAME_AR], [e1].[FULL_NAME_EN], [e1].[GENDER], [e1].[HIRE_DATE], [e1].[IS_DELETED], [e1].[JOB_ID], [e1].[LAST_NAME_AR], [e1].[LICENSE_EXPIRY_DATE], [e1].[LICENSE_NUMBER], [e1].[MANAGER_ID], [e1].[MARITAL_STATUS], [e1].[MOBILE], [e1].[NATIONAL_ID], [e1].[NATIONALITY_ID], [e1].[SECOND_NAME_AR], [e1].[SPECIALTY], [e1].[THIRD_NAME_AR], [e1].[UPDATED_AT], [e1].[UPDATED_BY], [e1].[USER_ID], [e1].[VERSION_NO], [e0].[QUALIFICATION_ID], [e0].[ATTACHMENT_PATH], [e0].[COUNTRY_ID], [e0].[CREATED_AT], [e0].[CREATED_BY], [e0].[DEGREE_TYPE], [e0].[EMPLOYEE_ID], [e0].[GRADE], [e0].[GRADUATION_YEAR], [e0].[IS_DELETED], [e0].[MAJOR_AR], [e0].[UNIVERSITY_AR], [e0].[UPDATED_AT], [e0].[UPDATED_BY], [e0].[VERSION_NO]
FROM (
    SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO]
    FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
    WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0
) AS [e1]
LEFT JOIN [HR_PERSONNEL].[EMPLOYEE_QUALIFICATIONS] AS [e0] ON [e1].[EMPLOYEE_ID] = [e0].[EMPLOYEE_ID]
ORDER BY [e1].[EMPLOYEE_ID]
2026-01-26 17:39:12.886 +03:00 [ERR] Failed executing DbCommand (27ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 500), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (Size = 50), @p5='?' (Size = 50), @p6='?' (DbType = Int32), @p7='?' (Size = 20), @p8='?' (DbType = Int16), @p9='?' (Size = 1) (DbType = Byte), @p10='?' (Size = 100), @p11='?' (Size = 200), @p12='?' (DbType = DateTime2), @p13='?' (Size = 50), @p14='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_QUALIFICATIONS] ([QUALIFICATION_ID], [ATTACHMENT_PATH], [COUNTRY_ID], [CREATED_AT], [CREATED_BY], [DEGREE_TYPE], [EMPLOYEE_ID], [GRADE], [GRADUATION_YEAR], [IS_DELETED], [MAJOR_AR], [UNIVERSITY_AR], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2026-01-26 17:39:12.962 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'HRMS.Infrastructure.Data.HRMSDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'EMPLOYEE_QUALIFICATIONS' when IDENTITY_INSERT is set to OFF.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:03ff281f-f660-42f6-9c59-608c9c92d04d
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'EMPLOYEE_QUALIFICATIONS' when IDENTITY_INSERT is set to OFF.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:03ff281f-f660-42f6-9c59-608c9c92d04d
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2026-01-26 17:39:29.804 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeeDetailsController.AddQualification (HRMS.API) in 25184.9258ms
2026-01-26 17:39:29.810 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeeDetailsController.AddQualification (HRMS.API)'
2026-01-26 17:39:29.823 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'EMPLOYEE_QUALIFICATIONS' when IDENTITY_INSERT is set to OFF.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:03ff281f-f660-42f6-9c59-608c9c92d04d
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at HRMS.Application.Features.Personnel.EmployeeDetails.Commands.Qualifications.AddQualificationCommandHandler.Handle(AddQualificationCommand request, CancellationToken cancellationToken) in G:\HRMS_Hospital\Backend\HRMS\HRMS.Application\Features\Personnel\EmployeeDetails\Commands\Qualifications\AddQualificationCommand.cs:line 40
   at HRMS.API.Controllers.Personnel.EmployeeDetailsController.AddQualification(Int32 employeeId, EmployeeQualificationDto dto) in G:\HRMS_Hospital\Backend\HRMS\HRMS.API\Controllers\Personnel\EmployeeDetailsController.cs:line 39
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2026-01-26 17:39:29.899 +03:00 [ERR] HTTP POST /api/employees/7/qualifications responded 500 in 25365.5166 ms
2026-01-26 17:39:30.011 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/employees/7/qualifications - 500 null text/plain; charset=utf-8 25713.1024ms
2026-01-26 17:39:49.489 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/employees/7/qualifications - application/json 242
2026-01-26 17:39:49.497 +03:00 [INF] CORS policy execution successful.
2026-01-26 17:39:49.499 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeeDetailsController.AddQualification (HRMS.API)'
2026-01-26 17:39:49.502 +03:00 [INF] Route matched with {action = "AddQualification", controller = "EmployeeDetails"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] AddQualification(Int32, HRMS.Application.DTOs.Personnel.EmployeeQualificationDto) on controller HRMS.API.Controllers.Personnel.EmployeeDetailsController (HRMS.API).
2026-01-26 17:39:49.616 +03:00 [INF] Executed DbCommand (53ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [e1].[EMPLOYEE_ID], [e1].[BIRTH_DATE], [e1].[CREATED_AT], [e1].[CREATED_BY], [e1].[DEPARTMENT_ID], [e1].[EMAIL], [e1].[EMPLOYEE_NUMBER], [e1].[FIRST_NAME_AR], [e1].[FULL_NAME_EN], [e1].[GENDER], [e1].[HIRE_DATE], [e1].[IS_DELETED], [e1].[JOB_ID], [e1].[LAST_NAME_AR], [e1].[LICENSE_EXPIRY_DATE], [e1].[LICENSE_NUMBER], [e1].[MANAGER_ID], [e1].[MARITAL_STATUS], [e1].[MOBILE], [e1].[NATIONAL_ID], [e1].[NATIONALITY_ID], [e1].[SECOND_NAME_AR], [e1].[SPECIALTY], [e1].[THIRD_NAME_AR], [e1].[UPDATED_AT], [e1].[UPDATED_BY], [e1].[USER_ID], [e1].[VERSION_NO], [e0].[QUALIFICATION_ID], [e0].[ATTACHMENT_PATH], [e0].[COUNTRY_ID], [e0].[CREATED_AT], [e0].[CREATED_BY], [e0].[DEGREE_TYPE], [e0].[EMPLOYEE_ID], [e0].[GRADE], [e0].[GRADUATION_YEAR], [e0].[IS_DELETED], [e0].[MAJOR_AR], [e0].[UNIVERSITY_AR], [e0].[UPDATED_AT], [e0].[UPDATED_BY], [e0].[VERSION_NO]
FROM (
    SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO]
    FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
    WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0
) AS [e1]
LEFT JOIN [HR_PERSONNEL].[EMPLOYEE_QUALIFICATIONS] AS [e0] ON [e1].[EMPLOYEE_ID] = [e0].[EMPLOYEE_ID]
ORDER BY [e1].[EMPLOYEE_ID]
2026-01-26 17:39:49.659 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (Size = 500), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (Size = 50), @p4='?' (Size = 50), @p5='?' (DbType = Int32), @p6='?' (Size = 20), @p7='?' (DbType = Int16), @p8='?' (Size = 1) (DbType = Byte), @p9='?' (Size = 100), @p10='?' (Size = 200), @p11='?' (DbType = DateTime2), @p12='?' (Size = 50), @p13='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_QUALIFICATIONS] ([ATTACHMENT_PATH], [COUNTRY_ID], [CREATED_AT], [CREATED_BY], [DEGREE_TYPE], [EMPLOYEE_ID], [GRADE], [GRADUATION_YEAR], [IS_DELETED], [MAJOR_AR], [UNIVERSITY_AR], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[QUALIFICATION_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2026-01-26 17:39:49.714 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Int32'.
2026-01-26 17:39:49.719 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeeDetailsController.AddQualification (HRMS.API) in 213.3806ms
2026-01-26 17:39:49.722 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeeDetailsController.AddQualification (HRMS.API)'
2026-01-26 17:39:49.723 +03:00 [INF] HTTP POST /api/employees/7/qualifications responded 200 in 226.6467 ms
2026-01-26 17:39:49.725 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/employees/7/qualifications - 200 null application/json; charset=utf-8 236.3364ms
2026-01-26 17:40:09.932 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/employees/7/qualifications - null null
2026-01-26 17:40:09.943 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeeDetailsController.GetQualifications (HRMS.API)'
2026-01-26 17:40:09.962 +03:00 [INF] Route matched with {action = "GetQualifications", controller = "EmployeeDetails"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[HRMS.Application.DTOs.Personnel.EmployeeQualificationDto]]] GetQualifications(Int32) on controller HRMS.API.Controllers.Personnel.EmployeeDetailsController (HRMS.API).
2026-01-26 17:40:10.137 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[QUALIFICATION_ID] AS [QualificationId], [e].[DEGREE_TYPE] AS [DegreeType], [e].[MAJOR_AR] AS [MajorAr], [e].[UNIVERSITY_AR] AS [UniversityAr], [e].[COUNTRY_ID] AS [CountryId], [e].[GRADUATION_YEAR] AS [GraduationYear], [e].[GRADE] AS [Grade]
FROM [HR_PERSONNEL].[EMPLOYEE_QUALIFICATIONS] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0
2026-01-26 17:40:10.146 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HRMS.Application.DTOs.Personnel.EmployeeQualificationDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-26 17:40:10.156 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeeDetailsController.GetQualifications (HRMS.API) in 190.869ms
2026-01-26 17:40:10.159 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeeDetailsController.GetQualifications (HRMS.API)'
2026-01-26 17:40:10.161 +03:00 [INF] HTTP GET /api/employees/7/qualifications responded 200 in 218.8105 ms
2026-01-26 17:40:10.166 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/employees/7/qualifications - 200 null application/json; charset=utf-8 233.5982ms
2026-01-26 17:40:57.014 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/employees/7/experiences - application/json 536
2026-01-26 17:40:57.023 +03:00 [INF] CORS policy execution successful.
2026-01-26 17:40:57.024 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeeDetailsController.AddExperience (HRMS.API)'
2026-01-26 17:40:57.032 +03:00 [INF] Route matched with {action = "AddExperience", controller = "EmployeeDetails"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] AddExperience(Int32, HRMS.Application.DTOs.Personnel.EmployeeExperienceDto) on controller HRMS.API.Controllers.Personnel.EmployeeDetailsController (HRMS.API).
2026-01-26 17:40:57.089 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0
2026-01-26 17:40:57.171 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@p0='?' (Size = 200), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (Size = 1) (DbType = Byte), @p6='?' (Size = 1) (DbType = Byte), @p7='?' (Size = 100), @p8='?' (Size = 200), @p9='?' (Size = 500), @p10='?' (DbType = DateTime2), @p11='?' (DbType = DateTime2), @p12='?' (Size = 50), @p13='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_EXPERIENCES] ([COMPANY_NAME_AR], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [END_DATE], [IS_CURRENT], [IS_DELETED], [JOB_TITLE_AR], [REASON_FOR_LEAVING], [RESPONSIBILITIES], [START_DATE], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[EXPERIENCE_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2026-01-26 17:40:57.184 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Int32'.
2026-01-26 17:40:57.186 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeeDetailsController.AddExperience (HRMS.API) in 149.2985ms
2026-01-26 17:40:57.188 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeeDetailsController.AddExperience (HRMS.API)'
2026-01-26 17:40:57.190 +03:00 [INF] HTTP POST /api/employees/7/experiences responded 200 in 166.4481 ms
2026-01-26 17:40:57.192 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/employees/7/experiences - 200 null application/json; charset=utf-8 177.8689ms
2026-01-26 17:41:11.332 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/employees/7/experiences - null null
2026-01-26 17:41:11.336 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeeDetailsController.GetExperiences (HRMS.API)'
2026-01-26 17:41:11.344 +03:00 [INF] Route matched with {action = "GetExperiences", controller = "EmployeeDetails"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[HRMS.Application.DTOs.Personnel.EmployeeExperienceDto]]] GetExperiences(Int32) on controller HRMS.API.Controllers.Personnel.EmployeeDetailsController (HRMS.API).
2026-01-26 17:41:30.778 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeeDetailsController.GetExperiences (HRMS.API) in 19428.2077ms
2026-01-26 17:41:30.788 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeeDetailsController.GetExperiences (HRMS.API)'
2026-01-26 17:41:30.790 +03:00 [ERR] An unhandled exception has occurred while executing the request.
AutoMapper.AutoMapperMappingException: Unable to create a map expression from EmployeeExperience.IsCurrent (System.Byte) to Boolean.IsCurrent (System.Boolean)

Mapping types:
EmployeeExperience -> EmployeeExperienceDto
HRMS.Core.Entities.Personnel.EmployeeExperience -> HRMS.Application.DTOs.Personnel.EmployeeExperienceDto

Type Map configuration:
EmployeeExperience -> EmployeeExperienceDto
HRMS.Core.Entities.Personnel.EmployeeExperience -> HRMS.Application.DTOs.Personnel.EmployeeExperienceDto

Destination Member:
IsCurrent

   at System.Lazy`1.ViaFactory(LazyThreadSafetyMode mode)
   at System.Lazy`1.ExecutionAndPublication(LazyHelper executionAndPublication, Boolean useDefaultConstructor)
   at System.Lazy`1.CreateValue()
   at System.Lazy`1.get_Value()
   at HRMS.Application.Features.Personnel.EmployeeDetails.Queries.Experiences.GetEmployeeExperiencesQueryHandler.Handle(GetEmployeeExperiencesQuery request, CancellationToken cancellationToken) in G:\HRMS_Hospital\Backend\HRMS\HRMS.Application\Features\Personnel\EmployeeDetails\Queries\Experiences\GetEmployeeExperiencesQuery.cs:line 26
   at HRMS.API.Controllers.Personnel.EmployeeDetailsController.GetExperiences(Int32 employeeId) in G:\HRMS_Hospital\Backend\HRMS\HRMS.API\Controllers\Personnel\EmployeeDetailsController.cs:line 57
   at lambda_method941(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2026-01-26 17:41:30.819 +03:00 [ERR] HTTP GET /api/employees/7/experiences responded 500 in 19483.1640 ms
2026-01-26 17:41:30.827 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/employees/7/experiences - 500 null text/plain; charset=utf-8 19494.8947ms
2026-01-26 17:41:52.813 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/employees/7/experiences - null null
2026-01-26 17:41:52.866 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeeDetailsController.GetExperiences (HRMS.API)'
2026-01-26 17:41:52.868 +03:00 [INF] Route matched with {action = "GetExperiences", controller = "EmployeeDetails"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[HRMS.Application.DTOs.Personnel.EmployeeExperienceDto]]] GetExperiences(Int32) on controller HRMS.API.Controllers.Personnel.EmployeeDetailsController (HRMS.API).
2026-01-26 17:42:52.718 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeeDetailsController.GetExperiences (HRMS.API) in 59846.8997ms
2026-01-26 17:42:52.740 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeeDetailsController.GetExperiences (HRMS.API)'
2026-01-26 17:42:52.743 +03:00 [ERR] An unhandled exception has occurred while executing the request.
AutoMapper.AutoMapperMappingException: Unable to create a map expression from EmployeeExperience.IsCurrent (System.Byte) to Boolean.IsCurrent (System.Boolean)

Mapping types:
EmployeeExperience -> EmployeeExperienceDto
HRMS.Core.Entities.Personnel.EmployeeExperience -> HRMS.Application.DTOs.Personnel.EmployeeExperienceDto

Type Map configuration:
EmployeeExperience -> EmployeeExperienceDto
HRMS.Core.Entities.Personnel.EmployeeExperience -> HRMS.Application.DTOs.Personnel.EmployeeExperienceDto

Destination Member:
IsCurrent

   at System.Lazy`1.ViaFactory(LazyThreadSafetyMode mode)
--- End of stack trace from previous location ---
   at System.LazyHelper.ThrowException()
   at System.Lazy`1.CreateValue()
   at System.Lazy`1.get_Value()
   at HRMS.Application.Features.Personnel.EmployeeDetails.Queries.Experiences.GetEmployeeExperiencesQueryHandler.Handle(GetEmployeeExperiencesQuery request, CancellationToken cancellationToken)
   at HRMS.API.Controllers.Personnel.EmployeeDetailsController.GetExperiences(Int32 employeeId) in G:\HRMS_Hospital\Backend\HRMS\HRMS.API\Controllers\Personnel\EmployeeDetailsController.cs:line 57
   at lambda_method941(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2026-01-26 17:42:52.806 +03:00 [ERR] HTTP GET /api/employees/7/experiences responded 500 in 59939.7033 ms
2026-01-26 17:42:52.808 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/employees/7/experiences - 500 null text/plain; charset=utf-8 59994.5929ms
2026-01-26 17:42:54.397 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - null null
2026-01-26 17:42:54.526 +03:00 [INF] HTTP GET /swagger/index.html responded 200 in 2.2495 ms
2026-01-26 17:42:54.658 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_vs/browserLink - null null
2026-01-26 17:42:54.627 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - null null
2026-01-26 17:42:54.932 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - 200 null text/html;charset=utf-8 534.9958ms
2026-01-26 17:42:55.432 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_vs/browserLink - 200 null text/javascript; charset=UTF-8 773.7196ms
2026-01-26 17:42:55.452 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 825.0772ms
2026-01-26 17:42:56.034 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - null null
2026-01-26 17:42:56.988 +03:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 329.8039 ms
2026-01-26 17:42:57.006 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 972.4281ms
2026-01-26 17:43:15.047 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/employees/7/experiences - null null
2026-01-26 17:43:15.051 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeeDetailsController.GetExperiences (HRMS.API)'
2026-01-26 17:43:15.058 +03:00 [INF] Route matched with {action = "GetExperiences", controller = "EmployeeDetails"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[HRMS.Application.DTOs.Personnel.EmployeeExperienceDto]]] GetExperiences(Int32) on controller HRMS.API.Controllers.Personnel.EmployeeDetailsController (HRMS.API).
2026-01-26 17:43:27.223 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeeDetailsController.GetExperiences (HRMS.API) in 12140.0154ms
2026-01-26 17:43:27.233 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeeDetailsController.GetExperiences (HRMS.API)'
2026-01-26 17:43:27.237 +03:00 [ERR] An unhandled exception has occurred while executing the request.
AutoMapper.AutoMapperMappingException: Unable to create a map expression from EmployeeExperience.IsCurrent (System.Byte) to Boolean.IsCurrent (System.Boolean)

Mapping types:
EmployeeExperience -> EmployeeExperienceDto
HRMS.Core.Entities.Personnel.EmployeeExperience -> HRMS.Application.DTOs.Personnel.EmployeeExperienceDto

Type Map configuration:
EmployeeExperience -> EmployeeExperienceDto
HRMS.Core.Entities.Personnel.EmployeeExperience -> HRMS.Application.DTOs.Personnel.EmployeeExperienceDto

Destination Member:
IsCurrent

   at System.Lazy`1.ViaFactory(LazyThreadSafetyMode mode)
--- End of stack trace from previous location ---
   at System.LazyHelper.ThrowException()
   at System.Lazy`1.CreateValue()
   at System.Lazy`1.get_Value()
   at HRMS.Application.Features.Personnel.EmployeeDetails.Queries.Experiences.GetEmployeeExperiencesQueryHandler.Handle(GetEmployeeExperiencesQuery request, CancellationToken cancellationToken)
   at HRMS.API.Controllers.Personnel.EmployeeDetailsController.GetExperiences(Int32 employeeId) in G:\HRMS_Hospital\Backend\HRMS\HRMS.API\Controllers\Personnel\EmployeeDetailsController.cs:line 57
   at lambda_method949(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2026-01-26 17:43:27.265 +03:00 [ERR] HTTP GET /api/employees/7/experiences responded 500 in 12213.5819 ms
2026-01-26 17:43:27.268 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/employees/7/experiences - 500 null text/plain; charset=utf-8 12220.3313ms
2026-01-26 17:47:46.556 +03:00 [INF] üöÄ Starting HRMS Hospital API...
2026-01-26 17:47:50.431 +03:00 [INF] ‚úÖ HRMS Hospital API started successfully
2026-01-26 17:47:50.508 +03:00 [INF] User profile is available. Using 'C:\Users\MT\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-26 17:47:51.030 +03:00 [INF] Now listening on: https://localhost:5001
2026-01-26 17:47:51.034 +03:00 [INF] Now listening on: http://localhost:5000
2026-01-26 17:47:51.208 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-26 17:47:51.228 +03:00 [INF] Hosting environment: Development
2026-01-26 17:47:51.241 +03:00 [INF] Content root path: G:\HRMS_Hospital\Backend\HRMS\HRMS.API
2026-01-26 17:47:52.186 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - null null
2026-01-26 17:47:53.693 +03:00 [INF] HTTP GET /swagger/index.html responded 200 in 826.9809 ms
2026-01-26 17:47:54.660 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - null null
2026-01-26 17:47:54.662 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_vs/browserLink - null null
2026-01-26 17:47:54.735 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - 200 null text/html;charset=utf-8 2559.1218ms
2026-01-26 17:47:54.752 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 91.8883ms
2026-01-26 17:47:54.815 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_vs/browserLink - 200 null text/javascript; charset=UTF-8 153.4103ms
2026-01-26 17:47:57.562 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - null null
2026-01-26 17:47:57.856 +03:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 289.2430 ms
2026-01-26 17:47:57.861 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 298.2289ms
2026-01-26 17:48:56.228 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/employees/7/experiences - null null
2026-01-26 17:48:56.252 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeeDetailsController.GetExperiences (HRMS.API)'
2026-01-26 17:48:56.334 +03:00 [INF] Route matched with {action = "GetExperiences", controller = "EmployeeDetails"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[HRMS.Application.DTOs.Personnel.EmployeeExperienceDto]]] GetExperiences(Int32) on controller HRMS.API.Controllers.Personnel.EmployeeDetailsController (HRMS.API).
2026-01-26 17:48:59.307 +03:00 [WRN] No store type was specified for the decimal property 'HoursCount' on entity type 'ShiftType'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-01-26 17:48:59.310 +03:00 [WRN] No store type was specified for the decimal property 'MaxSalary' on entity type 'JobGrade'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-01-26 17:48:59.313 +03:00 [WRN] No store type was specified for the decimal property 'MinSalary' on entity type 'JobGrade'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-01-26 17:49:00.806 +03:00 [INF] Executed DbCommand (122ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[EXPERIENCE_ID] AS [ExperienceId], [e].[COMPANY_NAME_AR] AS [CompanyNameAr], [e].[JOB_TITLE_AR] AS [JobTitleAr], [e].[START_DATE] AS [StartDate], [e].[END_DATE] AS [EndDate], [e].[IS_CURRENT] AS [IsCurrent], [e].[RESPONSIBILITIES] AS [Responsibilities], [e].[REASON_FOR_LEAVING] AS [ReasonForLeaving]
FROM [HR_PERSONNEL].[EMPLOYEE_EXPERIENCES] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0
2026-01-26 17:49:00.895 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HRMS.Application.DTOs.Personnel.EmployeeExperienceDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-26 17:49:00.936 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeeDetailsController.GetExperiences (HRMS.API) in 4572.5805ms
2026-01-26 17:49:00.942 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeeDetailsController.GetExperiences (HRMS.API)'
2026-01-26 17:49:00.946 +03:00 [INF] HTTP GET /api/employees/7/experiences responded 200 in 4709.3051 ms
2026-01-26 17:49:00.977 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/employees/7/experiences - 200 null application/json; charset=utf-8 4748.1616ms
2026-01-26 17:49:44.977 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/employees/7/emergency-contacts - application/json 197
2026-01-26 17:49:45.005 +03:00 [INF] CORS policy execution successful.
2026-01-26 17:49:45.040 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeeDetailsController.AddEmergencyContact (HRMS.API)'
2026-01-26 17:49:45.184 +03:00 [INF] Route matched with {action = "AddEmergencyContact", controller = "EmployeeDetails"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] AddEmergencyContact(Int32, HRMS.Application.DTOs.Personnel.EmergencyContactDto) on controller HRMS.API.Controllers.Personnel.EmployeeDetailsController (HRMS.API).
2026-01-26 17:49:45.396 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0
2026-01-26 17:49:46.003 +03:00 [ERR] Failed executing DbCommand (13ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 50), @p4='?' (DbType = Int32), @p5='?' (Size = 1) (DbType = Byte), @p6='?' (Size = 1) (DbType = Byte), @p7='?' (Size = 20), @p8='?' (Size = 20), @p9='?' (Size = 50), @p10='?' (DbType = DateTime2), @p11='?' (Size = 50), @p12='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_PERSONNEL].[EMERGENCY_CONTACTS] ([CONTACT_ID], [CONTACT_NAME_AR], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [IS_DELETED], [IS_PRIMARY], [PHONE_PRIMARY], [PHONE_SECONDARY], [RELATIONSHIP], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2026-01-26 17:49:46.073 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'HRMS.Infrastructure.Data.HRMSDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'EMERGENCY_CONTACTS' when IDENTITY_INSERT is set to OFF.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:5bc45825-2ce9-4873-9a6e-0da65189b7d1
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'EMERGENCY_CONTACTS' when IDENTITY_INSERT is set to OFF.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:5bc45825-2ce9-4873-9a6e-0da65189b7d1
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2026-01-26 17:49:52.738 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeeDetailsController.AddEmergencyContact (HRMS.API) in 7550.0422ms
2026-01-26 17:49:52.743 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeeDetailsController.AddEmergencyContact (HRMS.API)'
2026-01-26 17:49:52.748 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'EMERGENCY_CONTACTS' when IDENTITY_INSERT is set to OFF.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:5bc45825-2ce9-4873-9a6e-0da65189b7d1
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at HRMS.Application.Features.Personnel.EmployeeDetails.Commands.EmergencyContacts.AddEmergencyContactCommandHandler.Handle(AddEmergencyContactCommand request, CancellationToken cancellationToken) in G:\HRMS_Hospital\Backend\HRMS\HRMS.Application\Features\Personnel\EmployeeDetails\Commands\EmergencyContacts\AddEmergencyContactCommand.cs:line 35
   at HRMS.API.Controllers.Personnel.EmployeeDetailsController.AddEmergencyContact(Int32 employeeId, EmergencyContactDto dto) in G:\HRMS_Hospital\Backend\HRMS\HRMS.API\Controllers\Personnel\EmployeeDetailsController.cs:line 91
   at lambda_method88(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2026-01-26 17:49:52.824 +03:00 [ERR] HTTP POST /api/employees/7/emergency-contacts responded 500 in 7827.0864 ms
2026-01-26 17:49:52.826 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/employees/7/emergency-contacts - 500 null text/plain; charset=utf-8 7849.1037ms
2026-01-26 17:50:00.010 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/employees/7/emergency-contacts - application/json 197
2026-01-26 17:50:00.064 +03:00 [INF] CORS policy execution successful.
2026-01-26 17:50:00.066 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeeDetailsController.AddEmergencyContact (HRMS.API)'
2026-01-26 17:50:00.068 +03:00 [INF] Route matched with {action = "AddEmergencyContact", controller = "EmployeeDetails"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] AddEmergencyContact(Int32, HRMS.Application.DTOs.Personnel.EmergencyContactDto) on controller HRMS.API.Controllers.Personnel.EmployeeDetailsController (HRMS.API).
2026-01-26 17:50:00.188 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0
2026-01-26 17:50:00.222 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@p0='?' (Size = 100), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?' (Size = 1) (DbType = Byte), @p5='?' (Size = 1) (DbType = Byte), @p6='?' (Size = 20), @p7='?' (Size = 20), @p8='?' (Size = 50), @p9='?' (DbType = DateTime2), @p10='?' (Size = 50), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_PERSONNEL].[EMERGENCY_CONTACTS] ([CONTACT_NAME_AR], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [IS_DELETED], [IS_PRIMARY], [PHONE_PRIMARY], [PHONE_SECONDARY], [RELATIONSHIP], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[CONTACT_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2026-01-26 17:50:00.265 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Int32'.
2026-01-26 17:50:00.268 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeeDetailsController.AddEmergencyContact (HRMS.API) in 197.1756ms
2026-01-26 17:50:00.271 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeeDetailsController.AddEmergencyContact (HRMS.API)'
2026-01-26 17:50:00.272 +03:00 [INF] HTTP POST /api/employees/7/emergency-contacts responded 200 in 208.7370 ms
2026-01-26 17:50:00.275 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/employees/7/emergency-contacts - 200 null application/json; charset=utf-8 265.2369ms
2026-01-26 17:50:13.363 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/employees/1/emergency-contacts - null null
2026-01-26 17:50:13.368 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeeDetailsController.GetEmergencyContacts (HRMS.API)'
2026-01-26 17:50:13.375 +03:00 [INF] Route matched with {action = "GetEmergencyContacts", controller = "EmployeeDetails"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[HRMS.Application.DTOs.Personnel.EmergencyContactDto]]] GetEmergencyContacts(Int32) on controller HRMS.API.Controllers.Personnel.EmployeeDetailsController (HRMS.API).
2026-01-26 17:50:16.402 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeeDetailsController.GetEmergencyContacts (HRMS.API) in 3022.6069ms
2026-01-26 17:50:16.413 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeeDetailsController.GetEmergencyContacts (HRMS.API)'
2026-01-26 17:50:16.421 +03:00 [ERR] An unhandled exception has occurred while executing the request.
AutoMapper.AutoMapperMappingException: Unable to create a map expression from EmergencyContact.IsPrimary (System.Byte) to Boolean.IsPrimary (System.Boolean)

Mapping types:
EmergencyContact -> EmergencyContactDto
HRMS.Core.Entities.Personnel.EmergencyContact -> HRMS.Application.DTOs.Personnel.EmergencyContactDto

Type Map configuration:
EmergencyContact -> EmergencyContactDto
HRMS.Core.Entities.Personnel.EmergencyContact -> HRMS.Application.DTOs.Personnel.EmergencyContactDto

Destination Member:
IsPrimary

   at System.Lazy`1.ViaFactory(LazyThreadSafetyMode mode)
   at System.Lazy`1.ExecutionAndPublication(LazyHelper executionAndPublication, Boolean useDefaultConstructor)
   at System.Lazy`1.CreateValue()
   at System.Lazy`1.get_Value()
   at HRMS.Application.Features.Personnel.EmployeeDetails.Queries.EmergencyContacts.GetEmployeeEmergencyContactsQueryHandler.Handle(GetEmployeeEmergencyContactsQuery request, CancellationToken cancellationToken) in G:\HRMS_Hospital\Backend\HRMS\HRMS.Application\Features\Personnel\EmployeeDetails\Queries\EmergencyContacts\GetEmployeeEmergencyContactsQuery.cs:line 26
   at HRMS.API.Controllers.Personnel.EmployeeDetailsController.GetEmergencyContacts(Int32 employeeId) in G:\HRMS_Hospital\Backend\HRMS\HRMS.API\Controllers\Personnel\EmployeeDetailsController.cs:line 83
   at lambda_method709(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2026-01-26 17:50:16.456 +03:00 [ERR] HTTP GET /api/employees/1/emergency-contacts responded 500 in 3088.3067 ms
2026-01-26 17:50:16.460 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/employees/1/emergency-contacts - 500 null text/plain; charset=utf-8 3096.9116ms
2026-01-26 17:50:21.839 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/employees/7/emergency-contacts - null null
2026-01-26 17:50:21.843 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeeDetailsController.GetEmergencyContacts (HRMS.API)'
2026-01-26 17:50:21.847 +03:00 [INF] Route matched with {action = "GetEmergencyContacts", controller = "EmployeeDetails"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[HRMS.Application.DTOs.Personnel.EmergencyContactDto]]] GetEmergencyContacts(Int32) on controller HRMS.API.Controllers.Personnel.EmployeeDetailsController (HRMS.API).
2026-01-26 17:51:03.207 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeeDetailsController.GetEmergencyContacts (HRMS.API) in 41355.944ms
2026-01-26 17:51:03.283 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeeDetailsController.GetEmergencyContacts (HRMS.API)'
2026-01-26 17:51:03.287 +03:00 [ERR] An unhandled exception has occurred while executing the request.
AutoMapper.AutoMapperMappingException: Unable to create a map expression from EmergencyContact.IsPrimary (System.Byte) to Boolean.IsPrimary (System.Boolean)

Mapping types:
EmergencyContact -> EmergencyContactDto
HRMS.Core.Entities.Personnel.EmergencyContact -> HRMS.Application.DTOs.Personnel.EmergencyContactDto

Type Map configuration:
EmergencyContact -> EmergencyContactDto
HRMS.Core.Entities.Personnel.EmergencyContact -> HRMS.Application.DTOs.Personnel.EmergencyContactDto

Destination Member:
IsPrimary

   at System.Lazy`1.ViaFactory(LazyThreadSafetyMode mode)
--- End of stack trace from previous location ---
   at System.LazyHelper.ThrowException()
   at System.Lazy`1.CreateValue()
   at System.Lazy`1.get_Value()
   at HRMS.Application.Features.Personnel.EmployeeDetails.Queries.EmergencyContacts.GetEmployeeEmergencyContactsQueryHandler.Handle(GetEmployeeEmergencyContactsQuery request, CancellationToken cancellationToken)
   at HRMS.API.Controllers.Personnel.EmployeeDetailsController.GetEmergencyContacts(Int32 employeeId) in G:\HRMS_Hospital\Backend\HRMS\HRMS.API\Controllers\Personnel\EmployeeDetailsController.cs:line 83
   at lambda_method709(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2026-01-26 17:51:03.320 +03:00 [ERR] HTTP GET /api/employees/7/emergency-contacts responded 500 in 41476.8528 ms
2026-01-26 17:51:03.322 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/employees/7/emergency-contacts - 500 null text/plain; charset=utf-8 41483.7157ms
2026-01-26 17:51:04.703 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - null null
2026-01-26 17:51:05.578 +03:00 [INF] HTTP GET /swagger/index.html responded 200 in 1.2709 ms
2026-01-26 17:51:05.584 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - 200 null text/html;charset=utf-8 880.71ms
2026-01-26 17:51:05.660 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_vs/browserLink - null null
2026-01-26 17:51:05.660 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - null null
2026-01-26 17:51:05.734 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_vs/browserLink - 200 null text/javascript; charset=UTF-8 73.9827ms
2026-01-26 17:51:05.864 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 203.6136ms
2026-01-26 17:51:06.852 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - null null
2026-01-26 17:51:07.730 +03:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 335.5488 ms
2026-01-26 17:51:07.737 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 885.1271ms
2026-01-26 17:51:25.759 +03:00 [INF] üöÄ Starting HRMS Hospital API...
2026-01-26 17:51:29.483 +03:00 [INF] ‚úÖ HRMS Hospital API started successfully
2026-01-26 17:51:29.544 +03:00 [INF] User profile is available. Using 'C:\Users\MT\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-26 17:51:30.115 +03:00 [INF] Now listening on: https://localhost:5001
2026-01-26 17:51:30.131 +03:00 [INF] Now listening on: http://localhost:5000
2026-01-26 17:51:30.272 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-26 17:51:30.304 +03:00 [INF] Hosting environment: Development
2026-01-26 17:51:30.330 +03:00 [INF] Content root path: G:\HRMS_Hospital\Backend\HRMS\HRMS.API
2026-01-26 17:51:31.098 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - null null
2026-01-26 17:51:32.183 +03:00 [INF] HTTP GET /swagger/index.html responded 200 in 481.3598 ms
2026-01-26 17:51:32.327 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - null null
2026-01-26 17:51:32.483 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - 200 null text/html;charset=utf-8 1396.4306ms
2026-01-26 17:51:32.509 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 182.8114ms
2026-01-26 17:51:33.120 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_vs/browserLink - null null
2026-01-26 17:51:35.486 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_vs/browserLink - 200 null text/javascript; charset=UTF-8 2365.8186ms
2026-01-26 17:51:35.571 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - null null
2026-01-26 17:51:36.422 +03:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 484.1038 ms
2026-01-26 17:51:36.437 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 865.6152ms
2026-01-26 17:51:52.608 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/employees/7/emergency-contacts - null null
2026-01-26 17:51:52.640 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeeDetailsController.GetEmergencyContacts (HRMS.API)'
2026-01-26 17:51:52.830 +03:00 [INF] Route matched with {action = "GetEmergencyContacts", controller = "EmployeeDetails"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[HRMS.Application.DTOs.Personnel.EmergencyContactDto]]] GetEmergencyContacts(Int32) on controller HRMS.API.Controllers.Personnel.EmployeeDetailsController (HRMS.API).
2026-01-26 17:51:58.282 +03:00 [WRN] No store type was specified for the decimal property 'HoursCount' on entity type 'ShiftType'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-01-26 17:51:58.286 +03:00 [WRN] No store type was specified for the decimal property 'MaxSalary' on entity type 'JobGrade'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-01-26 17:51:58.292 +03:00 [WRN] No store type was specified for the decimal property 'MinSalary' on entity type 'JobGrade'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-01-26 17:52:00.526 +03:00 [INF] Executed DbCommand (139ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[CONTACT_ID] AS [ContactId], [e].[CONTACT_NAME_AR] AS [ContactNameAr], [e].[RELATIONSHIP] AS [Relationship], [e].[PHONE_PRIMARY] AS [PhonePrimary], [e].[PHONE_SECONDARY] AS [PhoneSecondary], [e].[IS_PRIMARY] AS [IsPrimary]
FROM [HR_PERSONNEL].[EMERGENCY_CONTACTS] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0
2026-01-26 17:52:00.595 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HRMS.Application.DTOs.Personnel.EmergencyContactDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-26 17:52:00.633 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeeDetailsController.GetEmergencyContacts (HRMS.API) in 7791.906ms
2026-01-26 17:52:00.637 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeeDetailsController.GetEmergencyContacts (HRMS.API)'
2026-01-26 17:52:00.639 +03:00 [INF] HTTP GET /api/employees/7/emergency-contacts responded 200 in 8023.2905 ms
2026-01-26 17:52:00.665 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/employees/7/emergency-contacts - 200 null application/json; charset=utf-8 8057.6053ms
2026-01-26 17:59:08.141 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - null null
2026-01-26 17:59:08.215 +03:00 [INF] HTTP GET /swagger/index.html responded 200 in 3.2859 ms
2026-01-26 17:59:08.291 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - null null
2026-01-26 17:59:08.291 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_vs/browserLink - null null
2026-01-26 17:59:08.299 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - 200 null text/html;charset=utf-8 157.991ms
2026-01-26 17:59:08.306 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 14.9718ms
2026-01-26 17:59:08.394 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_vs/browserLink - 200 null text/javascript; charset=UTF-8 102.4739ms
2026-01-26 17:59:09.153 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - null null
2026-01-26 17:59:09.943 +03:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 769.7972 ms
2026-01-26 17:59:09.949 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 795.361ms
2026-01-26 17:59:29.480 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/employees/7/full-profile - null null
2026-01-26 17:59:29.484 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeeDetailsController.GetFullProfile (HRMS.API)'
2026-01-26 17:59:29.493 +03:00 [INF] Route matched with {action = "GetFullProfile", controller = "EmployeeDetails"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Application.Features.Personnel.Employees.DTOs.DetailedEmployeeProfileDto]] GetFullProfile(Int32) on controller HRMS.API.Controllers.Personnel.EmployeeDetailsController (HRMS.API).
2026-01-26 17:59:29.670 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeeDetailsController.GetFullProfile (HRMS.API) in 170.2843ms
2026-01-26 17:59:29.673 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeeDetailsController.GetFullProfile (HRMS.API)'
2026-01-26 17:59:29.679 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: No service for type 'MediatR.IRequestHandler`2[HRMS.Application.Features.Personnel.Employees.Queries.GetEmployeeFullProfile.GetEmployeeFullProfileQuery,HRMS.Application.Features.Personnel.Employees.DTOs.DetailedEmployeeProfileDto]' has been registered.
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at MediatR.Wrappers.RequestHandlerWrapperImpl`2.<>c__DisplayClass1_0.<Handle>g__Handler|0()
   at MediatR.Wrappers.RequestHandlerWrapperImpl`2.Handle(IRequest`1 request, IServiceProvider serviceProvider, CancellationToken cancellationToken)
   at MediatR.Mediator.Send[TResponse](IRequest`1 request, CancellationToken cancellationToken)
   at HRMS.API.Controllers.Personnel.EmployeeDetailsController.GetFullProfile(Int32 employeeId)
   at lambda_method88(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2026-01-26 17:59:29.721 +03:00 [ERR] HTTP GET /api/employees/7/full-profile responded 500 in 236.7372 ms
2026-01-26 17:59:29.723 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/employees/7/full-profile - 500 null text/plain; charset=utf-8 242.7611ms
2026-01-26 18:01:30.310 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/employees/7/emergency-contacts - null null
2026-01-26 18:01:30.323 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeeDetailsController.GetEmergencyContacts (HRMS.API)'
2026-01-26 18:01:30.334 +03:00 [INF] Route matched with {action = "GetEmergencyContacts", controller = "EmployeeDetails"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[HRMS.Application.DTOs.Personnel.EmergencyContactDto]]] GetEmergencyContacts(Int32) on controller HRMS.API.Controllers.Personnel.EmployeeDetailsController (HRMS.API).
2026-01-26 18:01:30.417 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[CONTACT_ID] AS [ContactId], [e].[CONTACT_NAME_AR] AS [ContactNameAr], [e].[RELATIONSHIP] AS [Relationship], [e].[PHONE_PRIMARY] AS [PhonePrimary], [e].[PHONE_SECONDARY] AS [PhoneSecondary], [e].[IS_PRIMARY] AS [IsPrimary]
FROM [HR_PERSONNEL].[EMERGENCY_CONTACTS] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0
2026-01-26 18:01:30.422 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HRMS.Application.DTOs.Personnel.EmergencyContactDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-26 18:01:30.428 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeeDetailsController.GetEmergencyContacts (HRMS.API) in 90.4291ms
2026-01-26 18:01:30.433 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeeDetailsController.GetEmergencyContacts (HRMS.API)'
2026-01-26 18:01:30.435 +03:00 [INF] HTTP GET /api/employees/7/emergency-contacts responded 200 in 112.5016 ms
2026-01-26 18:01:30.438 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/employees/7/emergency-contacts - 200 null application/json; charset=utf-8 127.5054ms
2026-01-26 18:03:31.872 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:5001/api/employees/7/emergency-contacts/1 - application/json 159
2026-01-26 18:03:31.877 +03:00 [INF] CORS policy execution successful.
2026-01-26 18:03:31.879 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeeDetailsController.UpdateEmergencyContact (HRMS.API)'
2026-01-26 18:03:31.891 +03:00 [INF] Route matched with {action = "UpdateEmergencyContact", controller = "EmployeeDetails"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] UpdateEmergencyContact(Int32, Int32, HRMS.Application.DTOs.Personnel.EmergencyContactDto) on controller HRMS.API.Controllers.Personnel.EmployeeDetailsController (HRMS.API).
2026-01-26 18:03:31.985 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2026-01-26 18:03:31.996 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeeDetailsController.UpdateEmergencyContact (HRMS.API) in 67.9946ms
2026-01-26 18:03:32.004 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeeDetailsController.UpdateEmergencyContact (HRMS.API)'
2026-01-26 18:03:32.014 +03:00 [INF] HTTP PUT /api/employees/7/emergency-contacts/1 responded 400 in 138.5668 ms
2026-01-26 18:03:32.016 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:5001/api/employees/7/emergency-contacts/1 - 400 null text/plain; charset=utf-8 144.1708ms
2026-01-26 18:03:46.382 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:5001/api/employees/7/emergency-contacts/1 - application/json 159
2026-01-26 18:03:46.387 +03:00 [INF] CORS policy execution successful.
2026-01-26 18:03:46.416 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeeDetailsController.UpdateEmergencyContact (HRMS.API)'
2026-01-26 18:03:46.508 +03:00 [INF] Route matched with {action = "UpdateEmergencyContact", controller = "EmployeeDetails"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] UpdateEmergencyContact(Int32, Int32, HRMS.Application.DTOs.Personnel.EmergencyContactDto) on controller HRMS.API.Controllers.Personnel.EmployeeDetailsController (HRMS.API).
2026-01-26 18:03:46.593 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeeDetailsController.UpdateEmergencyContact (HRMS.API) in 63.5354ms
2026-01-26 18:03:46.596 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeeDetailsController.UpdateEmergencyContact (HRMS.API)'
2026-01-26 18:03:46.598 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: No service for type 'MediatR.IRequestHandler`2[HRMS.Application.Features.Personnel.EmployeeDetails.Commands.EmergencyContacts.UpdateEmergencyContactCommand,System.Boolean]' has been registered.
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at MediatR.Wrappers.RequestHandlerWrapperImpl`2.<>c__DisplayClass1_0.<Handle>g__Handler|0()
   at MediatR.Wrappers.RequestHandlerWrapperImpl`2.Handle(IRequest`1 request, IServiceProvider serviceProvider, CancellationToken cancellationToken)
   at MediatR.Mediator.Send[TResponse](IRequest`1 request, CancellationToken cancellationToken)
   at HRMS.API.Controllers.Personnel.EmployeeDetailsController.UpdateEmergencyContact(Int32 employeeId, Int32 contactId, EmergencyContactDto dto)
   at lambda_method104(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2026-01-26 18:03:46.615 +03:00 [ERR] HTTP PUT /api/employees/7/emergency-contacts/1 responded 500 in 228.6886 ms
2026-01-26 18:03:46.617 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:5001/api/employees/7/emergency-contacts/1 - 500 null text/plain; charset=utf-8 234.5269ms
2026-01-26 18:04:46.027 +03:00 [INF] üöÄ Starting HRMS Hospital API...
2026-01-26 18:04:49.019 +03:00 [INF] ‚úÖ HRMS Hospital API started successfully
2026-01-26 18:04:49.083 +03:00 [INF] User profile is available. Using 'C:\Users\MT\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-26 18:04:49.619 +03:00 [INF] Now listening on: https://localhost:5001
2026-01-26 18:04:49.621 +03:00 [INF] Now listening on: http://localhost:5000
2026-01-26 18:04:49.741 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-26 18:04:49.743 +03:00 [INF] Hosting environment: Development
2026-01-26 18:04:49.744 +03:00 [INF] Content root path: G:\HRMS_Hospital\Backend\HRMS\HRMS.API
2026-01-26 18:04:50.918 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - null null
2026-01-26 18:04:51.439 +03:00 [INF] HTTP GET /swagger/index.html responded 200 in 270.5193 ms
2026-01-26 18:04:52.327 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - null null
2026-01-26 18:04:52.328 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_vs/browserLink - null null
2026-01-26 18:04:52.369 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - 200 null text/html;charset=utf-8 1463.7015ms
2026-01-26 18:04:52.378 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 50.2672ms
2026-01-26 18:04:53.193 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_vs/browserLink - 200 null text/javascript; charset=UTF-8 864.9266ms
2026-01-26 18:04:53.800 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - null null
2026-01-26 18:04:55.139 +03:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 305.1326 ms
2026-01-26 18:04:55.148 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 1348.0192ms
2026-01-26 18:05:13.730 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/employees/7/full-profile - null null
2026-01-26 18:05:13.770 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeeDetailsController.GetFullProfile (HRMS.API)'
2026-01-26 18:05:13.815 +03:00 [INF] Route matched with {action = "GetFullProfile", controller = "EmployeeDetails"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Application.Features.Personnel.Employees.DTOs.DetailedEmployeeProfileDto]] GetFullProfile(Int32) on controller HRMS.API.Controllers.Personnel.EmployeeDetailsController (HRMS.API).
2026-01-26 18:05:16.132 +03:00 [WRN] No store type was specified for the decimal property 'HoursCount' on entity type 'ShiftType'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-01-26 18:05:16.135 +03:00 [WRN] No store type was specified for the decimal property 'MaxSalary' on entity type 'JobGrade'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-01-26 18:05:16.137 +03:00 [WRN] No store type was specified for the decimal property 'MinSalary' on entity type 'JobGrade'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-01-26 18:05:17.193 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2026-01-26 18:05:18.049 +03:00 [INF] Executed DbCommand (138ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[EMPLOYEE_ID], [s].[BIRTH_DATE], [s].[CREATED_AT], [s].[CREATED_BY], [s].[DEPARTMENT_ID], [s].[EMAIL], [s].[EMPLOYEE_NUMBER], [s].[FIRST_NAME_AR], [s].[FULL_NAME_EN], [s].[GENDER], [s].[HIRE_DATE], [s].[IS_DELETED], [s].[JOB_ID], [s].[LAST_NAME_AR], [s].[LICENSE_EXPIRY_DATE], [s].[LICENSE_NUMBER], [s].[MANAGER_ID], [s].[MARITAL_STATUS], [s].[MOBILE], [s].[NATIONAL_ID], [s].[NATIONALITY_ID], [s].[SECOND_NAME_AR], [s].[SPECIALTY], [s].[THIRD_NAME_AR], [s].[UPDATED_AT], [s].[UPDATED_BY], [s].[USER_ID], [s].[VERSION_NO], [s].[DEPT_ID], [s].[BranchId], [s].[COST_CENTER_CODE], [s].[CREATED_AT0], [s].[CREATED_BY0], [s].[DEPT_NAME_AR], [s].[DEPT_NAME_EN], [s].[IS_ACTIVE], [s].[IS_DELETED0], [s].[MANAGER_ID0], [s].[PARENT_DEPT_ID], [s].[UPDATED_AT0], [s].[UPDATED_BY0], [s].[VERSION_NO0], [s].[JOB_ID0], [s].[CREATED_AT1], [s].[CREATED_BY1], [s].[DEFAULT_GRADE_ID], [s].[DepartmentDeptId], [s].[IS_DELETED1], [s].[IS_MEDICAL], [s].[JOB_TITLE_AR], [s].[JOB_TITLE_EN], [s].[UPDATED_AT1], [s].[UPDATED_BY1], [s].[VERSION_NO1], [s].[COMPENSATION_ID], [s].[BANK_ID], [s].[BASIC_SALARY], [s].[CREATED_AT2], [s].[CREATED_BY2], [s].[EMPLOYEE_ID0], [s].[HOUSING_ALLOWANCE], [s].[IBAN_NUMBER], [s].[IS_DELETED2], [s].[MEDICAL_ALLOWANCE], [s].[OTHER_ALLOWANCES], [s].[TRANSPORT_ALLOWANCE], [s].[UPDATED_AT2], [s].[UPDATED_BY2], [s].[VERSION_NO2], [s0].[DOCUMENT_ID], [s0].[CONTENT_TYPE], [s0].[CREATED_AT], [s0].[CREATED_BY], [s0].[DOCUMENT_NUMBER], [s0].[DOCUMENT_TYPE_ID], [s0].[EMPLOYEE_ID], [s0].[EXPIRY_DATE], [s0].[FILE_NAME], [s0].[FILE_PATH], [s0].[FILE_SIZE], [s0].[IS_DELETED], [s0].[ISSUE_DATE], [s0].[UPDATED_AT], [s0].[UPDATED_BY], [s0].[VERSION_NO], [s0].[DOCUMENT_TYPE_ID0], [s0].[ALLOWED_EXTENSIONS], [s0].[CREATED_AT0], [s0].[CREATED_BY0], [s0].[DEFAULT_EXPIRY_DAYS], [s0].[DESCRIPTION], [s0].[DOCUMENT_TYPE_NAME_AR], [s0].[DOCUMENT_TYPE_NAME_EN], [s0].[HAS_EXPIRY], [s0].[IS_DELETED0], [s0].[IS_REQUIRED], [s0].[MAX_FILE_SIZE_MB], [s0].[UPDATED_AT0], [s0].[UPDATED_BY0], [s0].[VERSION_NO0], [e2].[QUALIFICATION_ID], [e2].[ATTACHMENT_PATH], [e2].[COUNTRY_ID], [e2].[CREATED_AT], [e2].[CREATED_BY], [e2].[DEGREE_TYPE], [e2].[EMPLOYEE_ID], [e2].[GRADE], [e2].[GRADUATION_YEAR], [e2].[IS_DELETED], [e2].[MAJOR_AR], [e2].[UNIVERSITY_AR], [e2].[UPDATED_AT], [e2].[UPDATED_BY], [e2].[VERSION_NO], [e3].[EXPERIENCE_ID], [e3].[COMPANY_NAME_AR], [e3].[CREATED_AT], [e3].[CREATED_BY], [e3].[EMPLOYEE_ID], [e3].[END_DATE], [e3].[IS_CURRENT], [e3].[IS_DELETED], [e3].[JOB_TITLE_AR], [e3].[REASON_FOR_LEAVING], [e3].[RESPONSIBILITIES], [e3].[START_DATE], [e3].[UPDATED_AT], [e3].[UPDATED_BY], [e3].[VERSION_NO], [e4].[CONTACT_ID], [e4].[CONTACT_NAME_AR], [e4].[CREATED_AT], [e4].[CREATED_BY], [e4].[EMPLOYEE_ID], [e4].[IS_DELETED], [e4].[IS_PRIMARY], [e4].[PHONE_PRIMARY], [e4].[PHONE_SECONDARY], [e4].[RELATIONSHIP], [e4].[UPDATED_AT], [e4].[UPDATED_BY], [e4].[VERSION_NO]
FROM (
    SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO], [d].[DEPT_ID], [d].[BranchId], [d].[COST_CENTER_CODE], [d].[CREATED_AT] AS [CREATED_AT0], [d].[CREATED_BY] AS [CREATED_BY0], [d].[DEPT_NAME_AR], [d].[DEPT_NAME_EN], [d].[IS_ACTIVE], [d].[IS_DELETED] AS [IS_DELETED0], [d].[MANAGER_ID] AS [MANAGER_ID0], [d].[PARENT_DEPT_ID], [d].[UPDATED_AT] AS [UPDATED_AT0], [d].[UPDATED_BY] AS [UPDATED_BY0], [d].[VERSION_NO] AS [VERSION_NO0], [j].[JOB_ID] AS [JOB_ID0], [j].[CREATED_AT] AS [CREATED_AT1], [j].[CREATED_BY] AS [CREATED_BY1], [j].[DEFAULT_GRADE_ID], [j].[DepartmentDeptId], [j].[IS_DELETED] AS [IS_DELETED1], [j].[IS_MEDICAL], [j].[JOB_TITLE_AR], [j].[JOB_TITLE_EN], [j].[UPDATED_AT] AS [UPDATED_AT1], [j].[UPDATED_BY] AS [UPDATED_BY1], [j].[VERSION_NO] AS [VERSION_NO1], [e0].[COMPENSATION_ID], [e0].[BANK_ID], [e0].[BASIC_SALARY], [e0].[CREATED_AT] AS [CREATED_AT2], [e0].[CREATED_BY] AS [CREATED_BY2], [e0].[EMPLOYEE_ID] AS [EMPLOYEE_ID0], [e0].[HOUSING_ALLOWANCE], [e0].[IBAN_NUMBER], [e0].[IS_DELETED] AS [IS_DELETED2], [e0].[MEDICAL_ALLOWANCE], [e0].[OTHER_ALLOWANCES], [e0].[TRANSPORT_ALLOWANCE], [e0].[UPDATED_AT] AS [UPDATED_AT2], [e0].[UPDATED_BY] AS [UPDATED_BY2], [e0].[VERSION_NO] AS [VERSION_NO2]
    FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
    INNER JOIN [HR_CORE].[DEPARTMENTS] AS [d] ON [e].[DEPARTMENT_ID] = [d].[DEPT_ID]
    INNER JOIN [HR_CORE].[JOBS] AS [j] ON [e].[JOB_ID] = [j].[JOB_ID]
    LEFT JOIN [HR_PERSONNEL].[EMPLOYEE_COMPENSATIONS] AS [e0] ON [e].[EMPLOYEE_ID] = [e0].[EMPLOYEE_ID]
    WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0
) AS [s]
LEFT JOIN (
    SELECT [e1].[DOCUMENT_ID], [e1].[CONTENT_TYPE], [e1].[CREATED_AT], [e1].[CREATED_BY], [e1].[DOCUMENT_NUMBER], [e1].[DOCUMENT_TYPE_ID], [e1].[EMPLOYEE_ID], [e1].[EXPIRY_DATE], [e1].[FILE_NAME], [e1].[FILE_PATH], [e1].[FILE_SIZE], [e1].[IS_DELETED], [e1].[ISSUE_DATE], [e1].[UPDATED_AT], [e1].[UPDATED_BY], [e1].[VERSION_NO], [d0].[DOCUMENT_TYPE_ID] AS [DOCUMENT_TYPE_ID0], [d0].[ALLOWED_EXTENSIONS], [d0].[CREATED_AT] AS [CREATED_AT0], [d0].[CREATED_BY] AS [CREATED_BY0], [d0].[DEFAULT_EXPIRY_DAYS], [d0].[DESCRIPTION], [d0].[DOCUMENT_TYPE_NAME_AR], [d0].[DOCUMENT_TYPE_NAME_EN], [d0].[HAS_EXPIRY], [d0].[IS_DELETED] AS [IS_DELETED0], [d0].[IS_REQUIRED], [d0].[MAX_FILE_SIZE_MB], [d0].[UPDATED_AT] AS [UPDATED_AT0], [d0].[UPDATED_BY] AS [UPDATED_BY0], [d0].[VERSION_NO] AS [VERSION_NO0]
    FROM [HR_PERSONNEL].[EMPLOYEE_DOCUMENTS] AS [e1]
    INNER JOIN [HR_CORE].[DOCUMENT_TYPES] AS [d0] ON [e1].[DOCUMENT_TYPE_ID] = [d0].[DOCUMENT_TYPE_ID]
) AS [s0] ON [s].[EMPLOYEE_ID] = [s0].[EMPLOYEE_ID]
LEFT JOIN [HR_PERSONNEL].[EMPLOYEE_QUALIFICATIONS] AS [e2] ON [s].[EMPLOYEE_ID] = [e2].[EMPLOYEE_ID]
LEFT JOIN [HR_PERSONNEL].[EMPLOYEE_EXPERIENCES] AS [e3] ON [s].[EMPLOYEE_ID] = [e3].[EMPLOYEE_ID]
LEFT JOIN [HR_PERSONNEL].[EMERGENCY_CONTACTS] AS [e4] ON [s].[EMPLOYEE_ID] = [e4].[EMPLOYEE_ID]
ORDER BY [s].[EMPLOYEE_ID], [s].[DEPT_ID], [s].[JOB_ID0], [s].[COMPENSATION_ID], [s0].[DOCUMENT_ID], [s0].[DOCUMENT_TYPE_ID0], [e2].[QUALIFICATION_ID], [e3].[EXPERIENCE_ID]
2026-01-26 18:05:18.192 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Application.Features.Personnel.Employees.DTOs.DetailedEmployeeProfileDto'.
2026-01-26 18:05:18.261 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeeDetailsController.GetFullProfile (HRMS.API) in 4437.9181ms
2026-01-26 18:05:18.264 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeeDetailsController.GetFullProfile (HRMS.API)'
2026-01-26 18:05:18.267 +03:00 [INF] HTTP GET /api/employees/7/full-profile responded 200 in 4511.8982 ms
2026-01-26 18:05:18.282 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/employees/7/full-profile - 200 null application/json; charset=utf-8 4552.3372ms
2026-01-26 22:27:18.770 +03:00 [INF] üöÄ Starting HRMS Hospital API...
2026-01-26 22:27:29.002 +03:00 [INF] ‚úÖ HRMS Hospital API started successfully
2026-01-26 22:27:29.098 +03:00 [INF] User profile is available. Using 'C:\Users\MT\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-26 22:27:29.788 +03:00 [INF] Now listening on: https://localhost:5001
2026-01-26 22:27:29.791 +03:00 [INF] Now listening on: http://localhost:5000
2026-01-26 22:27:30.005 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-26 22:27:30.202 +03:00 [INF] Hosting environment: Development
2026-01-26 22:27:30.226 +03:00 [INF] Content root path: G:\HRMS_Hospital\Backend\HRMS\HRMS.API
2026-01-26 22:27:31.163 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - null null
2026-01-26 22:27:37.049 +03:00 [INF] HTTP GET /swagger/index.html responded 200 in 4774.9572 ms
2026-01-26 22:27:37.067 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - 200 null text/html;charset=utf-8 5915.7584ms
2026-01-26 22:27:37.166 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - null null
2026-01-26 22:27:37.330 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 164.1059ms
2026-01-26 22:27:37.983 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_vs/browserLink - null null
2026-01-26 22:27:38.185 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_vs/browserLink - 200 null text/javascript; charset=UTF-8 201.4598ms
2026-01-26 22:27:40.306 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - null null
2026-01-26 22:27:42.236 +03:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 268.5433 ms
2026-01-26 22:27:42.240 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 1934.5006ms
2026-01-26 22:32:55.197 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/employees/7/full-profile - null null
2026-01-26 22:32:55.234 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeeDetailsController.GetFullProfile (HRMS.API)'
2026-01-26 22:32:55.288 +03:00 [INF] Route matched with {action = "GetFullProfile", controller = "EmployeeDetails"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Application.Features.Personnel.Employees.DTOs.DetailedEmployeeProfileDto]] GetFullProfile(Int32) on controller HRMS.API.Controllers.Personnel.EmployeeDetailsController (HRMS.API).
2026-01-26 22:32:59.709 +03:00 [WRN] No store type was specified for the decimal property 'HoursCount' on entity type 'ShiftType'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-01-26 22:32:59.712 +03:00 [WRN] No store type was specified for the decimal property 'MaxSalary' on entity type 'JobGrade'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-01-26 22:32:59.715 +03:00 [WRN] No store type was specified for the decimal property 'MinSalary' on entity type 'JobGrade'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-01-26 22:33:01.809 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2026-01-26 22:33:04.426 +03:00 [INF] Executed DbCommand (330ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[EMPLOYEE_ID], [s].[BIRTH_DATE], [s].[CREATED_AT], [s].[CREATED_BY], [s].[DEPARTMENT_ID], [s].[EMAIL], [s].[EMPLOYEE_NUMBER], [s].[FIRST_NAME_AR], [s].[FULL_NAME_EN], [s].[GENDER], [s].[HIRE_DATE], [s].[IS_DELETED], [s].[JOB_ID], [s].[LAST_NAME_AR], [s].[LICENSE_EXPIRY_DATE], [s].[LICENSE_NUMBER], [s].[MANAGER_ID], [s].[MARITAL_STATUS], [s].[MOBILE], [s].[NATIONAL_ID], [s].[NATIONALITY_ID], [s].[SECOND_NAME_AR], [s].[SPECIALTY], [s].[THIRD_NAME_AR], [s].[UPDATED_AT], [s].[UPDATED_BY], [s].[USER_ID], [s].[VERSION_NO], [s].[DEPT_ID], [s].[BranchId], [s].[COST_CENTER_CODE], [s].[CREATED_AT0], [s].[CREATED_BY0], [s].[DEPT_NAME_AR], [s].[DEPT_NAME_EN], [s].[IS_ACTIVE], [s].[IS_DELETED0], [s].[MANAGER_ID0], [s].[PARENT_DEPT_ID], [s].[UPDATED_AT0], [s].[UPDATED_BY0], [s].[VERSION_NO0], [s].[JOB_ID0], [s].[CREATED_AT1], [s].[CREATED_BY1], [s].[DEFAULT_GRADE_ID], [s].[DepartmentDeptId], [s].[IS_DELETED1], [s].[IS_MEDICAL], [s].[JOB_TITLE_AR], [s].[JOB_TITLE_EN], [s].[UPDATED_AT1], [s].[UPDATED_BY1], [s].[VERSION_NO1], [s].[COMPENSATION_ID], [s].[BANK_ID], [s].[BASIC_SALARY], [s].[CREATED_AT2], [s].[CREATED_BY2], [s].[EMPLOYEE_ID0], [s].[HOUSING_ALLOWANCE], [s].[IBAN_NUMBER], [s].[IS_DELETED2], [s].[MEDICAL_ALLOWANCE], [s].[OTHER_ALLOWANCES], [s].[TRANSPORT_ALLOWANCE], [s].[UPDATED_AT2], [s].[UPDATED_BY2], [s].[VERSION_NO2], [s0].[DOCUMENT_ID], [s0].[CONTENT_TYPE], [s0].[CREATED_AT], [s0].[CREATED_BY], [s0].[DOCUMENT_NUMBER], [s0].[DOCUMENT_TYPE_ID], [s0].[EMPLOYEE_ID], [s0].[EXPIRY_DATE], [s0].[FILE_NAME], [s0].[FILE_PATH], [s0].[FILE_SIZE], [s0].[IS_DELETED], [s0].[ISSUE_DATE], [s0].[UPDATED_AT], [s0].[UPDATED_BY], [s0].[VERSION_NO], [s0].[DOCUMENT_TYPE_ID0], [s0].[ALLOWED_EXTENSIONS], [s0].[CREATED_AT0], [s0].[CREATED_BY0], [s0].[DEFAULT_EXPIRY_DAYS], [s0].[DESCRIPTION], [s0].[DOCUMENT_TYPE_NAME_AR], [s0].[DOCUMENT_TYPE_NAME_EN], [s0].[HAS_EXPIRY], [s0].[IS_DELETED0], [s0].[IS_REQUIRED], [s0].[MAX_FILE_SIZE_MB], [s0].[UPDATED_AT0], [s0].[UPDATED_BY0], [s0].[VERSION_NO0], [e2].[QUALIFICATION_ID], [e2].[ATTACHMENT_PATH], [e2].[COUNTRY_ID], [e2].[CREATED_AT], [e2].[CREATED_BY], [e2].[DEGREE_TYPE], [e2].[EMPLOYEE_ID], [e2].[GRADE], [e2].[GRADUATION_YEAR], [e2].[IS_DELETED], [e2].[MAJOR_AR], [e2].[UNIVERSITY_AR], [e2].[UPDATED_AT], [e2].[UPDATED_BY], [e2].[VERSION_NO], [e3].[EXPERIENCE_ID], [e3].[COMPANY_NAME_AR], [e3].[CREATED_AT], [e3].[CREATED_BY], [e3].[EMPLOYEE_ID], [e3].[END_DATE], [e3].[IS_CURRENT], [e3].[IS_DELETED], [e3].[JOB_TITLE_AR], [e3].[REASON_FOR_LEAVING], [e3].[RESPONSIBILITIES], [e3].[START_DATE], [e3].[UPDATED_AT], [e3].[UPDATED_BY], [e3].[VERSION_NO], [e4].[CONTACT_ID], [e4].[CONTACT_NAME_AR], [e4].[CREATED_AT], [e4].[CREATED_BY], [e4].[EMPLOYEE_ID], [e4].[IS_DELETED], [e4].[IS_PRIMARY], [e4].[PHONE_PRIMARY], [e4].[PHONE_SECONDARY], [e4].[RELATIONSHIP], [e4].[UPDATED_AT], [e4].[UPDATED_BY], [e4].[VERSION_NO]
FROM (
    SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO], [d].[DEPT_ID], [d].[BranchId], [d].[COST_CENTER_CODE], [d].[CREATED_AT] AS [CREATED_AT0], [d].[CREATED_BY] AS [CREATED_BY0], [d].[DEPT_NAME_AR], [d].[DEPT_NAME_EN], [d].[IS_ACTIVE], [d].[IS_DELETED] AS [IS_DELETED0], [d].[MANAGER_ID] AS [MANAGER_ID0], [d].[PARENT_DEPT_ID], [d].[UPDATED_AT] AS [UPDATED_AT0], [d].[UPDATED_BY] AS [UPDATED_BY0], [d].[VERSION_NO] AS [VERSION_NO0], [j].[JOB_ID] AS [JOB_ID0], [j].[CREATED_AT] AS [CREATED_AT1], [j].[CREATED_BY] AS [CREATED_BY1], [j].[DEFAULT_GRADE_ID], [j].[DepartmentDeptId], [j].[IS_DELETED] AS [IS_DELETED1], [j].[IS_MEDICAL], [j].[JOB_TITLE_AR], [j].[JOB_TITLE_EN], [j].[UPDATED_AT] AS [UPDATED_AT1], [j].[UPDATED_BY] AS [UPDATED_BY1], [j].[VERSION_NO] AS [VERSION_NO1], [e0].[COMPENSATION_ID], [e0].[BANK_ID], [e0].[BASIC_SALARY], [e0].[CREATED_AT] AS [CREATED_AT2], [e0].[CREATED_BY] AS [CREATED_BY2], [e0].[EMPLOYEE_ID] AS [EMPLOYEE_ID0], [e0].[HOUSING_ALLOWANCE], [e0].[IBAN_NUMBER], [e0].[IS_DELETED] AS [IS_DELETED2], [e0].[MEDICAL_ALLOWANCE], [e0].[OTHER_ALLOWANCES], [e0].[TRANSPORT_ALLOWANCE], [e0].[UPDATED_AT] AS [UPDATED_AT2], [e0].[UPDATED_BY] AS [UPDATED_BY2], [e0].[VERSION_NO] AS [VERSION_NO2]
    FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
    INNER JOIN [HR_CORE].[DEPARTMENTS] AS [d] ON [e].[DEPARTMENT_ID] = [d].[DEPT_ID]
    INNER JOIN [HR_CORE].[JOBS] AS [j] ON [e].[JOB_ID] = [j].[JOB_ID]
    LEFT JOIN [HR_PERSONNEL].[EMPLOYEE_COMPENSATIONS] AS [e0] ON [e].[EMPLOYEE_ID] = [e0].[EMPLOYEE_ID]
    WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0
) AS [s]
LEFT JOIN (
    SELECT [e1].[DOCUMENT_ID], [e1].[CONTENT_TYPE], [e1].[CREATED_AT], [e1].[CREATED_BY], [e1].[DOCUMENT_NUMBER], [e1].[DOCUMENT_TYPE_ID], [e1].[EMPLOYEE_ID], [e1].[EXPIRY_DATE], [e1].[FILE_NAME], [e1].[FILE_PATH], [e1].[FILE_SIZE], [e1].[IS_DELETED], [e1].[ISSUE_DATE], [e1].[UPDATED_AT], [e1].[UPDATED_BY], [e1].[VERSION_NO], [d0].[DOCUMENT_TYPE_ID] AS [DOCUMENT_TYPE_ID0], [d0].[ALLOWED_EXTENSIONS], [d0].[CREATED_AT] AS [CREATED_AT0], [d0].[CREATED_BY] AS [CREATED_BY0], [d0].[DEFAULT_EXPIRY_DAYS], [d0].[DESCRIPTION], [d0].[DOCUMENT_TYPE_NAME_AR], [d0].[DOCUMENT_TYPE_NAME_EN], [d0].[HAS_EXPIRY], [d0].[IS_DELETED] AS [IS_DELETED0], [d0].[IS_REQUIRED], [d0].[MAX_FILE_SIZE_MB], [d0].[UPDATED_AT] AS [UPDATED_AT0], [d0].[UPDATED_BY] AS [UPDATED_BY0], [d0].[VERSION_NO] AS [VERSION_NO0]
    FROM [HR_PERSONNEL].[EMPLOYEE_DOCUMENTS] AS [e1]
    INNER JOIN [HR_CORE].[DOCUMENT_TYPES] AS [d0] ON [e1].[DOCUMENT_TYPE_ID] = [d0].[DOCUMENT_TYPE_ID]
) AS [s0] ON [s].[EMPLOYEE_ID] = [s0].[EMPLOYEE_ID]
LEFT JOIN [HR_PERSONNEL].[EMPLOYEE_QUALIFICATIONS] AS [e2] ON [s].[EMPLOYEE_ID] = [e2].[EMPLOYEE_ID]
LEFT JOIN [HR_PERSONNEL].[EMPLOYEE_EXPERIENCES] AS [e3] ON [s].[EMPLOYEE_ID] = [e3].[EMPLOYEE_ID]
LEFT JOIN [HR_PERSONNEL].[EMERGENCY_CONTACTS] AS [e4] ON [s].[EMPLOYEE_ID] = [e4].[EMPLOYEE_ID]
ORDER BY [s].[EMPLOYEE_ID], [s].[DEPT_ID], [s].[JOB_ID0], [s].[COMPENSATION_ID], [s0].[DOCUMENT_ID], [s0].[DOCUMENT_TYPE_ID0], [e2].[QUALIFICATION_ID], [e3].[EXPERIENCE_ID]
2026-01-26 22:33:04.675 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Application.Features.Personnel.Employees.DTOs.DetailedEmployeeProfileDto'.
2026-01-26 22:33:04.807 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeeDetailsController.GetFullProfile (HRMS.API) in 9505.4981ms
2026-01-26 22:33:04.814 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeeDetailsController.GetFullProfile (HRMS.API)'
2026-01-26 22:33:04.816 +03:00 [INF] HTTP GET /api/employees/7/full-profile responded 200 in 9598.0083 ms
2026-01-26 22:33:04.837 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/employees/7/full-profile - 200 null application/json; charset=utf-8 9640.5039ms
2026-01-26 22:34:02.372 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/employees/7/contracts - null null
2026-01-26 22:34:02.541 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeeDetailsController.GetContracts (HRMS.API)'
2026-01-26 22:34:02.554 +03:00 [INF] Route matched with {action = "GetContracts", controller = "EmployeeDetails"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[HRMS.Application.DTOs.Personnel.ContractDto]]] GetContracts(Int32) on controller HRMS.API.Controllers.Personnel.EmployeeDetailsController (HRMS.API).
2026-01-26 22:34:36.838 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeeDetailsController.GetContracts (HRMS.API) in 34279.3144ms
2026-01-26 22:34:36.847 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeeDetailsController.GetContracts (HRMS.API)'
2026-01-26 22:34:36.854 +03:00 [ERR] An unhandled exception has occurred while executing the request.
AutoMapper.AutoMapperMappingException: Unable to create a map expression from Contract.IsRenewable (System.Byte) to Boolean.IsRenewable (System.Boolean)

Mapping types:
Contract -> ContractDto
HRMS.Core.Entities.Personnel.Contract -> HRMS.Application.DTOs.Personnel.ContractDto

Type Map configuration:
Contract -> ContractDto
HRMS.Core.Entities.Personnel.Contract -> HRMS.Application.DTOs.Personnel.ContractDto

Destination Member:
IsRenewable

   at System.Lazy`1.ViaFactory(LazyThreadSafetyMode mode)
   at System.Lazy`1.ExecutionAndPublication(LazyHelper executionAndPublication, Boolean useDefaultConstructor)
   at System.Lazy`1.CreateValue()
   at System.Lazy`1.get_Value()
   at HRMS.Application.Features.Personnel.Contracts.Queries.GetEmployeeContracts.GetEmployeeContractsQueryHandler.Handle(GetEmployeeContractsQuery request, CancellationToken cancellationToken) in G:\HRMS_Hospital\Backend\HRMS\HRMS.Application\Features\Personnel\Contracts\Queries\GetEmployeeContracts\GetEmployeeContractsQuery.cs:line 25
   at HRMS.API.Controllers.Personnel.EmployeeDetailsController.GetContracts(Int32 employeeId) in G:\HRMS_Hospital\Backend\HRMS\HRMS.API\Controllers\Personnel\EmployeeDetailsController.cs:line 155
   at lambda_method306(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2026-01-26 22:34:37.021 +03:00 [ERR] HTTP GET /api/employees/7/contracts responded 500 in 34480.2824 ms
2026-01-26 22:34:37.023 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/employees/7/contracts - 500 null text/plain; charset=utf-8 34651.0741ms
2026-01-26 22:34:40.039 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/employees/7/contracts - null null
2026-01-26 22:34:40.064 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeeDetailsController.GetContracts (HRMS.API)'
2026-01-26 22:34:40.072 +03:00 [INF] Route matched with {action = "GetContracts", controller = "EmployeeDetails"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[HRMS.Application.DTOs.Personnel.ContractDto]]] GetContracts(Int32) on controller HRMS.API.Controllers.Personnel.EmployeeDetailsController (HRMS.API).
2026-01-26 22:35:08.666 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeeDetailsController.GetContracts (HRMS.API) in 28591.1991ms
2026-01-26 22:35:09.174 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeeDetailsController.GetContracts (HRMS.API)'
2026-01-26 22:35:09.519 +03:00 [ERR] An unhandled exception has occurred while executing the request.
AutoMapper.AutoMapperMappingException: Unable to create a map expression from Contract.IsRenewable (System.Byte) to Boolean.IsRenewable (System.Boolean)

Mapping types:
Contract -> ContractDto
HRMS.Core.Entities.Personnel.Contract -> HRMS.Application.DTOs.Personnel.ContractDto

Type Map configuration:
Contract -> ContractDto
HRMS.Core.Entities.Personnel.Contract -> HRMS.Application.DTOs.Personnel.ContractDto

Destination Member:
IsRenewable

   at System.Lazy`1.ViaFactory(LazyThreadSafetyMode mode)
--- End of stack trace from previous location ---
   at System.LazyHelper.ThrowException()
   at System.Lazy`1.CreateValue()
   at System.Lazy`1.get_Value()
   at HRMS.Application.Features.Personnel.Contracts.Queries.GetEmployeeContracts.GetEmployeeContractsQueryHandler.Handle(GetEmployeeContractsQuery request, CancellationToken cancellationToken)
   at HRMS.API.Controllers.Personnel.EmployeeDetailsController.GetContracts(Int32 employeeId) in G:\HRMS_Hospital\Backend\HRMS\HRMS.API\Controllers\Personnel\EmployeeDetailsController.cs:line 155
   at lambda_method306(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2026-01-26 22:35:10.265 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - null null
2026-01-26 22:35:14.775 +03:00 [ERR] HTTP GET /api/employees/7/contracts responded 500 in 34711.1140 ms
2026-01-26 22:35:14.788 +03:00 [INF] HTTP GET /swagger/index.html responded 200 in 2.9566 ms
2026-01-26 22:35:14.821 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - 200 null text/html;charset=utf-8 4556.0834ms
2026-01-26 22:35:14.821 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/employees/7/contracts - 500 null text/plain; charset=utf-8 34782.4505ms
2026-01-26 22:35:15.005 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - null null
2026-01-26 22:35:15.090 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_vs/browserLink - null null
2026-01-26 22:35:15.362 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 357.4591ms
2026-01-26 22:35:15.473 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_vs/browserLink - 200 null text/javascript; charset=UTF-8 431.3187ms
2026-01-26 22:35:17.159 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - null null
2026-01-26 22:35:18.044 +03:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 394.2134 ms
2026-01-26 22:35:18.069 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 909.9226ms
2026-01-26 22:35:29.640 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/employees/7/contracts - null null
2026-01-26 22:35:29.645 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeeDetailsController.GetContracts (HRMS.API)'
2026-01-26 22:35:29.655 +03:00 [INF] Route matched with {action = "GetContracts", controller = "EmployeeDetails"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[HRMS.Application.DTOs.Personnel.ContractDto]]] GetContracts(Int32) on controller HRMS.API.Controllers.Personnel.EmployeeDetailsController (HRMS.API).
2026-01-26 22:35:35.507 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeeDetailsController.GetContracts (HRMS.API) in 5848.0912ms
2026-01-26 22:35:35.512 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeeDetailsController.GetContracts (HRMS.API)'
2026-01-26 22:35:35.551 +03:00 [ERR] An unhandled exception has occurred while executing the request.
AutoMapper.AutoMapperMappingException: Unable to create a map expression from Contract.IsRenewable (System.Byte) to Boolean.IsRenewable (System.Boolean)

Mapping types:
Contract -> ContractDto
HRMS.Core.Entities.Personnel.Contract -> HRMS.Application.DTOs.Personnel.ContractDto

Type Map configuration:
Contract -> ContractDto
HRMS.Core.Entities.Personnel.Contract -> HRMS.Application.DTOs.Personnel.ContractDto

Destination Member:
IsRenewable

   at System.Lazy`1.ViaFactory(LazyThreadSafetyMode mode)
--- End of stack trace from previous location ---
   at System.LazyHelper.ThrowException()
   at System.Lazy`1.CreateValue()
   at System.Lazy`1.get_Value()
   at HRMS.Application.Features.Personnel.Contracts.Queries.GetEmployeeContracts.GetEmployeeContractsQueryHandler.Handle(GetEmployeeContractsQuery request, CancellationToken cancellationToken)
   at HRMS.API.Controllers.Personnel.EmployeeDetailsController.GetContracts(Int32 employeeId) in G:\HRMS_Hospital\Backend\HRMS\HRMS.API\Controllers\Personnel\EmployeeDetailsController.cs:line 155
   at lambda_method314(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2026-01-26 22:35:35.582 +03:00 [ERR] HTTP GET /api/employees/7/contracts responded 500 in 5937.2081 ms
2026-01-26 22:35:35.585 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/employees/7/contracts - 500 null text/plain; charset=utf-8 5944.6169ms
2026-01-26 22:36:06.110 +03:00 [INF] üöÄ Starting HRMS Hospital API...
2026-01-26 22:36:09.468 +03:00 [INF] ‚úÖ HRMS Hospital API started successfully
2026-01-26 22:36:09.570 +03:00 [INF] User profile is available. Using 'C:\Users\MT\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-26 22:36:10.508 +03:00 [INF] Now listening on: https://localhost:5001
2026-01-26 22:36:11.428 +03:00 [INF] Now listening on: http://localhost:5000
2026-01-26 22:36:11.919 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - null null
2026-01-26 22:36:12.306 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-26 22:36:13.037 +03:00 [INF] Hosting environment: Development
2026-01-26 22:36:13.467 +03:00 [INF] Content root path: G:\HRMS_Hospital\Backend\HRMS\HRMS.API
2026-01-26 22:36:14.112 +03:00 [INF] HTTP GET /swagger/index.html responded 200 in 1200.7812 ms
2026-01-26 22:36:14.974 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - null null
2026-01-26 22:36:14.976 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_vs/browserLink - null null
2026-01-26 22:36:15.871 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - 200 null text/html;charset=utf-8 3910.5694ms
2026-01-26 22:36:15.881 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 908.3425ms
2026-01-26 22:36:16.249 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_vs/browserLink - 200 null text/javascript; charset=UTF-8 1273.2026ms
2026-01-26 22:36:17.404 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - null null
2026-01-26 22:36:18.426 +03:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 733.3587 ms
2026-01-26 22:36:18.434 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 1030.1429ms
2026-01-26 22:39:46.038 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/employees/1/contracts - application/json 344
2026-01-26 22:39:46.057 +03:00 [INF] CORS policy execution successful.
2026-01-26 22:39:46.128 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeeDetailsController.AddContract (HRMS.API)'
2026-01-26 22:39:46.184 +03:00 [INF] Route matched with {action = "AddContract", controller = "EmployeeDetails"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] AddContract(Int32, HRMS.Application.DTOs.Personnel.CreateContractDto) on controller HRMS.API.Controllers.Personnel.EmployeeDetailsController (HRMS.API).
2026-01-26 22:39:49.666 +03:00 [WRN] No store type was specified for the decimal property 'HoursCount' on entity type 'ShiftType'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-01-26 22:39:49.670 +03:00 [WRN] No store type was specified for the decimal property 'MaxSalary' on entity type 'JobGrade'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-01-26 22:39:49.672 +03:00 [WRN] No store type was specified for the decimal property 'MinSalary' on entity type 'JobGrade'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-01-26 22:39:51.690 +03:00 [INF] Executed DbCommand (111ms) [Parameters=[@__request_Data_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[COMPENSATION_ID], [e].[BANK_ID], [e].[BASIC_SALARY], [e].[CREATED_AT], [e].[CREATED_BY], [e].[EMPLOYEE_ID], [e].[HOUSING_ALLOWANCE], [e].[IBAN_NUMBER], [e].[IS_DELETED], [e].[MEDICAL_ALLOWANCE], [e].[OTHER_ALLOWANCES], [e].[TRANSPORT_ALLOWANCE], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEE_COMPENSATIONS] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__request_Data_EmployeeId_0
2026-01-26 22:39:52.337 +03:00 [INF] Executed DbCommand (181ms) [Parameters=[@p0='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 20), @p2='?' (Size = 50), @p3='?' (DbType = DateTime2), @p4='?' (Size = 50), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p7='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p8='?' (Size = 1) (DbType = Byte), @p9='?' (Size = 1) (DbType = Byte), @p10='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p11='?' (DbType = DateTime2), @p12='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (DbType = Int16), @p16='?' (DbType = Int32), @p17='?' (Size = 1) (DbType = Byte), @p18='?' (DbType = Int32), @p19='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p20='?' (DbType = DateTime2), @p21='?' (Size = 50), @p22='?' (DbType = Int32), @p23='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p24='?' (Size = 30), @p25='?' (Size = 1) (DbType = Byte), @p26='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p27='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p28='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p29='?' (DbType = DateTime2), @p30='?' (Size = 50), @p31='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [HR_PERSONNEL].[CONTRACTS] ([BASIC_SALARY], [CONTRACT_STATUS], [CONTRACT_TYPE], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [END_DATE], [HOUSING_ALLOWANCE], [IS_DELETED], [IS_RENEWABLE], [OTHER_ALLOWANCES], [START_DATE], [TRANSPORT_ALLOWANCE], [UPDATED_AT], [UPDATED_BY], [VACATION_DAYS], [VERSION_NO], [WORKING_HOURS_DAILY])
OUTPUT INSERTED.[CONTRACT_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_COMPENSATIONS] ([BANK_ID], [BASIC_SALARY], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [HOUSING_ALLOWANCE], [IBAN_NUMBER], [IS_DELETED], [MEDICAL_ALLOWANCE], [OTHER_ALLOWANCES], [TRANSPORT_ALLOWANCE], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[COMPENSATION_ID]
VALUES (@p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31);
2026-01-26 22:39:52.446 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'HRMS.Infrastructure.Data.HRMSDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_CONTRACTS_EMPLOYEES_EMPLOYEE_ID". The conflict occurred in database "HRMS_Hospital", table "HR_PERSONNEL.EMPLOYEES", column 'EMPLOYEE_ID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:22e84c92-babb-4e6b-88a1-f99e9b939d17
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_CONTRACTS_EMPLOYEES_EMPLOYEE_ID". The conflict occurred in database "HRMS_Hospital", table "HR_PERSONNEL.EMPLOYEES", column 'EMPLOYEE_ID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:22e84c92-babb-4e6b-88a1-f99e9b939d17
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2026-01-26 22:40:06.326 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeeDetailsController.AddContract (HRMS.API) in 20130.8277ms
2026-01-26 22:40:06.330 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeeDetailsController.AddContract (HRMS.API)'
2026-01-26 22:40:06.336 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_CONTRACTS_EMPLOYEES_EMPLOYEE_ID". The conflict occurred in database "HRMS_Hospital", table "HR_PERSONNEL.EMPLOYEES", column 'EMPLOYEE_ID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:22e84c92-babb-4e6b-88a1-f99e9b939d17
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at HRMS.Application.Features.Personnel.Contracts.Commands.CreateContract.CreateContractCommandHandler.Handle(CreateContractCommand request, CancellationToken cancellationToken) in G:\HRMS_Hospital\Backend\HRMS\HRMS.Application\Features\Personnel\Contracts\Commands\CreateContract\CreateContractCommand.cs:line 54
   at HRMS.API.Controllers.Personnel.EmployeeDetailsController.AddContract(Int32 employeeId, CreateContractDto dto) in G:\HRMS_Hospital\Backend\HRMS\HRMS.API\Controllers\Personnel\EmployeeDetailsController.cs:line 165
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2026-01-26 22:40:06.452 +03:00 [ERR] HTTP POST /api/employees/1/contracts responded 500 in 20401.8314 ms
2026-01-26 22:40:06.468 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/employees/1/contracts - 500 null text/plain; charset=utf-8 20429.9415ms
2026-01-26 22:40:39.074 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/employees/7/contracts - application/json 344
2026-01-26 22:40:39.085 +03:00 [INF] CORS policy execution successful.
2026-01-26 22:40:39.087 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeeDetailsController.AddContract (HRMS.API)'
2026-01-26 22:40:39.089 +03:00 [INF] Route matched with {action = "AddContract", controller = "EmployeeDetails"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] AddContract(Int32, HRMS.Application.DTOs.Personnel.CreateContractDto) on controller HRMS.API.Controllers.Personnel.EmployeeDetailsController (HRMS.API).
2026-01-26 22:40:39.429 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_Data_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[COMPENSATION_ID], [e].[BANK_ID], [e].[BASIC_SALARY], [e].[CREATED_AT], [e].[CREATED_BY], [e].[EMPLOYEE_ID], [e].[HOUSING_ALLOWANCE], [e].[IBAN_NUMBER], [e].[IS_DELETED], [e].[MEDICAL_ALLOWANCE], [e].[OTHER_ALLOWANCES], [e].[TRANSPORT_ALLOWANCE], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEE_COMPENSATIONS] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__request_Data_EmployeeId_0
2026-01-26 22:40:39.503 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 20), @p2='?' (Size = 50), @p3='?' (DbType = DateTime2), @p4='?' (Size = 50), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p7='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p8='?' (Size = 1) (DbType = Byte), @p9='?' (Size = 1) (DbType = Byte), @p10='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p11='?' (DbType = DateTime2), @p12='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (DbType = Int16), @p16='?' (DbType = Int32), @p17='?' (Size = 1) (DbType = Byte), @p22='?' (DbType = Int32), @p18='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p19='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p20='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p21='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p23='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [HR_PERSONNEL].[CONTRACTS] ([BASIC_SALARY], [CONTRACT_STATUS], [CONTRACT_TYPE], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [END_DATE], [HOUSING_ALLOWANCE], [IS_DELETED], [IS_RENEWABLE], [OTHER_ALLOWANCES], [START_DATE], [TRANSPORT_ALLOWANCE], [UPDATED_AT], [UPDATED_BY], [VACATION_DAYS], [VERSION_NO], [WORKING_HOURS_DAILY])
OUTPUT INSERTED.[CONTRACT_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
UPDATE [HR_PERSONNEL].[EMPLOYEE_COMPENSATIONS] SET [BASIC_SALARY] = @p18, [HOUSING_ALLOWANCE] = @p19, [OTHER_ALLOWANCES] = @p20, [TRANSPORT_ALLOWANCE] = @p21
OUTPUT 1
WHERE [COMPENSATION_ID] = @p22 AND [VERSION_NO] = @p23;
2026-01-26 22:40:39.580 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Int32'.
2026-01-26 22:40:39.590 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeeDetailsController.AddContract (HRMS.API) in 488.0456ms
2026-01-26 22:40:39.594 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeeDetailsController.AddContract (HRMS.API)'
2026-01-26 22:40:39.596 +03:00 [INF] HTTP POST /api/employees/7/contracts responded 200 in 511.8926 ms
2026-01-26 22:40:39.600 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/employees/7/contracts - 200 null application/json; charset=utf-8 525.3968ms
2026-01-26 22:42:40.116 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/employees/8/contracts - application/json 344
2026-01-26 22:42:40.120 +03:00 [INF] CORS policy execution successful.
2026-01-26 22:42:40.121 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeeDetailsController.AddContract (HRMS.API)'
2026-01-26 22:42:40.123 +03:00 [INF] Route matched with {action = "AddContract", controller = "EmployeeDetails"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] AddContract(Int32, HRMS.Application.DTOs.Personnel.CreateContractDto) on controller HRMS.API.Controllers.Personnel.EmployeeDetailsController (HRMS.API).
2026-01-26 22:42:40.176 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__request_Data_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[COMPENSATION_ID], [e].[BANK_ID], [e].[BASIC_SALARY], [e].[CREATED_AT], [e].[CREATED_BY], [e].[EMPLOYEE_ID], [e].[HOUSING_ALLOWANCE], [e].[IBAN_NUMBER], [e].[IS_DELETED], [e].[MEDICAL_ALLOWANCE], [e].[OTHER_ALLOWANCES], [e].[TRANSPORT_ALLOWANCE], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEE_COMPENSATIONS] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__request_Data_EmployeeId_0
2026-01-26 22:42:40.196 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 20), @p2='?' (Size = 50), @p3='?' (DbType = DateTime2), @p4='?' (Size = 50), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p7='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p8='?' (Size = 1) (DbType = Byte), @p9='?' (Size = 1) (DbType = Byte), @p10='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p11='?' (DbType = DateTime2), @p12='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (DbType = Int16), @p16='?' (DbType = Int32), @p17='?' (Size = 1) (DbType = Byte), @p18='?' (DbType = Int32), @p19='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p20='?' (DbType = DateTime2), @p21='?' (Size = 50), @p22='?' (DbType = Int32), @p23='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p24='?' (Size = 30), @p25='?' (Size = 1) (DbType = Byte), @p26='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p27='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p28='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p29='?' (DbType = DateTime2), @p30='?' (Size = 50), @p31='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [HR_PERSONNEL].[CONTRACTS] ([BASIC_SALARY], [CONTRACT_STATUS], [CONTRACT_TYPE], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [END_DATE], [HOUSING_ALLOWANCE], [IS_DELETED], [IS_RENEWABLE], [OTHER_ALLOWANCES], [START_DATE], [TRANSPORT_ALLOWANCE], [UPDATED_AT], [UPDATED_BY], [VACATION_DAYS], [VERSION_NO], [WORKING_HOURS_DAILY])
OUTPUT INSERTED.[CONTRACT_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_COMPENSATIONS] ([BANK_ID], [BASIC_SALARY], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [HOUSING_ALLOWANCE], [IBAN_NUMBER], [IS_DELETED], [MEDICAL_ALLOWANCE], [OTHER_ALLOWANCES], [TRANSPORT_ALLOWANCE], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[COMPENSATION_ID]
VALUES (@p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31);
2026-01-26 22:42:40.219 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'HRMS.Infrastructure.Data.HRMSDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_CONTRACTS_EMPLOYEES_EMPLOYEE_ID". The conflict occurred in database "HRMS_Hospital", table "HR_PERSONNEL.EMPLOYEES", column 'EMPLOYEE_ID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:22e84c92-babb-4e6b-88a1-f99e9b939d17
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_CONTRACTS_EMPLOYEES_EMPLOYEE_ID". The conflict occurred in database "HRMS_Hospital", table "HR_PERSONNEL.EMPLOYEES", column 'EMPLOYEE_ID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:22e84c92-babb-4e6b-88a1-f99e9b939d17
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2026-01-26 22:43:23.671 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeeDetailsController.AddContract (HRMS.API) in 43544.8638ms
2026-01-26 22:43:23.687 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeeDetailsController.AddContract (HRMS.API)'
2026-01-26 22:43:23.691 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_CONTRACTS_EMPLOYEES_EMPLOYEE_ID". The conflict occurred in database "HRMS_Hospital", table "HR_PERSONNEL.EMPLOYEES", column 'EMPLOYEE_ID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:22e84c92-babb-4e6b-88a1-f99e9b939d17
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at HRMS.Application.Features.Personnel.Contracts.Commands.CreateContract.CreateContractCommandHandler.Handle(CreateContractCommand request, CancellationToken cancellationToken) in G:\HRMS_Hospital\Backend\HRMS\HRMS.Application\Features\Personnel\Contracts\Commands\CreateContract\CreateContractCommand.cs:line 54
   at HRMS.API.Controllers.Personnel.EmployeeDetailsController.AddContract(Int32 employeeId, CreateContractDto dto) in G:\HRMS_Hospital\Backend\HRMS\HRMS.API\Controllers\Personnel\EmployeeDetailsController.cs:line 165
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2026-01-26 22:43:23.806 +03:00 [ERR] HTTP POST /api/employees/8/contracts responded 500 in 43686.0491 ms
2026-01-26 22:43:23.816 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/employees/8/contracts - 500 null text/plain; charset=utf-8 43700.0711ms
2026-01-26 22:43:45.067 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/employees/7/contracts/renew - application/json 208
2026-01-26 22:43:45.078 +03:00 [INF] CORS policy execution successful.
2026-01-26 22:43:45.080 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeeDetailsController.RenewContract (HRMS.API)'
2026-01-26 22:43:45.093 +03:00 [INF] Route matched with {action = "RenewContract", controller = "EmployeeDetails"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] RenewContract(Int32, HRMS.Application.DTOs.Personnel.RenewContractDto) on controller HRMS.API.Controllers.Personnel.EmployeeDetailsController (HRMS.API).
2026-01-26 22:43:45.160 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@__request_Data_ContractId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CONTRACT_ID], [c].[BASIC_SALARY], [c].[CONTRACT_STATUS], [c].[CONTRACT_TYPE], [c].[CREATED_AT], [c].[CREATED_BY], [c].[EMPLOYEE_ID], [c].[END_DATE], [c].[HOUSING_ALLOWANCE], [c].[IS_DELETED], [c].[IS_RENEWABLE], [c].[OTHER_ALLOWANCES], [c].[START_DATE], [c].[TRANSPORT_ALLOWANCE], [c].[UPDATED_AT], [c].[UPDATED_BY], [c].[VACATION_DAYS], [c].[VERSION_NO], [c].[WORKING_HOURS_DAILY]
FROM [HR_PERSONNEL].[CONTRACTS] AS [c]
WHERE [c].[CONTRACT_ID] = @__request_Data_ContractId_0
2026-01-26 22:43:45.260 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (Size = 1) (DbType = Byte), @p7='?' (DbType = DateTime2), @p8='?' (DbType = DateTime2), @p9='?' (Size = 500), @p10='?' (DbType = DateTime2), @p11='?' (DbType = DateTime2), @p12='?' (DbType = DateTime2), @p13='?' (Size = 50), @p14='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [HR_PERSONNEL].[CONTRACTS] SET [END_DATE] = @p0
OUTPUT 1
WHERE [CONTRACT_ID] = @p1 AND [VERSION_NO] = @p2;
INSERT INTO [HR_PERSONNEL].[CONTRACT_RENEWALS] ([CONTRACT_ID], [CREATED_AT], [CREATED_BY], [IS_DELETED], [NEW_END_DATE], [NEW_START_DATE], [NOTES], [OLD_END_DATE], [RENEWAL_DATE], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[RENEWAL_ID]
VALUES (@p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2026-01-26 22:43:45.271 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Int32'.
2026-01-26 22:43:45.273 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeeDetailsController.RenewContract (HRMS.API) in 176.1295ms
2026-01-26 22:43:45.276 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeeDetailsController.RenewContract (HRMS.API)'
2026-01-26 22:43:45.278 +03:00 [INF] HTTP POST /api/employees/7/contracts/renew responded 200 in 199.8599 ms
2026-01-26 22:43:45.281 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/employees/7/contracts/renew - 200 null application/json; charset=utf-8 214.1363ms
2026-01-26 22:52:40.247 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - null null
2026-01-26 22:52:40.274 +03:00 [INF] HTTP GET /swagger/index.html responded 200 in 1.6282 ms
2026-01-26 22:52:40.357 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - null null
2026-01-26 22:52:40.384 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_vs/browserLink - null null
2026-01-26 22:52:40.665 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - 200 null text/html;charset=utf-8 418.736ms
2026-01-26 22:52:40.670 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 312.7024ms
2026-01-26 22:52:40.940 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_vs/browserLink - 200 null text/javascript; charset=UTF-8 556.257ms
2026-01-26 22:52:41.397 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - null null
2026-01-26 22:52:43.002 +03:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 357.9120 ms
2026-01-26 22:52:43.007 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 1610.5484ms
2026-01-26 22:53:23.989 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/employees/8/contracts - application/json 344
2026-01-26 22:53:24.004 +03:00 [INF] CORS policy execution successful.
2026-01-26 22:53:24.007 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeeDetailsController.AddContract (HRMS.API)'
2026-01-26 22:53:24.027 +03:00 [INF] Route matched with {action = "AddContract", controller = "EmployeeDetails"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] AddContract(Int32, HRMS.Application.DTOs.Personnel.CreateContractDto) on controller HRMS.API.Controllers.Personnel.EmployeeDetailsController (HRMS.API).
2026-01-26 22:53:24.204 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__request_Data_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
        WHERE [e].[EMPLOYEE_ID] = @__request_Data_EmployeeId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-26 22:53:30.227 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeeDetailsController.AddContract (HRMS.API) in 6117.3196ms
2026-01-26 22:53:30.286 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeeDetailsController.AddContract (HRMS.API)'
2026-01-26 22:53:30.290 +03:00 [ERR] An unhandled exception has occurred while executing the request.
HRMS.Application.Exceptions.NotFoundException: Employee 8 not found.
   at HRMS.Application.Features.Personnel.Contracts.Commands.CreateContract.CreateContractCommandHandler.Handle(CreateContractCommand request, CancellationToken cancellationToken)
   at HRMS.API.Controllers.Personnel.EmployeeDetailsController.AddContract(Int32 employeeId, CreateContractDto dto)
   at lambda_method611(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2026-01-26 22:53:30.318 +03:00 [ERR] HTTP POST /api/employees/8/contracts responded 500 in 6314.5031 ms
2026-01-26 22:53:30.346 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/employees/8/contracts - 500 null text/plain; charset=utf-8 6357.4987ms
2026-01-26 22:54:14.378 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/employees/7/contracts - null null
2026-01-26 22:54:14.387 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeeDetailsController.GetContracts (HRMS.API)'
2026-01-26 22:54:14.402 +03:00 [INF] Route matched with {action = "GetContracts", controller = "EmployeeDetails"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[HRMS.Application.DTOs.Personnel.ContractDto]]] GetContracts(Int32) on controller HRMS.API.Controllers.Personnel.EmployeeDetailsController (HRMS.API).
2026-01-26 22:54:14.545 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CONTRACT_ID] AS [ContractId], [c].[EMPLOYEE_ID] AS [EmployeeId], [c].[CONTRACT_TYPE] AS [ContractType], [c].[START_DATE] AS [StartDate], [c].[END_DATE] AS [EndDate], [c].[IS_RENEWABLE] AS [IsRenewable], [c].[BASIC_SALARY] AS [BasicSalary], [c].[HOUSING_ALLOWANCE] AS [HousingAllowance], [c].[TRANSPORT_ALLOWANCE] AS [TransportAllowance], [c].[OTHER_ALLOWANCES] AS [OtherAllowances], [c].[VACATION_DAYS] AS [VacationDays], [c].[WORKING_HOURS_DAILY] AS [WorkingHoursDaily], [c].[CONTRACT_STATUS] AS [ContractStatus]
FROM [HR_PERSONNEL].[CONTRACTS] AS [c]
WHERE [c].[EMPLOYEE_ID] = @__request_EmployeeId_0
2026-01-26 22:54:14.567 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HRMS.Application.DTOs.Personnel.ContractDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-26 22:54:14.598 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeeDetailsController.GetContracts (HRMS.API) in 179.7058ms
2026-01-26 22:54:14.611 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeeDetailsController.GetContracts (HRMS.API)'
2026-01-26 22:54:14.613 +03:00 [INF] HTTP GET /api/employees/7/contracts responded 200 in 226.1416 ms
2026-01-26 22:54:14.615 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/employees/7/contracts - 200 null application/json; charset=utf-8 237.837ms
2026-01-26 23:04:53.581 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Employees - application/json 3854
2026-01-26 23:04:53.585 +03:00 [INF] CORS policy execution successful.
2026-01-26 23:04:53.587 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.Create (HRMS.API)'
2026-01-26 23:04:53.598 +03:00 [INF] Route matched with {action = "Create", controller = "Employees"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] Create(HRMS.Application.DTOs.Personnel.CreateEmployeeDto) on controller HRMS.API.Controllers.Personnel.EmployeesController (HRMS.API).
2026-01-26 23:04:54.058 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__ToString_0_startswith='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
WHERE [e].[EMPLOYEE_NUMBER] LIKE @__ToString_0_startswith ESCAPE N'\'
ORDER BY [e].[EMPLOYEE_NUMBER] DESC
2026-01-26 23:04:54.989 +03:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2026-01-26 23:04:55.024 +03:00 [INF] Executed DbCommand (33ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?' (Size = 100), @p5='?' (Size = 20), @p6='?' (Size = 50), @p7='?' (Size = 200), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2), @p10='?' (Size = 1) (DbType = Byte), @p11='?' (DbType = Int32), @p12='?' (Size = 50), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (DbType = Int32), @p16='?' (Size = 20), @p17='?' (Size = 20), @p18='?' (Size = 20), @p19='?' (DbType = Int32), @p20='?' (Size = 50), @p21='?' (Size = 100), @p22='?' (Size = 50), @p23='?' (DbType = DateTime2), @p24='?' (Size = 50), @p25='?' (Size = 450), @p26='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_PERSONNEL].[EMPLOYEES] ([BIRTH_DATE], [CREATED_AT], [CREATED_BY], [DEPARTMENT_ID], [EMAIL], [EMPLOYEE_NUMBER], [FIRST_NAME_AR], [FULL_NAME_EN], [GENDER], [HIRE_DATE], [IS_DELETED], [JOB_ID], [LAST_NAME_AR], [LICENSE_EXPIRY_DATE], [LICENSE_NUMBER], [MANAGER_ID], [MARITAL_STATUS], [MOBILE], [NATIONAL_ID], [NATIONALITY_ID], [SECOND_NAME_AR], [SPECIALTY], [THIRD_NAME_AR], [UPDATED_AT], [UPDATED_BY], [USER_ID], [VERSION_NO])
OUTPUT INSERTED.[EMPLOYEE_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26);
2026-01-26 23:04:55.039 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'HRMS.Infrastructure.Data.HRMSDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): String or binary data would be truncated in table 'HRMS_Hospital.HR_PERSONNEL.EMPLOYEES', column 'GENDER'. Truncated value: 'M'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:40dba97e-6e28-4b24-b0cb-b81315564ed3
Error Number:2628,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): String or binary data would be truncated in table 'HRMS_Hospital.HR_PERSONNEL.EMPLOYEES', column 'GENDER'. Truncated value: 'M'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:40dba97e-6e28-4b24-b0cb-b81315564ed3
Error Number:2628,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2026-01-26 23:05:06.979 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeesController.Create (HRMS.API) in 13375.7214ms
2026-01-26 23:05:06.986 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.Create (HRMS.API)'
2026-01-26 23:05:06.996 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): String or binary data would be truncated in table 'HRMS_Hospital.HR_PERSONNEL.EMPLOYEES', column 'GENDER'. Truncated value: 'M'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:40dba97e-6e28-4b24-b0cb-b81315564ed3
Error Number:2628,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at HRMS.Application.Features.Personnel.Employees.Commands.CreateEmployee.CreateEmployeeCommandHandler.Handle(CreateEmployeeCommand request, CancellationToken cancellationToken)
   at HRMS.Application.Features.Personnel.Employees.Commands.CreateEmployee.CreateEmployeeCommandHandler.Handle(CreateEmployeeCommand request, CancellationToken cancellationToken)
   at HRMS.API.Controllers.Personnel.EmployeesController.Create(CreateEmployeeDto dto)
   at lambda_method635(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2026-01-26 23:05:07.195 +03:00 [ERR] HTTP POST /api/Employees responded 500 in 13609.4455 ms
2026-01-26 23:05:07.200 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Employees - 500 null text/plain; charset=utf-8 13618.9679ms
2026-01-26 23:05:33.901 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Employees - application/json 3851
2026-01-26 23:05:33.907 +03:00 [INF] CORS policy execution successful.
2026-01-26 23:05:33.910 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.Create (HRMS.API)'
2026-01-26 23:05:33.912 +03:00 [INF] Route matched with {action = "Create", controller = "Employees"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] Create(HRMS.Application.DTOs.Personnel.CreateEmployeeDto) on controller HRMS.API.Controllers.Personnel.EmployeesController (HRMS.API).
2026-01-26 23:05:33.966 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@__ToString_0_startswith='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
WHERE [e].[EMPLOYEE_NUMBER] LIKE @__ToString_0_startswith ESCAPE N'\'
ORDER BY [e].[EMPLOYEE_NUMBER] DESC
2026-01-26 23:05:33.977 +03:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2026-01-26 23:05:33.996 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?' (Size = 100), @p5='?' (Size = 20), @p6='?' (Size = 50), @p7='?' (Size = 200), @p8='?' (Size = 1), @p9='?' (DbType = DateTime2), @p10='?' (Size = 1) (DbType = Byte), @p11='?' (DbType = Int32), @p12='?' (Size = 50), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (DbType = Int32), @p16='?' (Size = 20), @p17='?' (Size = 20), @p18='?' (Size = 20), @p19='?' (DbType = Int32), @p20='?' (Size = 50), @p21='?' (Size = 100), @p22='?' (Size = 50), @p23='?' (DbType = DateTime2), @p24='?' (Size = 50), @p25='?' (Size = 450), @p26='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_PERSONNEL].[EMPLOYEES] ([BIRTH_DATE], [CREATED_AT], [CREATED_BY], [DEPARTMENT_ID], [EMAIL], [EMPLOYEE_NUMBER], [FIRST_NAME_AR], [FULL_NAME_EN], [GENDER], [HIRE_DATE], [IS_DELETED], [JOB_ID], [LAST_NAME_AR], [LICENSE_EXPIRY_DATE], [LICENSE_NUMBER], [MANAGER_ID], [MARITAL_STATUS], [MOBILE], [NATIONAL_ID], [NATIONALITY_ID], [SECOND_NAME_AR], [SPECIALTY], [THIRD_NAME_AR], [UPDATED_AT], [UPDATED_BY], [USER_ID], [VERSION_NO])
OUTPUT INSERTED.[EMPLOYEE_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26);
2026-01-26 23:05:34.011 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'HRMS.Infrastructure.Data.HRMSDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_EMPLOYEES_COUNTRIES_NATIONALITY_ID". The conflict occurred in database "HRMS_Hospital", table "HR_CORE.COUNTRIES", column 'COUNTRY_ID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:40dba97e-6e28-4b24-b0cb-b81315564ed3
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_EMPLOYEES_COUNTRIES_NATIONALITY_ID". The conflict occurred in database "HRMS_Hospital", table "HR_CORE.COUNTRIES", column 'COUNTRY_ID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:40dba97e-6e28-4b24-b0cb-b81315564ed3
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2026-01-26 23:05:46.650 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeesController.Create (HRMS.API) in 12735.1543ms
2026-01-26 23:05:46.668 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.Create (HRMS.API)'
2026-01-26 23:05:46.671 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_EMPLOYEES_COUNTRIES_NATIONALITY_ID". The conflict occurred in database "HRMS_Hospital", table "HR_CORE.COUNTRIES", column 'COUNTRY_ID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:40dba97e-6e28-4b24-b0cb-b81315564ed3
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at HRMS.Application.Features.Personnel.Employees.Commands.CreateEmployee.CreateEmployeeCommandHandler.Handle(CreateEmployeeCommand request, CancellationToken cancellationToken)
   at HRMS.Application.Features.Personnel.Employees.Commands.CreateEmployee.CreateEmployeeCommandHandler.Handle(CreateEmployeeCommand request, CancellationToken cancellationToken)
   at HRMS.API.Controllers.Personnel.EmployeesController.Create(CreateEmployeeDto dto)
   at lambda_method635(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2026-01-26 23:05:46.746 +03:00 [ERR] HTTP POST /api/Employees responded 500 in 12838.8555 ms
2026-01-26 23:05:46.750 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Employees - 500 null text/plain; charset=utf-8 12849.1835ms
2026-01-26 23:06:25.956 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Employees - null null
2026-01-26 23:06:25.964 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.GetAll (HRMS.API)'
2026-01-26 23:06:25.981 +03:00 [INF] Route matched with {action = "GetAll", controller = "Employees"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Application.DTOs.Core.PagedResult`1[HRMS.Application.DTOs.Personnel.EmployeeListDto]]] GetAll(HRMS.Application.Features.Personnel.Employees.Queries.GetAllEmployees.GetAllEmployeesQuery) on controller HRMS.API.Controllers.Personnel.EmployeesController (HRMS.API).
2026-01-26 23:06:26.138 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
WHERE [e].[IS_DELETED] = CAST(0 AS tinyint)
2026-01-26 23:06:26.279 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [e0].[EMPLOYEE_ID], [e0].[EMPLOYEE_NUMBER], [e0].[FIRST_NAME_AR], [e0].[SECOND_NAME_AR], [e0].[LAST_NAME_AR], [e0].[FULL_NAME_EN], [d].[DEPT_NAME_AR], [j].[JOB_TITLE_AR], [e0].[MOBILE], [e0].[HIRE_DATE], ~CAST([e0].[IS_DELETED] ^ CAST(0 AS tinyint) AS bit)
FROM (
    SELECT [e].[EMPLOYEE_ID], [e].[CREATED_AT], [e].[DEPARTMENT_ID], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[MOBILE], [e].[SECOND_NAME_AR]
    FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
    WHERE [e].[IS_DELETED] = CAST(0 AS tinyint)
    ORDER BY [e].[CREATED_AT] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [e0]
INNER JOIN [HR_CORE].[DEPARTMENTS] AS [d] ON [e0].[DEPARTMENT_ID] = [d].[DEPT_ID]
INNER JOIN [HR_CORE].[JOBS] AS [j] ON [e0].[JOB_ID] = [j].[JOB_ID]
ORDER BY [e0].[CREATED_AT] DESC
2026-01-26 23:06:26.299 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Application.DTOs.Core.PagedResult`1[[HRMS.Application.DTOs.Personnel.EmployeeListDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-26 23:06:26.327 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeesController.GetAll (HRMS.API) in 339.9726ms
2026-01-26 23:06:26.337 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.GetAll (HRMS.API)'
2026-01-26 23:06:26.339 +03:00 [INF] HTTP GET /api/Employees responded 200 in 375.7652 ms
2026-01-26 23:06:26.342 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Employees - 200 null application/json; charset=utf-8 385.7512ms
2026-01-26 23:06:41.209 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Employees - application/json 3850
2026-01-26 23:06:41.213 +03:00 [INF] CORS policy execution successful.
2026-01-26 23:06:41.214 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.Create (HRMS.API)'
2026-01-26 23:06:41.216 +03:00 [INF] Route matched with {action = "Create", controller = "Employees"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] Create(HRMS.Application.DTOs.Personnel.CreateEmployeeDto) on controller HRMS.API.Controllers.Personnel.EmployeesController (HRMS.API).
2026-01-26 23:06:41.258 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__ToString_0_startswith='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
WHERE [e].[EMPLOYEE_NUMBER] LIKE @__ToString_0_startswith ESCAPE N'\'
ORDER BY [e].[EMPLOYEE_NUMBER] DESC
2026-01-26 23:06:41.275 +03:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2026-01-26 23:06:41.287 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?' (Size = 100), @p5='?' (Size = 20), @p6='?' (Size = 50), @p7='?' (Size = 200), @p8='?' (Size = 1), @p9='?' (DbType = DateTime2), @p10='?' (Size = 1) (DbType = Byte), @p11='?' (DbType = Int32), @p12='?' (Size = 50), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (DbType = Int32), @p16='?' (Size = 20), @p17='?' (Size = 20), @p18='?' (Size = 20), @p19='?' (DbType = Int32), @p20='?' (Size = 50), @p21='?' (Size = 100), @p22='?' (Size = 50), @p23='?' (DbType = DateTime2), @p24='?' (Size = 50), @p25='?' (Size = 450), @p26='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_PERSONNEL].[EMPLOYEES] ([BIRTH_DATE], [CREATED_AT], [CREATED_BY], [DEPARTMENT_ID], [EMAIL], [EMPLOYEE_NUMBER], [FIRST_NAME_AR], [FULL_NAME_EN], [GENDER], [HIRE_DATE], [IS_DELETED], [JOB_ID], [LAST_NAME_AR], [LICENSE_EXPIRY_DATE], [LICENSE_NUMBER], [MANAGER_ID], [MARITAL_STATUS], [MOBILE], [NATIONAL_ID], [NATIONALITY_ID], [SECOND_NAME_AR], [SPECIALTY], [THIRD_NAME_AR], [UPDATED_AT], [UPDATED_BY], [USER_ID], [VERSION_NO])
OUTPUT INSERTED.[EMPLOYEE_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26);
2026-01-26 23:06:41.297 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'HRMS.Infrastructure.Data.HRMSDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_EMPLOYEES_DEPARTMENTS_DEPARTMENT_ID". The conflict occurred in database "HRMS_Hospital", table "HR_CORE.DEPARTMENTS", column 'DEPT_ID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:40dba97e-6e28-4b24-b0cb-b81315564ed3
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_EMPLOYEES_DEPARTMENTS_DEPARTMENT_ID". The conflict occurred in database "HRMS_Hospital", table "HR_CORE.DEPARTMENTS", column 'DEPT_ID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:40dba97e-6e28-4b24-b0cb-b81315564ed3
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2026-01-26 23:06:49.099 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeesController.Create (HRMS.API) in 7874.0886ms
2026-01-26 23:06:49.126 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.Create (HRMS.API)'
2026-01-26 23:06:49.130 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_EMPLOYEES_DEPARTMENTS_DEPARTMENT_ID". The conflict occurred in database "HRMS_Hospital", table "HR_CORE.DEPARTMENTS", column 'DEPT_ID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:40dba97e-6e28-4b24-b0cb-b81315564ed3
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at HRMS.Application.Features.Personnel.Employees.Commands.CreateEmployee.CreateEmployeeCommandHandler.Handle(CreateEmployeeCommand request, CancellationToken cancellationToken)
   at HRMS.Application.Features.Personnel.Employees.Commands.CreateEmployee.CreateEmployeeCommandHandler.Handle(CreateEmployeeCommand request, CancellationToken cancellationToken)
   at HRMS.API.Controllers.Personnel.EmployeesController.Create(CreateEmployeeDto dto)
   at lambda_method635(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2026-01-26 23:06:49.191 +03:00 [ERR] HTTP POST /api/Employees responded 500 in 7978.3431 ms
2026-01-26 23:06:49.194 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Employees - 500 null text/plain; charset=utf-8 7984.956ms
2026-01-26 23:07:12.004 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Departments - null null
2026-01-26 23:07:12.016 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Core.DepartmentsController.GetAll (HRMS.API)'
2026-01-26 23:07:12.022 +03:00 [INF] Route matched with {action = "GetAll", controller = "Departments"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(HRMS.Application.Features.Core.Departments.Queries.GetAllDepartments.GetAllDepartmentsQuery) on controller HRMS.API.Controllers.Core.DepartmentsController (HRMS.API).
2026-01-26 23:07:12.146 +03:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [HR_CORE].[DEPARTMENTS] AS [d]
WHERE [d].[IS_DELETED] = CAST(0 AS tinyint)
2026-01-26 23:07:12.200 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d1].[DEPT_ID] AS [DeptId], [d1].[DEPT_NAME_AR] AS [DeptNameAr], [d1].[DEPT_NAME_EN] AS [DeptNameEn], [d1].[PARENT_DEPT_ID] AS [ParentDeptId], [d1].[COST_CENTER_CODE] AS [CostCenterCode], [d1].[MANAGER_ID] AS [ManagerId], [d1].[IS_ACTIVE] AS [IsActive], [d0].[DEPT_NAME_AR] AS [ParentDeptNameAr]
FROM (
    SELECT [d].[DEPT_ID], [d].[COST_CENTER_CODE], [d].[DEPT_NAME_AR], [d].[DEPT_NAME_EN], [d].[IS_ACTIVE], [d].[MANAGER_ID], [d].[PARENT_DEPT_ID]
    FROM [HR_CORE].[DEPARTMENTS] AS [d]
    WHERE [d].[IS_DELETED] = CAST(0 AS tinyint)
    ORDER BY [d].[DEPT_NAME_AR]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d1]
LEFT JOIN [HR_CORE].[DEPARTMENTS] AS [d0] ON [d1].[PARENT_DEPT_ID] = [d0].[DEPT_ID]
ORDER BY [d1].[DEPT_NAME_AR]
2026-01-26 23:07:12.213 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[HRMS.Application.DTOs.Core.PagedResult`1[[HRMS.Application.DTOs.Core.DepartmentDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-26 23:07:12.241 +03:00 [INF] Executed action HRMS.API.Controllers.Core.DepartmentsController.GetAll (HRMS.API) in 215.1711ms
2026-01-26 23:07:12.244 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Core.DepartmentsController.GetAll (HRMS.API)'
2026-01-26 23:07:12.246 +03:00 [INF] HTTP GET /api/Departments responded 200 in 231.5497 ms
2026-01-26 23:07:12.249 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Departments - 200 null application/json; charset=utf-8 245.1737ms
2026-01-26 23:07:39.807 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Employees - application/json 3850
2026-01-26 23:07:39.818 +03:00 [INF] CORS policy execution successful.
2026-01-26 23:07:39.819 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.Create (HRMS.API)'
2026-01-26 23:07:39.821 +03:00 [INF] Route matched with {action = "Create", controller = "Employees"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] Create(HRMS.Application.DTOs.Personnel.CreateEmployeeDto) on controller HRMS.API.Controllers.Personnel.EmployeesController (HRMS.API).
2026-01-26 23:07:39.839 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__ToString_0_startswith='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
WHERE [e].[EMPLOYEE_NUMBER] LIKE @__ToString_0_startswith ESCAPE N'\'
ORDER BY [e].[EMPLOYEE_NUMBER] DESC
2026-01-26 23:07:39.860 +03:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2026-01-26 23:07:39.870 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?' (Size = 100), @p5='?' (Size = 20), @p6='?' (Size = 50), @p7='?' (Size = 200), @p8='?' (Size = 1), @p9='?' (DbType = DateTime2), @p10='?' (Size = 1) (DbType = Byte), @p11='?' (DbType = Int32), @p12='?' (Size = 50), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (DbType = Int32), @p16='?' (Size = 20), @p17='?' (Size = 20), @p18='?' (Size = 20), @p19='?' (DbType = Int32), @p20='?' (Size = 50), @p21='?' (Size = 100), @p22='?' (Size = 50), @p23='?' (DbType = DateTime2), @p24='?' (Size = 50), @p25='?' (Size = 450), @p26='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_PERSONNEL].[EMPLOYEES] ([BIRTH_DATE], [CREATED_AT], [CREATED_BY], [DEPARTMENT_ID], [EMAIL], [EMPLOYEE_NUMBER], [FIRST_NAME_AR], [FULL_NAME_EN], [GENDER], [HIRE_DATE], [IS_DELETED], [JOB_ID], [LAST_NAME_AR], [LICENSE_EXPIRY_DATE], [LICENSE_NUMBER], [MANAGER_ID], [MARITAL_STATUS], [MOBILE], [NATIONAL_ID], [NATIONALITY_ID], [SECOND_NAME_AR], [SPECIALTY], [THIRD_NAME_AR], [UPDATED_AT], [UPDATED_BY], [USER_ID], [VERSION_NO])
OUTPUT INSERTED.[EMPLOYEE_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26);
2026-01-26 23:07:39.985 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@p27='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p28='?' (Size = 20), @p29='?' (Size = 50), @p30='?' (DbType = DateTime2), @p31='?' (Size = 50), @p32='?' (DbType = Int32), @p33='?' (DbType = DateTime2), @p34='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p35='?' (Size = 1) (DbType = Byte), @p36='?' (Size = 1) (DbType = Byte), @p37='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p38='?' (DbType = DateTime2), @p39='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p40='?' (DbType = DateTime2), @p41='?' (Size = 50), @p42='?' (DbType = Int16), @p43='?' (DbType = Int32), @p44='?' (Size = 1) (DbType = Byte), @p45='?' (DbType = DateTime2), @p46='?' (DbType = DateTime2), @p47='?' (Size = 50), @p48='?' (DbType = Int32), @p49='?' (Size = 1) (DbType = Byte), @p50='?' (Size = 1) (DbType = Byte), @p51='?' (Size = 1) (DbType = Byte), @p52='?' (Size = 100), @p53='?' (Size = 20), @p54='?' (Size = 50), @p55='?' (DbType = DateTime2), @p56='?' (Size = 50), @p57='?' (DbType = Int32), @p58='?' (Size = 100), @p59='?' (DbType = DateTime2), @p60='?' (Size = 50), @p61='?' (DbType = Int32), @p62='?' (Size = 1) (DbType = Byte), @p63='?' (Size = 1) (DbType = Byte), @p64='?' (Size = 20), @p65='?' (Size = 20), @p66='?' (Size = 50), @p67='?' (DbType = DateTime2), @p68='?' (Size = 50), @p69='?' (DbType = Int32), @p70='?' (Size = 20), @p71='?' (Size = 20), @p72='?' (DbType = Int32), @p73='?' (DbType = DateTime2), @p74='?' (Size = 50), @p75='?' (Size = 100), @p76='?' (DbType = Int32), @p77='?' (Size = 1) (DbType = Byte), @p78='?' (Size = 20), @p79='?' (Size = 200), @p80='?' (DbType = DateTime2), @p81='?' (Size = 50), @p82='?' (DbType = Int32), @p83='?' (Size = 50), @p84='?' (DbType = Int32), @p85='?' (DbType = DateTime2), @p86='?' (Size = 50), @p87='?' (DbType = Int32), @p88='?' (Size = 50), @p89='?' (Size = 1) (DbType = Byte), @p90='?' (Size = 1) (DbType = Byte), @p91='?' (Size = 1) (DbType = Byte), @p92='?' (DbType = DateTime2), @p93='?' (Size = 50), @p94='?' (DbType = Int32), @p95='?' (Size = 500), @p96='?' (Size = 200), @p97='?' (Size = 100), @p98='?' (DbType = DateTime2), @p99='?' (Size = 50), @p100='?' (DbType = Int32), @p101='?' (DbType = DateTime2), @p102='?' (Size = 1) (DbType = Byte), @p103='?' (Size = 1) (DbType = Byte), @p104='?' (DbType = DateTime2), @p105='?' (Size = 200), @p106='?' (DbType = DateTime2), @p107='?' (Size = 50), @p108='?' (DbType = Int32), @p109='?' (DbType = Int32), @p110='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p111='?' (DbType = DateTime2), @p112='?' (Size = 50), @p113='?' (DbType = Int32), @p114='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p115='?' (Size = 30), @p116='?' (Size = 1) (DbType = Byte), @p117='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p118='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p119='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p120='?' (DbType = DateTime2), @p121='?' (Size = 50), @p122='?' (DbType = Int32), @p123='?' (Size = 100), @p124='?' (DbType = DateTime2), @p125='?' (Size = 50), @p126='?' (Size = 50), @p127='?' (DbType = Int32), @p128='?' (DbType = Int32), @p129='?' (DbType = DateTime2), @p130='?' (Size = 255), @p131='?' (Size = 500), @p132='?' (DbType = Int64), @p133='?' (Size = 1) (DbType = Byte), @p134='?' (DbType = DateTime2), @p135='?' (DbType = DateTime2), @p136='?' (Size = 50), @p137='?' (DbType = Int32), @p138='?' (Size = 200), @p139='?' (DbType = DateTime2), @p140='?' (Size = 50), @p141='?' (DbType = Int32), @p142='?' (DbType = DateTime2), @p143='?' (Size = 1) (DbType = Byte), @p144='?' (Size = 1) (DbType = Byte), @p145='?' (Size = 100), @p146='?' (Size = 200), @p147='?' (Size = 500), @p148='?' (DbType = DateTime2), @p149='?' (DbType = DateTime2), @p150='?' (Size = 50), @p151='?' (DbType = Int32), @p152='?' (Size = 500), @p153='?' (DbType = Int32), @p154='?' (DbType = DateTime2), @p155='?' (Size = 50), @p156='?' (Size = 50), @p157='?' (DbType = Int32), @p158='?' (Size = 20), @p159='?' (DbType = Int16), @p160='?' (Size = 1) (DbType = Byte), @p161='?' (Size = 100), @p162='?' (Size = 200), @p163='?' (DbType = DateTime2), @p164='?' (Size = 50), @p165='?' (DbType = Int32), @p166='?' (Size = 500), @p167='?' (DbType = Int32), @p168='?' (DbType = DateTime2), @p169='?' (Size = 50), @p170='?' (Size = 50), @p171='?' (DbType = Int32), @p172='?' (Size = 20), @p173='?' (DbType = Int16), @p174='?' (Size = 1) (DbType = Byte), @p175='?' (Size = 100), @p176='?' (Size = 200), @p177='?' (DbType = DateTime2), @p178='?' (Size = 50), @p179='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [HR_PERSONNEL].[CONTRACTS] ([BASIC_SALARY], [CONTRACT_STATUS], [CONTRACT_TYPE], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [END_DATE], [HOUSING_ALLOWANCE], [IS_DELETED], [IS_RENEWABLE], [OTHER_ALLOWANCES], [START_DATE], [TRANSPORT_ALLOWANCE], [UPDATED_AT], [UPDATED_BY], [VACATION_DAYS], [VERSION_NO], [WORKING_HOURS_DAILY])
OUTPUT INSERTED.[CONTRACT_ID]
VALUES (@p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44);
INSERT INTO [HR_PERSONNEL].[DEPENDENTS] ([BIRTH_DATE], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [IS_DELETED], [IS_ELIGIBLE_FOR_INSURANCE], [IS_ELIGIBLE_FOR_TICKET], [NAME_AR], [NATIONAL_ID], [RELATIONSHIP], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[DEPENDENT_ID]
VALUES (@p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57);
INSERT INTO [HR_PERSONNEL].[EMERGENCY_CONTACTS] ([CONTACT_NAME_AR], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [IS_DELETED], [IS_PRIMARY], [PHONE_PRIMARY], [PHONE_SECONDARY], [RELATIONSHIP], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[CONTACT_ID]
VALUES (@p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65, @p66, @p67, @p68, @p69);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_ADDRESSES] ([ADDRESS_TYPE], [BUILDING_NO], [CITY_ID], [CREATED_AT], [CREATED_BY], [DISTRICT], [EMPLOYEE_ID], [IS_DELETED], [POSTAL_CODE], [STREET], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[ADDRESS_ID]
VALUES (@p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79, @p80, @p81, @p82);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_BANK_ACCOUNTS] ([ACCOUNT_NUMBER], [BANK_ID], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [IBAN], [IS_ACTIVE], [IS_DELETED], [IS_PRIMARY], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[ACCOUNT_ID]
VALUES (@p83, @p84, @p85, @p86, @p87, @p88, @p89, @p90, @p91, @p92, @p93, @p94);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_CERTIFICATIONS] ([ATTACHMENT_PATH], [CERT_NAME_AR], [CERT_NUMBER], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [EXPIRY_DATE], [IS_DELETED], [IS_MANDATORY], [ISSUE_DATE], [ISSUING_AUTHORITY], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[CERT_ID]
VALUES (@p95, @p96, @p97, @p98, @p99, @p100, @p101, @p102, @p103, @p104, @p105, @p106, @p107, @p108);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_COMPENSATIONS] ([BANK_ID], [BASIC_SALARY], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [HOUSING_ALLOWANCE], [IBAN_NUMBER], [IS_DELETED], [MEDICAL_ALLOWANCE], [OTHER_ALLOWANCES], [TRANSPORT_ALLOWANCE], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[COMPENSATION_ID]
VALUES (@p109, @p110, @p111, @p112, @p113, @p114, @p115, @p116, @p117, @p118, @p119, @p120, @p121, @p122);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_DOCUMENTS] ([CONTENT_TYPE], [CREATED_AT], [CREATED_BY], [DOCUMENT_NUMBER], [DOCUMENT_TYPE_ID], [EMPLOYEE_ID], [EXPIRY_DATE], [FILE_NAME], [FILE_PATH], [FILE_SIZE], [IS_DELETED], [ISSUE_DATE], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[DOCUMENT_ID]
VALUES (@p123, @p124, @p125, @p126, @p127, @p128, @p129, @p130, @p131, @p132, @p133, @p134, @p135, @p136, @p137);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_EXPERIENCES] ([COMPANY_NAME_AR], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [END_DATE], [IS_CURRENT], [IS_DELETED], [JOB_TITLE_AR], [REASON_FOR_LEAVING], [RESPONSIBILITIES], [START_DATE], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[EXPERIENCE_ID]
VALUES (@p138, @p139, @p140, @p141, @p142, @p143, @p144, @p145, @p146, @p147, @p148, @p149, @p150, @p151);
MERGE [HR_PERSONNEL].[EMPLOYEE_QUALIFICATIONS] USING (
VALUES (@p152, @p153, @p154, @p155, @p156, @p157, @p158, @p159, @p160, @p161, @p162, @p163, @p164, @p165, 0),
(@p166, @p167, @p168, @p169, @p170, @p171, @p172, @p173, @p174, @p175, @p176, @p177, @p178, @p179, 1)) AS i ([ATTACHMENT_PATH], [COUNTRY_ID], [CREATED_AT], [CREATED_BY], [DEGREE_TYPE], [EMPLOYEE_ID], [GRADE], [GRADUATION_YEAR], [IS_DELETED], [MAJOR_AR], [UNIVERSITY_AR], [UPDATED_AT], [UPDATED_BY], [VERSION_NO], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([ATTACHMENT_PATH], [COUNTRY_ID], [CREATED_AT], [CREATED_BY], [DEGREE_TYPE], [EMPLOYEE_ID], [GRADE], [GRADUATION_YEAR], [IS_DELETED], [MAJOR_AR], [UNIVERSITY_AR], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
VALUES (i.[ATTACHMENT_PATH], i.[COUNTRY_ID], i.[CREATED_AT], i.[CREATED_BY], i.[DEGREE_TYPE], i.[EMPLOYEE_ID], i.[GRADE], i.[GRADUATION_YEAR], i.[IS_DELETED], i.[MAJOR_AR], i.[UNIVERSITY_AR], i.[UPDATED_AT], i.[UPDATED_BY], i.[VERSION_NO])
OUTPUT INSERTED.[QUALIFICATION_ID], i._Position;
2026-01-26 23:07:40.013 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'HRMS.Infrastructure.Data.HRMSDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_EMPLOYEE_ADDRESSES_CITIES_CITY_ID". The conflict occurred in database "HRMS_Hospital", table "HR_CORE.CITIES", column 'CITY_ID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:40dba97e-6e28-4b24-b0cb-b81315564ed3
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_EMPLOYEE_ADDRESSES_CITIES_CITY_ID". The conflict occurred in database "HRMS_Hospital", table "HR_CORE.CITIES", column 'CITY_ID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:40dba97e-6e28-4b24-b0cb-b81315564ed3
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2026-01-26 23:07:52.495 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeesController.Create (HRMS.API) in 12670.8641ms
2026-01-26 23:07:52.501 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.Create (HRMS.API)'
2026-01-26 23:07:52.511 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_EMPLOYEE_ADDRESSES_CITIES_CITY_ID". The conflict occurred in database "HRMS_Hospital", table "HR_CORE.CITIES", column 'CITY_ID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:40dba97e-6e28-4b24-b0cb-b81315564ed3
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at HRMS.Application.Features.Personnel.Employees.Commands.CreateEmployee.CreateEmployeeCommandHandler.Handle(CreateEmployeeCommand request, CancellationToken cancellationToken)
   at HRMS.Application.Features.Personnel.Employees.Commands.CreateEmployee.CreateEmployeeCommandHandler.Handle(CreateEmployeeCommand request, CancellationToken cancellationToken)
   at HRMS.API.Controllers.Personnel.EmployeesController.Create(CreateEmployeeDto dto)
   at lambda_method635(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2026-01-26 23:07:52.578 +03:00 [ERR] HTTP POST /api/Employees responded 500 in 12759.6699 ms
2026-01-26 23:07:52.648 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Employees - 500 null text/plain; charset=utf-8 12840.972ms
2026-01-26 23:08:10.429 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Banks - null null
2026-01-26 23:08:10.434 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Core.BanksController.GetAll (HRMS.API)'
2026-01-26 23:08:10.442 +03:00 [INF] Route matched with {action = "GetAll", controller = "Banks"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(HRMS.Application.Features.Core.Banks.Queries.GetAllBanks.GetAllBanksQuery) on controller HRMS.API.Controllers.Core.BanksController (HRMS.API).
2026-01-26 23:08:10.490 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [HR_CORE].[BANKS] AS [b]
2026-01-26 23:08:10.548 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BANK_ID], [b].[BANK_NAME_AR], [b].[BANK_NAME_EN], [b].[SWIFT_CODE], [b].[BANK_CODE], [b].[ADDRESS], [b].[CREATED_AT], [b].[CREATED_BY], [b].[EMAIL], [b].[IS_DELETED], [b].[PHONE], [b].[UPDATED_AT], [b].[UPDATED_BY], [b].[VERSION_NO]
FROM [HR_CORE].[BANKS] AS [b]
ORDER BY [b].[BANK_NAME_AR]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2026-01-26 23:08:10.561 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Application.DTOs.Core.PagedResult`1[[HRMS.Application.DTOs.Core.BankListDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-26 23:08:10.577 +03:00 [INF] Executed action HRMS.API.Controllers.Core.BanksController.GetAll (HRMS.API) in 132.7617ms
2026-01-26 23:08:10.580 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Core.BanksController.GetAll (HRMS.API)'
2026-01-26 23:08:10.581 +03:00 [INF] HTTP GET /api/Banks responded 200 in 148.2814 ms
2026-01-26 23:08:10.584 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Banks - 200 null application/json; charset=utf-8 155.0625ms
2026-01-26 23:08:23.905 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Cities - null null
2026-01-26 23:08:23.909 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Core.CitiesController.GetAll (HRMS.API)'
2026-01-26 23:08:23.920 +03:00 [INF] Route matched with {action = "GetAll", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(HRMS.Application.Features.Core.Cities.Queries.GetAllCities.GetAllCitiesQuery) on controller HRMS.API.Controllers.Core.CitiesController (HRMS.API).
2026-01-26 23:08:23.975 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [HR_CORE].[CITIES] AS [c]
2026-01-26 23:08:24.022 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[CITY_ID], [c1].[CITY_NAME_AR], [c1].[CITY_NAME_EN], [c0].[COUNTRY_NAME_AR], [c1].[COUNTRY_ID], [c1].[CREATED_AT], [c1].[CREATED_BY], [c1].[IS_DELETED], [c1].[UPDATED_AT], [c1].[UPDATED_BY], [c1].[VERSION_NO]
FROM (
    SELECT [c].[CITY_ID], [c].[CITY_NAME_AR], [c].[CITY_NAME_EN], [c].[COUNTRY_ID], [c].[CREATED_AT], [c].[CREATED_BY], [c].[IS_DELETED], [c].[UPDATED_AT], [c].[UPDATED_BY], [c].[VERSION_NO]
    FROM [HR_CORE].[CITIES] AS [c]
    ORDER BY [c].[CITY_NAME_AR]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [c1]
INNER JOIN [HR_CORE].[COUNTRIES] AS [c0] ON [c1].[COUNTRY_ID] = [c0].[COUNTRY_ID]
ORDER BY [c1].[CITY_NAME_AR]
2026-01-26 23:08:24.036 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[HRMS.Application.DTOs.Core.PagedResult`1[[HRMS.Application.DTOs.Core.CityListDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-26 23:08:24.056 +03:00 [INF] Executed action HRMS.API.Controllers.Core.CitiesController.GetAll (HRMS.API) in 130.4708ms
2026-01-26 23:08:24.058 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Core.CitiesController.GetAll (HRMS.API)'
2026-01-26 23:08:24.060 +03:00 [INF] HTTP GET /api/Cities responded 200 in 151.1722 ms
2026-01-26 23:08:24.067 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Cities - 200 null application/json; charset=utf-8 162.198ms
2026-01-26 23:10:18.061 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Employees - application/json 3850
2026-01-26 23:10:18.072 +03:00 [INF] CORS policy execution successful.
2026-01-26 23:10:18.073 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.Create (HRMS.API)'
2026-01-26 23:10:18.075 +03:00 [INF] Route matched with {action = "Create", controller = "Employees"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] Create(HRMS.Application.DTOs.Personnel.CreateEmployeeDto) on controller HRMS.API.Controllers.Personnel.EmployeesController (HRMS.API).
2026-01-26 23:10:18.122 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__ToString_0_startswith='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
WHERE [e].[EMPLOYEE_NUMBER] LIKE @__ToString_0_startswith ESCAPE N'\'
ORDER BY [e].[EMPLOYEE_NUMBER] DESC
2026-01-26 23:10:18.131 +03:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2026-01-26 23:10:18.144 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?' (Size = 100), @p5='?' (Size = 20), @p6='?' (Size = 50), @p7='?' (Size = 200), @p8='?' (Size = 1), @p9='?' (DbType = DateTime2), @p10='?' (Size = 1) (DbType = Byte), @p11='?' (DbType = Int32), @p12='?' (Size = 50), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (DbType = Int32), @p16='?' (Size = 20), @p17='?' (Size = 20), @p18='?' (Size = 20), @p19='?' (DbType = Int32), @p20='?' (Size = 50), @p21='?' (Size = 100), @p22='?' (Size = 50), @p23='?' (DbType = DateTime2), @p24='?' (Size = 50), @p25='?' (Size = 450), @p26='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_PERSONNEL].[EMPLOYEES] ([BIRTH_DATE], [CREATED_AT], [CREATED_BY], [DEPARTMENT_ID], [EMAIL], [EMPLOYEE_NUMBER], [FIRST_NAME_AR], [FULL_NAME_EN], [GENDER], [HIRE_DATE], [IS_DELETED], [JOB_ID], [LAST_NAME_AR], [LICENSE_EXPIRY_DATE], [LICENSE_NUMBER], [MANAGER_ID], [MARITAL_STATUS], [MOBILE], [NATIONAL_ID], [NATIONALITY_ID], [SECOND_NAME_AR], [SPECIALTY], [THIRD_NAME_AR], [UPDATED_AT], [UPDATED_BY], [USER_ID], [VERSION_NO])
OUTPUT INSERTED.[EMPLOYEE_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26);
2026-01-26 23:10:18.227 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@p27='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p28='?' (Size = 20), @p29='?' (Size = 50), @p30='?' (DbType = DateTime2), @p31='?' (Size = 50), @p32='?' (DbType = Int32), @p33='?' (DbType = DateTime2), @p34='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p35='?' (Size = 1) (DbType = Byte), @p36='?' (Size = 1) (DbType = Byte), @p37='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p38='?' (DbType = DateTime2), @p39='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p40='?' (DbType = DateTime2), @p41='?' (Size = 50), @p42='?' (DbType = Int16), @p43='?' (DbType = Int32), @p44='?' (Size = 1) (DbType = Byte), @p45='?' (DbType = DateTime2), @p46='?' (DbType = DateTime2), @p47='?' (Size = 50), @p48='?' (DbType = Int32), @p49='?' (Size = 1) (DbType = Byte), @p50='?' (Size = 1) (DbType = Byte), @p51='?' (Size = 1) (DbType = Byte), @p52='?' (Size = 100), @p53='?' (Size = 20), @p54='?' (Size = 50), @p55='?' (DbType = DateTime2), @p56='?' (Size = 50), @p57='?' (DbType = Int32), @p58='?' (Size = 100), @p59='?' (DbType = DateTime2), @p60='?' (Size = 50), @p61='?' (DbType = Int32), @p62='?' (Size = 1) (DbType = Byte), @p63='?' (Size = 1) (DbType = Byte), @p64='?' (Size = 20), @p65='?' (Size = 20), @p66='?' (Size = 50), @p67='?' (DbType = DateTime2), @p68='?' (Size = 50), @p69='?' (DbType = Int32), @p70='?' (Size = 20), @p71='?' (Size = 20), @p72='?' (DbType = Int32), @p73='?' (DbType = DateTime2), @p74='?' (Size = 50), @p75='?' (Size = 100), @p76='?' (DbType = Int32), @p77='?' (Size = 1) (DbType = Byte), @p78='?' (Size = 20), @p79='?' (Size = 200), @p80='?' (DbType = DateTime2), @p81='?' (Size = 50), @p82='?' (DbType = Int32), @p83='?' (Size = 50), @p84='?' (DbType = Int32), @p85='?' (DbType = DateTime2), @p86='?' (Size = 50), @p87='?' (DbType = Int32), @p88='?' (Size = 50), @p89='?' (Size = 1) (DbType = Byte), @p90='?' (Size = 1) (DbType = Byte), @p91='?' (Size = 1) (DbType = Byte), @p92='?' (DbType = DateTime2), @p93='?' (Size = 50), @p94='?' (DbType = Int32), @p95='?' (Size = 500), @p96='?' (Size = 200), @p97='?' (Size = 100), @p98='?' (DbType = DateTime2), @p99='?' (Size = 50), @p100='?' (DbType = Int32), @p101='?' (DbType = DateTime2), @p102='?' (Size = 1) (DbType = Byte), @p103='?' (Size = 1) (DbType = Byte), @p104='?' (DbType = DateTime2), @p105='?' (Size = 200), @p106='?' (DbType = DateTime2), @p107='?' (Size = 50), @p108='?' (DbType = Int32), @p109='?' (DbType = Int32), @p110='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p111='?' (DbType = DateTime2), @p112='?' (Size = 50), @p113='?' (DbType = Int32), @p114='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p115='?' (Size = 30), @p116='?' (Size = 1) (DbType = Byte), @p117='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p118='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p119='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p120='?' (DbType = DateTime2), @p121='?' (Size = 50), @p122='?' (DbType = Int32), @p123='?' (Size = 100), @p124='?' (DbType = DateTime2), @p125='?' (Size = 50), @p126='?' (Size = 50), @p127='?' (DbType = Int32), @p128='?' (DbType = Int32), @p129='?' (DbType = DateTime2), @p130='?' (Size = 255), @p131='?' (Size = 500), @p132='?' (DbType = Int64), @p133='?' (Size = 1) (DbType = Byte), @p134='?' (DbType = DateTime2), @p135='?' (DbType = DateTime2), @p136='?' (Size = 50), @p137='?' (DbType = Int32), @p138='?' (Size = 200), @p139='?' (DbType = DateTime2), @p140='?' (Size = 50), @p141='?' (DbType = Int32), @p142='?' (DbType = DateTime2), @p143='?' (Size = 1) (DbType = Byte), @p144='?' (Size = 1) (DbType = Byte), @p145='?' (Size = 100), @p146='?' (Size = 200), @p147='?' (Size = 500), @p148='?' (DbType = DateTime2), @p149='?' (DbType = DateTime2), @p150='?' (Size = 50), @p151='?' (DbType = Int32), @p152='?' (Size = 500), @p153='?' (DbType = Int32), @p154='?' (DbType = DateTime2), @p155='?' (Size = 50), @p156='?' (Size = 50), @p157='?' (DbType = Int32), @p158='?' (Size = 20), @p159='?' (DbType = Int16), @p160='?' (Size = 1) (DbType = Byte), @p161='?' (Size = 100), @p162='?' (Size = 200), @p163='?' (DbType = DateTime2), @p164='?' (Size = 50), @p165='?' (DbType = Int32), @p166='?' (Size = 500), @p167='?' (DbType = Int32), @p168='?' (DbType = DateTime2), @p169='?' (Size = 50), @p170='?' (Size = 50), @p171='?' (DbType = Int32), @p172='?' (Size = 20), @p173='?' (DbType = Int16), @p174='?' (Size = 1) (DbType = Byte), @p175='?' (Size = 100), @p176='?' (Size = 200), @p177='?' (DbType = DateTime2), @p178='?' (Size = 50), @p179='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [HR_PERSONNEL].[CONTRACTS] ([BASIC_SALARY], [CONTRACT_STATUS], [CONTRACT_TYPE], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [END_DATE], [HOUSING_ALLOWANCE], [IS_DELETED], [IS_RENEWABLE], [OTHER_ALLOWANCES], [START_DATE], [TRANSPORT_ALLOWANCE], [UPDATED_AT], [UPDATED_BY], [VACATION_DAYS], [VERSION_NO], [WORKING_HOURS_DAILY])
OUTPUT INSERTED.[CONTRACT_ID]
VALUES (@p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44);
INSERT INTO [HR_PERSONNEL].[DEPENDENTS] ([BIRTH_DATE], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [IS_DELETED], [IS_ELIGIBLE_FOR_INSURANCE], [IS_ELIGIBLE_FOR_TICKET], [NAME_AR], [NATIONAL_ID], [RELATIONSHIP], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[DEPENDENT_ID]
VALUES (@p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57);
INSERT INTO [HR_PERSONNEL].[EMERGENCY_CONTACTS] ([CONTACT_NAME_AR], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [IS_DELETED], [IS_PRIMARY], [PHONE_PRIMARY], [PHONE_SECONDARY], [RELATIONSHIP], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[CONTACT_ID]
VALUES (@p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65, @p66, @p67, @p68, @p69);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_ADDRESSES] ([ADDRESS_TYPE], [BUILDING_NO], [CITY_ID], [CREATED_AT], [CREATED_BY], [DISTRICT], [EMPLOYEE_ID], [IS_DELETED], [POSTAL_CODE], [STREET], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[ADDRESS_ID]
VALUES (@p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79, @p80, @p81, @p82);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_BANK_ACCOUNTS] ([ACCOUNT_NUMBER], [BANK_ID], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [IBAN], [IS_ACTIVE], [IS_DELETED], [IS_PRIMARY], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[ACCOUNT_ID]
VALUES (@p83, @p84, @p85, @p86, @p87, @p88, @p89, @p90, @p91, @p92, @p93, @p94);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_CERTIFICATIONS] ([ATTACHMENT_PATH], [CERT_NAME_AR], [CERT_NUMBER], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [EXPIRY_DATE], [IS_DELETED], [IS_MANDATORY], [ISSUE_DATE], [ISSUING_AUTHORITY], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[CERT_ID]
VALUES (@p95, @p96, @p97, @p98, @p99, @p100, @p101, @p102, @p103, @p104, @p105, @p106, @p107, @p108);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_COMPENSATIONS] ([BANK_ID], [BASIC_SALARY], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [HOUSING_ALLOWANCE], [IBAN_NUMBER], [IS_DELETED], [MEDICAL_ALLOWANCE], [OTHER_ALLOWANCES], [TRANSPORT_ALLOWANCE], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[COMPENSATION_ID]
VALUES (@p109, @p110, @p111, @p112, @p113, @p114, @p115, @p116, @p117, @p118, @p119, @p120, @p121, @p122);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_DOCUMENTS] ([CONTENT_TYPE], [CREATED_AT], [CREATED_BY], [DOCUMENT_NUMBER], [DOCUMENT_TYPE_ID], [EMPLOYEE_ID], [EXPIRY_DATE], [FILE_NAME], [FILE_PATH], [FILE_SIZE], [IS_DELETED], [ISSUE_DATE], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[DOCUMENT_ID]
VALUES (@p123, @p124, @p125, @p126, @p127, @p128, @p129, @p130, @p131, @p132, @p133, @p134, @p135, @p136, @p137);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_EXPERIENCES] ([COMPANY_NAME_AR], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [END_DATE], [IS_CURRENT], [IS_DELETED], [JOB_TITLE_AR], [REASON_FOR_LEAVING], [RESPONSIBILITIES], [START_DATE], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[EXPERIENCE_ID]
VALUES (@p138, @p139, @p140, @p141, @p142, @p143, @p144, @p145, @p146, @p147, @p148, @p149, @p150, @p151);
MERGE [HR_PERSONNEL].[EMPLOYEE_QUALIFICATIONS] USING (
VALUES (@p152, @p153, @p154, @p155, @p156, @p157, @p158, @p159, @p160, @p161, @p162, @p163, @p164, @p165, 0),
(@p166, @p167, @p168, @p169, @p170, @p171, @p172, @p173, @p174, @p175, @p176, @p177, @p178, @p179, 1)) AS i ([ATTACHMENT_PATH], [COUNTRY_ID], [CREATED_AT], [CREATED_BY], [DEGREE_TYPE], [EMPLOYEE_ID], [GRADE], [GRADUATION_YEAR], [IS_DELETED], [MAJOR_AR], [UNIVERSITY_AR], [UPDATED_AT], [UPDATED_BY], [VERSION_NO], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([ATTACHMENT_PATH], [COUNTRY_ID], [CREATED_AT], [CREATED_BY], [DEGREE_TYPE], [EMPLOYEE_ID], [GRADE], [GRADUATION_YEAR], [IS_DELETED], [MAJOR_AR], [UNIVERSITY_AR], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
VALUES (i.[ATTACHMENT_PATH], i.[COUNTRY_ID], i.[CREATED_AT], i.[CREATED_BY], i.[DEGREE_TYPE], i.[EMPLOYEE_ID], i.[GRADE], i.[GRADUATION_YEAR], i.[IS_DELETED], i.[MAJOR_AR], i.[UNIVERSITY_AR], i.[UPDATED_AT], i.[UPDATED_BY], i.[VERSION_NO])
OUTPUT INSERTED.[QUALIFICATION_ID], i._Position;
2026-01-26 23:10:18.260 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'HRMS.Infrastructure.Data.HRMSDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_EMPLOYEE_ADDRESSES_CITIES_CITY_ID". The conflict occurred in database "HRMS_Hospital", table "HR_CORE.CITIES", column 'CITY_ID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:40dba97e-6e28-4b24-b0cb-b81315564ed3
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_EMPLOYEE_ADDRESSES_CITIES_CITY_ID". The conflict occurred in database "HRMS_Hospital", table "HR_CORE.CITIES", column 'CITY_ID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:40dba97e-6e28-4b24-b0cb-b81315564ed3
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2026-01-26 23:10:27.299 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeesController.Create (HRMS.API) in 9189.0539ms
2026-01-26 23:10:27.308 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.Create (HRMS.API)'
2026-01-26 23:10:27.311 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_EMPLOYEE_ADDRESSES_CITIES_CITY_ID". The conflict occurred in database "HRMS_Hospital", table "HR_CORE.CITIES", column 'CITY_ID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:40dba97e-6e28-4b24-b0cb-b81315564ed3
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at HRMS.Application.Features.Personnel.Employees.Commands.CreateEmployee.CreateEmployeeCommandHandler.Handle(CreateEmployeeCommand request, CancellationToken cancellationToken)
   at HRMS.Application.Features.Personnel.Employees.Commands.CreateEmployee.CreateEmployeeCommandHandler.Handle(CreateEmployeeCommand request, CancellationToken cancellationToken)
   at HRMS.API.Controllers.Personnel.EmployeesController.Create(CreateEmployeeDto dto)
   at lambda_method635(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2026-01-26 23:10:27.362 +03:00 [ERR] HTTP POST /api/Employees responded 500 in 9290.1511 ms
2026-01-26 23:10:27.414 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Employees - 500 null text/plain; charset=utf-8 9353.7009ms
2026-01-26 23:10:43.443 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Employees - application/json 3850
2026-01-26 23:10:43.448 +03:00 [INF] CORS policy execution successful.
2026-01-26 23:10:43.449 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.Create (HRMS.API)'
2026-01-26 23:10:43.451 +03:00 [INF] Route matched with {action = "Create", controller = "Employees"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] Create(HRMS.Application.DTOs.Personnel.CreateEmployeeDto) on controller HRMS.API.Controllers.Personnel.EmployeesController (HRMS.API).
2026-01-26 23:10:43.477 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@__ToString_0_startswith='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
WHERE [e].[EMPLOYEE_NUMBER] LIKE @__ToString_0_startswith ESCAPE N'\'
ORDER BY [e].[EMPLOYEE_NUMBER] DESC
2026-01-26 23:10:43.645 +03:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2026-01-26 23:10:43.659 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?' (Size = 100), @p5='?' (Size = 20), @p6='?' (Size = 50), @p7='?' (Size = 200), @p8='?' (Size = 1), @p9='?' (DbType = DateTime2), @p10='?' (Size = 1) (DbType = Byte), @p11='?' (DbType = Int32), @p12='?' (Size = 50), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (DbType = Int32), @p16='?' (Size = 20), @p17='?' (Size = 20), @p18='?' (Size = 20), @p19='?' (DbType = Int32), @p20='?' (Size = 50), @p21='?' (Size = 100), @p22='?' (Size = 50), @p23='?' (DbType = DateTime2), @p24='?' (Size = 50), @p25='?' (Size = 450), @p26='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_PERSONNEL].[EMPLOYEES] ([BIRTH_DATE], [CREATED_AT], [CREATED_BY], [DEPARTMENT_ID], [EMAIL], [EMPLOYEE_NUMBER], [FIRST_NAME_AR], [FULL_NAME_EN], [GENDER], [HIRE_DATE], [IS_DELETED], [JOB_ID], [LAST_NAME_AR], [LICENSE_EXPIRY_DATE], [LICENSE_NUMBER], [MANAGER_ID], [MARITAL_STATUS], [MOBILE], [NATIONAL_ID], [NATIONALITY_ID], [SECOND_NAME_AR], [SPECIALTY], [THIRD_NAME_AR], [UPDATED_AT], [UPDATED_BY], [USER_ID], [VERSION_NO])
OUTPUT INSERTED.[EMPLOYEE_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26);
2026-01-26 23:10:43.733 +03:00 [INF] Executed DbCommand (64ms) [Parameters=[@p27='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p28='?' (Size = 20), @p29='?' (Size = 50), @p30='?' (DbType = DateTime2), @p31='?' (Size = 50), @p32='?' (DbType = Int32), @p33='?' (DbType = DateTime2), @p34='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p35='?' (Size = 1) (DbType = Byte), @p36='?' (Size = 1) (DbType = Byte), @p37='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p38='?' (DbType = DateTime2), @p39='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p40='?' (DbType = DateTime2), @p41='?' (Size = 50), @p42='?' (DbType = Int16), @p43='?' (DbType = Int32), @p44='?' (Size = 1) (DbType = Byte), @p45='?' (DbType = DateTime2), @p46='?' (DbType = DateTime2), @p47='?' (Size = 50), @p48='?' (DbType = Int32), @p49='?' (Size = 1) (DbType = Byte), @p50='?' (Size = 1) (DbType = Byte), @p51='?' (Size = 1) (DbType = Byte), @p52='?' (Size = 100), @p53='?' (Size = 20), @p54='?' (Size = 50), @p55='?' (DbType = DateTime2), @p56='?' (Size = 50), @p57='?' (DbType = Int32), @p58='?' (Size = 100), @p59='?' (DbType = DateTime2), @p60='?' (Size = 50), @p61='?' (DbType = Int32), @p62='?' (Size = 1) (DbType = Byte), @p63='?' (Size = 1) (DbType = Byte), @p64='?' (Size = 20), @p65='?' (Size = 20), @p66='?' (Size = 50), @p67='?' (DbType = DateTime2), @p68='?' (Size = 50), @p69='?' (DbType = Int32), @p70='?' (Size = 20), @p71='?' (Size = 20), @p72='?' (DbType = Int32), @p73='?' (DbType = DateTime2), @p74='?' (Size = 50), @p75='?' (Size = 100), @p76='?' (DbType = Int32), @p77='?' (Size = 1) (DbType = Byte), @p78='?' (Size = 20), @p79='?' (Size = 200), @p80='?' (DbType = DateTime2), @p81='?' (Size = 50), @p82='?' (DbType = Int32), @p83='?' (Size = 50), @p84='?' (DbType = Int32), @p85='?' (DbType = DateTime2), @p86='?' (Size = 50), @p87='?' (DbType = Int32), @p88='?' (Size = 50), @p89='?' (Size = 1) (DbType = Byte), @p90='?' (Size = 1) (DbType = Byte), @p91='?' (Size = 1) (DbType = Byte), @p92='?' (DbType = DateTime2), @p93='?' (Size = 50), @p94='?' (DbType = Int32), @p95='?' (Size = 500), @p96='?' (Size = 200), @p97='?' (Size = 100), @p98='?' (DbType = DateTime2), @p99='?' (Size = 50), @p100='?' (DbType = Int32), @p101='?' (DbType = DateTime2), @p102='?' (Size = 1) (DbType = Byte), @p103='?' (Size = 1) (DbType = Byte), @p104='?' (DbType = DateTime2), @p105='?' (Size = 200), @p106='?' (DbType = DateTime2), @p107='?' (Size = 50), @p108='?' (DbType = Int32), @p109='?' (DbType = Int32), @p110='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p111='?' (DbType = DateTime2), @p112='?' (Size = 50), @p113='?' (DbType = Int32), @p114='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p115='?' (Size = 30), @p116='?' (Size = 1) (DbType = Byte), @p117='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p118='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p119='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p120='?' (DbType = DateTime2), @p121='?' (Size = 50), @p122='?' (DbType = Int32), @p123='?' (Size = 100), @p124='?' (DbType = DateTime2), @p125='?' (Size = 50), @p126='?' (Size = 50), @p127='?' (DbType = Int32), @p128='?' (DbType = Int32), @p129='?' (DbType = DateTime2), @p130='?' (Size = 255), @p131='?' (Size = 500), @p132='?' (DbType = Int64), @p133='?' (Size = 1) (DbType = Byte), @p134='?' (DbType = DateTime2), @p135='?' (DbType = DateTime2), @p136='?' (Size = 50), @p137='?' (DbType = Int32), @p138='?' (Size = 200), @p139='?' (DbType = DateTime2), @p140='?' (Size = 50), @p141='?' (DbType = Int32), @p142='?' (DbType = DateTime2), @p143='?' (Size = 1) (DbType = Byte), @p144='?' (Size = 1) (DbType = Byte), @p145='?' (Size = 100), @p146='?' (Size = 200), @p147='?' (Size = 500), @p148='?' (DbType = DateTime2), @p149='?' (DbType = DateTime2), @p150='?' (Size = 50), @p151='?' (DbType = Int32), @p152='?' (Size = 500), @p153='?' (DbType = Int32), @p154='?' (DbType = DateTime2), @p155='?' (Size = 50), @p156='?' (Size = 50), @p157='?' (DbType = Int32), @p158='?' (Size = 20), @p159='?' (DbType = Int16), @p160='?' (Size = 1) (DbType = Byte), @p161='?' (Size = 100), @p162='?' (Size = 200), @p163='?' (DbType = DateTime2), @p164='?' (Size = 50), @p165='?' (DbType = Int32), @p166='?' (Size = 500), @p167='?' (DbType = Int32), @p168='?' (DbType = DateTime2), @p169='?' (Size = 50), @p170='?' (Size = 50), @p171='?' (DbType = Int32), @p172='?' (Size = 20), @p173='?' (DbType = Int16), @p174='?' (Size = 1) (DbType = Byte), @p175='?' (Size = 100), @p176='?' (Size = 200), @p177='?' (DbType = DateTime2), @p178='?' (Size = 50), @p179='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [HR_PERSONNEL].[CONTRACTS] ([BASIC_SALARY], [CONTRACT_STATUS], [CONTRACT_TYPE], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [END_DATE], [HOUSING_ALLOWANCE], [IS_DELETED], [IS_RENEWABLE], [OTHER_ALLOWANCES], [START_DATE], [TRANSPORT_ALLOWANCE], [UPDATED_AT], [UPDATED_BY], [VACATION_DAYS], [VERSION_NO], [WORKING_HOURS_DAILY])
OUTPUT INSERTED.[CONTRACT_ID]
VALUES (@p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44);
INSERT INTO [HR_PERSONNEL].[DEPENDENTS] ([BIRTH_DATE], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [IS_DELETED], [IS_ELIGIBLE_FOR_INSURANCE], [IS_ELIGIBLE_FOR_TICKET], [NAME_AR], [NATIONAL_ID], [RELATIONSHIP], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[DEPENDENT_ID]
VALUES (@p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57);
INSERT INTO [HR_PERSONNEL].[EMERGENCY_CONTACTS] ([CONTACT_NAME_AR], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [IS_DELETED], [IS_PRIMARY], [PHONE_PRIMARY], [PHONE_SECONDARY], [RELATIONSHIP], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[CONTACT_ID]
VALUES (@p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65, @p66, @p67, @p68, @p69);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_ADDRESSES] ([ADDRESS_TYPE], [BUILDING_NO], [CITY_ID], [CREATED_AT], [CREATED_BY], [DISTRICT], [EMPLOYEE_ID], [IS_DELETED], [POSTAL_CODE], [STREET], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[ADDRESS_ID]
VALUES (@p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79, @p80, @p81, @p82);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_BANK_ACCOUNTS] ([ACCOUNT_NUMBER], [BANK_ID], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [IBAN], [IS_ACTIVE], [IS_DELETED], [IS_PRIMARY], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[ACCOUNT_ID]
VALUES (@p83, @p84, @p85, @p86, @p87, @p88, @p89, @p90, @p91, @p92, @p93, @p94);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_CERTIFICATIONS] ([ATTACHMENT_PATH], [CERT_NAME_AR], [CERT_NUMBER], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [EXPIRY_DATE], [IS_DELETED], [IS_MANDATORY], [ISSUE_DATE], [ISSUING_AUTHORITY], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[CERT_ID]
VALUES (@p95, @p96, @p97, @p98, @p99, @p100, @p101, @p102, @p103, @p104, @p105, @p106, @p107, @p108);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_COMPENSATIONS] ([BANK_ID], [BASIC_SALARY], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [HOUSING_ALLOWANCE], [IBAN_NUMBER], [IS_DELETED], [MEDICAL_ALLOWANCE], [OTHER_ALLOWANCES], [TRANSPORT_ALLOWANCE], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[COMPENSATION_ID]
VALUES (@p109, @p110, @p111, @p112, @p113, @p114, @p115, @p116, @p117, @p118, @p119, @p120, @p121, @p122);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_DOCUMENTS] ([CONTENT_TYPE], [CREATED_AT], [CREATED_BY], [DOCUMENT_NUMBER], [DOCUMENT_TYPE_ID], [EMPLOYEE_ID], [EXPIRY_DATE], [FILE_NAME], [FILE_PATH], [FILE_SIZE], [IS_DELETED], [ISSUE_DATE], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[DOCUMENT_ID]
VALUES (@p123, @p124, @p125, @p126, @p127, @p128, @p129, @p130, @p131, @p132, @p133, @p134, @p135, @p136, @p137);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_EXPERIENCES] ([COMPANY_NAME_AR], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [END_DATE], [IS_CURRENT], [IS_DELETED], [JOB_TITLE_AR], [REASON_FOR_LEAVING], [RESPONSIBILITIES], [START_DATE], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[EXPERIENCE_ID]
VALUES (@p138, @p139, @p140, @p141, @p142, @p143, @p144, @p145, @p146, @p147, @p148, @p149, @p150, @p151);
MERGE [HR_PERSONNEL].[EMPLOYEE_QUALIFICATIONS] USING (
VALUES (@p152, @p153, @p154, @p155, @p156, @p157, @p158, @p159, @p160, @p161, @p162, @p163, @p164, @p165, 0),
(@p166, @p167, @p168, @p169, @p170, @p171, @p172, @p173, @p174, @p175, @p176, @p177, @p178, @p179, 1)) AS i ([ATTACHMENT_PATH], [COUNTRY_ID], [CREATED_AT], [CREATED_BY], [DEGREE_TYPE], [EMPLOYEE_ID], [GRADE], [GRADUATION_YEAR], [IS_DELETED], [MAJOR_AR], [UNIVERSITY_AR], [UPDATED_AT], [UPDATED_BY], [VERSION_NO], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([ATTACHMENT_PATH], [COUNTRY_ID], [CREATED_AT], [CREATED_BY], [DEGREE_TYPE], [EMPLOYEE_ID], [GRADE], [GRADUATION_YEAR], [IS_DELETED], [MAJOR_AR], [UNIVERSITY_AR], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
VALUES (i.[ATTACHMENT_PATH], i.[COUNTRY_ID], i.[CREATED_AT], i.[CREATED_BY], i.[DEGREE_TYPE], i.[EMPLOYEE_ID], i.[GRADE], i.[GRADUATION_YEAR], i.[IS_DELETED], i.[MAJOR_AR], i.[UNIVERSITY_AR], i.[UPDATED_AT], i.[UPDATED_BY], i.[VERSION_NO])
OUTPUT INSERTED.[QUALIFICATION_ID], i._Position;
2026-01-26 23:10:43.771 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'HRMS.Infrastructure.Data.HRMSDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_EMPLOYEE_BANK_ACCOUNTS_BANKS_BANK_ID". The conflict occurred in database "HRMS_Hospital", table "HR_CORE.BANKS", column 'BANK_ID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:40dba97e-6e28-4b24-b0cb-b81315564ed3
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_EMPLOYEE_BANK_ACCOUNTS_BANKS_BANK_ID". The conflict occurred in database "HRMS_Hospital", table "HR_CORE.BANKS", column 'BANK_ID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:40dba97e-6e28-4b24-b0cb-b81315564ed3
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2026-01-26 23:10:51.135 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeesController.Create (HRMS.API) in 7678.6326ms
2026-01-26 23:10:51.192 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.Create (HRMS.API)'
2026-01-26 23:10:51.200 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_EMPLOYEE_BANK_ACCOUNTS_BANKS_BANK_ID". The conflict occurred in database "HRMS_Hospital", table "HR_CORE.BANKS", column 'BANK_ID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:40dba97e-6e28-4b24-b0cb-b81315564ed3
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at HRMS.Application.Features.Personnel.Employees.Commands.CreateEmployee.CreateEmployeeCommandHandler.Handle(CreateEmployeeCommand request, CancellationToken cancellationToken)
   at HRMS.Application.Features.Personnel.Employees.Commands.CreateEmployee.CreateEmployeeCommandHandler.Handle(CreateEmployeeCommand request, CancellationToken cancellationToken)
   at HRMS.API.Controllers.Personnel.EmployeesController.Create(CreateEmployeeDto dto)
   at lambda_method635(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2026-01-26 23:10:51.329 +03:00 [ERR] HTTP POST /api/Employees responded 500 in 7881.3449 ms
2026-01-26 23:10:51.372 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Employees - 500 null text/plain; charset=utf-8 7928.8959ms
2026-01-26 23:11:13.384 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Employees - application/json 3850
2026-01-26 23:11:13.435 +03:00 [INF] CORS policy execution successful.
2026-01-26 23:11:13.441 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.Create (HRMS.API)'
2026-01-26 23:11:13.535 +03:00 [INF] Route matched with {action = "Create", controller = "Employees"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] Create(HRMS.Application.DTOs.Personnel.CreateEmployeeDto) on controller HRMS.API.Controllers.Personnel.EmployeesController (HRMS.API).
2026-01-26 23:11:13.564 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__ToString_0_startswith='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
WHERE [e].[EMPLOYEE_NUMBER] LIKE @__ToString_0_startswith ESCAPE N'\'
ORDER BY [e].[EMPLOYEE_NUMBER] DESC
2026-01-26 23:11:13.573 +03:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2026-01-26 23:11:13.577 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?' (Size = 100), @p5='?' (Size = 20), @p6='?' (Size = 50), @p7='?' (Size = 200), @p8='?' (Size = 1), @p9='?' (DbType = DateTime2), @p10='?' (Size = 1) (DbType = Byte), @p11='?' (DbType = Int32), @p12='?' (Size = 50), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (DbType = Int32), @p16='?' (Size = 20), @p17='?' (Size = 20), @p18='?' (Size = 20), @p19='?' (DbType = Int32), @p20='?' (Size = 50), @p21='?' (Size = 100), @p22='?' (Size = 50), @p23='?' (DbType = DateTime2), @p24='?' (Size = 50), @p25='?' (Size = 450), @p26='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_PERSONNEL].[EMPLOYEES] ([BIRTH_DATE], [CREATED_AT], [CREATED_BY], [DEPARTMENT_ID], [EMAIL], [EMPLOYEE_NUMBER], [FIRST_NAME_AR], [FULL_NAME_EN], [GENDER], [HIRE_DATE], [IS_DELETED], [JOB_ID], [LAST_NAME_AR], [LICENSE_EXPIRY_DATE], [LICENSE_NUMBER], [MANAGER_ID], [MARITAL_STATUS], [MOBILE], [NATIONAL_ID], [NATIONALITY_ID], [SECOND_NAME_AR], [SPECIALTY], [THIRD_NAME_AR], [UPDATED_AT], [UPDATED_BY], [USER_ID], [VERSION_NO])
OUTPUT INSERTED.[EMPLOYEE_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26);
2026-01-26 23:11:13.590 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p27='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p28='?' (Size = 20), @p29='?' (Size = 50), @p30='?' (DbType = DateTime2), @p31='?' (Size = 50), @p32='?' (DbType = Int32), @p33='?' (DbType = DateTime2), @p34='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p35='?' (Size = 1) (DbType = Byte), @p36='?' (Size = 1) (DbType = Byte), @p37='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p38='?' (DbType = DateTime2), @p39='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p40='?' (DbType = DateTime2), @p41='?' (Size = 50), @p42='?' (DbType = Int16), @p43='?' (DbType = Int32), @p44='?' (Size = 1) (DbType = Byte), @p45='?' (DbType = DateTime2), @p46='?' (DbType = DateTime2), @p47='?' (Size = 50), @p48='?' (DbType = Int32), @p49='?' (Size = 1) (DbType = Byte), @p50='?' (Size = 1) (DbType = Byte), @p51='?' (Size = 1) (DbType = Byte), @p52='?' (Size = 100), @p53='?' (Size = 20), @p54='?' (Size = 50), @p55='?' (DbType = DateTime2), @p56='?' (Size = 50), @p57='?' (DbType = Int32), @p58='?' (Size = 100), @p59='?' (DbType = DateTime2), @p60='?' (Size = 50), @p61='?' (DbType = Int32), @p62='?' (Size = 1) (DbType = Byte), @p63='?' (Size = 1) (DbType = Byte), @p64='?' (Size = 20), @p65='?' (Size = 20), @p66='?' (Size = 50), @p67='?' (DbType = DateTime2), @p68='?' (Size = 50), @p69='?' (DbType = Int32), @p70='?' (Size = 20), @p71='?' (Size = 20), @p72='?' (DbType = Int32), @p73='?' (DbType = DateTime2), @p74='?' (Size = 50), @p75='?' (Size = 100), @p76='?' (DbType = Int32), @p77='?' (Size = 1) (DbType = Byte), @p78='?' (Size = 20), @p79='?' (Size = 200), @p80='?' (DbType = DateTime2), @p81='?' (Size = 50), @p82='?' (DbType = Int32), @p83='?' (Size = 50), @p84='?' (DbType = Int32), @p85='?' (DbType = DateTime2), @p86='?' (Size = 50), @p87='?' (DbType = Int32), @p88='?' (Size = 50), @p89='?' (Size = 1) (DbType = Byte), @p90='?' (Size = 1) (DbType = Byte), @p91='?' (Size = 1) (DbType = Byte), @p92='?' (DbType = DateTime2), @p93='?' (Size = 50), @p94='?' (DbType = Int32), @p95='?' (Size = 500), @p96='?' (Size = 200), @p97='?' (Size = 100), @p98='?' (DbType = DateTime2), @p99='?' (Size = 50), @p100='?' (DbType = Int32), @p101='?' (DbType = DateTime2), @p102='?' (Size = 1) (DbType = Byte), @p103='?' (Size = 1) (DbType = Byte), @p104='?' (DbType = DateTime2), @p105='?' (Size = 200), @p106='?' (DbType = DateTime2), @p107='?' (Size = 50), @p108='?' (DbType = Int32), @p109='?' (DbType = Int32), @p110='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p111='?' (DbType = DateTime2), @p112='?' (Size = 50), @p113='?' (DbType = Int32), @p114='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p115='?' (Size = 30), @p116='?' (Size = 1) (DbType = Byte), @p117='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p118='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p119='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p120='?' (DbType = DateTime2), @p121='?' (Size = 50), @p122='?' (DbType = Int32), @p123='?' (Size = 100), @p124='?' (DbType = DateTime2), @p125='?' (Size = 50), @p126='?' (Size = 50), @p127='?' (DbType = Int32), @p128='?' (DbType = Int32), @p129='?' (DbType = DateTime2), @p130='?' (Size = 255), @p131='?' (Size = 500), @p132='?' (DbType = Int64), @p133='?' (Size = 1) (DbType = Byte), @p134='?' (DbType = DateTime2), @p135='?' (DbType = DateTime2), @p136='?' (Size = 50), @p137='?' (DbType = Int32), @p138='?' (Size = 200), @p139='?' (DbType = DateTime2), @p140='?' (Size = 50), @p141='?' (DbType = Int32), @p142='?' (DbType = DateTime2), @p143='?' (Size = 1) (DbType = Byte), @p144='?' (Size = 1) (DbType = Byte), @p145='?' (Size = 100), @p146='?' (Size = 200), @p147='?' (Size = 500), @p148='?' (DbType = DateTime2), @p149='?' (DbType = DateTime2), @p150='?' (Size = 50), @p151='?' (DbType = Int32), @p152='?' (Size = 500), @p153='?' (DbType = Int32), @p154='?' (DbType = DateTime2), @p155='?' (Size = 50), @p156='?' (Size = 50), @p157='?' (DbType = Int32), @p158='?' (Size = 20), @p159='?' (DbType = Int16), @p160='?' (Size = 1) (DbType = Byte), @p161='?' (Size = 100), @p162='?' (Size = 200), @p163='?' (DbType = DateTime2), @p164='?' (Size = 50), @p165='?' (DbType = Int32), @p166='?' (Size = 500), @p167='?' (DbType = Int32), @p168='?' (DbType = DateTime2), @p169='?' (Size = 50), @p170='?' (Size = 50), @p171='?' (DbType = Int32), @p172='?' (Size = 20), @p173='?' (DbType = Int16), @p174='?' (Size = 1) (DbType = Byte), @p175='?' (Size = 100), @p176='?' (Size = 200), @p177='?' (DbType = DateTime2), @p178='?' (Size = 50), @p179='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [HR_PERSONNEL].[CONTRACTS] ([BASIC_SALARY], [CONTRACT_STATUS], [CONTRACT_TYPE], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [END_DATE], [HOUSING_ALLOWANCE], [IS_DELETED], [IS_RENEWABLE], [OTHER_ALLOWANCES], [START_DATE], [TRANSPORT_ALLOWANCE], [UPDATED_AT], [UPDATED_BY], [VACATION_DAYS], [VERSION_NO], [WORKING_HOURS_DAILY])
OUTPUT INSERTED.[CONTRACT_ID]
VALUES (@p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44);
INSERT INTO [HR_PERSONNEL].[DEPENDENTS] ([BIRTH_DATE], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [IS_DELETED], [IS_ELIGIBLE_FOR_INSURANCE], [IS_ELIGIBLE_FOR_TICKET], [NAME_AR], [NATIONAL_ID], [RELATIONSHIP], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[DEPENDENT_ID]
VALUES (@p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57);
INSERT INTO [HR_PERSONNEL].[EMERGENCY_CONTACTS] ([CONTACT_NAME_AR], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [IS_DELETED], [IS_PRIMARY], [PHONE_PRIMARY], [PHONE_SECONDARY], [RELATIONSHIP], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[CONTACT_ID]
VALUES (@p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65, @p66, @p67, @p68, @p69);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_ADDRESSES] ([ADDRESS_TYPE], [BUILDING_NO], [CITY_ID], [CREATED_AT], [CREATED_BY], [DISTRICT], [EMPLOYEE_ID], [IS_DELETED], [POSTAL_CODE], [STREET], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[ADDRESS_ID]
VALUES (@p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79, @p80, @p81, @p82);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_BANK_ACCOUNTS] ([ACCOUNT_NUMBER], [BANK_ID], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [IBAN], [IS_ACTIVE], [IS_DELETED], [IS_PRIMARY], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[ACCOUNT_ID]
VALUES (@p83, @p84, @p85, @p86, @p87, @p88, @p89, @p90, @p91, @p92, @p93, @p94);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_CERTIFICATIONS] ([ATTACHMENT_PATH], [CERT_NAME_AR], [CERT_NUMBER], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [EXPIRY_DATE], [IS_DELETED], [IS_MANDATORY], [ISSUE_DATE], [ISSUING_AUTHORITY], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[CERT_ID]
VALUES (@p95, @p96, @p97, @p98, @p99, @p100, @p101, @p102, @p103, @p104, @p105, @p106, @p107, @p108);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_COMPENSATIONS] ([BANK_ID], [BASIC_SALARY], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [HOUSING_ALLOWANCE], [IBAN_NUMBER], [IS_DELETED], [MEDICAL_ALLOWANCE], [OTHER_ALLOWANCES], [TRANSPORT_ALLOWANCE], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[COMPENSATION_ID]
VALUES (@p109, @p110, @p111, @p112, @p113, @p114, @p115, @p116, @p117, @p118, @p119, @p120, @p121, @p122);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_DOCUMENTS] ([CONTENT_TYPE], [CREATED_AT], [CREATED_BY], [DOCUMENT_NUMBER], [DOCUMENT_TYPE_ID], [EMPLOYEE_ID], [EXPIRY_DATE], [FILE_NAME], [FILE_PATH], [FILE_SIZE], [IS_DELETED], [ISSUE_DATE], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[DOCUMENT_ID]
VALUES (@p123, @p124, @p125, @p126, @p127, @p128, @p129, @p130, @p131, @p132, @p133, @p134, @p135, @p136, @p137);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_EXPERIENCES] ([COMPANY_NAME_AR], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [END_DATE], [IS_CURRENT], [IS_DELETED], [JOB_TITLE_AR], [REASON_FOR_LEAVING], [RESPONSIBILITIES], [START_DATE], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[EXPERIENCE_ID]
VALUES (@p138, @p139, @p140, @p141, @p142, @p143, @p144, @p145, @p146, @p147, @p148, @p149, @p150, @p151);
MERGE [HR_PERSONNEL].[EMPLOYEE_QUALIFICATIONS] USING (
VALUES (@p152, @p153, @p154, @p155, @p156, @p157, @p158, @p159, @p160, @p161, @p162, @p163, @p164, @p165, 0),
(@p166, @p167, @p168, @p169, @p170, @p171, @p172, @p173, @p174, @p175, @p176, @p177, @p178, @p179, 1)) AS i ([ATTACHMENT_PATH], [COUNTRY_ID], [CREATED_AT], [CREATED_BY], [DEGREE_TYPE], [EMPLOYEE_ID], [GRADE], [GRADUATION_YEAR], [IS_DELETED], [MAJOR_AR], [UNIVERSITY_AR], [UPDATED_AT], [UPDATED_BY], [VERSION_NO], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([ATTACHMENT_PATH], [COUNTRY_ID], [CREATED_AT], [CREATED_BY], [DEGREE_TYPE], [EMPLOYEE_ID], [GRADE], [GRADUATION_YEAR], [IS_DELETED], [MAJOR_AR], [UNIVERSITY_AR], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
VALUES (i.[ATTACHMENT_PATH], i.[COUNTRY_ID], i.[CREATED_AT], i.[CREATED_BY], i.[DEGREE_TYPE], i.[EMPLOYEE_ID], i.[GRADE], i.[GRADUATION_YEAR], i.[IS_DELETED], i.[MAJOR_AR], i.[UNIVERSITY_AR], i.[UPDATED_AT], i.[UPDATED_BY], i.[VERSION_NO])
OUTPUT INSERTED.[QUALIFICATION_ID], i._Position;
2026-01-26 23:11:13.620 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'HRMS.Infrastructure.Data.HRMSDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The MERGE statement conflicted with the FOREIGN KEY constraint "FK_EMPLOYEE_QUALIFICATIONS_COUNTRIES_COUNTRY_ID". The conflict occurred in database "HRMS_Hospital", table "HR_CORE.COUNTRIES", column 'COUNTRY_ID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:40dba97e-6e28-4b24-b0cb-b81315564ed3
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The MERGE statement conflicted with the FOREIGN KEY constraint "FK_EMPLOYEE_QUALIFICATIONS_COUNTRIES_COUNTRY_ID". The conflict occurred in database "HRMS_Hospital", table "HR_CORE.COUNTRIES", column 'COUNTRY_ID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:40dba97e-6e28-4b24-b0cb-b81315564ed3
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2026-01-26 23:11:21.056 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeesController.Create (HRMS.API) in 7514.9567ms
2026-01-26 23:11:21.076 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.Create (HRMS.API)'
2026-01-26 23:11:21.079 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The MERGE statement conflicted with the FOREIGN KEY constraint "FK_EMPLOYEE_QUALIFICATIONS_COUNTRIES_COUNTRY_ID". The conflict occurred in database "HRMS_Hospital", table "HR_CORE.COUNTRIES", column 'COUNTRY_ID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:40dba97e-6e28-4b24-b0cb-b81315564ed3
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at HRMS.Application.Features.Personnel.Employees.Commands.CreateEmployee.CreateEmployeeCommandHandler.Handle(CreateEmployeeCommand request, CancellationToken cancellationToken)
   at HRMS.Application.Features.Personnel.Employees.Commands.CreateEmployee.CreateEmployeeCommandHandler.Handle(CreateEmployeeCommand request, CancellationToken cancellationToken)
   at HRMS.API.Controllers.Personnel.EmployeesController.Create(CreateEmployeeDto dto)
   at lambda_method635(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2026-01-26 23:11:21.127 +03:00 [ERR] HTTP POST /api/Employees responded 500 in 7700.9340 ms
2026-01-26 23:11:21.137 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Employees - 500 null text/plain; charset=utf-8 7753.497ms
2026-01-26 23:11:54.082 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Countries - null null
2026-01-26 23:11:54.140 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Core.CountriesController.GetAll (HRMS.API)'
2026-01-26 23:11:54.160 +03:00 [INF] Route matched with {action = "GetAll", controller = "Countries"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(HRMS.Application.Features.Core.Countries.Queries.GetAllCountries.GetAllCountriesQuery) on controller HRMS.API.Controllers.Core.CountriesController (HRMS.API).
2026-01-26 23:11:54.319 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [HR_CORE].[COUNTRIES] AS [c]
2026-01-26 23:11:54.427 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[COUNTRY_ID], [c].[CITIZENSHIP_NAME_AR], [c].[CITIZENSHIP_NAME_EN], [c].[COUNTRY_NAME_AR], [c].[COUNTRY_NAME_EN], [c].[ISO_CODE], [c].[CREATED_AT], [c].[CREATED_BY], [c].[IS_DELETED], [c].[UPDATED_AT], [c].[UPDATED_BY], [c].[VERSION_NO], (
    SELECT COUNT(*)
    FROM [HR_CORE].[CITIES] AS [c0]
    WHERE [c].[COUNTRY_ID] = [c0].[COUNTRY_ID])
FROM [HR_CORE].[COUNTRIES] AS [c]
ORDER BY [c].[COUNTRY_NAME_AR]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2026-01-26 23:11:54.490 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[HRMS.Application.DTOs.Core.PagedResult`1[[HRMS.Application.DTOs.Core.CountryListDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-26 23:11:54.513 +03:00 [INF] Executed action HRMS.API.Controllers.Core.CountriesController.GetAll (HRMS.API) in 240.521ms
2026-01-26 23:11:54.525 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Core.CountriesController.GetAll (HRMS.API)'
2026-01-26 23:11:54.527 +03:00 [INF] HTTP GET /api/Countries responded 200 in 387.4791 ms
2026-01-26 23:11:54.529 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Countries - 200 null application/json; charset=utf-8 447.1447ms
2026-01-26 23:13:54.639 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Employees - application/json 3850
2026-01-26 23:13:54.652 +03:00 [INF] CORS policy execution successful.
2026-01-26 23:13:54.653 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.Create (HRMS.API)'
2026-01-26 23:13:54.655 +03:00 [INF] Route matched with {action = "Create", controller = "Employees"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] Create(HRMS.Application.DTOs.Personnel.CreateEmployeeDto) on controller HRMS.API.Controllers.Personnel.EmployeesController (HRMS.API).
2026-01-26 23:13:54.668 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__ToString_0_startswith='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
WHERE [e].[EMPLOYEE_NUMBER] LIKE @__ToString_0_startswith ESCAPE N'\'
ORDER BY [e].[EMPLOYEE_NUMBER] DESC
2026-01-26 23:13:54.678 +03:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2026-01-26 23:13:54.691 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?' (Size = 100), @p5='?' (Size = 20), @p6='?' (Size = 50), @p7='?' (Size = 200), @p8='?' (Size = 1), @p9='?' (DbType = DateTime2), @p10='?' (Size = 1) (DbType = Byte), @p11='?' (DbType = Int32), @p12='?' (Size = 50), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (DbType = Int32), @p16='?' (Size = 20), @p17='?' (Size = 20), @p18='?' (Size = 20), @p19='?' (DbType = Int32), @p20='?' (Size = 50), @p21='?' (Size = 100), @p22='?' (Size = 50), @p23='?' (DbType = DateTime2), @p24='?' (Size = 50), @p25='?' (Size = 450), @p26='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_PERSONNEL].[EMPLOYEES] ([BIRTH_DATE], [CREATED_AT], [CREATED_BY], [DEPARTMENT_ID], [EMAIL], [EMPLOYEE_NUMBER], [FIRST_NAME_AR], [FULL_NAME_EN], [GENDER], [HIRE_DATE], [IS_DELETED], [JOB_ID], [LAST_NAME_AR], [LICENSE_EXPIRY_DATE], [LICENSE_NUMBER], [MANAGER_ID], [MARITAL_STATUS], [MOBILE], [NATIONAL_ID], [NATIONALITY_ID], [SECOND_NAME_AR], [SPECIALTY], [THIRD_NAME_AR], [UPDATED_AT], [UPDATED_BY], [USER_ID], [VERSION_NO])
OUTPUT INSERTED.[EMPLOYEE_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26);
2026-01-26 23:13:54.766 +03:00 [INF] Executed DbCommand (65ms) [Parameters=[@p27='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p28='?' (Size = 20), @p29='?' (Size = 50), @p30='?' (DbType = DateTime2), @p31='?' (Size = 50), @p32='?' (DbType = Int32), @p33='?' (DbType = DateTime2), @p34='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p35='?' (Size = 1) (DbType = Byte), @p36='?' (Size = 1) (DbType = Byte), @p37='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p38='?' (DbType = DateTime2), @p39='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p40='?' (DbType = DateTime2), @p41='?' (Size = 50), @p42='?' (DbType = Int16), @p43='?' (DbType = Int32), @p44='?' (Size = 1) (DbType = Byte), @p45='?' (DbType = DateTime2), @p46='?' (DbType = DateTime2), @p47='?' (Size = 50), @p48='?' (DbType = Int32), @p49='?' (Size = 1) (DbType = Byte), @p50='?' (Size = 1) (DbType = Byte), @p51='?' (Size = 1) (DbType = Byte), @p52='?' (Size = 100), @p53='?' (Size = 20), @p54='?' (Size = 50), @p55='?' (DbType = DateTime2), @p56='?' (Size = 50), @p57='?' (DbType = Int32), @p58='?' (Size = 100), @p59='?' (DbType = DateTime2), @p60='?' (Size = 50), @p61='?' (DbType = Int32), @p62='?' (Size = 1) (DbType = Byte), @p63='?' (Size = 1) (DbType = Byte), @p64='?' (Size = 20), @p65='?' (Size = 20), @p66='?' (Size = 50), @p67='?' (DbType = DateTime2), @p68='?' (Size = 50), @p69='?' (DbType = Int32), @p70='?' (Size = 20), @p71='?' (Size = 20), @p72='?' (DbType = Int32), @p73='?' (DbType = DateTime2), @p74='?' (Size = 50), @p75='?' (Size = 100), @p76='?' (DbType = Int32), @p77='?' (Size = 1) (DbType = Byte), @p78='?' (Size = 20), @p79='?' (Size = 200), @p80='?' (DbType = DateTime2), @p81='?' (Size = 50), @p82='?' (DbType = Int32), @p83='?' (Size = 50), @p84='?' (DbType = Int32), @p85='?' (DbType = DateTime2), @p86='?' (Size = 50), @p87='?' (DbType = Int32), @p88='?' (Size = 50), @p89='?' (Size = 1) (DbType = Byte), @p90='?' (Size = 1) (DbType = Byte), @p91='?' (Size = 1) (DbType = Byte), @p92='?' (DbType = DateTime2), @p93='?' (Size = 50), @p94='?' (DbType = Int32), @p95='?' (Size = 500), @p96='?' (Size = 200), @p97='?' (Size = 100), @p98='?' (DbType = DateTime2), @p99='?' (Size = 50), @p100='?' (DbType = Int32), @p101='?' (DbType = DateTime2), @p102='?' (Size = 1) (DbType = Byte), @p103='?' (Size = 1) (DbType = Byte), @p104='?' (DbType = DateTime2), @p105='?' (Size = 200), @p106='?' (DbType = DateTime2), @p107='?' (Size = 50), @p108='?' (DbType = Int32), @p109='?' (DbType = Int32), @p110='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p111='?' (DbType = DateTime2), @p112='?' (Size = 50), @p113='?' (DbType = Int32), @p114='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p115='?' (Size = 30), @p116='?' (Size = 1) (DbType = Byte), @p117='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p118='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p119='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p120='?' (DbType = DateTime2), @p121='?' (Size = 50), @p122='?' (DbType = Int32), @p123='?' (Size = 100), @p124='?' (DbType = DateTime2), @p125='?' (Size = 50), @p126='?' (Size = 50), @p127='?' (DbType = Int32), @p128='?' (DbType = Int32), @p129='?' (DbType = DateTime2), @p130='?' (Size = 255), @p131='?' (Size = 500), @p132='?' (DbType = Int64), @p133='?' (Size = 1) (DbType = Byte), @p134='?' (DbType = DateTime2), @p135='?' (DbType = DateTime2), @p136='?' (Size = 50), @p137='?' (DbType = Int32), @p138='?' (Size = 200), @p139='?' (DbType = DateTime2), @p140='?' (Size = 50), @p141='?' (DbType = Int32), @p142='?' (DbType = DateTime2), @p143='?' (Size = 1) (DbType = Byte), @p144='?' (Size = 1) (DbType = Byte), @p145='?' (Size = 100), @p146='?' (Size = 200), @p147='?' (Size = 500), @p148='?' (DbType = DateTime2), @p149='?' (DbType = DateTime2), @p150='?' (Size = 50), @p151='?' (DbType = Int32), @p152='?' (Size = 500), @p153='?' (DbType = Int32), @p154='?' (DbType = DateTime2), @p155='?' (Size = 50), @p156='?' (Size = 50), @p157='?' (DbType = Int32), @p158='?' (Size = 20), @p159='?' (DbType = Int16), @p160='?' (Size = 1) (DbType = Byte), @p161='?' (Size = 100), @p162='?' (Size = 200), @p163='?' (DbType = DateTime2), @p164='?' (Size = 50), @p165='?' (DbType = Int32), @p166='?' (Size = 500), @p167='?' (DbType = Int32), @p168='?' (DbType = DateTime2), @p169='?' (Size = 50), @p170='?' (Size = 50), @p171='?' (DbType = Int32), @p172='?' (Size = 20), @p173='?' (DbType = Int16), @p174='?' (Size = 1) (DbType = Byte), @p175='?' (Size = 100), @p176='?' (Size = 200), @p177='?' (DbType = DateTime2), @p178='?' (Size = 50), @p179='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [HR_PERSONNEL].[CONTRACTS] ([BASIC_SALARY], [CONTRACT_STATUS], [CONTRACT_TYPE], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [END_DATE], [HOUSING_ALLOWANCE], [IS_DELETED], [IS_RENEWABLE], [OTHER_ALLOWANCES], [START_DATE], [TRANSPORT_ALLOWANCE], [UPDATED_AT], [UPDATED_BY], [VACATION_DAYS], [VERSION_NO], [WORKING_HOURS_DAILY])
OUTPUT INSERTED.[CONTRACT_ID]
VALUES (@p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44);
INSERT INTO [HR_PERSONNEL].[DEPENDENTS] ([BIRTH_DATE], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [IS_DELETED], [IS_ELIGIBLE_FOR_INSURANCE], [IS_ELIGIBLE_FOR_TICKET], [NAME_AR], [NATIONAL_ID], [RELATIONSHIP], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[DEPENDENT_ID]
VALUES (@p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57);
INSERT INTO [HR_PERSONNEL].[EMERGENCY_CONTACTS] ([CONTACT_NAME_AR], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [IS_DELETED], [IS_PRIMARY], [PHONE_PRIMARY], [PHONE_SECONDARY], [RELATIONSHIP], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[CONTACT_ID]
VALUES (@p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65, @p66, @p67, @p68, @p69);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_ADDRESSES] ([ADDRESS_TYPE], [BUILDING_NO], [CITY_ID], [CREATED_AT], [CREATED_BY], [DISTRICT], [EMPLOYEE_ID], [IS_DELETED], [POSTAL_CODE], [STREET], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[ADDRESS_ID]
VALUES (@p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79, @p80, @p81, @p82);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_BANK_ACCOUNTS] ([ACCOUNT_NUMBER], [BANK_ID], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [IBAN], [IS_ACTIVE], [IS_DELETED], [IS_PRIMARY], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[ACCOUNT_ID]
VALUES (@p83, @p84, @p85, @p86, @p87, @p88, @p89, @p90, @p91, @p92, @p93, @p94);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_CERTIFICATIONS] ([ATTACHMENT_PATH], [CERT_NAME_AR], [CERT_NUMBER], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [EXPIRY_DATE], [IS_DELETED], [IS_MANDATORY], [ISSUE_DATE], [ISSUING_AUTHORITY], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[CERT_ID]
VALUES (@p95, @p96, @p97, @p98, @p99, @p100, @p101, @p102, @p103, @p104, @p105, @p106, @p107, @p108);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_COMPENSATIONS] ([BANK_ID], [BASIC_SALARY], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [HOUSING_ALLOWANCE], [IBAN_NUMBER], [IS_DELETED], [MEDICAL_ALLOWANCE], [OTHER_ALLOWANCES], [TRANSPORT_ALLOWANCE], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[COMPENSATION_ID]
VALUES (@p109, @p110, @p111, @p112, @p113, @p114, @p115, @p116, @p117, @p118, @p119, @p120, @p121, @p122);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_DOCUMENTS] ([CONTENT_TYPE], [CREATED_AT], [CREATED_BY], [DOCUMENT_NUMBER], [DOCUMENT_TYPE_ID], [EMPLOYEE_ID], [EXPIRY_DATE], [FILE_NAME], [FILE_PATH], [FILE_SIZE], [IS_DELETED], [ISSUE_DATE], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[DOCUMENT_ID]
VALUES (@p123, @p124, @p125, @p126, @p127, @p128, @p129, @p130, @p131, @p132, @p133, @p134, @p135, @p136, @p137);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_EXPERIENCES] ([COMPANY_NAME_AR], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [END_DATE], [IS_CURRENT], [IS_DELETED], [JOB_TITLE_AR], [REASON_FOR_LEAVING], [RESPONSIBILITIES], [START_DATE], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[EXPERIENCE_ID]
VALUES (@p138, @p139, @p140, @p141, @p142, @p143, @p144, @p145, @p146, @p147, @p148, @p149, @p150, @p151);
MERGE [HR_PERSONNEL].[EMPLOYEE_QUALIFICATIONS] USING (
VALUES (@p152, @p153, @p154, @p155, @p156, @p157, @p158, @p159, @p160, @p161, @p162, @p163, @p164, @p165, 0),
(@p166, @p167, @p168, @p169, @p170, @p171, @p172, @p173, @p174, @p175, @p176, @p177, @p178, @p179, 1)) AS i ([ATTACHMENT_PATH], [COUNTRY_ID], [CREATED_AT], [CREATED_BY], [DEGREE_TYPE], [EMPLOYEE_ID], [GRADE], [GRADUATION_YEAR], [IS_DELETED], [MAJOR_AR], [UNIVERSITY_AR], [UPDATED_AT], [UPDATED_BY], [VERSION_NO], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([ATTACHMENT_PATH], [COUNTRY_ID], [CREATED_AT], [CREATED_BY], [DEGREE_TYPE], [EMPLOYEE_ID], [GRADE], [GRADUATION_YEAR], [IS_DELETED], [MAJOR_AR], [UNIVERSITY_AR], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
VALUES (i.[ATTACHMENT_PATH], i.[COUNTRY_ID], i.[CREATED_AT], i.[CREATED_BY], i.[DEGREE_TYPE], i.[EMPLOYEE_ID], i.[GRADE], i.[GRADUATION_YEAR], i.[IS_DELETED], i.[MAJOR_AR], i.[UNIVERSITY_AR], i.[UPDATED_AT], i.[UPDATED_BY], i.[VERSION_NO])
OUTPUT INSERTED.[QUALIFICATION_ID], i._Position;
2026-01-26 23:13:54.794 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'HRMS.Infrastructure.Data.HRMSDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The MERGE statement conflicted with the FOREIGN KEY constraint "FK_EMPLOYEE_QUALIFICATIONS_COUNTRIES_COUNTRY_ID". The conflict occurred in database "HRMS_Hospital", table "HR_CORE.COUNTRIES", column 'COUNTRY_ID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:40dba97e-6e28-4b24-b0cb-b81315564ed3
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The MERGE statement conflicted with the FOREIGN KEY constraint "FK_EMPLOYEE_QUALIFICATIONS_COUNTRIES_COUNTRY_ID". The conflict occurred in database "HRMS_Hospital", table "HR_CORE.COUNTRIES", column 'COUNTRY_ID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:40dba97e-6e28-4b24-b0cb-b81315564ed3
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2026-01-26 23:14:15.619 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeesController.Create (HRMS.API) in 20960.6328ms
2026-01-26 23:14:15.629 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.Create (HRMS.API)'
2026-01-26 23:14:15.632 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The MERGE statement conflicted with the FOREIGN KEY constraint "FK_EMPLOYEE_QUALIFICATIONS_COUNTRIES_COUNTRY_ID". The conflict occurred in database "HRMS_Hospital", table "HR_CORE.COUNTRIES", column 'COUNTRY_ID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:40dba97e-6e28-4b24-b0cb-b81315564ed3
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at HRMS.Application.Features.Personnel.Employees.Commands.CreateEmployee.CreateEmployeeCommandHandler.Handle(CreateEmployeeCommand request, CancellationToken cancellationToken)
   at HRMS.Application.Features.Personnel.Employees.Commands.CreateEmployee.CreateEmployeeCommandHandler.Handle(CreateEmployeeCommand request, CancellationToken cancellationToken)
   at HRMS.API.Controllers.Personnel.EmployeesController.Create(CreateEmployeeDto dto)
   at lambda_method635(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2026-01-26 23:14:15.686 +03:00 [ERR] HTTP POST /api/Employees responded 500 in 21034.4834 ms
2026-01-26 23:14:15.708 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Employees - 500 null text/plain; charset=utf-8 21069.1024ms
2026-01-26 23:17:36.892 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Employees - application/json 3850
2026-01-26 23:17:36.900 +03:00 [INF] CORS policy execution successful.
2026-01-26 23:17:36.902 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.Create (HRMS.API)'
2026-01-26 23:17:36.905 +03:00 [INF] Route matched with {action = "Create", controller = "Employees"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] Create(HRMS.Application.DTOs.Personnel.CreateEmployeeDto) on controller HRMS.API.Controllers.Personnel.EmployeesController (HRMS.API).
2026-01-26 23:17:36.925 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@__ToString_0_startswith='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
WHERE [e].[EMPLOYEE_NUMBER] LIKE @__ToString_0_startswith ESCAPE N'\'
ORDER BY [e].[EMPLOYEE_NUMBER] DESC
2026-01-26 23:17:36.933 +03:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2026-01-26 23:17:36.947 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?' (Size = 100), @p5='?' (Size = 20), @p6='?' (Size = 50), @p7='?' (Size = 200), @p8='?' (Size = 1), @p9='?' (DbType = DateTime2), @p10='?' (Size = 1) (DbType = Byte), @p11='?' (DbType = Int32), @p12='?' (Size = 50), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (DbType = Int32), @p16='?' (Size = 20), @p17='?' (Size = 20), @p18='?' (Size = 20), @p19='?' (DbType = Int32), @p20='?' (Size = 50), @p21='?' (Size = 100), @p22='?' (Size = 50), @p23='?' (DbType = DateTime2), @p24='?' (Size = 50), @p25='?' (Size = 450), @p26='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_PERSONNEL].[EMPLOYEES] ([BIRTH_DATE], [CREATED_AT], [CREATED_BY], [DEPARTMENT_ID], [EMAIL], [EMPLOYEE_NUMBER], [FIRST_NAME_AR], [FULL_NAME_EN], [GENDER], [HIRE_DATE], [IS_DELETED], [JOB_ID], [LAST_NAME_AR], [LICENSE_EXPIRY_DATE], [LICENSE_NUMBER], [MANAGER_ID], [MARITAL_STATUS], [MOBILE], [NATIONAL_ID], [NATIONALITY_ID], [SECOND_NAME_AR], [SPECIALTY], [THIRD_NAME_AR], [UPDATED_AT], [UPDATED_BY], [USER_ID], [VERSION_NO])
OUTPUT INSERTED.[EMPLOYEE_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26);
2026-01-26 23:17:37.016 +03:00 [INF] Executed DbCommand (62ms) [Parameters=[@p27='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p28='?' (Size = 20), @p29='?' (Size = 50), @p30='?' (DbType = DateTime2), @p31='?' (Size = 50), @p32='?' (DbType = Int32), @p33='?' (DbType = DateTime2), @p34='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p35='?' (Size = 1) (DbType = Byte), @p36='?' (Size = 1) (DbType = Byte), @p37='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p38='?' (DbType = DateTime2), @p39='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p40='?' (DbType = DateTime2), @p41='?' (Size = 50), @p42='?' (DbType = Int16), @p43='?' (DbType = Int32), @p44='?' (Size = 1) (DbType = Byte), @p45='?' (DbType = DateTime2), @p46='?' (DbType = DateTime2), @p47='?' (Size = 50), @p48='?' (DbType = Int32), @p49='?' (Size = 1) (DbType = Byte), @p50='?' (Size = 1) (DbType = Byte), @p51='?' (Size = 1) (DbType = Byte), @p52='?' (Size = 100), @p53='?' (Size = 20), @p54='?' (Size = 50), @p55='?' (DbType = DateTime2), @p56='?' (Size = 50), @p57='?' (DbType = Int32), @p58='?' (Size = 100), @p59='?' (DbType = DateTime2), @p60='?' (Size = 50), @p61='?' (DbType = Int32), @p62='?' (Size = 1) (DbType = Byte), @p63='?' (Size = 1) (DbType = Byte), @p64='?' (Size = 20), @p65='?' (Size = 20), @p66='?' (Size = 50), @p67='?' (DbType = DateTime2), @p68='?' (Size = 50), @p69='?' (DbType = Int32), @p70='?' (Size = 20), @p71='?' (Size = 20), @p72='?' (DbType = Int32), @p73='?' (DbType = DateTime2), @p74='?' (Size = 50), @p75='?' (Size = 100), @p76='?' (DbType = Int32), @p77='?' (Size = 1) (DbType = Byte), @p78='?' (Size = 20), @p79='?' (Size = 200), @p80='?' (DbType = DateTime2), @p81='?' (Size = 50), @p82='?' (DbType = Int32), @p83='?' (Size = 50), @p84='?' (DbType = Int32), @p85='?' (DbType = DateTime2), @p86='?' (Size = 50), @p87='?' (DbType = Int32), @p88='?' (Size = 50), @p89='?' (Size = 1) (DbType = Byte), @p90='?' (Size = 1) (DbType = Byte), @p91='?' (Size = 1) (DbType = Byte), @p92='?' (DbType = DateTime2), @p93='?' (Size = 50), @p94='?' (DbType = Int32), @p95='?' (Size = 500), @p96='?' (Size = 200), @p97='?' (Size = 100), @p98='?' (DbType = DateTime2), @p99='?' (Size = 50), @p100='?' (DbType = Int32), @p101='?' (DbType = DateTime2), @p102='?' (Size = 1) (DbType = Byte), @p103='?' (Size = 1) (DbType = Byte), @p104='?' (DbType = DateTime2), @p105='?' (Size = 200), @p106='?' (DbType = DateTime2), @p107='?' (Size = 50), @p108='?' (DbType = Int32), @p109='?' (DbType = Int32), @p110='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p111='?' (DbType = DateTime2), @p112='?' (Size = 50), @p113='?' (DbType = Int32), @p114='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p115='?' (Size = 30), @p116='?' (Size = 1) (DbType = Byte), @p117='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p118='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p119='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p120='?' (DbType = DateTime2), @p121='?' (Size = 50), @p122='?' (DbType = Int32), @p123='?' (Size = 100), @p124='?' (DbType = DateTime2), @p125='?' (Size = 50), @p126='?' (Size = 50), @p127='?' (DbType = Int32), @p128='?' (DbType = Int32), @p129='?' (DbType = DateTime2), @p130='?' (Size = 255), @p131='?' (Size = 500), @p132='?' (DbType = Int64), @p133='?' (Size = 1) (DbType = Byte), @p134='?' (DbType = DateTime2), @p135='?' (DbType = DateTime2), @p136='?' (Size = 50), @p137='?' (DbType = Int32), @p138='?' (Size = 200), @p139='?' (DbType = DateTime2), @p140='?' (Size = 50), @p141='?' (DbType = Int32), @p142='?' (DbType = DateTime2), @p143='?' (Size = 1) (DbType = Byte), @p144='?' (Size = 1) (DbType = Byte), @p145='?' (Size = 100), @p146='?' (Size = 200), @p147='?' (Size = 500), @p148='?' (DbType = DateTime2), @p149='?' (DbType = DateTime2), @p150='?' (Size = 50), @p151='?' (DbType = Int32), @p152='?' (Size = 500), @p153='?' (DbType = Int32), @p154='?' (DbType = DateTime2), @p155='?' (Size = 50), @p156='?' (Size = 50), @p157='?' (DbType = Int32), @p158='?' (Size = 20), @p159='?' (DbType = Int16), @p160='?' (Size = 1) (DbType = Byte), @p161='?' (Size = 100), @p162='?' (Size = 200), @p163='?' (DbType = DateTime2), @p164='?' (Size = 50), @p165='?' (DbType = Int32), @p166='?' (Size = 500), @p167='?' (DbType = Int32), @p168='?' (DbType = DateTime2), @p169='?' (Size = 50), @p170='?' (Size = 50), @p171='?' (DbType = Int32), @p172='?' (Size = 20), @p173='?' (DbType = Int16), @p174='?' (Size = 1) (DbType = Byte), @p175='?' (Size = 100), @p176='?' (Size = 200), @p177='?' (DbType = DateTime2), @p178='?' (Size = 50), @p179='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [HR_PERSONNEL].[CONTRACTS] ([BASIC_SALARY], [CONTRACT_STATUS], [CONTRACT_TYPE], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [END_DATE], [HOUSING_ALLOWANCE], [IS_DELETED], [IS_RENEWABLE], [OTHER_ALLOWANCES], [START_DATE], [TRANSPORT_ALLOWANCE], [UPDATED_AT], [UPDATED_BY], [VACATION_DAYS], [VERSION_NO], [WORKING_HOURS_DAILY])
OUTPUT INSERTED.[CONTRACT_ID]
VALUES (@p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44);
INSERT INTO [HR_PERSONNEL].[DEPENDENTS] ([BIRTH_DATE], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [IS_DELETED], [IS_ELIGIBLE_FOR_INSURANCE], [IS_ELIGIBLE_FOR_TICKET], [NAME_AR], [NATIONAL_ID], [RELATIONSHIP], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[DEPENDENT_ID]
VALUES (@p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57);
INSERT INTO [HR_PERSONNEL].[EMERGENCY_CONTACTS] ([CONTACT_NAME_AR], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [IS_DELETED], [IS_PRIMARY], [PHONE_PRIMARY], [PHONE_SECONDARY], [RELATIONSHIP], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[CONTACT_ID]
VALUES (@p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65, @p66, @p67, @p68, @p69);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_ADDRESSES] ([ADDRESS_TYPE], [BUILDING_NO], [CITY_ID], [CREATED_AT], [CREATED_BY], [DISTRICT], [EMPLOYEE_ID], [IS_DELETED], [POSTAL_CODE], [STREET], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[ADDRESS_ID]
VALUES (@p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79, @p80, @p81, @p82);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_BANK_ACCOUNTS] ([ACCOUNT_NUMBER], [BANK_ID], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [IBAN], [IS_ACTIVE], [IS_DELETED], [IS_PRIMARY], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[ACCOUNT_ID]
VALUES (@p83, @p84, @p85, @p86, @p87, @p88, @p89, @p90, @p91, @p92, @p93, @p94);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_CERTIFICATIONS] ([ATTACHMENT_PATH], [CERT_NAME_AR], [CERT_NUMBER], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [EXPIRY_DATE], [IS_DELETED], [IS_MANDATORY], [ISSUE_DATE], [ISSUING_AUTHORITY], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[CERT_ID]
VALUES (@p95, @p96, @p97, @p98, @p99, @p100, @p101, @p102, @p103, @p104, @p105, @p106, @p107, @p108);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_COMPENSATIONS] ([BANK_ID], [BASIC_SALARY], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [HOUSING_ALLOWANCE], [IBAN_NUMBER], [IS_DELETED], [MEDICAL_ALLOWANCE], [OTHER_ALLOWANCES], [TRANSPORT_ALLOWANCE], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[COMPENSATION_ID]
VALUES (@p109, @p110, @p111, @p112, @p113, @p114, @p115, @p116, @p117, @p118, @p119, @p120, @p121, @p122);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_DOCUMENTS] ([CONTENT_TYPE], [CREATED_AT], [CREATED_BY], [DOCUMENT_NUMBER], [DOCUMENT_TYPE_ID], [EMPLOYEE_ID], [EXPIRY_DATE], [FILE_NAME], [FILE_PATH], [FILE_SIZE], [IS_DELETED], [ISSUE_DATE], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[DOCUMENT_ID]
VALUES (@p123, @p124, @p125, @p126, @p127, @p128, @p129, @p130, @p131, @p132, @p133, @p134, @p135, @p136, @p137);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_EXPERIENCES] ([COMPANY_NAME_AR], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [END_DATE], [IS_CURRENT], [IS_DELETED], [JOB_TITLE_AR], [REASON_FOR_LEAVING], [RESPONSIBILITIES], [START_DATE], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[EXPERIENCE_ID]
VALUES (@p138, @p139, @p140, @p141, @p142, @p143, @p144, @p145, @p146, @p147, @p148, @p149, @p150, @p151);
MERGE [HR_PERSONNEL].[EMPLOYEE_QUALIFICATIONS] USING (
VALUES (@p152, @p153, @p154, @p155, @p156, @p157, @p158, @p159, @p160, @p161, @p162, @p163, @p164, @p165, 0),
(@p166, @p167, @p168, @p169, @p170, @p171, @p172, @p173, @p174, @p175, @p176, @p177, @p178, @p179, 1)) AS i ([ATTACHMENT_PATH], [COUNTRY_ID], [CREATED_AT], [CREATED_BY], [DEGREE_TYPE], [EMPLOYEE_ID], [GRADE], [GRADUATION_YEAR], [IS_DELETED], [MAJOR_AR], [UNIVERSITY_AR], [UPDATED_AT], [UPDATED_BY], [VERSION_NO], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([ATTACHMENT_PATH], [COUNTRY_ID], [CREATED_AT], [CREATED_BY], [DEGREE_TYPE], [EMPLOYEE_ID], [GRADE], [GRADUATION_YEAR], [IS_DELETED], [MAJOR_AR], [UNIVERSITY_AR], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
VALUES (i.[ATTACHMENT_PATH], i.[COUNTRY_ID], i.[CREATED_AT], i.[CREATED_BY], i.[DEGREE_TYPE], i.[EMPLOYEE_ID], i.[GRADE], i.[GRADUATION_YEAR], i.[IS_DELETED], i.[MAJOR_AR], i.[UNIVERSITY_AR], i.[UPDATED_AT], i.[UPDATED_BY], i.[VERSION_NO])
OUTPUT INSERTED.[QUALIFICATION_ID], i._Position;
2026-01-26 23:17:37.044 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'HRMS.Infrastructure.Data.HRMSDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The MERGE statement conflicted with the FOREIGN KEY constraint "FK_EMPLOYEE_QUALIFICATIONS_COUNTRIES_COUNTRY_ID". The conflict occurred in database "HRMS_Hospital", table "HR_CORE.COUNTRIES", column 'COUNTRY_ID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:40dba97e-6e28-4b24-b0cb-b81315564ed3
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The MERGE statement conflicted with the FOREIGN KEY constraint "FK_EMPLOYEE_QUALIFICATIONS_COUNTRIES_COUNTRY_ID". The conflict occurred in database "HRMS_Hospital", table "HR_CORE.COUNTRIES", column 'COUNTRY_ID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:40dba97e-6e28-4b24-b0cb-b81315564ed3
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2026-01-26 23:19:31.492 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeesController.Create (HRMS.API) in 114584.4376ms
2026-01-26 23:19:31.645 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.Create (HRMS.API)'
2026-01-26 23:19:31.657 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The MERGE statement conflicted with the FOREIGN KEY constraint "FK_EMPLOYEE_QUALIFICATIONS_COUNTRIES_COUNTRY_ID". The conflict occurred in database "HRMS_Hospital", table "HR_CORE.COUNTRIES", column 'COUNTRY_ID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:40dba97e-6e28-4b24-b0cb-b81315564ed3
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at HRMS.Application.Features.Personnel.Employees.Commands.CreateEmployee.CreateEmployeeCommandHandler.Handle(CreateEmployeeCommand request, CancellationToken cancellationToken)
   at HRMS.Application.Features.Personnel.Employees.Commands.CreateEmployee.CreateEmployeeCommandHandler.Handle(CreateEmployeeCommand request, CancellationToken cancellationToken)
   at HRMS.API.Controllers.Personnel.EmployeesController.Create(CreateEmployeeDto dto)
   at lambda_method635(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2026-01-26 23:19:31.719 +03:00 [ERR] HTTP POST /api/Employees responded 500 in 114819.3993 ms
2026-01-26 23:19:31.722 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Employees - 500 null text/plain; charset=utf-8 114836.0317ms
2026-01-26 23:20:29.610 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Employees - application/json 3850
2026-01-26 23:20:29.738 +03:00 [INF] CORS policy execution successful.
2026-01-26 23:20:29.740 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.Create (HRMS.API)'
2026-01-26 23:20:29.742 +03:00 [INF] Route matched with {action = "Create", controller = "Employees"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] Create(HRMS.Application.DTOs.Personnel.CreateEmployeeDto) on controller HRMS.API.Controllers.Personnel.EmployeesController (HRMS.API).
2026-01-26 23:20:29.758 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__ToString_0_startswith='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
WHERE [e].[EMPLOYEE_NUMBER] LIKE @__ToString_0_startswith ESCAPE N'\'
ORDER BY [e].[EMPLOYEE_NUMBER] DESC
2026-01-26 23:20:29.764 +03:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2026-01-26 23:20:29.784 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?' (Size = 100), @p5='?' (Size = 20), @p6='?' (Size = 50), @p7='?' (Size = 200), @p8='?' (Size = 1), @p9='?' (DbType = DateTime2), @p10='?' (Size = 1) (DbType = Byte), @p11='?' (DbType = Int32), @p12='?' (Size = 50), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (DbType = Int32), @p16='?' (Size = 20), @p17='?' (Size = 20), @p18='?' (Size = 20), @p19='?' (DbType = Int32), @p20='?' (Size = 50), @p21='?' (Size = 100), @p22='?' (Size = 50), @p23='?' (DbType = DateTime2), @p24='?' (Size = 50), @p25='?' (Size = 450), @p26='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_PERSONNEL].[EMPLOYEES] ([BIRTH_DATE], [CREATED_AT], [CREATED_BY], [DEPARTMENT_ID], [EMAIL], [EMPLOYEE_NUMBER], [FIRST_NAME_AR], [FULL_NAME_EN], [GENDER], [HIRE_DATE], [IS_DELETED], [JOB_ID], [LAST_NAME_AR], [LICENSE_EXPIRY_DATE], [LICENSE_NUMBER], [MANAGER_ID], [MARITAL_STATUS], [MOBILE], [NATIONAL_ID], [NATIONALITY_ID], [SECOND_NAME_AR], [SPECIALTY], [THIRD_NAME_AR], [UPDATED_AT], [UPDATED_BY], [USER_ID], [VERSION_NO])
OUTPUT INSERTED.[EMPLOYEE_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26);
2026-01-26 23:20:29.870 +03:00 [INF] Executed DbCommand (56ms) [Parameters=[@p27='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p28='?' (Size = 20), @p29='?' (Size = 50), @p30='?' (DbType = DateTime2), @p31='?' (Size = 50), @p32='?' (DbType = Int32), @p33='?' (DbType = DateTime2), @p34='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p35='?' (Size = 1) (DbType = Byte), @p36='?' (Size = 1) (DbType = Byte), @p37='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p38='?' (DbType = DateTime2), @p39='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p40='?' (DbType = DateTime2), @p41='?' (Size = 50), @p42='?' (DbType = Int16), @p43='?' (DbType = Int32), @p44='?' (Size = 1) (DbType = Byte), @p45='?' (DbType = DateTime2), @p46='?' (DbType = DateTime2), @p47='?' (Size = 50), @p48='?' (DbType = Int32), @p49='?' (Size = 1) (DbType = Byte), @p50='?' (Size = 1) (DbType = Byte), @p51='?' (Size = 1) (DbType = Byte), @p52='?' (Size = 100), @p53='?' (Size = 20), @p54='?' (Size = 50), @p55='?' (DbType = DateTime2), @p56='?' (Size = 50), @p57='?' (DbType = Int32), @p58='?' (Size = 100), @p59='?' (DbType = DateTime2), @p60='?' (Size = 50), @p61='?' (DbType = Int32), @p62='?' (Size = 1) (DbType = Byte), @p63='?' (Size = 1) (DbType = Byte), @p64='?' (Size = 20), @p65='?' (Size = 20), @p66='?' (Size = 50), @p67='?' (DbType = DateTime2), @p68='?' (Size = 50), @p69='?' (DbType = Int32), @p70='?' (Size = 20), @p71='?' (Size = 20), @p72='?' (DbType = Int32), @p73='?' (DbType = DateTime2), @p74='?' (Size = 50), @p75='?' (Size = 100), @p76='?' (DbType = Int32), @p77='?' (Size = 1) (DbType = Byte), @p78='?' (Size = 20), @p79='?' (Size = 200), @p80='?' (DbType = DateTime2), @p81='?' (Size = 50), @p82='?' (DbType = Int32), @p83='?' (Size = 50), @p84='?' (DbType = Int32), @p85='?' (DbType = DateTime2), @p86='?' (Size = 50), @p87='?' (DbType = Int32), @p88='?' (Size = 50), @p89='?' (Size = 1) (DbType = Byte), @p90='?' (Size = 1) (DbType = Byte), @p91='?' (Size = 1) (DbType = Byte), @p92='?' (DbType = DateTime2), @p93='?' (Size = 50), @p94='?' (DbType = Int32), @p95='?' (Size = 500), @p96='?' (Size = 200), @p97='?' (Size = 100), @p98='?' (DbType = DateTime2), @p99='?' (Size = 50), @p100='?' (DbType = Int32), @p101='?' (DbType = DateTime2), @p102='?' (Size = 1) (DbType = Byte), @p103='?' (Size = 1) (DbType = Byte), @p104='?' (DbType = DateTime2), @p105='?' (Size = 200), @p106='?' (DbType = DateTime2), @p107='?' (Size = 50), @p108='?' (DbType = Int32), @p109='?' (DbType = Int32), @p110='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p111='?' (DbType = DateTime2), @p112='?' (Size = 50), @p113='?' (DbType = Int32), @p114='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p115='?' (Size = 30), @p116='?' (Size = 1) (DbType = Byte), @p117='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p118='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p119='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p120='?' (DbType = DateTime2), @p121='?' (Size = 50), @p122='?' (DbType = Int32), @p123='?' (Size = 100), @p124='?' (DbType = DateTime2), @p125='?' (Size = 50), @p126='?' (Size = 50), @p127='?' (DbType = Int32), @p128='?' (DbType = Int32), @p129='?' (DbType = DateTime2), @p130='?' (Size = 255), @p131='?' (Size = 500), @p132='?' (DbType = Int64), @p133='?' (Size = 1) (DbType = Byte), @p134='?' (DbType = DateTime2), @p135='?' (DbType = DateTime2), @p136='?' (Size = 50), @p137='?' (DbType = Int32), @p138='?' (Size = 200), @p139='?' (DbType = DateTime2), @p140='?' (Size = 50), @p141='?' (DbType = Int32), @p142='?' (DbType = DateTime2), @p143='?' (Size = 1) (DbType = Byte), @p144='?' (Size = 1) (DbType = Byte), @p145='?' (Size = 100), @p146='?' (Size = 200), @p147='?' (Size = 500), @p148='?' (DbType = DateTime2), @p149='?' (DbType = DateTime2), @p150='?' (Size = 50), @p151='?' (DbType = Int32), @p152='?' (Size = 500), @p153='?' (DbType = Int32), @p154='?' (DbType = DateTime2), @p155='?' (Size = 50), @p156='?' (Size = 50), @p157='?' (DbType = Int32), @p158='?' (Size = 20), @p159='?' (DbType = Int16), @p160='?' (Size = 1) (DbType = Byte), @p161='?' (Size = 100), @p162='?' (Size = 200), @p163='?' (DbType = DateTime2), @p164='?' (Size = 50), @p165='?' (DbType = Int32), @p166='?' (Size = 500), @p167='?' (DbType = Int32), @p168='?' (DbType = DateTime2), @p169='?' (Size = 50), @p170='?' (Size = 50), @p171='?' (DbType = Int32), @p172='?' (Size = 20), @p173='?' (DbType = Int16), @p174='?' (Size = 1) (DbType = Byte), @p175='?' (Size = 100), @p176='?' (Size = 200), @p177='?' (DbType = DateTime2), @p178='?' (Size = 50), @p179='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [HR_PERSONNEL].[CONTRACTS] ([BASIC_SALARY], [CONTRACT_STATUS], [CONTRACT_TYPE], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [END_DATE], [HOUSING_ALLOWANCE], [IS_DELETED], [IS_RENEWABLE], [OTHER_ALLOWANCES], [START_DATE], [TRANSPORT_ALLOWANCE], [UPDATED_AT], [UPDATED_BY], [VACATION_DAYS], [VERSION_NO], [WORKING_HOURS_DAILY])
OUTPUT INSERTED.[CONTRACT_ID]
VALUES (@p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44);
INSERT INTO [HR_PERSONNEL].[DEPENDENTS] ([BIRTH_DATE], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [IS_DELETED], [IS_ELIGIBLE_FOR_INSURANCE], [IS_ELIGIBLE_FOR_TICKET], [NAME_AR], [NATIONAL_ID], [RELATIONSHIP], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[DEPENDENT_ID]
VALUES (@p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57);
INSERT INTO [HR_PERSONNEL].[EMERGENCY_CONTACTS] ([CONTACT_NAME_AR], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [IS_DELETED], [IS_PRIMARY], [PHONE_PRIMARY], [PHONE_SECONDARY], [RELATIONSHIP], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[CONTACT_ID]
VALUES (@p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65, @p66, @p67, @p68, @p69);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_ADDRESSES] ([ADDRESS_TYPE], [BUILDING_NO], [CITY_ID], [CREATED_AT], [CREATED_BY], [DISTRICT], [EMPLOYEE_ID], [IS_DELETED], [POSTAL_CODE], [STREET], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[ADDRESS_ID]
VALUES (@p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79, @p80, @p81, @p82);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_BANK_ACCOUNTS] ([ACCOUNT_NUMBER], [BANK_ID], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [IBAN], [IS_ACTIVE], [IS_DELETED], [IS_PRIMARY], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[ACCOUNT_ID]
VALUES (@p83, @p84, @p85, @p86, @p87, @p88, @p89, @p90, @p91, @p92, @p93, @p94);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_CERTIFICATIONS] ([ATTACHMENT_PATH], [CERT_NAME_AR], [CERT_NUMBER], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [EXPIRY_DATE], [IS_DELETED], [IS_MANDATORY], [ISSUE_DATE], [ISSUING_AUTHORITY], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[CERT_ID]
VALUES (@p95, @p96, @p97, @p98, @p99, @p100, @p101, @p102, @p103, @p104, @p105, @p106, @p107, @p108);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_COMPENSATIONS] ([BANK_ID], [BASIC_SALARY], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [HOUSING_ALLOWANCE], [IBAN_NUMBER], [IS_DELETED], [MEDICAL_ALLOWANCE], [OTHER_ALLOWANCES], [TRANSPORT_ALLOWANCE], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[COMPENSATION_ID]
VALUES (@p109, @p110, @p111, @p112, @p113, @p114, @p115, @p116, @p117, @p118, @p119, @p120, @p121, @p122);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_DOCUMENTS] ([CONTENT_TYPE], [CREATED_AT], [CREATED_BY], [DOCUMENT_NUMBER], [DOCUMENT_TYPE_ID], [EMPLOYEE_ID], [EXPIRY_DATE], [FILE_NAME], [FILE_PATH], [FILE_SIZE], [IS_DELETED], [ISSUE_DATE], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[DOCUMENT_ID]
VALUES (@p123, @p124, @p125, @p126, @p127, @p128, @p129, @p130, @p131, @p132, @p133, @p134, @p135, @p136, @p137);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_EXPERIENCES] ([COMPANY_NAME_AR], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [END_DATE], [IS_CURRENT], [IS_DELETED], [JOB_TITLE_AR], [REASON_FOR_LEAVING], [RESPONSIBILITIES], [START_DATE], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[EXPERIENCE_ID]
VALUES (@p138, @p139, @p140, @p141, @p142, @p143, @p144, @p145, @p146, @p147, @p148, @p149, @p150, @p151);
MERGE [HR_PERSONNEL].[EMPLOYEE_QUALIFICATIONS] USING (
VALUES (@p152, @p153, @p154, @p155, @p156, @p157, @p158, @p159, @p160, @p161, @p162, @p163, @p164, @p165, 0),
(@p166, @p167, @p168, @p169, @p170, @p171, @p172, @p173, @p174, @p175, @p176, @p177, @p178, @p179, 1)) AS i ([ATTACHMENT_PATH], [COUNTRY_ID], [CREATED_AT], [CREATED_BY], [DEGREE_TYPE], [EMPLOYEE_ID], [GRADE], [GRADUATION_YEAR], [IS_DELETED], [MAJOR_AR], [UNIVERSITY_AR], [UPDATED_AT], [UPDATED_BY], [VERSION_NO], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([ATTACHMENT_PATH], [COUNTRY_ID], [CREATED_AT], [CREATED_BY], [DEGREE_TYPE], [EMPLOYEE_ID], [GRADE], [GRADUATION_YEAR], [IS_DELETED], [MAJOR_AR], [UNIVERSITY_AR], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
VALUES (i.[ATTACHMENT_PATH], i.[COUNTRY_ID], i.[CREATED_AT], i.[CREATED_BY], i.[DEGREE_TYPE], i.[EMPLOYEE_ID], i.[GRADE], i.[GRADUATION_YEAR], i.[IS_DELETED], i.[MAJOR_AR], i.[UNIVERSITY_AR], i.[UPDATED_AT], i.[UPDATED_BY], i.[VERSION_NO])
OUTPUT INSERTED.[QUALIFICATION_ID], i._Position;
2026-01-26 23:20:29.899 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'System.Int32'.
2026-01-26 23:20:29.936 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeesController.Create (HRMS.API) in 190.7302ms
2026-01-26 23:20:29.945 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.Create (HRMS.API)'
2026-01-26 23:20:29.946 +03:00 [INF] HTTP POST /api/Employees responded 201 in 208.6737 ms
2026-01-26 23:20:29.949 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Employees - 201 null application/json; charset=utf-8 341.8847ms
2026-01-26 23:22:38.577 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Employees - application/json 1513
2026-01-26 23:22:38.581 +03:00 [INF] CORS policy execution successful.
2026-01-26 23:22:38.582 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.Create (HRMS.API)'
2026-01-26 23:22:38.584 +03:00 [INF] Route matched with {action = "Create", controller = "Employees"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] Create(HRMS.Application.DTOs.Personnel.CreateEmployeeDto) on controller HRMS.API.Controllers.Personnel.EmployeesController (HRMS.API).
2026-01-26 23:22:38.604 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__ToString_0_startswith='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
WHERE [e].[EMPLOYEE_NUMBER] LIKE @__ToString_0_startswith ESCAPE N'\'
ORDER BY [e].[EMPLOYEE_NUMBER] DESC
2026-01-26 23:22:38.614 +03:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2026-01-26 23:22:38.633 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?' (Size = 100), @p5='?' (Size = 20), @p6='?' (Size = 50), @p7='?' (Size = 200), @p8='?' (Size = 1), @p9='?' (DbType = DateTime2), @p10='?' (Size = 1) (DbType = Byte), @p11='?' (DbType = Int32), @p12='?' (Size = 50), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (DbType = Int32), @p16='?' (Size = 20), @p17='?' (Size = 20), @p18='?' (Size = 20), @p19='?' (DbType = Int32), @p20='?' (Size = 50), @p21='?' (Size = 100), @p22='?' (Size = 50), @p23='?' (DbType = DateTime2), @p24='?' (Size = 50), @p25='?' (Size = 450), @p26='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_PERSONNEL].[EMPLOYEES] ([BIRTH_DATE], [CREATED_AT], [CREATED_BY], [DEPARTMENT_ID], [EMAIL], [EMPLOYEE_NUMBER], [FIRST_NAME_AR], [FULL_NAME_EN], [GENDER], [HIRE_DATE], [IS_DELETED], [JOB_ID], [LAST_NAME_AR], [LICENSE_EXPIRY_DATE], [LICENSE_NUMBER], [MANAGER_ID], [MARITAL_STATUS], [MOBILE], [NATIONAL_ID], [NATIONALITY_ID], [SECOND_NAME_AR], [SPECIALTY], [THIRD_NAME_AR], [UPDATED_AT], [UPDATED_BY], [USER_ID], [VERSION_NO])
OUTPUT INSERTED.[EMPLOYEE_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26);
2026-01-26 23:22:38.658 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@p27='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p28='?' (Size = 20), @p29='?' (Size = 50), @p30='?' (DbType = DateTime2), @p31='?' (Size = 50), @p32='?' (DbType = Int32), @p33='?' (DbType = DateTime2), @p34='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p35='?' (Size = 1) (DbType = Byte), @p36='?' (Size = 1) (DbType = Byte), @p37='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p38='?' (DbType = DateTime2), @p39='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p40='?' (DbType = DateTime2), @p41='?' (Size = 50), @p42='?' (DbType = Int16), @p43='?' (DbType = Int32), @p44='?' (Size = 1) (DbType = Byte), @p45='?' (Size = 100), @p46='?' (DbType = DateTime2), @p47='?' (Size = 50), @p48='?' (DbType = Int32), @p49='?' (Size = 1) (DbType = Byte), @p50='?' (Size = 1) (DbType = Byte), @p51='?' (Size = 20), @p52='?' (Size = 20), @p53='?' (Size = 50), @p54='?' (DbType = DateTime2), @p55='?' (Size = 50), @p56='?' (DbType = Int32), @p57='?' (DbType = Int32), @p58='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p59='?' (DbType = DateTime2), @p60='?' (Size = 50), @p61='?' (DbType = Int32), @p62='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p63='?' (Size = 30), @p64='?' (Size = 1) (DbType = Byte), @p65='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p66='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p67='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p68='?' (DbType = DateTime2), @p69='?' (Size = 50), @p70='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [HR_PERSONNEL].[CONTRACTS] ([BASIC_SALARY], [CONTRACT_STATUS], [CONTRACT_TYPE], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [END_DATE], [HOUSING_ALLOWANCE], [IS_DELETED], [IS_RENEWABLE], [OTHER_ALLOWANCES], [START_DATE], [TRANSPORT_ALLOWANCE], [UPDATED_AT], [UPDATED_BY], [VACATION_DAYS], [VERSION_NO], [WORKING_HOURS_DAILY])
OUTPUT INSERTED.[CONTRACT_ID]
VALUES (@p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44);
INSERT INTO [HR_PERSONNEL].[EMERGENCY_CONTACTS] ([CONTACT_NAME_AR], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [IS_DELETED], [IS_PRIMARY], [PHONE_PRIMARY], [PHONE_SECONDARY], [RELATIONSHIP], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[CONTACT_ID]
VALUES (@p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_COMPENSATIONS] ([BANK_ID], [BASIC_SALARY], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [HOUSING_ALLOWANCE], [IBAN_NUMBER], [IS_DELETED], [MEDICAL_ALLOWANCE], [OTHER_ALLOWANCES], [TRANSPORT_ALLOWANCE], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[COMPENSATION_ID]
VALUES (@p57, @p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65, @p66, @p67, @p68, @p69, @p70);
2026-01-26 23:22:38.668 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'System.Int32'.
2026-01-26 23:22:38.671 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeesController.Create (HRMS.API) in 81.7717ms
2026-01-26 23:22:38.682 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.Create (HRMS.API)'
2026-01-26 23:22:38.683 +03:00 [INF] HTTP POST /api/Employees responded 201 in 102.4653 ms
2026-01-26 23:22:38.686 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Employees - 201 null application/json; charset=utf-8 109.0714ms
2026-01-26 23:35:38.896 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Employees - application/json 3571
2026-01-26 23:35:38.912 +03:00 [INF] CORS policy execution successful.
2026-01-26 23:35:38.915 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.Create (HRMS.API)'
2026-01-26 23:35:38.924 +03:00 [INF] Route matched with {action = "Create", controller = "Employees"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] Create(HRMS.Application.DTOs.Personnel.CreateEmployeeDto) on controller HRMS.API.Controllers.Personnel.EmployeesController (HRMS.API).
2026-01-26 23:35:39.007 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__ToString_0_startswith='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
WHERE [e].[EMPLOYEE_NUMBER] LIKE @__ToString_0_startswith ESCAPE N'\'
ORDER BY [e].[EMPLOYEE_NUMBER] DESC
2026-01-26 23:35:39.013 +03:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2026-01-26 23:35:39.022 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?' (Size = 100), @p5='?' (Size = 20), @p6='?' (Size = 50), @p7='?' (Size = 200), @p8='?' (Size = 1), @p9='?' (DbType = DateTime2), @p10='?' (Size = 1) (DbType = Byte), @p11='?' (DbType = Int32), @p12='?' (Size = 50), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (DbType = Int32), @p16='?' (Size = 20), @p17='?' (Size = 20), @p18='?' (Size = 20), @p19='?' (DbType = Int32), @p20='?' (Size = 50), @p21='?' (Size = 100), @p22='?' (Size = 50), @p23='?' (DbType = DateTime2), @p24='?' (Size = 50), @p25='?' (Size = 450), @p26='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_PERSONNEL].[EMPLOYEES] ([BIRTH_DATE], [CREATED_AT], [CREATED_BY], [DEPARTMENT_ID], [EMAIL], [EMPLOYEE_NUMBER], [FIRST_NAME_AR], [FULL_NAME_EN], [GENDER], [HIRE_DATE], [IS_DELETED], [JOB_ID], [LAST_NAME_AR], [LICENSE_EXPIRY_DATE], [LICENSE_NUMBER], [MANAGER_ID], [MARITAL_STATUS], [MOBILE], [NATIONAL_ID], [NATIONALITY_ID], [SECOND_NAME_AR], [SPECIALTY], [THIRD_NAME_AR], [UPDATED_AT], [UPDATED_BY], [USER_ID], [VERSION_NO])
OUTPUT INSERTED.[EMPLOYEE_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26);
2026-01-26 23:35:39.063 +03:00 [INF] Executed DbCommand (35ms) [Parameters=[@p27='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p28='?' (Size = 20), @p29='?' (Size = 50), @p30='?' (DbType = DateTime2), @p31='?' (Size = 50), @p32='?' (DbType = Int32), @p33='?' (DbType = DateTime2), @p34='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p35='?' (Size = 1) (DbType = Byte), @p36='?' (Size = 1) (DbType = Byte), @p37='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p38='?' (DbType = DateTime2), @p39='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p40='?' (DbType = DateTime2), @p41='?' (Size = 50), @p42='?' (DbType = Int16), @p43='?' (DbType = Int32), @p44='?' (Size = 1) (DbType = Byte), @p45='?' (DbType = DateTime2), @p46='?' (DbType = DateTime2), @p47='?' (Size = 50), @p48='?' (DbType = Int32), @p49='?' (Size = 1) (DbType = Byte), @p50='?' (Size = 1) (DbType = Byte), @p51='?' (Size = 1) (DbType = Byte), @p52='?' (Size = 100), @p53='?' (Size = 20), @p54='?' (Size = 50), @p55='?' (DbType = DateTime2), @p56='?' (Size = 50), @p57='?' (DbType = Int32), @p58='?' (Size = 100), @p59='?' (DbType = DateTime2), @p60='?' (Size = 50), @p61='?' (DbType = Int32), @p62='?' (Size = 1) (DbType = Byte), @p63='?' (Size = 1) (DbType = Byte), @p64='?' (Size = 20), @p65='?' (Size = 20), @p66='?' (Size = 50), @p67='?' (DbType = DateTime2), @p68='?' (Size = 50), @p69='?' (DbType = Int32), @p70='?' (Size = 20), @p71='?' (Size = 20), @p72='?' (DbType = Int32), @p73='?' (DbType = DateTime2), @p74='?' (Size = 50), @p75='?' (Size = 100), @p76='?' (DbType = Int32), @p77='?' (Size = 1) (DbType = Byte), @p78='?' (Size = 20), @p79='?' (Size = 200), @p80='?' (DbType = DateTime2), @p81='?' (Size = 50), @p82='?' (DbType = Int32), @p83='?' (Size = 50), @p84='?' (DbType = Int32), @p85='?' (DbType = DateTime2), @p86='?' (Size = 50), @p87='?' (DbType = Int32), @p88='?' (Size = 50), @p89='?' (Size = 1) (DbType = Byte), @p90='?' (Size = 1) (DbType = Byte), @p91='?' (Size = 1) (DbType = Byte), @p92='?' (DbType = DateTime2), @p93='?' (Size = 50), @p94='?' (DbType = Int32), @p95='?' (Size = 500), @p96='?' (Size = 200), @p97='?' (Size = 100), @p98='?' (DbType = DateTime2), @p99='?' (Size = 50), @p100='?' (DbType = Int32), @p101='?' (DbType = DateTime2), @p102='?' (Size = 1) (DbType = Byte), @p103='?' (Size = 1) (DbType = Byte), @p104='?' (DbType = DateTime2), @p105='?' (Size = 200), @p106='?' (DbType = DateTime2), @p107='?' (Size = 50), @p108='?' (DbType = Int32), @p109='?' (DbType = Int32), @p110='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p111='?' (DbType = DateTime2), @p112='?' (Size = 50), @p113='?' (DbType = Int32), @p114='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p115='?' (Size = 30), @p116='?' (Size = 1) (DbType = Byte), @p117='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p118='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p119='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p120='?' (DbType = DateTime2), @p121='?' (Size = 50), @p122='?' (DbType = Int32), @p123='?' (Size = 100), @p124='?' (DbType = DateTime2), @p125='?' (Size = 50), @p126='?' (Size = 50), @p127='?' (DbType = Int32), @p128='?' (DbType = Int32), @p129='?' (DbType = DateTime2), @p130='?' (Size = 255), @p131='?' (Size = 500), @p132='?' (DbType = Int64), @p133='?' (Size = 1) (DbType = Byte), @p134='?' (DbType = DateTime2), @p135='?' (DbType = DateTime2), @p136='?' (Size = 50), @p137='?' (DbType = Int32), @p138='?' (Size = 200), @p139='?' (DbType = DateTime2), @p140='?' (Size = 50), @p141='?' (DbType = Int32), @p142='?' (DbType = DateTime2), @p143='?' (Size = 1) (DbType = Byte), @p144='?' (Size = 1) (DbType = Byte), @p145='?' (Size = 100), @p146='?' (Size = 200), @p147='?' (Size = 500), @p148='?' (DbType = DateTime2), @p149='?' (DbType = DateTime2), @p150='?' (Size = 50), @p151='?' (DbType = Int32), @p152='?' (Size = 500), @p153='?' (DbType = Int32), @p154='?' (DbType = DateTime2), @p155='?' (Size = 50), @p156='?' (Size = 50), @p157='?' (DbType = Int32), @p158='?' (Size = 20), @p159='?' (DbType = Int16), @p160='?' (Size = 1) (DbType = Byte), @p161='?' (Size = 100), @p162='?' (Size = 200), @p163='?' (DbType = DateTime2), @p164='?' (Size = 50), @p165='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [HR_PERSONNEL].[CONTRACTS] ([BASIC_SALARY], [CONTRACT_STATUS], [CONTRACT_TYPE], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [END_DATE], [HOUSING_ALLOWANCE], [IS_DELETED], [IS_RENEWABLE], [OTHER_ALLOWANCES], [START_DATE], [TRANSPORT_ALLOWANCE], [UPDATED_AT], [UPDATED_BY], [VACATION_DAYS], [VERSION_NO], [WORKING_HOURS_DAILY])
OUTPUT INSERTED.[CONTRACT_ID]
VALUES (@p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44);
INSERT INTO [HR_PERSONNEL].[DEPENDENTS] ([BIRTH_DATE], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [IS_DELETED], [IS_ELIGIBLE_FOR_INSURANCE], [IS_ELIGIBLE_FOR_TICKET], [NAME_AR], [NATIONAL_ID], [RELATIONSHIP], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[DEPENDENT_ID]
VALUES (@p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57);
INSERT INTO [HR_PERSONNEL].[EMERGENCY_CONTACTS] ([CONTACT_NAME_AR], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [IS_DELETED], [IS_PRIMARY], [PHONE_PRIMARY], [PHONE_SECONDARY], [RELATIONSHIP], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[CONTACT_ID]
VALUES (@p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65, @p66, @p67, @p68, @p69);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_ADDRESSES] ([ADDRESS_TYPE], [BUILDING_NO], [CITY_ID], [CREATED_AT], [CREATED_BY], [DISTRICT], [EMPLOYEE_ID], [IS_DELETED], [POSTAL_CODE], [STREET], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[ADDRESS_ID]
VALUES (@p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79, @p80, @p81, @p82);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_BANK_ACCOUNTS] ([ACCOUNT_NUMBER], [BANK_ID], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [IBAN], [IS_ACTIVE], [IS_DELETED], [IS_PRIMARY], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[ACCOUNT_ID]
VALUES (@p83, @p84, @p85, @p86, @p87, @p88, @p89, @p90, @p91, @p92, @p93, @p94);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_CERTIFICATIONS] ([ATTACHMENT_PATH], [CERT_NAME_AR], [CERT_NUMBER], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [EXPIRY_DATE], [IS_DELETED], [IS_MANDATORY], [ISSUE_DATE], [ISSUING_AUTHORITY], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[CERT_ID]
VALUES (@p95, @p96, @p97, @p98, @p99, @p100, @p101, @p102, @p103, @p104, @p105, @p106, @p107, @p108);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_COMPENSATIONS] ([BANK_ID], [BASIC_SALARY], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [HOUSING_ALLOWANCE], [IBAN_NUMBER], [IS_DELETED], [MEDICAL_ALLOWANCE], [OTHER_ALLOWANCES], [TRANSPORT_ALLOWANCE], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[COMPENSATION_ID]
VALUES (@p109, @p110, @p111, @p112, @p113, @p114, @p115, @p116, @p117, @p118, @p119, @p120, @p121, @p122);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_DOCUMENTS] ([CONTENT_TYPE], [CREATED_AT], [CREATED_BY], [DOCUMENT_NUMBER], [DOCUMENT_TYPE_ID], [EMPLOYEE_ID], [EXPIRY_DATE], [FILE_NAME], [FILE_PATH], [FILE_SIZE], [IS_DELETED], [ISSUE_DATE], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[DOCUMENT_ID]
VALUES (@p123, @p124, @p125, @p126, @p127, @p128, @p129, @p130, @p131, @p132, @p133, @p134, @p135, @p136, @p137);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_EXPERIENCES] ([COMPANY_NAME_AR], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [END_DATE], [IS_CURRENT], [IS_DELETED], [JOB_TITLE_AR], [REASON_FOR_LEAVING], [RESPONSIBILITIES], [START_DATE], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[EXPERIENCE_ID]
VALUES (@p138, @p139, @p140, @p141, @p142, @p143, @p144, @p145, @p146, @p147, @p148, @p149, @p150, @p151);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_QUALIFICATIONS] ([ATTACHMENT_PATH], [COUNTRY_ID], [CREATED_AT], [CREATED_BY], [DEGREE_TYPE], [EMPLOYEE_ID], [GRADE], [GRADUATION_YEAR], [IS_DELETED], [MAJOR_AR], [UNIVERSITY_AR], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[QUALIFICATION_ID]
VALUES (@p152, @p153, @p154, @p155, @p156, @p157, @p158, @p159, @p160, @p161, @p162, @p163, @p164, @p165);
2026-01-26 23:35:39.082 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'System.Int32'.
2026-01-26 23:35:39.084 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeesController.Create (HRMS.API) in 157.0602ms
2026-01-26 23:35:39.086 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.Create (HRMS.API)'
2026-01-26 23:35:39.087 +03:00 [INF] HTTP POST /api/Employees responded 201 in 175.5175 ms
2026-01-26 23:35:39.089 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Employees - 201 null application/json; charset=utf-8 192.9093ms
2026-01-26 23:37:07.955 +03:00 [INF] üöÄ Starting HRMS Hospital API...
2026-01-26 23:37:11.464 +03:00 [INF] ‚úÖ HRMS Hospital API started successfully
2026-01-26 23:37:11.868 +03:00 [INF] User profile is available. Using 'C:\Users\MT\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-26 23:37:12.456 +03:00 [INF] Now listening on: https://localhost:5001
2026-01-26 23:37:12.462 +03:00 [INF] Now listening on: http://localhost:5000
2026-01-26 23:37:12.651 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-26 23:37:12.680 +03:00 [INF] Hosting environment: Development
2026-01-26 23:37:12.681 +03:00 [INF] Content root path: G:\HRMS_Hospital\Backend\HRMS\HRMS.API
2026-01-26 23:37:13.879 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - null null
2026-01-26 23:37:14.571 +03:00 [INF] HTTP GET /swagger/index.html responded 200 in 319.1880 ms
2026-01-26 23:37:14.594 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - 200 null text/html;charset=utf-8 722.4435ms
2026-01-26 23:37:14.609 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - null null
2026-01-26 23:37:15.360 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 751.6186ms
2026-01-26 23:37:15.468 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_vs/browserLink - null null
2026-01-26 23:37:15.727 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_vs/browserLink - 200 null text/javascript; charset=UTF-8 258.5929ms
2026-01-26 23:37:20.231 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - null null
2026-01-26 23:37:20.734 +03:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 458.3091 ms
2026-01-26 23:37:20.887 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 655.9515ms
2026-01-26 23:37:43.266 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Employees - application/json 3574
2026-01-26 23:37:43.288 +03:00 [INF] CORS policy execution successful.
2026-01-26 23:37:43.301 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.Create (HRMS.API)'
2026-01-26 23:37:43.347 +03:00 [INF] Route matched with {action = "Create", controller = "Employees"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] Create(HRMS.Application.DTOs.Personnel.CreateEmployeeDto) on controller HRMS.API.Controllers.Personnel.EmployeesController (HRMS.API).
2026-01-26 23:37:46.752 +03:00 [WRN] No store type was specified for the decimal property 'HoursCount' on entity type 'ShiftType'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-01-26 23:37:46.756 +03:00 [WRN] No store type was specified for the decimal property 'MaxSalary' on entity type 'JobGrade'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-01-26 23:37:46.759 +03:00 [WRN] No store type was specified for the decimal property 'MinSalary' on entity type 'JobGrade'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-01-26 23:37:48.782 +03:00 [INF] Executed DbCommand (112ms) [Parameters=[@__ToString_0_startswith='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
WHERE [e].[EMPLOYEE_NUMBER] LIKE @__ToString_0_startswith ESCAPE N'\'
ORDER BY [e].[EMPLOYEE_NUMBER] DESC
2026-01-26 23:37:50.247 +03:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2026-01-26 23:37:50.272 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?' (Size = 100), @p5='?' (Size = 20), @p6='?' (Size = 50), @p7='?' (Size = 200), @p8='?' (Size = 1), @p9='?' (DbType = DateTime2), @p10='?' (Size = 1) (DbType = Byte), @p11='?' (DbType = Int32), @p12='?' (Size = 50), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (DbType = Int32), @p16='?' (Size = 20), @p17='?' (Size = 20), @p18='?' (Size = 20), @p19='?' (DbType = Int32), @p20='?' (Size = 50), @p21='?' (Size = 100), @p22='?' (Size = 50), @p23='?' (DbType = DateTime2), @p24='?' (Size = 50), @p25='?' (Size = 450), @p26='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_PERSONNEL].[EMPLOYEES] ([BIRTH_DATE], [CREATED_AT], [CREATED_BY], [DEPARTMENT_ID], [EMAIL], [EMPLOYEE_NUMBER], [FIRST_NAME_AR], [FULL_NAME_EN], [GENDER], [HIRE_DATE], [IS_DELETED], [JOB_ID], [LAST_NAME_AR], [LICENSE_EXPIRY_DATE], [LICENSE_NUMBER], [MANAGER_ID], [MARITAL_STATUS], [MOBILE], [NATIONAL_ID], [NATIONALITY_ID], [SECOND_NAME_AR], [SPECIALTY], [THIRD_NAME_AR], [UPDATED_AT], [UPDATED_BY], [USER_ID], [VERSION_NO])
OUTPUT INSERTED.[EMPLOYEE_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26);
2026-01-26 23:37:50.382 +03:00 [INF] Executed DbCommand (42ms) [Parameters=[@p27='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p28='?' (Size = 20), @p29='?' (Size = 50), @p30='?' (DbType = DateTime2), @p31='?' (Size = 50), @p32='?' (DbType = Int32), @p33='?' (DbType = DateTime2), @p34='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p35='?' (Size = 1) (DbType = Byte), @p36='?' (Size = 1) (DbType = Byte), @p37='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p38='?' (DbType = DateTime2), @p39='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p40='?' (DbType = DateTime2), @p41='?' (Size = 50), @p42='?' (DbType = Int16), @p43='?' (DbType = Int32), @p44='?' (Size = 1) (DbType = Byte), @p45='?' (DbType = DateTime2), @p46='?' (DbType = DateTime2), @p47='?' (Size = 50), @p48='?' (DbType = Int32), @p49='?' (Size = 1) (DbType = Byte), @p50='?' (Size = 1) (DbType = Byte), @p51='?' (Size = 1) (DbType = Byte), @p52='?' (Size = 100), @p53='?' (Size = 20), @p54='?' (Size = 50), @p55='?' (DbType = DateTime2), @p56='?' (Size = 50), @p57='?' (DbType = Int32), @p58='?' (Size = 100), @p59='?' (DbType = DateTime2), @p60='?' (Size = 50), @p61='?' (DbType = Int32), @p62='?' (Size = 1) (DbType = Byte), @p63='?' (Size = 1) (DbType = Byte), @p64='?' (Size = 20), @p65='?' (Size = 20), @p66='?' (Size = 50), @p67='?' (DbType = DateTime2), @p68='?' (Size = 50), @p69='?' (DbType = Int32), @p70='?' (Size = 20), @p71='?' (Size = 20), @p72='?' (DbType = Int32), @p73='?' (DbType = DateTime2), @p74='?' (Size = 50), @p75='?' (Size = 100), @p76='?' (DbType = Int32), @p77='?' (Size = 1) (DbType = Byte), @p78='?' (Size = 20), @p79='?' (Size = 200), @p80='?' (DbType = DateTime2), @p81='?' (Size = 50), @p82='?' (DbType = Int32), @p83='?' (Size = 50), @p84='?' (DbType = Int32), @p85='?' (DbType = DateTime2), @p86='?' (Size = 50), @p87='?' (DbType = Int32), @p88='?' (Size = 50), @p89='?' (Size = 1) (DbType = Byte), @p90='?' (Size = 1) (DbType = Byte), @p91='?' (Size = 1) (DbType = Byte), @p92='?' (DbType = DateTime2), @p93='?' (Size = 50), @p94='?' (DbType = Int32), @p95='?' (Size = 500), @p96='?' (Size = 200), @p97='?' (Size = 100), @p98='?' (DbType = DateTime2), @p99='?' (Size = 50), @p100='?' (DbType = Int32), @p101='?' (DbType = DateTime2), @p102='?' (Size = 1) (DbType = Byte), @p103='?' (Size = 1) (DbType = Byte), @p104='?' (DbType = DateTime2), @p105='?' (Size = 200), @p106='?' (DbType = DateTime2), @p107='?' (Size = 50), @p108='?' (DbType = Int32), @p109='?' (DbType = Int32), @p110='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p111='?' (DbType = DateTime2), @p112='?' (Size = 50), @p113='?' (DbType = Int32), @p114='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p115='?' (Size = 30), @p116='?' (Size = 1) (DbType = Byte), @p117='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p118='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p119='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p120='?' (DbType = DateTime2), @p121='?' (Size = 50), @p122='?' (DbType = Int32), @p123='?' (Size = 100), @p124='?' (DbType = DateTime2), @p125='?' (Size = 50), @p126='?' (Size = 50), @p127='?' (DbType = Int32), @p128='?' (DbType = Int32), @p129='?' (DbType = DateTime2), @p130='?' (Size = 255), @p131='?' (Size = 500), @p132='?' (DbType = Int64), @p133='?' (Size = 1) (DbType = Byte), @p134='?' (DbType = DateTime2), @p135='?' (DbType = DateTime2), @p136='?' (Size = 50), @p137='?' (DbType = Int32), @p138='?' (Size = 200), @p139='?' (DbType = DateTime2), @p140='?' (Size = 50), @p141='?' (DbType = Int32), @p142='?' (DbType = DateTime2), @p143='?' (Size = 1) (DbType = Byte), @p144='?' (Size = 1) (DbType = Byte), @p145='?' (Size = 100), @p146='?' (Size = 200), @p147='?' (Size = 500), @p148='?' (DbType = DateTime2), @p149='?' (DbType = DateTime2), @p150='?' (Size = 50), @p151='?' (DbType = Int32), @p152='?' (Size = 500), @p153='?' (DbType = Int32), @p154='?' (DbType = DateTime2), @p155='?' (Size = 50), @p156='?' (Size = 50), @p157='?' (DbType = Int32), @p158='?' (Size = 20), @p159='?' (DbType = Int16), @p160='?' (Size = 1) (DbType = Byte), @p161='?' (Size = 100), @p162='?' (Size = 200), @p163='?' (DbType = DateTime2), @p164='?' (Size = 50), @p165='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [HR_PERSONNEL].[CONTRACTS] ([BASIC_SALARY], [CONTRACT_STATUS], [CONTRACT_TYPE], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [END_DATE], [HOUSING_ALLOWANCE], [IS_DELETED], [IS_RENEWABLE], [OTHER_ALLOWANCES], [START_DATE], [TRANSPORT_ALLOWANCE], [UPDATED_AT], [UPDATED_BY], [VACATION_DAYS], [VERSION_NO], [WORKING_HOURS_DAILY])
OUTPUT INSERTED.[CONTRACT_ID]
VALUES (@p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44);
INSERT INTO [HR_PERSONNEL].[DEPENDENTS] ([BIRTH_DATE], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [IS_DELETED], [IS_ELIGIBLE_FOR_INSURANCE], [IS_ELIGIBLE_FOR_TICKET], [NAME_AR], [NATIONAL_ID], [RELATIONSHIP], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[DEPENDENT_ID]
VALUES (@p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57);
INSERT INTO [HR_PERSONNEL].[EMERGENCY_CONTACTS] ([CONTACT_NAME_AR], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [IS_DELETED], [IS_PRIMARY], [PHONE_PRIMARY], [PHONE_SECONDARY], [RELATIONSHIP], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[CONTACT_ID]
VALUES (@p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65, @p66, @p67, @p68, @p69);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_ADDRESSES] ([ADDRESS_TYPE], [BUILDING_NO], [CITY_ID], [CREATED_AT], [CREATED_BY], [DISTRICT], [EMPLOYEE_ID], [IS_DELETED], [POSTAL_CODE], [STREET], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[ADDRESS_ID]
VALUES (@p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79, @p80, @p81, @p82);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_BANK_ACCOUNTS] ([ACCOUNT_NUMBER], [BANK_ID], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [IBAN], [IS_ACTIVE], [IS_DELETED], [IS_PRIMARY], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[ACCOUNT_ID]
VALUES (@p83, @p84, @p85, @p86, @p87, @p88, @p89, @p90, @p91, @p92, @p93, @p94);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_CERTIFICATIONS] ([ATTACHMENT_PATH], [CERT_NAME_AR], [CERT_NUMBER], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [EXPIRY_DATE], [IS_DELETED], [IS_MANDATORY], [ISSUE_DATE], [ISSUING_AUTHORITY], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[CERT_ID]
VALUES (@p95, @p96, @p97, @p98, @p99, @p100, @p101, @p102, @p103, @p104, @p105, @p106, @p107, @p108);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_COMPENSATIONS] ([BANK_ID], [BASIC_SALARY], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [HOUSING_ALLOWANCE], [IBAN_NUMBER], [IS_DELETED], [MEDICAL_ALLOWANCE], [OTHER_ALLOWANCES], [TRANSPORT_ALLOWANCE], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[COMPENSATION_ID]
VALUES (@p109, @p110, @p111, @p112, @p113, @p114, @p115, @p116, @p117, @p118, @p119, @p120, @p121, @p122);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_DOCUMENTS] ([CONTENT_TYPE], [CREATED_AT], [CREATED_BY], [DOCUMENT_NUMBER], [DOCUMENT_TYPE_ID], [EMPLOYEE_ID], [EXPIRY_DATE], [FILE_NAME], [FILE_PATH], [FILE_SIZE], [IS_DELETED], [ISSUE_DATE], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[DOCUMENT_ID]
VALUES (@p123, @p124, @p125, @p126, @p127, @p128, @p129, @p130, @p131, @p132, @p133, @p134, @p135, @p136, @p137);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_EXPERIENCES] ([COMPANY_NAME_AR], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [END_DATE], [IS_CURRENT], [IS_DELETED], [JOB_TITLE_AR], [REASON_FOR_LEAVING], [RESPONSIBILITIES], [START_DATE], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[EXPERIENCE_ID]
VALUES (@p138, @p139, @p140, @p141, @p142, @p143, @p144, @p145, @p146, @p147, @p148, @p149, @p150, @p151);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_QUALIFICATIONS] ([ATTACHMENT_PATH], [COUNTRY_ID], [CREATED_AT], [CREATED_BY], [DEGREE_TYPE], [EMPLOYEE_ID], [GRADE], [GRADUATION_YEAR], [IS_DELETED], [MAJOR_AR], [UNIVERSITY_AR], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[QUALIFICATION_ID]
VALUES (@p152, @p153, @p154, @p155, @p156, @p157, @p158, @p159, @p160, @p161, @p162, @p163, @p164, @p165);
2026-01-26 23:37:50.468 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'HRMS.Infrastructure.Data.HRMSDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_EMPLOYEE_DOCUMENTS_DOCUMENT_TYPES_DOCUMENT_TYPE_ID". The conflict occurred in database "HRMS_Hospital", table "HR_CORE.DOCUMENT_TYPES", column 'DOCUMENT_TYPE_ID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:2d018ab7-f154-4646-862b-204c5b08ef09
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_EMPLOYEE_DOCUMENTS_DOCUMENT_TYPES_DOCUMENT_TYPE_ID". The conflict occurred in database "HRMS_Hospital", table "HR_CORE.DOCUMENT_TYPES", column 'DOCUMENT_TYPE_ID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:2d018ab7-f154-4646-862b-204c5b08ef09
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2026-01-26 23:38:13.587 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeesController.Create (HRMS.API) in 30229.4064ms
2026-01-26 23:38:13.591 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.Create (HRMS.API)'
2026-01-26 23:38:14.185 +03:00 [ERR] Global Exception Caught: An error occurred while saving the entity changes. See the inner exception for details.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_EMPLOYEE_DOCUMENTS_DOCUMENT_TYPES_DOCUMENT_TYPE_ID". The conflict occurred in database "HRMS_Hospital", table "HR_CORE.DOCUMENT_TYPES", column 'DOCUMENT_TYPE_ID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:2d018ab7-f154-4646-862b-204c5b08ef09
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at HRMS.Application.Features.Personnel.Employees.Commands.CreateEmployee.CreateEmployeeCommandHandler.Handle(CreateEmployeeCommand request, CancellationToken cancellationToken) in G:\HRMS_Hospital\Backend\HRMS\HRMS.Application\Features\Personnel\Employees\Commands\CreateEmployee\CreateEmployeeCommandHandler.cs:line 58
   at HRMS.Application.Features.Personnel.Employees.Commands.CreateEmployee.CreateEmployeeCommandHandler.Handle(CreateEmployeeCommand request, CancellationToken cancellationToken) in G:\HRMS_Hospital\Backend\HRMS\HRMS.Application\Features\Personnel\Employees\Commands\CreateEmployee\CreateEmployeeCommandHandler.cs:line 68
   at HRMS.API.Controllers.Personnel.EmployeesController.Create(CreateEmployeeDto dto) in G:\HRMS_Hospital\Backend\HRMS\HRMS.API\Controllers\Personnel\EmployeesController.cs:line 37
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at HRMS.API.Middleware.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in G:\HRMS_Hospital\Backend\HRMS\HRMS.API\Middleware\GlobalExceptionMiddleware.cs:line 25
2026-01-26 23:38:14.257 +03:00 [INF] HTTP POST /api/Employees responded 400 in 30973.6800 ms
2026-01-26 23:38:14.283 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Employees - 400 null application/json 31016.7458ms
2026-01-26 23:38:18.400 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Employees - application/json 3574
2026-01-26 23:38:18.407 +03:00 [INF] CORS policy execution successful.
2026-01-26 23:38:18.410 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.Create (HRMS.API)'
2026-01-26 23:38:18.413 +03:00 [INF] Route matched with {action = "Create", controller = "Employees"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] Create(HRMS.Application.DTOs.Personnel.CreateEmployeeDto) on controller HRMS.API.Controllers.Personnel.EmployeesController (HRMS.API).
2026-01-26 23:38:18.539 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__ToString_0_startswith='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
WHERE [e].[EMPLOYEE_NUMBER] LIKE @__ToString_0_startswith ESCAPE N'\'
ORDER BY [e].[EMPLOYEE_NUMBER] DESC
2026-01-26 23:38:18.569 +03:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2026-01-26 23:38:18.573 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?' (Size = 100), @p5='?' (Size = 20), @p6='?' (Size = 50), @p7='?' (Size = 200), @p8='?' (Size = 1), @p9='?' (DbType = DateTime2), @p10='?' (Size = 1) (DbType = Byte), @p11='?' (DbType = Int32), @p12='?' (Size = 50), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (DbType = Int32), @p16='?' (Size = 20), @p17='?' (Size = 20), @p18='?' (Size = 20), @p19='?' (DbType = Int32), @p20='?' (Size = 50), @p21='?' (Size = 100), @p22='?' (Size = 50), @p23='?' (DbType = DateTime2), @p24='?' (Size = 50), @p25='?' (Size = 450), @p26='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_PERSONNEL].[EMPLOYEES] ([BIRTH_DATE], [CREATED_AT], [CREATED_BY], [DEPARTMENT_ID], [EMAIL], [EMPLOYEE_NUMBER], [FIRST_NAME_AR], [FULL_NAME_EN], [GENDER], [HIRE_DATE], [IS_DELETED], [JOB_ID], [LAST_NAME_AR], [LICENSE_EXPIRY_DATE], [LICENSE_NUMBER], [MANAGER_ID], [MARITAL_STATUS], [MOBILE], [NATIONAL_ID], [NATIONALITY_ID], [SECOND_NAME_AR], [SPECIALTY], [THIRD_NAME_AR], [UPDATED_AT], [UPDATED_BY], [USER_ID], [VERSION_NO])
OUTPUT INSERTED.[EMPLOYEE_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26);
2026-01-26 23:38:18.587 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p27='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p28='?' (Size = 20), @p29='?' (Size = 50), @p30='?' (DbType = DateTime2), @p31='?' (Size = 50), @p32='?' (DbType = Int32), @p33='?' (DbType = DateTime2), @p34='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p35='?' (Size = 1) (DbType = Byte), @p36='?' (Size = 1) (DbType = Byte), @p37='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p38='?' (DbType = DateTime2), @p39='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p40='?' (DbType = DateTime2), @p41='?' (Size = 50), @p42='?' (DbType = Int16), @p43='?' (DbType = Int32), @p44='?' (Size = 1) (DbType = Byte), @p45='?' (DbType = DateTime2), @p46='?' (DbType = DateTime2), @p47='?' (Size = 50), @p48='?' (DbType = Int32), @p49='?' (Size = 1) (DbType = Byte), @p50='?' (Size = 1) (DbType = Byte), @p51='?' (Size = 1) (DbType = Byte), @p52='?' (Size = 100), @p53='?' (Size = 20), @p54='?' (Size = 50), @p55='?' (DbType = DateTime2), @p56='?' (Size = 50), @p57='?' (DbType = Int32), @p58='?' (Size = 100), @p59='?' (DbType = DateTime2), @p60='?' (Size = 50), @p61='?' (DbType = Int32), @p62='?' (Size = 1) (DbType = Byte), @p63='?' (Size = 1) (DbType = Byte), @p64='?' (Size = 20), @p65='?' (Size = 20), @p66='?' (Size = 50), @p67='?' (DbType = DateTime2), @p68='?' (Size = 50), @p69='?' (DbType = Int32), @p70='?' (Size = 20), @p71='?' (Size = 20), @p72='?' (DbType = Int32), @p73='?' (DbType = DateTime2), @p74='?' (Size = 50), @p75='?' (Size = 100), @p76='?' (DbType = Int32), @p77='?' (Size = 1) (DbType = Byte), @p78='?' (Size = 20), @p79='?' (Size = 200), @p80='?' (DbType = DateTime2), @p81='?' (Size = 50), @p82='?' (DbType = Int32), @p83='?' (Size = 50), @p84='?' (DbType = Int32), @p85='?' (DbType = DateTime2), @p86='?' (Size = 50), @p87='?' (DbType = Int32), @p88='?' (Size = 50), @p89='?' (Size = 1) (DbType = Byte), @p90='?' (Size = 1) (DbType = Byte), @p91='?' (Size = 1) (DbType = Byte), @p92='?' (DbType = DateTime2), @p93='?' (Size = 50), @p94='?' (DbType = Int32), @p95='?' (Size = 500), @p96='?' (Size = 200), @p97='?' (Size = 100), @p98='?' (DbType = DateTime2), @p99='?' (Size = 50), @p100='?' (DbType = Int32), @p101='?' (DbType = DateTime2), @p102='?' (Size = 1) (DbType = Byte), @p103='?' (Size = 1) (DbType = Byte), @p104='?' (DbType = DateTime2), @p105='?' (Size = 200), @p106='?' (DbType = DateTime2), @p107='?' (Size = 50), @p108='?' (DbType = Int32), @p109='?' (DbType = Int32), @p110='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p111='?' (DbType = DateTime2), @p112='?' (Size = 50), @p113='?' (DbType = Int32), @p114='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p115='?' (Size = 30), @p116='?' (Size = 1) (DbType = Byte), @p117='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p118='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p119='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p120='?' (DbType = DateTime2), @p121='?' (Size = 50), @p122='?' (DbType = Int32), @p123='?' (Size = 100), @p124='?' (DbType = DateTime2), @p125='?' (Size = 50), @p126='?' (Size = 50), @p127='?' (DbType = Int32), @p128='?' (DbType = Int32), @p129='?' (DbType = DateTime2), @p130='?' (Size = 255), @p131='?' (Size = 500), @p132='?' (DbType = Int64), @p133='?' (Size = 1) (DbType = Byte), @p134='?' (DbType = DateTime2), @p135='?' (DbType = DateTime2), @p136='?' (Size = 50), @p137='?' (DbType = Int32), @p138='?' (Size = 200), @p139='?' (DbType = DateTime2), @p140='?' (Size = 50), @p141='?' (DbType = Int32), @p142='?' (DbType = DateTime2), @p143='?' (Size = 1) (DbType = Byte), @p144='?' (Size = 1) (DbType = Byte), @p145='?' (Size = 100), @p146='?' (Size = 200), @p147='?' (Size = 500), @p148='?' (DbType = DateTime2), @p149='?' (DbType = DateTime2), @p150='?' (Size = 50), @p151='?' (DbType = Int32), @p152='?' (Size = 500), @p153='?' (DbType = Int32), @p154='?' (DbType = DateTime2), @p155='?' (Size = 50), @p156='?' (Size = 50), @p157='?' (DbType = Int32), @p158='?' (Size = 20), @p159='?' (DbType = Int16), @p160='?' (Size = 1) (DbType = Byte), @p161='?' (Size = 100), @p162='?' (Size = 200), @p163='?' (DbType = DateTime2), @p164='?' (Size = 50), @p165='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [HR_PERSONNEL].[CONTRACTS] ([BASIC_SALARY], [CONTRACT_STATUS], [CONTRACT_TYPE], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [END_DATE], [HOUSING_ALLOWANCE], [IS_DELETED], [IS_RENEWABLE], [OTHER_ALLOWANCES], [START_DATE], [TRANSPORT_ALLOWANCE], [UPDATED_AT], [UPDATED_BY], [VACATION_DAYS], [VERSION_NO], [WORKING_HOURS_DAILY])
OUTPUT INSERTED.[CONTRACT_ID]
VALUES (@p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44);
INSERT INTO [HR_PERSONNEL].[DEPENDENTS] ([BIRTH_DATE], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [IS_DELETED], [IS_ELIGIBLE_FOR_INSURANCE], [IS_ELIGIBLE_FOR_TICKET], [NAME_AR], [NATIONAL_ID], [RELATIONSHIP], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[DEPENDENT_ID]
VALUES (@p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57);
INSERT INTO [HR_PERSONNEL].[EMERGENCY_CONTACTS] ([CONTACT_NAME_AR], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [IS_DELETED], [IS_PRIMARY], [PHONE_PRIMARY], [PHONE_SECONDARY], [RELATIONSHIP], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[CONTACT_ID]
VALUES (@p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65, @p66, @p67, @p68, @p69);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_ADDRESSES] ([ADDRESS_TYPE], [BUILDING_NO], [CITY_ID], [CREATED_AT], [CREATED_BY], [DISTRICT], [EMPLOYEE_ID], [IS_DELETED], [POSTAL_CODE], [STREET], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[ADDRESS_ID]
VALUES (@p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79, @p80, @p81, @p82);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_BANK_ACCOUNTS] ([ACCOUNT_NUMBER], [BANK_ID], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [IBAN], [IS_ACTIVE], [IS_DELETED], [IS_PRIMARY], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[ACCOUNT_ID]
VALUES (@p83, @p84, @p85, @p86, @p87, @p88, @p89, @p90, @p91, @p92, @p93, @p94);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_CERTIFICATIONS] ([ATTACHMENT_PATH], [CERT_NAME_AR], [CERT_NUMBER], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [EXPIRY_DATE], [IS_DELETED], [IS_MANDATORY], [ISSUE_DATE], [ISSUING_AUTHORITY], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[CERT_ID]
VALUES (@p95, @p96, @p97, @p98, @p99, @p100, @p101, @p102, @p103, @p104, @p105, @p106, @p107, @p108);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_COMPENSATIONS] ([BANK_ID], [BASIC_SALARY], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [HOUSING_ALLOWANCE], [IBAN_NUMBER], [IS_DELETED], [MEDICAL_ALLOWANCE], [OTHER_ALLOWANCES], [TRANSPORT_ALLOWANCE], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[COMPENSATION_ID]
VALUES (@p109, @p110, @p111, @p112, @p113, @p114, @p115, @p116, @p117, @p118, @p119, @p120, @p121, @p122);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_DOCUMENTS] ([CONTENT_TYPE], [CREATED_AT], [CREATED_BY], [DOCUMENT_NUMBER], [DOCUMENT_TYPE_ID], [EMPLOYEE_ID], [EXPIRY_DATE], [FILE_NAME], [FILE_PATH], [FILE_SIZE], [IS_DELETED], [ISSUE_DATE], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[DOCUMENT_ID]
VALUES (@p123, @p124, @p125, @p126, @p127, @p128, @p129, @p130, @p131, @p132, @p133, @p134, @p135, @p136, @p137);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_EXPERIENCES] ([COMPANY_NAME_AR], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [END_DATE], [IS_CURRENT], [IS_DELETED], [JOB_TITLE_AR], [REASON_FOR_LEAVING], [RESPONSIBILITIES], [START_DATE], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[EXPERIENCE_ID]
VALUES (@p138, @p139, @p140, @p141, @p142, @p143, @p144, @p145, @p146, @p147, @p148, @p149, @p150, @p151);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_QUALIFICATIONS] ([ATTACHMENT_PATH], [COUNTRY_ID], [CREATED_AT], [CREATED_BY], [DEGREE_TYPE], [EMPLOYEE_ID], [GRADE], [GRADUATION_YEAR], [IS_DELETED], [MAJOR_AR], [UNIVERSITY_AR], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[QUALIFICATION_ID]
VALUES (@p152, @p153, @p154, @p155, @p156, @p157, @p158, @p159, @p160, @p161, @p162, @p163, @p164, @p165);
2026-01-26 23:38:18.649 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'System.Int32'.
2026-01-26 23:38:18.687 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeesController.Create (HRMS.API) in 270.749ms
2026-01-26 23:38:18.690 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.Create (HRMS.API)'
2026-01-26 23:38:18.691 +03:00 [INF] HTTP POST /api/Employees responded 201 in 284.7693 ms
2026-01-26 23:38:18.694 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Employees - 201 null application/json; charset=utf-8 293.8492ms
2026-01-26 23:47:07.980 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - null null
2026-01-26 23:47:08.320 +03:00 [INF] HTTP GET /swagger/index.html responded 200 in 3.4638 ms
2026-01-26 23:47:08.405 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - null null
2026-01-26 23:47:08.406 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_vs/browserLink - null null
2026-01-26 23:47:08.873 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - 200 null text/html;charset=utf-8 895.5685ms
2026-01-26 23:47:08.882 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 476.9882ms
2026-01-26 23:47:08.926 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_vs/browserLink - 200 null text/javascript; charset=UTF-8 519.4875ms
2026-01-26 23:47:09.498 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - null null
2026-01-26 23:47:10.314 +03:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 513.0652 ms
2026-01-26 23:47:10.324 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 827.0085ms
2026-01-26 23:48:20.794 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Employees - application/json 3594
2026-01-26 23:48:20.800 +03:00 [INF] CORS policy execution successful.
2026-01-26 23:48:20.803 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.Create (HRMS.API)'
2026-01-26 23:48:20.871 +03:00 [INF] Route matched with {action = "Create", controller = "Employees"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] Create(HRMS.Application.DTOs.Personnel.CreateEmployeeDto) on controller HRMS.API.Controllers.Personnel.EmployeesController (HRMS.API).
2026-01-26 23:48:21.236 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__ToString_0_startswith='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
WHERE [e].[EMPLOYEE_NUMBER] LIKE @__ToString_0_startswith ESCAPE N'\'
ORDER BY [e].[EMPLOYEE_NUMBER] DESC
2026-01-26 23:48:21.247 +03:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2026-01-26 23:48:21.256 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?' (Size = 100), @p5='?' (Size = 20), @p6='?' (Size = 50), @p7='?' (Size = 200), @p8='?' (Size = 1), @p9='?' (DbType = DateTime2), @p10='?' (Size = 1) (DbType = Byte), @p11='?' (DbType = Int32), @p12='?' (Size = 50), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (DbType = Int32), @p16='?' (Size = 20), @p17='?' (Size = 20), @p18='?' (Size = 20), @p19='?' (DbType = Int32), @p20='?' (Size = 50), @p21='?' (Size = 100), @p22='?' (Size = 50), @p23='?' (DbType = DateTime2), @p24='?' (Size = 50), @p25='?' (Size = 450), @p26='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_PERSONNEL].[EMPLOYEES] ([BIRTH_DATE], [CREATED_AT], [CREATED_BY], [DEPARTMENT_ID], [EMAIL], [EMPLOYEE_NUMBER], [FIRST_NAME_AR], [FULL_NAME_EN], [GENDER], [HIRE_DATE], [IS_DELETED], [JOB_ID], [LAST_NAME_AR], [LICENSE_EXPIRY_DATE], [LICENSE_NUMBER], [MANAGER_ID], [MARITAL_STATUS], [MOBILE], [NATIONAL_ID], [NATIONALITY_ID], [SECOND_NAME_AR], [SPECIALTY], [THIRD_NAME_AR], [UPDATED_AT], [UPDATED_BY], [USER_ID], [VERSION_NO])
OUTPUT INSERTED.[EMPLOYEE_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26);
2026-01-26 23:48:21.295 +03:00 [INF] Executed DbCommand (30ms) [Parameters=[@p27='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p28='?' (Size = 20), @p29='?' (Size = 50), @p30='?' (DbType = DateTime2), @p31='?' (Size = 50), @p32='?' (DbType = Int32), @p33='?' (DbType = DateTime2), @p34='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p35='?' (Size = 1) (DbType = Byte), @p36='?' (Size = 1) (DbType = Byte), @p37='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p38='?' (DbType = DateTime2), @p39='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p40='?' (DbType = DateTime2), @p41='?' (Size = 50), @p42='?' (DbType = Int16), @p43='?' (DbType = Int32), @p44='?' (Size = 1) (DbType = Byte), @p45='?' (DbType = DateTime2), @p46='?' (DbType = DateTime2), @p47='?' (Size = 50), @p48='?' (DbType = Int32), @p49='?' (Size = 1) (DbType = Byte), @p50='?' (Size = 1) (DbType = Byte), @p51='?' (Size = 1) (DbType = Byte), @p52='?' (Size = 100), @p53='?' (Size = 20), @p54='?' (Size = 50), @p55='?' (DbType = DateTime2), @p56='?' (Size = 50), @p57='?' (DbType = Int32), @p58='?' (Size = 100), @p59='?' (DbType = DateTime2), @p60='?' (Size = 50), @p61='?' (DbType = Int32), @p62='?' (Size = 1) (DbType = Byte), @p63='?' (Size = 1) (DbType = Byte), @p64='?' (Size = 20), @p65='?' (Size = 20), @p66='?' (Size = 50), @p67='?' (DbType = DateTime2), @p68='?' (Size = 50), @p69='?' (DbType = Int32), @p70='?' (Size = 20), @p71='?' (Size = 20), @p72='?' (DbType = Int32), @p73='?' (DbType = DateTime2), @p74='?' (Size = 50), @p75='?' (Size = 100), @p76='?' (DbType = Int32), @p77='?' (Size = 1) (DbType = Byte), @p78='?' (Size = 20), @p79='?' (Size = 200), @p80='?' (DbType = DateTime2), @p81='?' (Size = 50), @p82='?' (DbType = Int32), @p83='?' (Size = 50), @p84='?' (DbType = Int32), @p85='?' (DbType = DateTime2), @p86='?' (Size = 50), @p87='?' (DbType = Int32), @p88='?' (Size = 50), @p89='?' (Size = 1) (DbType = Byte), @p90='?' (Size = 1) (DbType = Byte), @p91='?' (Size = 1) (DbType = Byte), @p92='?' (DbType = DateTime2), @p93='?' (Size = 50), @p94='?' (DbType = Int32), @p95='?' (Size = 500), @p96='?' (Size = 200), @p97='?' (Size = 100), @p98='?' (DbType = DateTime2), @p99='?' (Size = 50), @p100='?' (DbType = Int32), @p101='?' (DbType = DateTime2), @p102='?' (Size = 1) (DbType = Byte), @p103='?' (Size = 1) (DbType = Byte), @p104='?' (DbType = DateTime2), @p105='?' (Size = 200), @p106='?' (DbType = DateTime2), @p107='?' (Size = 50), @p108='?' (DbType = Int32), @p109='?' (DbType = Int32), @p110='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p111='?' (DbType = DateTime2), @p112='?' (Size = 50), @p113='?' (DbType = Int32), @p114='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p115='?' (Size = 30), @p116='?' (Size = 1) (DbType = Byte), @p117='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p118='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p119='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p120='?' (DbType = DateTime2), @p121='?' (Size = 50), @p122='?' (DbType = Int32), @p123='?' (Size = 100), @p124='?' (DbType = DateTime2), @p125='?' (Size = 50), @p126='?' (Size = 50), @p127='?' (DbType = Int32), @p128='?' (DbType = Int32), @p129='?' (DbType = DateTime2), @p130='?' (Size = 255), @p131='?' (Size = 500), @p132='?' (DbType = Int64), @p133='?' (Size = 1) (DbType = Byte), @p134='?' (DbType = DateTime2), @p135='?' (DbType = DateTime2), @p136='?' (Size = 50), @p137='?' (DbType = Int32), @p138='?' (Size = 200), @p139='?' (DbType = DateTime2), @p140='?' (Size = 50), @p141='?' (DbType = Int32), @p142='?' (DbType = DateTime2), @p143='?' (Size = 1) (DbType = Byte), @p144='?' (Size = 1) (DbType = Byte), @p145='?' (Size = 100), @p146='?' (Size = 200), @p147='?' (Size = 500), @p148='?' (DbType = DateTime2), @p149='?' (DbType = DateTime2), @p150='?' (Size = 50), @p151='?' (DbType = Int32), @p152='?' (Size = 500), @p153='?' (DbType = Int32), @p154='?' (DbType = DateTime2), @p155='?' (Size = 50), @p156='?' (Size = 50), @p157='?' (DbType = Int32), @p158='?' (Size = 20), @p159='?' (DbType = Int16), @p160='?' (Size = 1) (DbType = Byte), @p161='?' (Size = 100), @p162='?' (Size = 200), @p163='?' (DbType = DateTime2), @p164='?' (Size = 50), @p165='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [HR_PERSONNEL].[CONTRACTS] ([BASIC_SALARY], [CONTRACT_STATUS], [CONTRACT_TYPE], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [END_DATE], [HOUSING_ALLOWANCE], [IS_DELETED], [IS_RENEWABLE], [OTHER_ALLOWANCES], [START_DATE], [TRANSPORT_ALLOWANCE], [UPDATED_AT], [UPDATED_BY], [VACATION_DAYS], [VERSION_NO], [WORKING_HOURS_DAILY])
OUTPUT INSERTED.[CONTRACT_ID]
VALUES (@p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44);
INSERT INTO [HR_PERSONNEL].[DEPENDENTS] ([BIRTH_DATE], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [IS_DELETED], [IS_ELIGIBLE_FOR_INSURANCE], [IS_ELIGIBLE_FOR_TICKET], [NAME_AR], [NATIONAL_ID], [RELATIONSHIP], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[DEPENDENT_ID]
VALUES (@p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57);
INSERT INTO [HR_PERSONNEL].[EMERGENCY_CONTACTS] ([CONTACT_NAME_AR], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [IS_DELETED], [IS_PRIMARY], [PHONE_PRIMARY], [PHONE_SECONDARY], [RELATIONSHIP], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[CONTACT_ID]
VALUES (@p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65, @p66, @p67, @p68, @p69);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_ADDRESSES] ([ADDRESS_TYPE], [BUILDING_NO], [CITY_ID], [CREATED_AT], [CREATED_BY], [DISTRICT], [EMPLOYEE_ID], [IS_DELETED], [POSTAL_CODE], [STREET], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[ADDRESS_ID]
VALUES (@p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79, @p80, @p81, @p82);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_BANK_ACCOUNTS] ([ACCOUNT_NUMBER], [BANK_ID], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [IBAN], [IS_ACTIVE], [IS_DELETED], [IS_PRIMARY], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[ACCOUNT_ID]
VALUES (@p83, @p84, @p85, @p86, @p87, @p88, @p89, @p90, @p91, @p92, @p93, @p94);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_CERTIFICATIONS] ([ATTACHMENT_PATH], [CERT_NAME_AR], [CERT_NUMBER], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [EXPIRY_DATE], [IS_DELETED], [IS_MANDATORY], [ISSUE_DATE], [ISSUING_AUTHORITY], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[CERT_ID]
VALUES (@p95, @p96, @p97, @p98, @p99, @p100, @p101, @p102, @p103, @p104, @p105, @p106, @p107, @p108);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_COMPENSATIONS] ([BANK_ID], [BASIC_SALARY], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [HOUSING_ALLOWANCE], [IBAN_NUMBER], [IS_DELETED], [MEDICAL_ALLOWANCE], [OTHER_ALLOWANCES], [TRANSPORT_ALLOWANCE], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[COMPENSATION_ID]
VALUES (@p109, @p110, @p111, @p112, @p113, @p114, @p115, @p116, @p117, @p118, @p119, @p120, @p121, @p122);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_DOCUMENTS] ([CONTENT_TYPE], [CREATED_AT], [CREATED_BY], [DOCUMENT_NUMBER], [DOCUMENT_TYPE_ID], [EMPLOYEE_ID], [EXPIRY_DATE], [FILE_NAME], [FILE_PATH], [FILE_SIZE], [IS_DELETED], [ISSUE_DATE], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[DOCUMENT_ID]
VALUES (@p123, @p124, @p125, @p126, @p127, @p128, @p129, @p130, @p131, @p132, @p133, @p134, @p135, @p136, @p137);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_EXPERIENCES] ([COMPANY_NAME_AR], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [END_DATE], [IS_CURRENT], [IS_DELETED], [JOB_TITLE_AR], [REASON_FOR_LEAVING], [RESPONSIBILITIES], [START_DATE], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[EXPERIENCE_ID]
VALUES (@p138, @p139, @p140, @p141, @p142, @p143, @p144, @p145, @p146, @p147, @p148, @p149, @p150, @p151);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_QUALIFICATIONS] ([ATTACHMENT_PATH], [COUNTRY_ID], [CREATED_AT], [CREATED_BY], [DEGREE_TYPE], [EMPLOYEE_ID], [GRADE], [GRADUATION_YEAR], [IS_DELETED], [MAJOR_AR], [UNIVERSITY_AR], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[QUALIFICATION_ID]
VALUES (@p152, @p153, @p154, @p155, @p156, @p157, @p158, @p159, @p160, @p161, @p162, @p163, @p164, @p165);
2026-01-26 23:48:21.315 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'System.Int32'.
2026-01-26 23:48:21.320 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeesController.Create (HRMS.API) in 308.5442ms
2026-01-26 23:48:21.330 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.Create (HRMS.API)'
2026-01-26 23:48:21.332 +03:00 [INF] HTTP POST /api/Employees responded 201 in 531.2322 ms
2026-01-26 23:48:21.337 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Employees - 201 null application/json; charset=utf-8 543.4996ms
2026-01-26 23:49:40.513 +03:00 [INF] üöÄ Starting HRMS Hospital API...
2026-01-26 23:49:43.662 +03:00 [INF] ‚úÖ HRMS Hospital API started successfully
2026-01-26 23:49:43.806 +03:00 [INF] User profile is available. Using 'C:\Users\MT\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-26 23:49:44.441 +03:00 [INF] Now listening on: https://localhost:5001
2026-01-26 23:49:44.452 +03:00 [INF] Now listening on: http://localhost:5000
2026-01-26 23:49:44.623 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-26 23:49:45.266 +03:00 [INF] Hosting environment: Development
2026-01-26 23:49:45.267 +03:00 [INF] Content root path: G:\HRMS_Hospital\Backend\HRMS\HRMS.API
2026-01-26 23:49:45.385 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - null null
2026-01-26 23:49:46.072 +03:00 [INF] HTTP GET /swagger/index.html responded 200 in 318.7184 ms
2026-01-26 23:49:46.087 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - 200 null text/html;charset=utf-8 712.1247ms
2026-01-26 23:49:46.955 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - null null
2026-01-26 23:49:46.955 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_vs/browserLink - null null
2026-01-26 23:49:46.969 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 14.0988ms
2026-01-26 23:49:47.042 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_vs/browserLink - 200 null text/javascript; charset=UTF-8 87.045ms
2026-01-26 23:49:48.369 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - null null
2026-01-26 23:49:48.892 +03:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 446.5037 ms
2026-01-26 23:49:49.488 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 1119.3486ms
2026-01-26 23:50:02.920 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Employees - application/json 3654
2026-01-26 23:50:02.943 +03:00 [INF] CORS policy execution successful.
2026-01-26 23:50:02.985 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.Create (HRMS.API)'
2026-01-26 23:50:03.039 +03:00 [INF] Route matched with {action = "Create", controller = "Employees"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] Create(HRMS.Application.DTOs.Personnel.CreateEmployeeDto) on controller HRMS.API.Controllers.Personnel.EmployeesController (HRMS.API).
2026-01-26 23:50:06.604 +03:00 [WRN] No store type was specified for the decimal property 'HoursCount' on entity type 'ShiftType'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-01-26 23:50:06.607 +03:00 [WRN] No store type was specified for the decimal property 'MaxSalary' on entity type 'JobGrade'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-01-26 23:50:06.610 +03:00 [WRN] No store type was specified for the decimal property 'MinSalary' on entity type 'JobGrade'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-01-26 23:50:08.541 +03:00 [INF] Executed DbCommand (97ms) [Parameters=[@__ToString_0_startswith='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
WHERE [e].[EMPLOYEE_NUMBER] LIKE @__ToString_0_startswith ESCAPE N'\'
ORDER BY [e].[EMPLOYEE_NUMBER] DESC
2026-01-26 23:50:10.036 +03:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2026-01-26 23:50:10.055 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?' (Size = 100), @p5='?' (Size = 20), @p6='?' (Size = 50), @p7='?' (Size = 200), @p8='?' (Size = 1), @p9='?' (DbType = DateTime2), @p10='?' (Size = 1) (DbType = Byte), @p11='?' (DbType = Int32), @p12='?' (Size = 50), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (DbType = Int32), @p16='?' (Size = 20), @p17='?' (Size = 20), @p18='?' (Size = 20), @p19='?' (DbType = Int32), @p20='?' (Size = 50), @p21='?' (Size = 100), @p22='?' (Size = 50), @p23='?' (DbType = DateTime2), @p24='?' (Size = 50), @p25='?' (Size = 450), @p26='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_PERSONNEL].[EMPLOYEES] ([BIRTH_DATE], [CREATED_AT], [CREATED_BY], [DEPARTMENT_ID], [EMAIL], [EMPLOYEE_NUMBER], [FIRST_NAME_AR], [FULL_NAME_EN], [GENDER], [HIRE_DATE], [IS_DELETED], [JOB_ID], [LAST_NAME_AR], [LICENSE_EXPIRY_DATE], [LICENSE_NUMBER], [MANAGER_ID], [MARITAL_STATUS], [MOBILE], [NATIONAL_ID], [NATIONALITY_ID], [SECOND_NAME_AR], [SPECIALTY], [THIRD_NAME_AR], [UPDATED_AT], [UPDATED_BY], [USER_ID], [VERSION_NO])
OUTPUT INSERTED.[EMPLOYEE_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26);
2026-01-26 23:50:10.192 +03:00 [INF] Executed DbCommand (59ms) [Parameters=[@p27='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p28='?' (Size = 20), @p29='?' (Size = 50), @p30='?' (DbType = DateTime2), @p31='?' (Size = 50), @p32='?' (DbType = Int32), @p33='?' (DbType = DateTime2), @p34='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p35='?' (Size = 1) (DbType = Byte), @p36='?' (Size = 1) (DbType = Byte), @p37='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p38='?' (DbType = DateTime2), @p39='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p40='?' (DbType = DateTime2), @p41='?' (Size = 50), @p42='?' (DbType = Int16), @p43='?' (DbType = Int32), @p44='?' (Size = 1) (DbType = Byte), @p45='?' (DbType = DateTime2), @p46='?' (DbType = DateTime2), @p47='?' (Size = 50), @p48='?' (DbType = Int32), @p49='?' (Size = 1) (DbType = Byte), @p50='?' (Size = 1) (DbType = Byte), @p51='?' (Size = 1) (DbType = Byte), @p52='?' (Size = 100), @p53='?' (Size = 20), @p54='?' (Size = 50), @p55='?' (DbType = DateTime2), @p56='?' (Size = 50), @p57='?' (DbType = Int32), @p58='?' (Size = 100), @p59='?' (DbType = DateTime2), @p60='?' (Size = 50), @p61='?' (DbType = Int32), @p62='?' (Size = 1) (DbType = Byte), @p63='?' (Size = 1) (DbType = Byte), @p64='?' (Size = 20), @p65='?' (Size = 20), @p66='?' (Size = 50), @p67='?' (DbType = DateTime2), @p68='?' (Size = 50), @p69='?' (DbType = Int32), @p70='?' (Size = 20), @p71='?' (Size = 20), @p72='?' (DbType = Int32), @p73='?' (DbType = DateTime2), @p74='?' (Size = 50), @p75='?' (Size = 100), @p76='?' (DbType = Int32), @p77='?' (Size = 1) (DbType = Byte), @p78='?' (Size = 20), @p79='?' (Size = 200), @p80='?' (DbType = DateTime2), @p81='?' (Size = 50), @p82='?' (DbType = Int32), @p83='?' (Size = 50), @p84='?' (DbType = Int32), @p85='?' (DbType = DateTime2), @p86='?' (Size = 50), @p87='?' (DbType = Int32), @p88='?' (Size = 50), @p89='?' (Size = 1) (DbType = Byte), @p90='?' (Size = 1) (DbType = Byte), @p91='?' (Size = 1) (DbType = Byte), @p92='?' (DbType = DateTime2), @p93='?' (Size = 50), @p94='?' (DbType = Int32), @p95='?' (Size = 500), @p96='?' (Size = 200), @p97='?' (Size = 100), @p98='?' (DbType = DateTime2), @p99='?' (Size = 50), @p100='?' (DbType = Int32), @p101='?' (DbType = DateTime2), @p102='?' (Size = 1) (DbType = Byte), @p103='?' (Size = 1) (DbType = Byte), @p104='?' (DbType = DateTime2), @p105='?' (Size = 200), @p106='?' (DbType = DateTime2), @p107='?' (Size = 50), @p108='?' (DbType = Int32), @p109='?' (DbType = Int32), @p110='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p111='?' (DbType = DateTime2), @p112='?' (Size = 50), @p113='?' (DbType = Int32), @p114='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p115='?' (Size = 30), @p116='?' (Size = 1) (DbType = Byte), @p117='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p118='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p119='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p120='?' (DbType = DateTime2), @p121='?' (Size = 50), @p122='?' (DbType = Int32), @p123='?' (Size = 100), @p124='?' (DbType = DateTime2), @p125='?' (Size = 50), @p126='?' (Size = 50), @p127='?' (DbType = Int32), @p128='?' (DbType = Int32), @p129='?' (DbType = DateTime2), @p130='?' (Size = 255), @p131='?' (Size = 500), @p132='?' (DbType = Int64), @p133='?' (Size = 1) (DbType = Byte), @p134='?' (DbType = DateTime2), @p135='?' (DbType = DateTime2), @p136='?' (Size = 50), @p137='?' (DbType = Int32), @p138='?' (Size = 200), @p139='?' (DbType = DateTime2), @p140='?' (Size = 50), @p141='?' (DbType = Int32), @p142='?' (DbType = DateTime2), @p143='?' (Size = 1) (DbType = Byte), @p144='?' (Size = 1) (DbType = Byte), @p145='?' (Size = 100), @p146='?' (Size = 200), @p147='?' (Size = 500), @p148='?' (DbType = DateTime2), @p149='?' (DbType = DateTime2), @p150='?' (Size = 50), @p151='?' (DbType = Int32), @p152='?' (Size = 500), @p153='?' (DbType = Int32), @p154='?' (DbType = DateTime2), @p155='?' (Size = 50), @p156='?' (Size = 50), @p157='?' (DbType = Int32), @p158='?' (Size = 20), @p159='?' (DbType = Int16), @p160='?' (Size = 1) (DbType = Byte), @p161='?' (Size = 100), @p162='?' (Size = 200), @p163='?' (DbType = DateTime2), @p164='?' (Size = 50), @p165='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [HR_PERSONNEL].[CONTRACTS] ([BASIC_SALARY], [CONTRACT_STATUS], [CONTRACT_TYPE], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [END_DATE], [HOUSING_ALLOWANCE], [IS_DELETED], [IS_RENEWABLE], [OTHER_ALLOWANCES], [START_DATE], [TRANSPORT_ALLOWANCE], [UPDATED_AT], [UPDATED_BY], [VACATION_DAYS], [VERSION_NO], [WORKING_HOURS_DAILY])
OUTPUT INSERTED.[CONTRACT_ID]
VALUES (@p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44);
INSERT INTO [HR_PERSONNEL].[DEPENDENTS] ([BIRTH_DATE], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [IS_DELETED], [IS_ELIGIBLE_FOR_INSURANCE], [IS_ELIGIBLE_FOR_TICKET], [NAME_AR], [NATIONAL_ID], [RELATIONSHIP], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[DEPENDENT_ID]
VALUES (@p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57);
INSERT INTO [HR_PERSONNEL].[EMERGENCY_CONTACTS] ([CONTACT_NAME_AR], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [IS_DELETED], [IS_PRIMARY], [PHONE_PRIMARY], [PHONE_SECONDARY], [RELATIONSHIP], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[CONTACT_ID]
VALUES (@p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65, @p66, @p67, @p68, @p69);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_ADDRESSES] ([ADDRESS_TYPE], [BUILDING_NO], [CITY_ID], [CREATED_AT], [CREATED_BY], [DISTRICT], [EMPLOYEE_ID], [IS_DELETED], [POSTAL_CODE], [STREET], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[ADDRESS_ID]
VALUES (@p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79, @p80, @p81, @p82);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_BANK_ACCOUNTS] ([ACCOUNT_NUMBER], [BANK_ID], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [IBAN], [IS_ACTIVE], [IS_DELETED], [IS_PRIMARY], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[ACCOUNT_ID]
VALUES (@p83, @p84, @p85, @p86, @p87, @p88, @p89, @p90, @p91, @p92, @p93, @p94);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_CERTIFICATIONS] ([ATTACHMENT_PATH], [CERT_NAME_AR], [CERT_NUMBER], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [EXPIRY_DATE], [IS_DELETED], [IS_MANDATORY], [ISSUE_DATE], [ISSUING_AUTHORITY], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[CERT_ID]
VALUES (@p95, @p96, @p97, @p98, @p99, @p100, @p101, @p102, @p103, @p104, @p105, @p106, @p107, @p108);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_COMPENSATIONS] ([BANK_ID], [BASIC_SALARY], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [HOUSING_ALLOWANCE], [IBAN_NUMBER], [IS_DELETED], [MEDICAL_ALLOWANCE], [OTHER_ALLOWANCES], [TRANSPORT_ALLOWANCE], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[COMPENSATION_ID]
VALUES (@p109, @p110, @p111, @p112, @p113, @p114, @p115, @p116, @p117, @p118, @p119, @p120, @p121, @p122);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_DOCUMENTS] ([CONTENT_TYPE], [CREATED_AT], [CREATED_BY], [DOCUMENT_NUMBER], [DOCUMENT_TYPE_ID], [EMPLOYEE_ID], [EXPIRY_DATE], [FILE_NAME], [FILE_PATH], [FILE_SIZE], [IS_DELETED], [ISSUE_DATE], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[DOCUMENT_ID]
VALUES (@p123, @p124, @p125, @p126, @p127, @p128, @p129, @p130, @p131, @p132, @p133, @p134, @p135, @p136, @p137);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_EXPERIENCES] ([COMPANY_NAME_AR], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [END_DATE], [IS_CURRENT], [IS_DELETED], [JOB_TITLE_AR], [REASON_FOR_LEAVING], [RESPONSIBILITIES], [START_DATE], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[EXPERIENCE_ID]
VALUES (@p138, @p139, @p140, @p141, @p142, @p143, @p144, @p145, @p146, @p147, @p148, @p149, @p150, @p151);
INSERT INTO [HR_PERSONNEL].[EMPLOYEE_QUALIFICATIONS] ([ATTACHMENT_PATH], [COUNTRY_ID], [CREATED_AT], [CREATED_BY], [DEGREE_TYPE], [EMPLOYEE_ID], [GRADE], [GRADUATION_YEAR], [IS_DELETED], [MAJOR_AR], [UNIVERSITY_AR], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[QUALIFICATION_ID]
VALUES (@p152, @p153, @p154, @p155, @p156, @p157, @p158, @p159, @p160, @p161, @p162, @p163, @p164, @p165);
2026-01-26 23:50:10.317 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'System.Int32'.
2026-01-26 23:50:10.411 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeesController.Create (HRMS.API) in 7359.3941ms
2026-01-26 23:50:10.428 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.Create (HRMS.API)'
2026-01-26 23:50:10.434 +03:00 [INF] HTTP POST /api/Employees responded 201 in 7502.2929 ms
2026-01-26 23:50:10.463 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Employees - 201 null application/json; charset=utf-8 7543.2637ms
2026-01-26 23:54:16.879 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:5001/api/Employees/23 - application/json 4058
2026-01-26 23:54:16.887 +03:00 [INF] CORS policy execution successful.
2026-01-26 23:54:16.889 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.Update (HRMS.API)'
2026-01-26 23:54:16.906 +03:00 [INF] Route matched with {action = "Update", controller = "Employees"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Update(Int32, HRMS.Application.DTOs.Personnel.CreateEmployeeDto) on controller HRMS.API.Controllers.Personnel.EmployeesController (HRMS.API).
2026-01-26 23:54:17.421 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2026-01-26 23:54:17.747 +03:00 [INF] Executed DbCommand (83ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[EMPLOYEE_ID], [s].[BIRTH_DATE], [s].[CREATED_AT], [s].[CREATED_BY], [s].[DEPARTMENT_ID], [s].[EMAIL], [s].[EMPLOYEE_NUMBER], [s].[FIRST_NAME_AR], [s].[FULL_NAME_EN], [s].[GENDER], [s].[HIRE_DATE], [s].[IS_DELETED], [s].[JOB_ID], [s].[LAST_NAME_AR], [s].[LICENSE_EXPIRY_DATE], [s].[LICENSE_NUMBER], [s].[MANAGER_ID], [s].[MARITAL_STATUS], [s].[MOBILE], [s].[NATIONAL_ID], [s].[NATIONALITY_ID], [s].[SECOND_NAME_AR], [s].[SPECIALTY], [s].[THIRD_NAME_AR], [s].[UPDATED_AT], [s].[UPDATED_BY], [s].[USER_ID], [s].[VERSION_NO], [s].[COMPENSATION_ID], [s].[BANK_ID], [s].[BASIC_SALARY], [s].[CREATED_AT0], [s].[CREATED_BY0], [s].[EMPLOYEE_ID0], [s].[HOUSING_ALLOWANCE], [s].[IBAN_NUMBER], [s].[IS_DELETED0], [s].[MEDICAL_ALLOWANCE], [s].[OTHER_ALLOWANCES], [s].[TRANSPORT_ALLOWANCE], [s].[UPDATED_AT0], [s].[UPDATED_BY0], [s].[VERSION_NO0], [e1].[QUALIFICATION_ID], [e1].[ATTACHMENT_PATH], [e1].[COUNTRY_ID], [e1].[CREATED_AT], [e1].[CREATED_BY], [e1].[DEGREE_TYPE], [e1].[EMPLOYEE_ID], [e1].[GRADE], [e1].[GRADUATION_YEAR], [e1].[IS_DELETED], [e1].[MAJOR_AR], [e1].[UNIVERSITY_AR], [e1].[UPDATED_AT], [e1].[UPDATED_BY], [e1].[VERSION_NO], [e2].[EXPERIENCE_ID], [e2].[COMPANY_NAME_AR], [e2].[CREATED_AT], [e2].[CREATED_BY], [e2].[EMPLOYEE_ID], [e2].[END_DATE], [e2].[IS_CURRENT], [e2].[IS_DELETED], [e2].[JOB_TITLE_AR], [e2].[REASON_FOR_LEAVING], [e2].[RESPONSIBILITIES], [e2].[START_DATE], [e2].[UPDATED_AT], [e2].[UPDATED_BY], [e2].[VERSION_NO], [e3].[CONTACT_ID], [e3].[CONTACT_NAME_AR], [e3].[CREATED_AT], [e3].[CREATED_BY], [e3].[EMPLOYEE_ID], [e3].[IS_DELETED], [e3].[IS_PRIMARY], [e3].[PHONE_PRIMARY], [e3].[PHONE_SECONDARY], [e3].[RELATIONSHIP], [e3].[UPDATED_AT], [e3].[UPDATED_BY], [e3].[VERSION_NO], [c].[CONTRACT_ID], [c].[BASIC_SALARY], [c].[CONTRACT_STATUS], [c].[CONTRACT_TYPE], [c].[CREATED_AT], [c].[CREATED_BY], [c].[EMPLOYEE_ID], [c].[END_DATE], [c].[HOUSING_ALLOWANCE], [c].[IS_DELETED], [c].[IS_RENEWABLE], [c].[OTHER_ALLOWANCES], [c].[START_DATE], [c].[TRANSPORT_ALLOWANCE], [c].[UPDATED_AT], [c].[UPDATED_BY], [c].[VACATION_DAYS], [c].[VERSION_NO], [c].[WORKING_HOURS_DAILY], [e4].[CERT_ID], [e4].[ATTACHMENT_PATH], [e4].[CERT_NAME_AR], [e4].[CERT_NUMBER], [e4].[CREATED_AT], [e4].[CREATED_BY], [e4].[EMPLOYEE_ID], [e4].[EXPIRY_DATE], [e4].[IS_DELETED], [e4].[IS_MANDATORY], [e4].[ISSUE_DATE], [e4].[ISSUING_AUTHORITY], [e4].[UPDATED_AT], [e4].[UPDATED_BY], [e4].[VERSION_NO], [e5].[ACCOUNT_ID], [e5].[ACCOUNT_NUMBER], [e5].[BANK_ID], [e5].[CREATED_AT], [e5].[CREATED_BY], [e5].[EMPLOYEE_ID], [e5].[IBAN], [e5].[IS_ACTIVE], [e5].[IS_DELETED], [e5].[IS_PRIMARY], [e5].[UPDATED_AT], [e5].[UPDATED_BY], [e5].[VERSION_NO], [d].[DEPENDENT_ID], [d].[BIRTH_DATE], [d].[CREATED_AT], [d].[CREATED_BY], [d].[EMPLOYEE_ID], [d].[IS_DELETED], [d].[IS_ELIGIBLE_FOR_INSURANCE], [d].[IS_ELIGIBLE_FOR_TICKET], [d].[NAME_AR], [d].[NATIONAL_ID], [d].[RELATIONSHIP], [d].[UPDATED_AT], [d].[UPDATED_BY], [d].[VERSION_NO], [e6].[ADDRESS_ID], [e6].[ADDRESS_TYPE], [e6].[BUILDING_NO], [e6].[CITY_ID], [e6].[CREATED_AT], [e6].[CREATED_BY], [e6].[DISTRICT], [e6].[EMPLOYEE_ID], [e6].[IS_DELETED], [e6].[POSTAL_CODE], [e6].[STREET], [e6].[UPDATED_AT], [e6].[UPDATED_BY], [e6].[VERSION_NO], [e7].[DOCUMENT_ID], [e7].[CONTENT_TYPE], [e7].[CREATED_AT], [e7].[CREATED_BY], [e7].[DOCUMENT_NUMBER], [e7].[DOCUMENT_TYPE_ID], [e7].[EMPLOYEE_ID], [e7].[EXPIRY_DATE], [e7].[FILE_NAME], [e7].[FILE_PATH], [e7].[FILE_SIZE], [e7].[IS_DELETED], [e7].[ISSUE_DATE], [e7].[UPDATED_AT], [e7].[UPDATED_BY], [e7].[VERSION_NO]
FROM (
    SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO], [e0].[COMPENSATION_ID], [e0].[BANK_ID], [e0].[BASIC_SALARY], [e0].[CREATED_AT] AS [CREATED_AT0], [e0].[CREATED_BY] AS [CREATED_BY0], [e0].[EMPLOYEE_ID] AS [EMPLOYEE_ID0], [e0].[HOUSING_ALLOWANCE], [e0].[IBAN_NUMBER], [e0].[IS_DELETED] AS [IS_DELETED0], [e0].[MEDICAL_ALLOWANCE], [e0].[OTHER_ALLOWANCES], [e0].[TRANSPORT_ALLOWANCE], [e0].[UPDATED_AT] AS [UPDATED_AT0], [e0].[UPDATED_BY] AS [UPDATED_BY0], [e0].[VERSION_NO] AS [VERSION_NO0]
    FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
    LEFT JOIN [HR_PERSONNEL].[EMPLOYEE_COMPENSATIONS] AS [e0] ON [e].[EMPLOYEE_ID] = [e0].[EMPLOYEE_ID]
    WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0
) AS [s]
LEFT JOIN [HR_PERSONNEL].[EMPLOYEE_QUALIFICATIONS] AS [e1] ON [s].[EMPLOYEE_ID] = [e1].[EMPLOYEE_ID]
LEFT JOIN [HR_PERSONNEL].[EMPLOYEE_EXPERIENCES] AS [e2] ON [s].[EMPLOYEE_ID] = [e2].[EMPLOYEE_ID]
LEFT JOIN [HR_PERSONNEL].[EMERGENCY_CONTACTS] AS [e3] ON [s].[EMPLOYEE_ID] = [e3].[EMPLOYEE_ID]
LEFT JOIN [HR_PERSONNEL].[CONTRACTS] AS [c] ON [s].[EMPLOYEE_ID] = [c].[EMPLOYEE_ID]
LEFT JOIN [HR_PERSONNEL].[EMPLOYEE_CERTIFICATIONS] AS [e4] ON [s].[EMPLOYEE_ID] = [e4].[EMPLOYEE_ID]
LEFT JOIN [HR_PERSONNEL].[EMPLOYEE_BANK_ACCOUNTS] AS [e5] ON [s].[EMPLOYEE_ID] = [e5].[EMPLOYEE_ID]
LEFT JOIN [HR_PERSONNEL].[DEPENDENTS] AS [d] ON [s].[EMPLOYEE_ID] = [d].[EMPLOYEE_ID]
LEFT JOIN [HR_PERSONNEL].[EMPLOYEE_ADDRESSES] AS [e6] ON [s].[EMPLOYEE_ID] = [e6].[EMPLOYEE_ID]
LEFT JOIN [HR_PERSONNEL].[EMPLOYEE_DOCUMENTS] AS [e7] ON [s].[EMPLOYEE_ID] = [e7].[EMPLOYEE_ID]
ORDER BY [s].[EMPLOYEE_ID], [s].[COMPENSATION_ID], [e1].[QUALIFICATION_ID], [e2].[EXPERIENCE_ID], [e3].[CONTACT_ID], [c].[CONTRACT_ID], [e4].[CERT_ID], [e5].[ACCOUNT_ID], [d].[DEPENDENT_ID], [e6].[ADDRESS_ID]
2026-01-26 23:56:17.295 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeesController.Update (HRMS.API) in 120383.6968ms
2026-01-26 23:56:17.446 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Employees/23 - null null
2026-01-26 23:56:17.448 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.Update (HRMS.API)'
2026-01-26 23:56:17.451 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.GetProfile (HRMS.API)'
2026-01-26 23:56:17.851 +03:00 [ERR] Global Exception Caught: The association between entity types 'Employee' and 'EmployeeAddress' has been severed, but the relationship is either marked as required or is implicitly required because the foreign key is not nullable. If the dependent/child entity should be deleted when a required relationship is severed, configure the relationship to use cascade deletes. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the key values.
System.InvalidOperationException: The association between entity types 'Employee' and 'EmployeeAddress' has been severed, but the relationship is either marked as required or is implicitly required because the foreign key is not nullable. If the dependent/child entity should be deleted when a required relationship is severed, configure the relationship to use cascade deletes. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the key values.
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.HandleConceptualNulls(Boolean sensitiveLoggingEnabled, Boolean force, Boolean isCascadeDelete)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.HandleNullForeignKey(IProperty property, Boolean setModified, Boolean isCascadeDelete)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetProperty(IPropertyBase propertyBase, Object value, Boolean isMaterialization, Boolean setModified, Boolean isCascadeDelete, CurrentValueType valueType)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetProperty(IPropertyBase propertyBase, Object value, Boolean isMaterialization, Boolean setModified, Boolean isCascadeDelete)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.set_Item(IPropertyBase propertyBase, Object value)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.NavigationFixer.ConditionallyNullForeignKeyProperties(InternalEntityEntry dependentEntry, InternalEntityEntry principalEntry, IForeignKey foreignKey)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.NavigationFixer.NavigationCollectionChanged(InternalEntityEntry entry, INavigationBase navigationBase, IEnumerable`1 added, IEnumerable`1 removed)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntryNotifier.NavigationCollectionChanged(InternalEntityEntry entry, INavigationBase navigationBase, IEnumerable`1 added, IEnumerable`1 removed)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.ChangeDetector.DetectNavigationChange(InternalEntityEntry entry, INavigationBase navigationBase)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.ChangeDetector.LocalDetectChanges(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.ChangeDetector.DetectChanges(IStateManager stateManager)
   at Microsoft.EntityFrameworkCore.ChangeTracking.ChangeTracker.DetectChanges()
   at Microsoft.EntityFrameworkCore.DbContext.TryDetectChanges()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at HRMS.Application.Features.Personnel.Employees.Commands.UpdateEmployee.UpdateEmployeeCommandHandler.Handle(UpdateEmployeeCommand request, CancellationToken cancellationToken) in G:\HRMS_Hospital\Backend\HRMS\HRMS.Application\Features\Personnel\Employees\Commands\UpdateEmployee\UpdateEmployeeCommandHandler.cs:line 148
   at HRMS.API.Controllers.Personnel.EmployeesController.Update(Int32 id, CreateEmployeeDto dto) in G:\HRMS_Hospital\Backend\HRMS\HRMS.API\Controllers\Personnel\EmployeesController.cs:line 61
   at lambda_method2170(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at HRMS.API.Middleware.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in G:\HRMS_Hospital\Backend\HRMS\HRMS.API\Middleware\GlobalExceptionMiddleware.cs:line 25
2026-01-26 23:56:17.855 +03:00 [INF] Route matched with {action = "GetProfile", controller = "Employees"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Application.DTOs.Personnel.EmployeeProfileDto]] GetProfile(Int32) on controller HRMS.API.Controllers.Personnel.EmployeesController (HRMS.API).
2026-01-26 23:56:17.956 +03:00 [ERR] HTTP PUT /api/Employees/23 responded 500 in 121069.3442 ms
2026-01-26 23:56:17.959 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:5001/api/Employees/23 - 500 null application/json 121080.5086ms
2026-01-26 23:56:18.217 +03:00 [INF] Executed DbCommand (37ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[EMPLOYEE_ID], [s].[BIRTH_DATE], [s].[CREATED_AT], [s].[CREATED_BY], [s].[DEPARTMENT_ID], [s].[EMAIL], [s].[EMPLOYEE_NUMBER], [s].[FIRST_NAME_AR], [s].[FULL_NAME_EN], [s].[GENDER], [s].[HIRE_DATE], [s].[IS_DELETED], [s].[JOB_ID], [s].[LAST_NAME_AR], [s].[LICENSE_EXPIRY_DATE], [s].[LICENSE_NUMBER], [s].[MANAGER_ID], [s].[MARITAL_STATUS], [s].[MOBILE], [s].[NATIONAL_ID], [s].[NATIONALITY_ID], [s].[SECOND_NAME_AR], [s].[SPECIALTY], [s].[THIRD_NAME_AR], [s].[UPDATED_AT], [s].[UPDATED_BY], [s].[USER_ID], [s].[VERSION_NO], [s].[DEPT_ID], [s].[BranchId], [s].[COST_CENTER_CODE], [s].[CREATED_AT0], [s].[CREATED_BY0], [s].[DEPT_NAME_AR], [s].[DEPT_NAME_EN], [s].[IS_ACTIVE], [s].[IS_DELETED0], [s].[MANAGER_ID0], [s].[PARENT_DEPT_ID], [s].[UPDATED_AT0], [s].[UPDATED_BY0], [s].[VERSION_NO0], [s].[JOB_ID0], [s].[CREATED_AT1], [s].[CREATED_BY1], [s].[DEFAULT_GRADE_ID], [s].[DepartmentDeptId], [s].[IS_DELETED1], [s].[IS_MEDICAL], [s].[JOB_TITLE_AR], [s].[JOB_TITLE_EN], [s].[UPDATED_AT1], [s].[UPDATED_BY1], [s].[VERSION_NO1], [s].[COMPENSATION_ID], [s].[BANK_ID], [s].[BASIC_SALARY], [s].[CREATED_AT2], [s].[CREATED_BY2], [s].[EMPLOYEE_ID0], [s].[HOUSING_ALLOWANCE], [s].[IBAN_NUMBER], [s].[IS_DELETED2], [s].[MEDICAL_ALLOWANCE], [s].[OTHER_ALLOWANCES], [s].[TRANSPORT_ALLOWANCE], [s].[UPDATED_AT2], [s].[UPDATED_BY2], [s].[VERSION_NO2], [s0].[DOCUMENT_ID], [s0].[CONTENT_TYPE], [s0].[CREATED_AT], [s0].[CREATED_BY], [s0].[DOCUMENT_NUMBER], [s0].[DOCUMENT_TYPE_ID], [s0].[EMPLOYEE_ID], [s0].[EXPIRY_DATE], [s0].[FILE_NAME], [s0].[FILE_PATH], [s0].[FILE_SIZE], [s0].[IS_DELETED], [s0].[ISSUE_DATE], [s0].[UPDATED_AT], [s0].[UPDATED_BY], [s0].[VERSION_NO], [s0].[DOCUMENT_TYPE_ID0], [s0].[ALLOWED_EXTENSIONS], [s0].[CREATED_AT0], [s0].[CREATED_BY0], [s0].[DEFAULT_EXPIRY_DAYS], [s0].[DESCRIPTION], [s0].[DOCUMENT_TYPE_NAME_AR], [s0].[DOCUMENT_TYPE_NAME_EN], [s0].[HAS_EXPIRY], [s0].[IS_DELETED0], [s0].[IS_REQUIRED], [s0].[MAX_FILE_SIZE_MB], [s0].[UPDATED_AT0], [s0].[UPDATED_BY0], [s0].[VERSION_NO0]
FROM (
    SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO], [d].[DEPT_ID], [d].[BranchId], [d].[COST_CENTER_CODE], [d].[CREATED_AT] AS [CREATED_AT0], [d].[CREATED_BY] AS [CREATED_BY0], [d].[DEPT_NAME_AR], [d].[DEPT_NAME_EN], [d].[IS_ACTIVE], [d].[IS_DELETED] AS [IS_DELETED0], [d].[MANAGER_ID] AS [MANAGER_ID0], [d].[PARENT_DEPT_ID], [d].[UPDATED_AT] AS [UPDATED_AT0], [d].[UPDATED_BY] AS [UPDATED_BY0], [d].[VERSION_NO] AS [VERSION_NO0], [j].[JOB_ID] AS [JOB_ID0], [j].[CREATED_AT] AS [CREATED_AT1], [j].[CREATED_BY] AS [CREATED_BY1], [j].[DEFAULT_GRADE_ID], [j].[DepartmentDeptId], [j].[IS_DELETED] AS [IS_DELETED1], [j].[IS_MEDICAL], [j].[JOB_TITLE_AR], [j].[JOB_TITLE_EN], [j].[UPDATED_AT] AS [UPDATED_AT1], [j].[UPDATED_BY] AS [UPDATED_BY1], [j].[VERSION_NO] AS [VERSION_NO1], [e0].[COMPENSATION_ID], [e0].[BANK_ID], [e0].[BASIC_SALARY], [e0].[CREATED_AT] AS [CREATED_AT2], [e0].[CREATED_BY] AS [CREATED_BY2], [e0].[EMPLOYEE_ID] AS [EMPLOYEE_ID0], [e0].[HOUSING_ALLOWANCE], [e0].[IBAN_NUMBER], [e0].[IS_DELETED] AS [IS_DELETED2], [e0].[MEDICAL_ALLOWANCE], [e0].[OTHER_ALLOWANCES], [e0].[TRANSPORT_ALLOWANCE], [e0].[UPDATED_AT] AS [UPDATED_AT2], [e0].[UPDATED_BY] AS [UPDATED_BY2], [e0].[VERSION_NO] AS [VERSION_NO2]
    FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
    INNER JOIN [HR_CORE].[DEPARTMENTS] AS [d] ON [e].[DEPARTMENT_ID] = [d].[DEPT_ID]
    INNER JOIN [HR_CORE].[JOBS] AS [j] ON [e].[JOB_ID] = [j].[JOB_ID]
    LEFT JOIN [HR_PERSONNEL].[EMPLOYEE_COMPENSATIONS] AS [e0] ON [e].[EMPLOYEE_ID] = [e0].[EMPLOYEE_ID]
    WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0 AND [e].[IS_DELETED] = CAST(0 AS tinyint)
) AS [s]
LEFT JOIN (
    SELECT [e1].[DOCUMENT_ID], [e1].[CONTENT_TYPE], [e1].[CREATED_AT], [e1].[CREATED_BY], [e1].[DOCUMENT_NUMBER], [e1].[DOCUMENT_TYPE_ID], [e1].[EMPLOYEE_ID], [e1].[EXPIRY_DATE], [e1].[FILE_NAME], [e1].[FILE_PATH], [e1].[FILE_SIZE], [e1].[IS_DELETED], [e1].[ISSUE_DATE], [e1].[UPDATED_AT], [e1].[UPDATED_BY], [e1].[VERSION_NO], [d0].[DOCUMENT_TYPE_ID] AS [DOCUMENT_TYPE_ID0], [d0].[ALLOWED_EXTENSIONS], [d0].[CREATED_AT] AS [CREATED_AT0], [d0].[CREATED_BY] AS [CREATED_BY0], [d0].[DEFAULT_EXPIRY_DAYS], [d0].[DESCRIPTION], [d0].[DOCUMENT_TYPE_NAME_AR], [d0].[DOCUMENT_TYPE_NAME_EN], [d0].[HAS_EXPIRY], [d0].[IS_DELETED] AS [IS_DELETED0], [d0].[IS_REQUIRED], [d0].[MAX_FILE_SIZE_MB], [d0].[UPDATED_AT] AS [UPDATED_AT0], [d0].[UPDATED_BY] AS [UPDATED_BY0], [d0].[VERSION_NO] AS [VERSION_NO0]
    FROM [HR_PERSONNEL].[EMPLOYEE_DOCUMENTS] AS [e1]
    INNER JOIN [HR_CORE].[DOCUMENT_TYPES] AS [d0] ON [e1].[DOCUMENT_TYPE_ID] = [d0].[DOCUMENT_TYPE_ID]
) AS [s0] ON [s].[EMPLOYEE_ID] = [s0].[EMPLOYEE_ID]
ORDER BY [s].[EMPLOYEE_ID], [s].[DEPT_ID], [s].[JOB_ID0], [s].[COMPENSATION_ID], [s0].[DOCUMENT_ID]
2026-01-26 23:56:18.577 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Application.DTOs.Personnel.EmployeeProfileDto'.
2026-01-26 23:56:18.655 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeesController.GetProfile (HRMS.API) in 706.517ms
2026-01-26 23:56:18.658 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.GetProfile (HRMS.API)'
2026-01-26 23:56:18.660 +03:00 [INF] HTTP GET /api/Employees/23 responded 200 in 1209.8326 ms
2026-01-26 23:56:18.663 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Employees/23 - 200 null application/json; charset=utf-8 1217.1872ms
2026-01-26 23:57:42.641 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/employees/23/full-profile - null null
2026-01-26 23:57:42.662 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeeDetailsController.GetFullProfile (HRMS.API)'
2026-01-26 23:57:42.669 +03:00 [INF] Route matched with {action = "GetFullProfile", controller = "EmployeeDetails"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Application.Features.Personnel.Employees.DTOs.DetailedEmployeeProfileDto]] GetFullProfile(Int32) on controller HRMS.API.Controllers.Personnel.EmployeeDetailsController (HRMS.API).
2026-01-26 23:57:42.762 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2026-01-26 23:57:42.917 +03:00 [INF] Executed DbCommand (54ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[EMPLOYEE_ID], [s].[BIRTH_DATE], [s].[CREATED_AT], [s].[CREATED_BY], [s].[DEPARTMENT_ID], [s].[EMAIL], [s].[EMPLOYEE_NUMBER], [s].[FIRST_NAME_AR], [s].[FULL_NAME_EN], [s].[GENDER], [s].[HIRE_DATE], [s].[IS_DELETED], [s].[JOB_ID], [s].[LAST_NAME_AR], [s].[LICENSE_EXPIRY_DATE], [s].[LICENSE_NUMBER], [s].[MANAGER_ID], [s].[MARITAL_STATUS], [s].[MOBILE], [s].[NATIONAL_ID], [s].[NATIONALITY_ID], [s].[SECOND_NAME_AR], [s].[SPECIALTY], [s].[THIRD_NAME_AR], [s].[UPDATED_AT], [s].[UPDATED_BY], [s].[USER_ID], [s].[VERSION_NO], [s].[DEPT_ID], [s].[BranchId], [s].[COST_CENTER_CODE], [s].[CREATED_AT0], [s].[CREATED_BY0], [s].[DEPT_NAME_AR], [s].[DEPT_NAME_EN], [s].[IS_ACTIVE], [s].[IS_DELETED0], [s].[MANAGER_ID0], [s].[PARENT_DEPT_ID], [s].[UPDATED_AT0], [s].[UPDATED_BY0], [s].[VERSION_NO0], [s].[JOB_ID0], [s].[CREATED_AT1], [s].[CREATED_BY1], [s].[DEFAULT_GRADE_ID], [s].[DepartmentDeptId], [s].[IS_DELETED1], [s].[IS_MEDICAL], [s].[JOB_TITLE_AR], [s].[JOB_TITLE_EN], [s].[UPDATED_AT1], [s].[UPDATED_BY1], [s].[VERSION_NO1], [s].[COMPENSATION_ID], [s].[BANK_ID], [s].[BASIC_SALARY], [s].[CREATED_AT2], [s].[CREATED_BY2], [s].[EMPLOYEE_ID0], [s].[HOUSING_ALLOWANCE], [s].[IBAN_NUMBER], [s].[IS_DELETED2], [s].[MEDICAL_ALLOWANCE], [s].[OTHER_ALLOWANCES], [s].[TRANSPORT_ALLOWANCE], [s].[UPDATED_AT2], [s].[UPDATED_BY2], [s].[VERSION_NO2], [s0].[DOCUMENT_ID], [s0].[CONTENT_TYPE], [s0].[CREATED_AT], [s0].[CREATED_BY], [s0].[DOCUMENT_NUMBER], [s0].[DOCUMENT_TYPE_ID], [s0].[EMPLOYEE_ID], [s0].[EXPIRY_DATE], [s0].[FILE_NAME], [s0].[FILE_PATH], [s0].[FILE_SIZE], [s0].[IS_DELETED], [s0].[ISSUE_DATE], [s0].[UPDATED_AT], [s0].[UPDATED_BY], [s0].[VERSION_NO], [s0].[DOCUMENT_TYPE_ID0], [s0].[ALLOWED_EXTENSIONS], [s0].[CREATED_AT0], [s0].[CREATED_BY0], [s0].[DEFAULT_EXPIRY_DAYS], [s0].[DESCRIPTION], [s0].[DOCUMENT_TYPE_NAME_AR], [s0].[DOCUMENT_TYPE_NAME_EN], [s0].[HAS_EXPIRY], [s0].[IS_DELETED0], [s0].[IS_REQUIRED], [s0].[MAX_FILE_SIZE_MB], [s0].[UPDATED_AT0], [s0].[UPDATED_BY0], [s0].[VERSION_NO0], [e2].[QUALIFICATION_ID], [e2].[ATTACHMENT_PATH], [e2].[COUNTRY_ID], [e2].[CREATED_AT], [e2].[CREATED_BY], [e2].[DEGREE_TYPE], [e2].[EMPLOYEE_ID], [e2].[GRADE], [e2].[GRADUATION_YEAR], [e2].[IS_DELETED], [e2].[MAJOR_AR], [e2].[UNIVERSITY_AR], [e2].[UPDATED_AT], [e2].[UPDATED_BY], [e2].[VERSION_NO], [e3].[EXPERIENCE_ID], [e3].[COMPANY_NAME_AR], [e3].[CREATED_AT], [e3].[CREATED_BY], [e3].[EMPLOYEE_ID], [e3].[END_DATE], [e3].[IS_CURRENT], [e3].[IS_DELETED], [e3].[JOB_TITLE_AR], [e3].[REASON_FOR_LEAVING], [e3].[RESPONSIBILITIES], [e3].[START_DATE], [e3].[UPDATED_AT], [e3].[UPDATED_BY], [e3].[VERSION_NO], [e4].[CONTACT_ID], [e4].[CONTACT_NAME_AR], [e4].[CREATED_AT], [e4].[CREATED_BY], [e4].[EMPLOYEE_ID], [e4].[IS_DELETED], [e4].[IS_PRIMARY], [e4].[PHONE_PRIMARY], [e4].[PHONE_SECONDARY], [e4].[RELATIONSHIP], [e4].[UPDATED_AT], [e4].[UPDATED_BY], [e4].[VERSION_NO]
FROM (
    SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO], [d].[DEPT_ID], [d].[BranchId], [d].[COST_CENTER_CODE], [d].[CREATED_AT] AS [CREATED_AT0], [d].[CREATED_BY] AS [CREATED_BY0], [d].[DEPT_NAME_AR], [d].[DEPT_NAME_EN], [d].[IS_ACTIVE], [d].[IS_DELETED] AS [IS_DELETED0], [d].[MANAGER_ID] AS [MANAGER_ID0], [d].[PARENT_DEPT_ID], [d].[UPDATED_AT] AS [UPDATED_AT0], [d].[UPDATED_BY] AS [UPDATED_BY0], [d].[VERSION_NO] AS [VERSION_NO0], [j].[JOB_ID] AS [JOB_ID0], [j].[CREATED_AT] AS [CREATED_AT1], [j].[CREATED_BY] AS [CREATED_BY1], [j].[DEFAULT_GRADE_ID], [j].[DepartmentDeptId], [j].[IS_DELETED] AS [IS_DELETED1], [j].[IS_MEDICAL], [j].[JOB_TITLE_AR], [j].[JOB_TITLE_EN], [j].[UPDATED_AT] AS [UPDATED_AT1], [j].[UPDATED_BY] AS [UPDATED_BY1], [j].[VERSION_NO] AS [VERSION_NO1], [e0].[COMPENSATION_ID], [e0].[BANK_ID], [e0].[BASIC_SALARY], [e0].[CREATED_AT] AS [CREATED_AT2], [e0].[CREATED_BY] AS [CREATED_BY2], [e0].[EMPLOYEE_ID] AS [EMPLOYEE_ID0], [e0].[HOUSING_ALLOWANCE], [e0].[IBAN_NUMBER], [e0].[IS_DELETED] AS [IS_DELETED2], [e0].[MEDICAL_ALLOWANCE], [e0].[OTHER_ALLOWANCES], [e0].[TRANSPORT_ALLOWANCE], [e0].[UPDATED_AT] AS [UPDATED_AT2], [e0].[UPDATED_BY] AS [UPDATED_BY2], [e0].[VERSION_NO] AS [VERSION_NO2]
    FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
    INNER JOIN [HR_CORE].[DEPARTMENTS] AS [d] ON [e].[DEPARTMENT_ID] = [d].[DEPT_ID]
    INNER JOIN [HR_CORE].[JOBS] AS [j] ON [e].[JOB_ID] = [j].[JOB_ID]
    LEFT JOIN [HR_PERSONNEL].[EMPLOYEE_COMPENSATIONS] AS [e0] ON [e].[EMPLOYEE_ID] = [e0].[EMPLOYEE_ID]
    WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0
) AS [s]
LEFT JOIN (
    SELECT [e1].[DOCUMENT_ID], [e1].[CONTENT_TYPE], [e1].[CREATED_AT], [e1].[CREATED_BY], [e1].[DOCUMENT_NUMBER], [e1].[DOCUMENT_TYPE_ID], [e1].[EMPLOYEE_ID], [e1].[EXPIRY_DATE], [e1].[FILE_NAME], [e1].[FILE_PATH], [e1].[FILE_SIZE], [e1].[IS_DELETED], [e1].[ISSUE_DATE], [e1].[UPDATED_AT], [e1].[UPDATED_BY], [e1].[VERSION_NO], [d0].[DOCUMENT_TYPE_ID] AS [DOCUMENT_TYPE_ID0], [d0].[ALLOWED_EXTENSIONS], [d0].[CREATED_AT] AS [CREATED_AT0], [d0].[CREATED_BY] AS [CREATED_BY0], [d0].[DEFAULT_EXPIRY_DAYS], [d0].[DESCRIPTION], [d0].[DOCUMENT_TYPE_NAME_AR], [d0].[DOCUMENT_TYPE_NAME_EN], [d0].[HAS_EXPIRY], [d0].[IS_DELETED] AS [IS_DELETED0], [d0].[IS_REQUIRED], [d0].[MAX_FILE_SIZE_MB], [d0].[UPDATED_AT] AS [UPDATED_AT0], [d0].[UPDATED_BY] AS [UPDATED_BY0], [d0].[VERSION_NO] AS [VERSION_NO0]
    FROM [HR_PERSONNEL].[EMPLOYEE_DOCUMENTS] AS [e1]
    INNER JOIN [HR_CORE].[DOCUMENT_TYPES] AS [d0] ON [e1].[DOCUMENT_TYPE_ID] = [d0].[DOCUMENT_TYPE_ID]
) AS [s0] ON [s].[EMPLOYEE_ID] = [s0].[EMPLOYEE_ID]
LEFT JOIN [HR_PERSONNEL].[EMPLOYEE_QUALIFICATIONS] AS [e2] ON [s].[EMPLOYEE_ID] = [e2].[EMPLOYEE_ID]
LEFT JOIN [HR_PERSONNEL].[EMPLOYEE_EXPERIENCES] AS [e3] ON [s].[EMPLOYEE_ID] = [e3].[EMPLOYEE_ID]
LEFT JOIN [HR_PERSONNEL].[EMERGENCY_CONTACTS] AS [e4] ON [s].[EMPLOYEE_ID] = [e4].[EMPLOYEE_ID]
ORDER BY [s].[EMPLOYEE_ID], [s].[DEPT_ID], [s].[JOB_ID0], [s].[COMPENSATION_ID], [s0].[DOCUMENT_ID], [s0].[DOCUMENT_TYPE_ID0], [e2].[QUALIFICATION_ID], [e3].[EXPERIENCE_ID]
2026-01-26 23:57:42.976 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Application.Features.Personnel.Employees.DTOs.DetailedEmployeeProfileDto'.
2026-01-26 23:57:42.999 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeeDetailsController.GetFullProfile (HRMS.API) in 327.36ms
2026-01-26 23:57:43.010 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeeDetailsController.GetFullProfile (HRMS.API)'
2026-01-26 23:57:43.012 +03:00 [INF] HTTP GET /api/employees/23/full-profile responded 200 in 350.0381 ms
2026-01-26 23:57:43.015 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/employees/23/full-profile - 200 null application/json; charset=utf-8 373.6739ms
2026-01-26 23:59:34.277 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Employees/23 - null null
2026-01-26 23:59:34.290 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.GetProfile (HRMS.API)'
2026-01-26 23:59:34.291 +03:00 [INF] Route matched with {action = "GetProfile", controller = "Employees"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Application.DTOs.Personnel.EmployeeProfileDto]] GetProfile(Int32) on controller HRMS.API.Controllers.Personnel.EmployeesController (HRMS.API).
2026-01-26 23:59:34.344 +03:00 [INF] Executed DbCommand (38ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[EMPLOYEE_ID], [s].[BIRTH_DATE], [s].[CREATED_AT], [s].[CREATED_BY], [s].[DEPARTMENT_ID], [s].[EMAIL], [s].[EMPLOYEE_NUMBER], [s].[FIRST_NAME_AR], [s].[FULL_NAME_EN], [s].[GENDER], [s].[HIRE_DATE], [s].[IS_DELETED], [s].[JOB_ID], [s].[LAST_NAME_AR], [s].[LICENSE_EXPIRY_DATE], [s].[LICENSE_NUMBER], [s].[MANAGER_ID], [s].[MARITAL_STATUS], [s].[MOBILE], [s].[NATIONAL_ID], [s].[NATIONALITY_ID], [s].[SECOND_NAME_AR], [s].[SPECIALTY], [s].[THIRD_NAME_AR], [s].[UPDATED_AT], [s].[UPDATED_BY], [s].[USER_ID], [s].[VERSION_NO], [s].[DEPT_ID], [s].[BranchId], [s].[COST_CENTER_CODE], [s].[CREATED_AT0], [s].[CREATED_BY0], [s].[DEPT_NAME_AR], [s].[DEPT_NAME_EN], [s].[IS_ACTIVE], [s].[IS_DELETED0], [s].[MANAGER_ID0], [s].[PARENT_DEPT_ID], [s].[UPDATED_AT0], [s].[UPDATED_BY0], [s].[VERSION_NO0], [s].[JOB_ID0], [s].[CREATED_AT1], [s].[CREATED_BY1], [s].[DEFAULT_GRADE_ID], [s].[DepartmentDeptId], [s].[IS_DELETED1], [s].[IS_MEDICAL], [s].[JOB_TITLE_AR], [s].[JOB_TITLE_EN], [s].[UPDATED_AT1], [s].[UPDATED_BY1], [s].[VERSION_NO1], [s].[COMPENSATION_ID], [s].[BANK_ID], [s].[BASIC_SALARY], [s].[CREATED_AT2], [s].[CREATED_BY2], [s].[EMPLOYEE_ID0], [s].[HOUSING_ALLOWANCE], [s].[IBAN_NUMBER], [s].[IS_DELETED2], [s].[MEDICAL_ALLOWANCE], [s].[OTHER_ALLOWANCES], [s].[TRANSPORT_ALLOWANCE], [s].[UPDATED_AT2], [s].[UPDATED_BY2], [s].[VERSION_NO2], [s0].[DOCUMENT_ID], [s0].[CONTENT_TYPE], [s0].[CREATED_AT], [s0].[CREATED_BY], [s0].[DOCUMENT_NUMBER], [s0].[DOCUMENT_TYPE_ID], [s0].[EMPLOYEE_ID], [s0].[EXPIRY_DATE], [s0].[FILE_NAME], [s0].[FILE_PATH], [s0].[FILE_SIZE], [s0].[IS_DELETED], [s0].[ISSUE_DATE], [s0].[UPDATED_AT], [s0].[UPDATED_BY], [s0].[VERSION_NO], [s0].[DOCUMENT_TYPE_ID0], [s0].[ALLOWED_EXTENSIONS], [s0].[CREATED_AT0], [s0].[CREATED_BY0], [s0].[DEFAULT_EXPIRY_DAYS], [s0].[DESCRIPTION], [s0].[DOCUMENT_TYPE_NAME_AR], [s0].[DOCUMENT_TYPE_NAME_EN], [s0].[HAS_EXPIRY], [s0].[IS_DELETED0], [s0].[IS_REQUIRED], [s0].[MAX_FILE_SIZE_MB], [s0].[UPDATED_AT0], [s0].[UPDATED_BY0], [s0].[VERSION_NO0]
FROM (
    SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO], [d].[DEPT_ID], [d].[BranchId], [d].[COST_CENTER_CODE], [d].[CREATED_AT] AS [CREATED_AT0], [d].[CREATED_BY] AS [CREATED_BY0], [d].[DEPT_NAME_AR], [d].[DEPT_NAME_EN], [d].[IS_ACTIVE], [d].[IS_DELETED] AS [IS_DELETED0], [d].[MANAGER_ID] AS [MANAGER_ID0], [d].[PARENT_DEPT_ID], [d].[UPDATED_AT] AS [UPDATED_AT0], [d].[UPDATED_BY] AS [UPDATED_BY0], [d].[VERSION_NO] AS [VERSION_NO0], [j].[JOB_ID] AS [JOB_ID0], [j].[CREATED_AT] AS [CREATED_AT1], [j].[CREATED_BY] AS [CREATED_BY1], [j].[DEFAULT_GRADE_ID], [j].[DepartmentDeptId], [j].[IS_DELETED] AS [IS_DELETED1], [j].[IS_MEDICAL], [j].[JOB_TITLE_AR], [j].[JOB_TITLE_EN], [j].[UPDATED_AT] AS [UPDATED_AT1], [j].[UPDATED_BY] AS [UPDATED_BY1], [j].[VERSION_NO] AS [VERSION_NO1], [e0].[COMPENSATION_ID], [e0].[BANK_ID], [e0].[BASIC_SALARY], [e0].[CREATED_AT] AS [CREATED_AT2], [e0].[CREATED_BY] AS [CREATED_BY2], [e0].[EMPLOYEE_ID] AS [EMPLOYEE_ID0], [e0].[HOUSING_ALLOWANCE], [e0].[IBAN_NUMBER], [e0].[IS_DELETED] AS [IS_DELETED2], [e0].[MEDICAL_ALLOWANCE], [e0].[OTHER_ALLOWANCES], [e0].[TRANSPORT_ALLOWANCE], [e0].[UPDATED_AT] AS [UPDATED_AT2], [e0].[UPDATED_BY] AS [UPDATED_BY2], [e0].[VERSION_NO] AS [VERSION_NO2]
    FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
    INNER JOIN [HR_CORE].[DEPARTMENTS] AS [d] ON [e].[DEPARTMENT_ID] = [d].[DEPT_ID]
    INNER JOIN [HR_CORE].[JOBS] AS [j] ON [e].[JOB_ID] = [j].[JOB_ID]
    LEFT JOIN [HR_PERSONNEL].[EMPLOYEE_COMPENSATIONS] AS [e0] ON [e].[EMPLOYEE_ID] = [e0].[EMPLOYEE_ID]
    WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0 AND [e].[IS_DELETED] = CAST(0 AS tinyint)
) AS [s]
LEFT JOIN (
    SELECT [e1].[DOCUMENT_ID], [e1].[CONTENT_TYPE], [e1].[CREATED_AT], [e1].[CREATED_BY], [e1].[DOCUMENT_NUMBER], [e1].[DOCUMENT_TYPE_ID], [e1].[EMPLOYEE_ID], [e1].[EXPIRY_DATE], [e1].[FILE_NAME], [e1].[FILE_PATH], [e1].[FILE_SIZE], [e1].[IS_DELETED], [e1].[ISSUE_DATE], [e1].[UPDATED_AT], [e1].[UPDATED_BY], [e1].[VERSION_NO], [d0].[DOCUMENT_TYPE_ID] AS [DOCUMENT_TYPE_ID0], [d0].[ALLOWED_EXTENSIONS], [d0].[CREATED_AT] AS [CREATED_AT0], [d0].[CREATED_BY] AS [CREATED_BY0], [d0].[DEFAULT_EXPIRY_DAYS], [d0].[DESCRIPTION], [d0].[DOCUMENT_TYPE_NAME_AR], [d0].[DOCUMENT_TYPE_NAME_EN], [d0].[HAS_EXPIRY], [d0].[IS_DELETED] AS [IS_DELETED0], [d0].[IS_REQUIRED], [d0].[MAX_FILE_SIZE_MB], [d0].[UPDATED_AT] AS [UPDATED_AT0], [d0].[UPDATED_BY] AS [UPDATED_BY0], [d0].[VERSION_NO] AS [VERSION_NO0]
    FROM [HR_PERSONNEL].[EMPLOYEE_DOCUMENTS] AS [e1]
    INNER JOIN [HR_CORE].[DOCUMENT_TYPES] AS [d0] ON [e1].[DOCUMENT_TYPE_ID] = [d0].[DOCUMENT_TYPE_ID]
) AS [s0] ON [s].[EMPLOYEE_ID] = [s0].[EMPLOYEE_ID]
ORDER BY [s].[EMPLOYEE_ID], [s].[DEPT_ID], [s].[JOB_ID0], [s].[COMPENSATION_ID], [s0].[DOCUMENT_ID]
2026-01-26 23:59:34.365 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Application.DTOs.Personnel.EmployeeProfileDto'.
2026-01-26 23:59:34.368 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeesController.GetProfile (HRMS.API) in 72.9526ms
2026-01-26 23:59:34.374 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.GetProfile (HRMS.API)'
2026-01-26 23:59:34.377 +03:00 [INF] HTTP GET /api/Employees/23 responded 200 in 86.9974 ms
2026-01-26 23:59:34.380 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Employees/23 - 200 null application/json; charset=utf-8 103.2616ms
2026-01-26 23:59:41.973 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Employees - null null
2026-01-26 23:59:41.987 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.GetAll (HRMS.API)'
2026-01-26 23:59:42.041 +03:00 [INF] Route matched with {action = "GetAll", controller = "Employees"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Application.DTOs.Core.PagedResult`1[HRMS.Application.DTOs.Personnel.EmployeeListDto]]] GetAll(HRMS.Application.Features.Personnel.Employees.Queries.GetAllEmployees.GetAllEmployeesQuery) on controller HRMS.API.Controllers.Personnel.EmployeesController (HRMS.API).
2026-01-26 23:59:42.140 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
WHERE [e].[IS_DELETED] = CAST(0 AS tinyint)
2026-01-26 23:59:42.240 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [e0].[EMPLOYEE_ID], [e0].[EMPLOYEE_NUMBER], [e0].[FIRST_NAME_AR], [e0].[SECOND_NAME_AR], [e0].[LAST_NAME_AR], [e0].[FULL_NAME_EN], [d].[DEPT_NAME_AR], [j].[JOB_TITLE_AR], [e0].[MOBILE], [e0].[HIRE_DATE], ~CAST([e0].[IS_DELETED] ^ CAST(0 AS tinyint) AS bit)
FROM (
    SELECT [e].[EMPLOYEE_ID], [e].[CREATED_AT], [e].[DEPARTMENT_ID], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[MOBILE], [e].[SECOND_NAME_AR]
    FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
    WHERE [e].[IS_DELETED] = CAST(0 AS tinyint)
    ORDER BY [e].[CREATED_AT] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [e0]
INNER JOIN [HR_CORE].[DEPARTMENTS] AS [d] ON [e0].[DEPARTMENT_ID] = [d].[DEPT_ID]
INNER JOIN [HR_CORE].[JOBS] AS [j] ON [e0].[JOB_ID] = [j].[JOB_ID]
ORDER BY [e0].[CREATED_AT] DESC
2026-01-26 23:59:42.304 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Application.DTOs.Core.PagedResult`1[[HRMS.Application.DTOs.Personnel.EmployeeListDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-26 23:59:42.394 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeesController.GetAll (HRMS.API) in 348.2674ms
2026-01-26 23:59:42.408 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.GetAll (HRMS.API)'
2026-01-26 23:59:42.411 +03:00 [INF] HTTP GET /api/Employees responded 200 in 423.8880 ms
2026-01-26 23:59:42.430 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Employees - 200 null application/json; charset=utf-8 454.0345ms
