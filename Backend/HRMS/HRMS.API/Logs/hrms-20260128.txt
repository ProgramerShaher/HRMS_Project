2026-01-28 02:05:40.635 +03:00 [INF] üöÄ Starting HRMS Hospital API...
2026-01-28 02:05:51.491 +03:00 [INF] ‚úÖ HRMS Hospital API started successfully
2026-01-28 02:05:51.596 +03:00 [INF] User profile is available. Using 'C:\Users\MT\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-28 02:05:52.847 +03:00 [INF] Now listening on: https://localhost:5001
2026-01-28 02:05:53.060 +03:00 [INF] Now listening on: http://localhost:5000
2026-01-28 02:05:53.666 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-28 02:05:53.673 +03:00 [INF] Hosting environment: Development
2026-01-28 02:05:53.674 +03:00 [INF] Content root path: G:\HRMS_Hospital\Backend\HRMS\HRMS.API
2026-01-28 02:05:54.376 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - null null
2026-01-28 02:05:59.781 +03:00 [INF] HTTP GET /swagger/index.html responded 200 in 4261.1234 ms
2026-01-28 02:06:00.767 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - null null
2026-01-28 02:06:00.779 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_vs/browserLink - null null
2026-01-28 02:06:01.309 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - 200 null text/html;charset=utf-8 6944.7617ms
2026-01-28 02:06:01.345 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 577.8376ms
2026-01-28 02:06:01.460 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_vs/browserLink - 200 null text/javascript; charset=UTF-8 680.7631ms
2026-01-28 02:06:28.207 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - null null
2026-01-28 02:06:28.676 +03:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 425.3653 ms
2026-01-28 02:06:28.694 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 487.1001ms
2026-01-28 02:07:33.580 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Attendance/punch - application/json 162
2026-01-28 02:07:33.641 +03:00 [INF] CORS policy execution successful.
2026-01-28 02:07:33.669 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceController.RegisterPunch (HRMS.API)'
2026-01-28 02:07:33.734 +03:00 [INF] Route matched with {action = "RegisterPunch", controller = "Attendance"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int64]] RegisterPunch(HRMS.Application.Features.Attendance.Punch.RegisterPunchCommand) on controller HRMS.API.Controllers.Attendance.AttendanceController (HRMS.API).
2026-01-28 02:07:38.143 +03:00 [WRN] No store type was specified for the decimal property 'HoursCount' on entity type 'ShiftType'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-01-28 02:07:38.150 +03:00 [WRN] No store type was specified for the decimal property 'MaxSalary' on entity type 'JobGrade'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-01-28 02:07:38.154 +03:00 [WRN] No store type was specified for the decimal property 'MinSalary' on entity type 'JobGrade'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-01-28 02:07:43.325 +03:00 [INF] Executed DbCommand (1,730ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 50), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?' (Size = 1) (DbType = Byte), @p5='?' (Size = 1) (DbType = Byte), @p6='?' (DbType = DateTime2), @p7='?' (Size = 10), @p8='?' (DbType = DateTime2), @p9='?' (Size = 50), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_ATTENDANCE].[RAW_PUNCH_LOGS] ([CREATED_AT], [CREATED_BY], [DEVICE_ID], [EMPLOYEE_ID], [IS_DELETED], [IS_PROCESSED], [PUNCH_TIME], [PUNCH_TYPE], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2026-01-28 02:07:44.592 +03:00 [INF] Executed DbCommand (40ms) [Parameters=[@__targetDate_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[ROSTER_ID], [e].[CREATED_AT], [e].[CREATED_BY], [e].[EMPLOYEE_ID], [e].[IS_DELETED], [e].[IS_OFF_DAY], [e].[ROSTER_DATE], [e].[SHIFT_ID], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO], [s].[SHIFT_ID], [s].[CREATED_AT], [s].[CREATED_BY], [s].[END_TIME], [s].[GRACE_PERIOD_MINS], [s].[HOURS_COUNT], [s].[IS_CROSS_DAY], [s].[IS_DELETED], [s].[SHIFT_NAME_AR], [s].[START_TIME], [s].[UPDATED_AT], [s].[UPDATED_BY], [s].[VERSION_NO]
FROM [HR_ATTENDANCE].[EMPLOYEE_ROSTERS] AS [e]
LEFT JOIN [HR_ATTENDANCE].[SHIFT_TYPES] AS [s] ON [e].[SHIFT_ID] = [s].[SHIFT_ID]
WHERE [e].[ROSTER_DATE] = @__targetDate_0
2026-01-28 02:07:44.638 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Int64'.
2026-01-28 02:07:44.732 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceController.RegisterPunch (HRMS.API) in 10985.9995ms
2026-01-28 02:07:44.795 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceController.RegisterPunch (HRMS.API)'
2026-01-28 02:07:44.797 +03:00 [INF] HTTP POST /api/Attendance/punch responded 200 in 11162.3104 ms
2026-01-28 02:07:44.816 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Attendance/punch - 200 null application/json; charset=utf-8 11235.925ms
2026-01-28 02:11:19.021 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Attendance/punch - application/json 155
2026-01-28 02:11:19.031 +03:00 [INF] CORS policy execution successful.
2026-01-28 02:11:19.033 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceController.RegisterPunch (HRMS.API)'
2026-01-28 02:11:19.039 +03:00 [INF] Route matched with {action = "RegisterPunch", controller = "Attendance"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int64]] RegisterPunch(HRMS.Application.Features.Attendance.Punch.RegisterPunchCommand) on controller HRMS.API.Controllers.Attendance.AttendanceController (HRMS.API).
2026-01-28 02:11:19.172 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 50), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?' (Size = 1) (DbType = Byte), @p5='?' (Size = 1) (DbType = Byte), @p6='?' (DbType = DateTime2), @p7='?' (Size = 10), @p8='?' (DbType = DateTime2), @p9='?' (Size = 50), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_ATTENDANCE].[RAW_PUNCH_LOGS] ([CREATED_AT], [CREATED_BY], [DEVICE_ID], [EMPLOYEE_ID], [IS_DELETED], [IS_PROCESSED], [PUNCH_TIME], [PUNCH_TYPE], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2026-01-28 02:11:19.197 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__targetDate_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[ROSTER_ID], [e].[CREATED_AT], [e].[CREATED_BY], [e].[EMPLOYEE_ID], [e].[IS_DELETED], [e].[IS_OFF_DAY], [e].[ROSTER_DATE], [e].[SHIFT_ID], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO], [s].[SHIFT_ID], [s].[CREATED_AT], [s].[CREATED_BY], [s].[END_TIME], [s].[GRACE_PERIOD_MINS], [s].[HOURS_COUNT], [s].[IS_CROSS_DAY], [s].[IS_DELETED], [s].[SHIFT_NAME_AR], [s].[START_TIME], [s].[UPDATED_AT], [s].[UPDATED_BY], [s].[VERSION_NO]
FROM [HR_ATTENDANCE].[EMPLOYEE_ROSTERS] AS [e]
LEFT JOIN [HR_ATTENDANCE].[SHIFT_TYPES] AS [s] ON [e].[SHIFT_ID] = [s].[SHIFT_ID]
WHERE [e].[ROSTER_DATE] = @__targetDate_0
2026-01-28 02:11:19.210 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Int64'.
2026-01-28 02:11:19.215 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceController.RegisterPunch (HRMS.API) in 170.4439ms
2026-01-28 02:11:19.233 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceController.RegisterPunch (HRMS.API)'
2026-01-28 02:11:19.236 +03:00 [INF] HTTP POST /api/Attendance/punch responded 200 in 205.7481 ms
2026-01-28 02:11:19.241 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Attendance/punch - 200 null application/json; charset=utf-8 220.4042ms
2026-01-28 02:13:25.531 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Attendance/swap-requests/revoke - application/json 91
2026-01-28 02:13:25.543 +03:00 [INF] CORS policy execution successful.
2026-01-28 02:13:25.547 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceController.RevokeApprovedSwap (HRMS.API)'
2026-01-28 02:13:25.564 +03:00 [INF] Route matched with {action = "RevokeApprovedSwap", controller = "Attendance"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Boolean]] RevokeApprovedSwap(HRMS.Application.Features.Attendance.Requests.RevokeSwapRequestCommand) on controller HRMS.API.Controllers.Attendance.AttendanceController (HRMS.API).
2026-01-28 02:13:25.710 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[REQUEST_ID], [s].[CREATED_AT], [s].[CREATED_BY], [s].[IS_DELETED], [s].[MANAGER_COMMENT], [s].[REQUESTER_ID], [s].[ROSTER_DATE], [s].[STATUS], [s].[TARGET_EMPLOYEE_ID], [s].[UPDATED_AT], [s].[UPDATED_BY], [s].[VERSION_NO]
FROM [HR_ATTENDANCE].[SHIFT_SWAP_REQUESTS] AS [s]
WHERE [s].[REQUEST_ID] = @__p_0
2026-01-28 02:13:25.936 +03:00 [INF] Executed DbCommand (56ms) [Parameters=[@__swapRequest_RosterDate_Year_0='?' (DbType = Int16), @__swapRequest_RosterDate_Month_1='?' (DbType = Byte)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HR_PAYROLL].[PAYROLL_RUNS] AS [p]
        WHERE [p].[Year] = @__swapRequest_RosterDate_Year_0 AND [p].[Month] = @__swapRequest_RosterDate_Month_1 AND [p].[Status] IN (N'APPROVED', N'PAID')) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-28 02:13:25.988 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__swapRequest_RequesterId_0='?' (DbType = Int32), @__swapRequest_RosterDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[ROSTER_ID], [e].[CREATED_AT], [e].[CREATED_BY], [e].[EMPLOYEE_ID], [e].[IS_DELETED], [e].[IS_OFF_DAY], [e].[ROSTER_DATE], [e].[SHIFT_ID], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO]
FROM [HR_ATTENDANCE].[EMPLOYEE_ROSTERS] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__swapRequest_RequesterId_0 AND [e].[ROSTER_DATE] = @__swapRequest_RosterDate_1
2026-01-28 02:13:26.112 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__swapRequest_TargetEmployeeId_0='?' (DbType = Int32), @__swapRequest_RosterDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[ROSTER_ID], [e].[CREATED_AT], [e].[CREATED_BY], [e].[EMPLOYEE_ID], [e].[IS_DELETED], [e].[IS_OFF_DAY], [e].[ROSTER_DATE], [e].[SHIFT_ID], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO]
FROM [HR_ATTENDANCE].[EMPLOYEE_ROSTERS] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__swapRequest_TargetEmployeeId_0 AND [e].[ROSTER_DATE] = @__swapRequest_RosterDate_1
2026-01-28 02:13:26.415 +03:00 [INF] Executed DbCommand (192ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int32), @p2='?' (DbType = Int32), @p4='?' (DbType = Int64), @p3='?' (DbType = Int32), @p5='?' (DbType = Int32), @p8='?' (DbType = Int32), @p6='?' (Size = 200), @p7='?' (Size = 20), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [HR_ATTENDANCE].[EMPLOYEE_ROSTERS] SET [SHIFT_ID] = @p0
OUTPUT 1
WHERE [ROSTER_ID] = @p1 AND [VERSION_NO] = @p2;
UPDATE [HR_ATTENDANCE].[EMPLOYEE_ROSTERS] SET [SHIFT_ID] = @p3
OUTPUT 1
WHERE [ROSTER_ID] = @p4 AND [VERSION_NO] = @p5;
UPDATE [HR_ATTENDANCE].[SHIFT_SWAP_REQUESTS] SET [MANAGER_COMMENT] = @p6, [STATUS] = @p7
OUTPUT 1
WHERE [REQUEST_ID] = @p8 AND [VERSION_NO] = @p9;
2026-01-28 02:13:26.456 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__targetDate_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[ROSTER_ID], [e].[CREATED_AT], [e].[CREATED_BY], [e].[EMPLOYEE_ID], [e].[IS_DELETED], [e].[IS_OFF_DAY], [e].[ROSTER_DATE], [e].[SHIFT_ID], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO], [s].[SHIFT_ID], [s].[CREATED_AT], [s].[CREATED_BY], [s].[END_TIME], [s].[GRACE_PERIOD_MINS], [s].[HOURS_COUNT], [s].[IS_CROSS_DAY], [s].[IS_DELETED], [s].[SHIFT_NAME_AR], [s].[START_TIME], [s].[UPDATED_AT], [s].[UPDATED_BY], [s].[VERSION_NO]
FROM [HR_ATTENDANCE].[EMPLOYEE_ROSTERS] AS [e]
LEFT JOIN [HR_ATTENDANCE].[SHIFT_TYPES] AS [s] ON [e].[SHIFT_ID] = [s].[SHIFT_ID]
WHERE [e].[ROSTER_DATE] = @__targetDate_0
2026-01-28 02:13:26.705 +03:00 [INF] Executed DbCommand (49ms) [Parameters=[@__employeeIds_0='?' (Size = 4000), @__startRange_1='?' (DbType = DateTime2), @__endRange_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[LOG_ID], [r].[CREATED_AT], [r].[CREATED_BY], [r].[DEVICE_ID], [r].[EMPLOYEE_ID], [r].[IS_DELETED], [r].[IS_PROCESSED], [r].[PUNCH_TIME], [r].[PUNCH_TYPE], [r].[UPDATED_AT], [r].[UPDATED_BY], [r].[VERSION_NO]
FROM [HR_ATTENDANCE].[RAW_PUNCH_LOGS] AS [r]
WHERE [r].[EMPLOYEE_ID] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__employeeIds_0) WITH ([value] int '$') AS [e]
) AND [r].[PUNCH_TIME] >= @__startRange_1 AND [r].[PUNCH_TIME] < @__endRange_2
2026-01-28 02:13:26.767 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@__employeeIds_0='?' (Size = 4000), @__targetDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[REQUEST_ID], [l].[ATTACHMENT_PATH], [l].[CREATED_AT], [l].[CREATED_BY], [l].[DAYS_COUNT], [l].[EMPLOYEE_ID], [l].[END_DATE], [l].[IS_DELETED], [l].[IS_POSTED_TO_BALANCE], [l].[LEAVE_TYPE_ID], [l].[REASON], [l].[REJECTION_REASON], [l].[START_DATE], [l].[STATUS], [l].[UPDATED_AT], [l].[UPDATED_BY], [l].[VERSION_NO]
FROM [HR_LEAVES].[LEAVE_REQUESTS] AS [l]
WHERE [l].[EMPLOYEE_ID] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__employeeIds_0) WITH ([value] int '$') AS [e]
) AND [l].[STATUS] = N'APPROVED' AND [l].[START_DATE] <= @__targetDate_1 AND [l].[END_DATE] >= @__targetDate_1
2026-01-28 02:13:26.821 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@__employeeIds_0='?' (Size = 4000), @__targetDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[OT_REQUEST_ID], [o].[APPROVED_BY], [o].[APPROVED_HOURS], [o].[CREATED_AT], [o].[CREATED_BY], [o].[EMPLOYEE_ID], [o].[HOURS_REQUESTED], [o].[IS_DELETED], [o].[REASON], [o].[REQUEST_DATE], [o].[STATUS], [o].[UPDATED_AT], [o].[UPDATED_BY], [o].[VERSION_NO], [o].[WORK_DATE]
FROM [HR_ATTENDANCE].[OVERTIME_REQUESTS] AS [o]
WHERE [o].[EMPLOYEE_ID] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__employeeIds_0) WITH ([value] int '$') AS [e]
) AND [o].[STATUS] = N'APPROVED' AND [o].[WORK_DATE] = @__targetDate_1
2026-01-28 02:13:26.939 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__targetDate_0='?' (DbType = DateTime2), @__employeeIds_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[RECORD_ID], [d].[ACTUAL_IN_TIME], [d].[ACTUAL_OUT_TIME], [d].[ATTENDANCE_DATE], [d].[CREATED_AT], [d].[CREATED_BY], [d].[EARLY_LEAVE_MINUTES], [d].[EMPLOYEE_ID], [d].[IS_DELETED], [d].[LATE_MINUTES], [d].[OVERTIME_MINUTES], [d].[PLANNED_SHIFT_ID], [d].[STATUS], [d].[UPDATED_AT], [d].[UPDATED_BY], [d].[VERSION_NO]
FROM [HR_ATTENDANCE].[DAILY_ATTENDANCE] AS [d]
WHERE [d].[ATTENDANCE_DATE] = @__targetDate_0 AND [d].[EMPLOYEE_ID] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__employeeIds_1) WITH ([value] int '$') AS [e]
)
2026-01-28 02:13:27.212 +03:00 [INF] Executed DbCommand (52ms) [Parameters=[@p0='?' (DbType = Int64), @p1='?' (DbType = Int32), @p2='?' (DbType = Int64), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (DbType = DateTime2), @p7='?' (DbType = DateTime2), @p8='?' (Size = 50), @p9='?' (DbType = Int16), @p10='?' (DbType = Int32), @p11='?' (Size = 1) (DbType = Byte), @p12='?' (DbType = Int16), @p13='?' (DbType = Int16), @p14='?' (DbType = Int32), @p15='?' (Size = 20), @p16='?' (DbType = DateTime2), @p17='?' (Size = 50), @p18='?' (DbType = Int32), @p19='?' (DbType = DateTime2), @p20='?' (DbType = DateTime2), @p21='?' (DbType = DateTime2), @p22='?' (DbType = DateTime2), @p23='?' (Size = 50), @p24='?' (DbType = Int16), @p25='?' (DbType = Int32), @p26='?' (Size = 1) (DbType = Byte), @p27='?' (DbType = Int16), @p28='?' (DbType = Int16), @p29='?' (DbType = Int32), @p30='?' (Size = 20), @p31='?' (DbType = DateTime2), @p32='?' (Size = 50), @p33='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [HR_ATTENDANCE].[DAILY_ATTENDANCE]
OUTPUT 1
WHERE [RECORD_ID] = @p0 AND [VERSION_NO] = @p1;
DELETE FROM [HR_ATTENDANCE].[DAILY_ATTENDANCE]
OUTPUT 1
WHERE [RECORD_ID] = @p2 AND [VERSION_NO] = @p3;
MERGE [HR_ATTENDANCE].[DAILY_ATTENDANCE] USING (
VALUES (@p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, 0),
(@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, 1)) AS i ([ACTUAL_IN_TIME], [ACTUAL_OUT_TIME], [ATTENDANCE_DATE], [CREATED_AT], [CREATED_BY], [EARLY_LEAVE_MINUTES], [EMPLOYEE_ID], [IS_DELETED], [LATE_MINUTES], [OVERTIME_MINUTES], [PLANNED_SHIFT_ID], [STATUS], [UPDATED_AT], [UPDATED_BY], [VERSION_NO], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([ACTUAL_IN_TIME], [ACTUAL_OUT_TIME], [ATTENDANCE_DATE], [CREATED_AT], [CREATED_BY], [EARLY_LEAVE_MINUTES], [EMPLOYEE_ID], [IS_DELETED], [LATE_MINUTES], [OVERTIME_MINUTES], [PLANNED_SHIFT_ID], [STATUS], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
VALUES (i.[ACTUAL_IN_TIME], i.[ACTUAL_OUT_TIME], i.[ATTENDANCE_DATE], i.[CREATED_AT], i.[CREATED_BY], i.[EARLY_LEAVE_MINUTES], i.[EMPLOYEE_ID], i.[IS_DELETED], i.[LATE_MINUTES], i.[OVERTIME_MINUTES], i.[PLANNED_SHIFT_ID], i.[STATUS], i.[UPDATED_AT], i.[UPDATED_BY], i.[VERSION_NO])
OUTPUT INSERTED.[RECORD_ID], i._Position;
2026-01-28 02:13:27.241 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Boolean'.
2026-01-28 02:13:27.244 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceController.RevokeApprovedSwap (HRMS.API) in 1663.4937ms
2026-01-28 02:13:27.249 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceController.RevokeApprovedSwap (HRMS.API)'
2026-01-28 02:13:27.255 +03:00 [INF] HTTP POST /api/Attendance/swap-requests/revoke responded 200 in 1712.3911 ms
2026-01-28 02:13:27.259 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Attendance/swap-requests/revoke - 200 null application/json; charset=utf-8 1728.3164ms
2026-01-28 02:34:54.021 +03:00 [INF] üöÄ Starting HRMS Hospital API...
2026-01-28 02:34:59.762 +03:00 [INF] ‚úÖ HRMS Hospital API started successfully
2026-01-28 02:35:00.258 +03:00 [INF] User profile is available. Using 'C:\Users\MT\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-28 02:35:01.099 +03:00 [INF] Now listening on: https://localhost:5001
2026-01-28 02:35:01.291 +03:00 [INF] Now listening on: http://localhost:5000
2026-01-28 02:35:02.026 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-28 02:35:02.403 +03:00 [INF] Hosting environment: Development
2026-01-28 02:35:02.404 +03:00 [INF] Content root path: G:\HRMS_Hospital\Backend\HRMS\HRMS.API
2026-01-28 02:35:02.512 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - null null
2026-01-28 02:35:05.021 +03:00 [INF] HTTP GET /swagger/index.html responded 200 in 958.8571 ms
2026-01-28 02:35:05.545 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - 200 null text/html;charset=utf-8 3046.4188ms
2026-01-28 02:35:06.078 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - null null
2026-01-28 02:35:06.079 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_vs/browserLink - null null
2026-01-28 02:35:06.093 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 14.8486ms
2026-01-28 02:35:06.193 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_vs/browserLink - 200 null text/javascript; charset=UTF-8 113.7243ms
2026-01-28 02:35:09.113 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - null null
2026-01-28 02:35:09.958 +03:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 519.9802 ms
2026-01-28 02:35:10.017 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 903.7396ms
2026-01-28 02:40:39.450 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/AttendanceSettings/initialize-roster - application/json 94
2026-01-28 02:40:39.467 +03:00 [INF] CORS policy execution successful.
2026-01-28 02:40:39.488 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.InitializeRoster (HRMS.API)'
2026-01-28 02:40:39.555 +03:00 [INF] Route matched with {action = "InitializeRoster", controller = "AttendanceSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Boolean]] InitializeRoster(HRMS.Application.Features.Attendance.Roster.Commands.InitializeRoster.InitializeRosterCommand) on controller HRMS.API.Controllers.Attendance.AttendanceSettingsController (HRMS.API).
2026-01-28 02:40:42.990 +03:00 [WRN] No store type was specified for the decimal property 'HoursCount' on entity type 'ShiftType'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-01-28 02:40:42.996 +03:00 [WRN] No store type was specified for the decimal property 'MaxSalary' on entity type 'JobGrade'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-01-28 02:40:43.000 +03:00 [WRN] No store type was specified for the decimal property 'MinSalary' on entity type 'JobGrade'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-01-28 02:40:44.790 +03:00 [INF] Executed DbCommand (197ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
        WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-28 02:40:51.027 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceSettingsController.InitializeRoster (HRMS.API) in 11457.6046ms
2026-01-28 02:40:51.034 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.InitializeRoster (HRMS.API)'
2026-01-28 02:40:51.541 +03:00 [ERR] Global Exception Caught: ÿßŸÑŸÖŸàÿ∏ŸÅ ÿ∫Ÿäÿ± ŸÖŸàÿ¨ŸàÿØ
FluentValidation.ValidationException: ÿßŸÑŸÖŸàÿ∏ŸÅ ÿ∫Ÿäÿ± ŸÖŸàÿ¨ŸàÿØ
   at HRMS.Application.Features.Attendance.Roster.Commands.InitializeRoster.InitializeRosterHandler.Handle(InitializeRosterCommand request, CancellationToken cancellationToken) in G:\HRMS_Hospital\Backend\HRMS\HRMS.Application\Features\Attendance\Roster\Commands\InitializeRoster\InitializeRosterCommand.cs:line 57
   at HRMS.API.Controllers.Attendance.AttendanceSettingsController.InitializeRoster(InitializeRosterCommand command) in G:\HRMS_Hospital\Backend\HRMS\HRMS.API\Controllers\Attendance\AttendanceSettingsController.cs:line 61
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at HRMS.API.Middleware.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in G:\HRMS_Hospital\Backend\HRMS\HRMS.API\Middleware\GlobalExceptionMiddleware.cs:line 25
2026-01-28 02:40:51.657 +03:00 [INF] HTTP POST /api/AttendanceSettings/initialize-roster responded 400 in 12194.2412 ms
2026-01-28 02:40:51.687 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/AttendanceSettings/initialize-roster - 400 null application/json 12237.045ms
2026-01-28 02:41:23.045 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/AttendanceSettings/initialize-roster - application/json 94
2026-01-28 02:41:23.268 +03:00 [INF] CORS policy execution successful.
2026-01-28 02:41:23.271 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.InitializeRoster (HRMS.API)'
2026-01-28 02:41:23.276 +03:00 [INF] Route matched with {action = "InitializeRoster", controller = "AttendanceSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Boolean]] InitializeRoster(HRMS.Application.Features.Attendance.Roster.Commands.InitializeRoster.InitializeRosterCommand) on controller HRMS.API.Controllers.Attendance.AttendanceSettingsController (HRMS.API).
2026-01-28 02:41:23.407 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
        WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-28 02:41:23.441 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__request_ShiftId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HR_ATTENDANCE].[SHIFT_TYPES] AS [s]
        WHERE [s].[SHIFT_ID] = @__request_ShiftId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-28 02:41:23.511 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32), @__request_StartDate_1='?' (DbType = DateTime2), @__request_EndDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[ROSTER_DATE]
FROM [HR_ATTENDANCE].[EMPLOYEE_ROSTERS] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0 AND [e].[ROSTER_DATE] >= @__request_StartDate_1 AND [e].[ROSTER_DATE] <= @__request_EndDate_2
2026-01-28 02:41:24.070 +03:00 [INF] Executed DbCommand (28ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 50), @p2='?' (DbType = Int32), @p3='?' (Size = 1) (DbType = Byte), @p4='?' (Size = 1) (DbType = Byte), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime2), @p8='?' (Size = 50), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime2), @p11='?' (Size = 50), @p12='?' (DbType = Int32), @p13='?' (Size = 1) (DbType = Byte), @p14='?' (Size = 1) (DbType = Byte), @p15='?' (DbType = DateTime2), @p16='?' (DbType = Int32), @p17='?' (DbType = DateTime2), @p18='?' (Size = 50), @p19='?' (DbType = Int32), @p20='?' (DbType = DateTime2), @p21='?' (Size = 50), @p22='?' (DbType = Int32), @p23='?' (Size = 1) (DbType = Byte), @p24='?' (Size = 1) (DbType = Byte), @p25='?' (DbType = DateTime2), @p26='?' (DbType = Int32), @p27='?' (DbType = DateTime2), @p28='?' (Size = 50), @p29='?' (DbType = Int32), @p30='?' (DbType = DateTime2), @p31='?' (Size = 50), @p32='?' (DbType = Int32), @p33='?' (Size = 1) (DbType = Byte), @p34='?' (Size = 1) (DbType = Byte), @p35='?' (DbType = DateTime2), @p36='?' (DbType = Int32), @p37='?' (DbType = DateTime2), @p38='?' (Size = 50), @p39='?' (DbType = Int32), @p40='?' (DbType = DateTime2), @p41='?' (Size = 50), @p42='?' (DbType = Int32), @p43='?' (Size = 1) (DbType = Byte), @p44='?' (Size = 1) (DbType = Byte), @p45='?' (DbType = DateTime2), @p46='?' (DbType = Int32), @p47='?' (DbType = DateTime2), @p48='?' (Size = 50), @p49='?' (DbType = Int32), @p50='?' (DbType = DateTime2), @p51='?' (Size = 50), @p52='?' (DbType = Int32), @p53='?' (Size = 1) (DbType = Byte), @p54='?' (Size = 1) (DbType = Byte), @p55='?' (DbType = DateTime2), @p56='?' (DbType = Int32), @p57='?' (DbType = DateTime2), @p58='?' (Size = 50), @p59='?' (DbType = Int32), @p60='?' (DbType = DateTime2), @p61='?' (Size = 50), @p62='?' (DbType = Int32), @p63='?' (Size = 1) (DbType = Byte), @p64='?' (Size = 1) (DbType = Byte), @p65='?' (DbType = DateTime2), @p66='?' (DbType = Int32), @p67='?' (DbType = DateTime2), @p68='?' (Size = 50), @p69='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [HR_ATTENDANCE].[EMPLOYEE_ROSTERS] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, 0),
(@p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, 1),
(@p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, 2),
(@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, 3),
(@p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, 4),
(@p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, 5),
(@p60, @p61, @p62, @p63, @p64, @p65, @p66, @p67, @p68, @p69, 6)) AS i ([CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [IS_DELETED], [IS_OFF_DAY], [ROSTER_DATE], [SHIFT_ID], [UPDATED_AT], [UPDATED_BY], [VERSION_NO], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [IS_DELETED], [IS_OFF_DAY], [ROSTER_DATE], [SHIFT_ID], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
VALUES (i.[CREATED_AT], i.[CREATED_BY], i.[EMPLOYEE_ID], i.[IS_DELETED], i.[IS_OFF_DAY], i.[ROSTER_DATE], i.[SHIFT_ID], i.[UPDATED_AT], i.[UPDATED_BY], i.[VERSION_NO])
OUTPUT INSERTED.[ROSTER_ID], i._Position;
2026-01-28 02:41:24.259 +03:00 [INF] Executed DbCommand (28ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200), @p9='?' (Size = 20), @p10='?' (Size = 50), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (DbType = Int64), @p16='?' (Size = 100), @p17='?' (Size = 200), @p18='?' (Size = 20), @p19='?' (Size = 50), @p20='?' (Size = 4000), @p21='?' (Size = 4000), @p22='?' (DbType = DateTime2), @p23='?' (Size = 50), @p24='?' (DbType = Int64), @p25='?' (Size = 100), @p26='?' (Size = 200), @p27='?' (Size = 20), @p28='?' (Size = 50), @p29='?' (Size = 4000), @p30='?' (Size = 4000), @p31='?' (DbType = DateTime2), @p32='?' (Size = 50), @p33='?' (DbType = Int64), @p34='?' (Size = 100), @p35='?' (Size = 200), @p36='?' (Size = 20), @p37='?' (Size = 50), @p38='?' (Size = 4000), @p39='?' (Size = 4000), @p40='?' (DbType = DateTime2), @p41='?' (Size = 50), @p42='?' (DbType = Int64), @p43='?' (Size = 100), @p44='?' (Size = 200), @p45='?' (Size = 20), @p46='?' (Size = 50), @p47='?' (Size = 4000), @p48='?' (Size = 4000), @p49='?' (DbType = DateTime2), @p50='?' (Size = 50), @p51='?' (DbType = Int64), @p52='?' (Size = 100), @p53='?' (Size = 200), @p54='?' (Size = 20), @p55='?' (Size = 50), @p56='?' (Size = 4000), @p57='?' (Size = 4000), @p58='?' (DbType = DateTime2), @p59='?' (Size = 50), @p60='?' (DbType = Int64), @p61='?' (Size = 100), @p62='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [HR_CORE].[AUDIT_LOGS] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, 0),
(@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, 1),
(@p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, 2),
(@p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, 3),
(@p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, 4),
(@p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, 5),
(@p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, 6)) AS i ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
VALUES (i.[ACTION_TYPE], i.[IP_ADDRESS], i.[NEW_VALUE], i.[OLD_VALUE], i.[PERFORMED_AT], i.[PERFORMED_BY], i.[RECORD_ID], i.[TABLE_NAME], i.[USER_AGENT])
OUTPUT INSERTED.[LOG_ID], i._Position;
2026-01-28 02:41:24.317 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Boolean'.
2026-01-28 02:41:24.327 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceSettingsController.InitializeRoster (HRMS.API) in 1038.6372ms
2026-01-28 02:41:24.330 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.InitializeRoster (HRMS.API)'
2026-01-28 02:41:24.336 +03:00 [INF] HTTP POST /api/AttendanceSettings/initialize-roster responded 200 in 1067.9393 ms
2026-01-28 02:41:24.340 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/AttendanceSettings/initialize-roster - 200 null application/json; charset=utf-8 1295.271ms
2026-01-28 02:43:16.166 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/AttendanceSettings/initialize-roster - application/json 94
2026-01-28 02:43:16.172 +03:00 [INF] CORS policy execution successful.
2026-01-28 02:43:16.174 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.InitializeRoster (HRMS.API)'
2026-01-28 02:43:16.178 +03:00 [INF] Route matched with {action = "InitializeRoster", controller = "AttendanceSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Boolean]] InitializeRoster(HRMS.Application.Features.Attendance.Roster.Commands.InitializeRoster.InitializeRosterCommand) on controller HRMS.API.Controllers.Attendance.AttendanceSettingsController (HRMS.API).
2026-01-28 02:43:16.458 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
        WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-28 02:43:16.470 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__request_ShiftId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HR_ATTENDANCE].[SHIFT_TYPES] AS [s]
        WHERE [s].[SHIFT_ID] = @__request_ShiftId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-28 02:43:16.484 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32), @__request_StartDate_1='?' (DbType = DateTime2), @__request_EndDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[ROSTER_DATE]
FROM [HR_ATTENDANCE].[EMPLOYEE_ROSTERS] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0 AND [e].[ROSTER_DATE] >= @__request_StartDate_1 AND [e].[ROSTER_DATE] <= @__request_EndDate_2
2026-01-28 02:43:16.496 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Boolean'.
2026-01-28 02:43:16.500 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceSettingsController.InitializeRoster (HRMS.API) in 308.3594ms
2026-01-28 02:43:16.511 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.InitializeRoster (HRMS.API)'
2026-01-28 02:43:16.514 +03:00 [INF] HTTP POST /api/AttendanceSettings/initialize-roster responded 200 in 342.1882 ms
2026-01-28 02:43:16.520 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/AttendanceSettings/initialize-roster - 200 null application/json; charset=utf-8 354.4651ms
2026-01-28 02:44:01.721 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/AttendanceSettings/process-attendance - application/json 46
2026-01-28 02:44:01.728 +03:00 [INF] CORS policy execution successful.
2026-01-28 02:44:01.731 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.ProcessAttendance (HRMS.API)'
2026-01-28 02:44:01.755 +03:00 [INF] Route matched with {action = "ProcessAttendance", controller = "AttendanceSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] ProcessAttendance(HRMS.Application.Features.Attendance.Process.Commands.ProcessAttendance.ProcessAttendanceCommand) on controller HRMS.API.Controllers.Attendance.AttendanceSettingsController (HRMS.API).
2026-01-28 02:44:02.134 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__targetDate_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[ROSTER_ID], [e].[CREATED_AT], [e].[CREATED_BY], [e].[EMPLOYEE_ID], [e].[IS_DELETED], [e].[IS_OFF_DAY], [e].[ROSTER_DATE], [e].[SHIFT_ID], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO], [s].[SHIFT_ID], [s].[CREATED_AT], [s].[CREATED_BY], [s].[END_TIME], [s].[GRACE_PERIOD_MINS], [s].[HOURS_COUNT], [s].[IS_CROSS_DAY], [s].[IS_DELETED], [s].[SHIFT_NAME_AR], [s].[START_TIME], [s].[UPDATED_AT], [s].[UPDATED_BY], [s].[VERSION_NO]
FROM [HR_ATTENDANCE].[EMPLOYEE_ROSTERS] AS [e]
LEFT JOIN [HR_ATTENDANCE].[SHIFT_TYPES] AS [s] ON [e].[SHIFT_ID] = [s].[SHIFT_ID]
WHERE [e].[ROSTER_DATE] = @__targetDate_0
2026-01-28 02:44:02.315 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__employeeIds_0='?' (Size = 4000), @__startRange_1='?' (DbType = DateTime2), @__endRange_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[LOG_ID], [r].[CREATED_AT], [r].[CREATED_BY], [r].[DEVICE_ID], [r].[EMPLOYEE_ID], [r].[IS_DELETED], [r].[IS_PROCESSED], [r].[PUNCH_TIME], [r].[PUNCH_TYPE], [r].[UPDATED_AT], [r].[UPDATED_BY], [r].[VERSION_NO]
FROM [HR_ATTENDANCE].[RAW_PUNCH_LOGS] AS [r]
WHERE [r].[EMPLOYEE_ID] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__employeeIds_0) WITH ([value] int '$') AS [e]
) AND [r].[PUNCH_TIME] >= @__startRange_1 AND [r].[PUNCH_TIME] < @__endRange_2
2026-01-28 02:44:02.394 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__employeeIds_0='?' (Size = 4000), @__targetDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[REQUEST_ID], [l].[ATTACHMENT_PATH], [l].[CREATED_AT], [l].[CREATED_BY], [l].[DAYS_COUNT], [l].[EMPLOYEE_ID], [l].[END_DATE], [l].[IS_DELETED], [l].[IS_POSTED_TO_BALANCE], [l].[LEAVE_TYPE_ID], [l].[REASON], [l].[REJECTION_REASON], [l].[START_DATE], [l].[STATUS], [l].[UPDATED_AT], [l].[UPDATED_BY], [l].[VERSION_NO]
FROM [HR_LEAVES].[LEAVE_REQUESTS] AS [l]
WHERE [l].[EMPLOYEE_ID] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__employeeIds_0) WITH ([value] int '$') AS [e]
) AND [l].[STATUS] = N'APPROVED' AND [l].[START_DATE] <= @__targetDate_1 AND [l].[END_DATE] >= @__targetDate_1
2026-01-28 02:44:02.423 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__employeeIds_0='?' (Size = 4000), @__targetDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[OT_REQUEST_ID], [o].[APPROVED_BY], [o].[APPROVED_HOURS], [o].[CREATED_AT], [o].[CREATED_BY], [o].[EMPLOYEE_ID], [o].[HOURS_REQUESTED], [o].[IS_DELETED], [o].[REASON], [o].[REQUEST_DATE], [o].[STATUS], [o].[UPDATED_AT], [o].[UPDATED_BY], [o].[VERSION_NO], [o].[WORK_DATE]
FROM [HR_ATTENDANCE].[OVERTIME_REQUESTS] AS [o]
WHERE [o].[EMPLOYEE_ID] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__employeeIds_0) WITH ([value] int '$') AS [e]
) AND [o].[STATUS] = N'APPROVED' AND [o].[WORK_DATE] = @__targetDate_1
2026-01-28 02:44:02.540 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__targetDate_0='?' (DbType = DateTime2), @__employeeIds_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[RECORD_ID], [d].[ACTUAL_IN_TIME], [d].[ACTUAL_OUT_TIME], [d].[ATTENDANCE_DATE], [d].[CREATED_AT], [d].[CREATED_BY], [d].[EARLY_LEAVE_MINUTES], [d].[EMPLOYEE_ID], [d].[IS_DELETED], [d].[LATE_MINUTES], [d].[OVERTIME_MINUTES], [d].[PLANNED_SHIFT_ID], [d].[STATUS], [d].[UPDATED_AT], [d].[UPDATED_BY], [d].[VERSION_NO]
FROM [HR_ATTENDANCE].[DAILY_ATTENDANCE] AS [d]
WHERE [d].[ATTENDANCE_DATE] = @__targetDate_0 AND [d].[EMPLOYEE_ID] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__employeeIds_1) WITH ([value] int '$') AS [e]
)
2026-01-28 02:44:02.775 +03:00 [INF] Executed DbCommand (43ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200), @p9='?' (Size = 20), @p10='?' (Size = 50), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (DbType = Int64), @p16='?' (Size = 100), @p17='?' (Size = 200), @p18='?' (DbType = Int64), @p19='?' (DbType = Int32), @p20='?' (DbType = Int64), @p21='?' (DbType = Int32), @p22='?' (DbType = DateTime2), @p23='?' (DbType = DateTime2), @p24='?' (DbType = DateTime2), @p25='?' (DbType = DateTime2), @p26='?' (Size = 50), @p27='?' (DbType = Int16), @p28='?' (DbType = Int32), @p29='?' (Size = 1) (DbType = Byte), @p30='?' (DbType = Int16), @p31='?' (DbType = Int16), @p32='?' (DbType = Int32), @p33='?' (Size = 20), @p34='?' (DbType = DateTime2), @p35='?' (Size = 50), @p36='?' (DbType = Int32), @p37='?' (DbType = DateTime2), @p38='?' (DbType = DateTime2), @p39='?' (DbType = DateTime2), @p40='?' (DbType = DateTime2), @p41='?' (Size = 50), @p42='?' (DbType = Int16), @p43='?' (DbType = Int32), @p44='?' (Size = 1) (DbType = Byte), @p45='?' (DbType = Int16), @p46='?' (DbType = Int16), @p47='?' (DbType = Int32), @p48='?' (Size = 20), @p49='?' (DbType = DateTime2), @p50='?' (Size = 50), @p51='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
MERGE [HR_CORE].[AUDIT_LOGS] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, 0),
(@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, 1)) AS i ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
VALUES (i.[ACTION_TYPE], i.[IP_ADDRESS], i.[NEW_VALUE], i.[OLD_VALUE], i.[PERFORMED_AT], i.[PERFORMED_BY], i.[RECORD_ID], i.[TABLE_NAME], i.[USER_AGENT])
OUTPUT INSERTED.[LOG_ID], i._Position;
DELETE FROM [HR_ATTENDANCE].[DAILY_ATTENDANCE]
OUTPUT 1
WHERE [RECORD_ID] = @p18 AND [VERSION_NO] = @p19;
DELETE FROM [HR_ATTENDANCE].[DAILY_ATTENDANCE]
OUTPUT 1
WHERE [RECORD_ID] = @p20 AND [VERSION_NO] = @p21;
MERGE [HR_ATTENDANCE].[DAILY_ATTENDANCE] USING (
VALUES (@p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, 0),
(@p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51, 1)) AS i ([ACTUAL_IN_TIME], [ACTUAL_OUT_TIME], [ATTENDANCE_DATE], [CREATED_AT], [CREATED_BY], [EARLY_LEAVE_MINUTES], [EMPLOYEE_ID], [IS_DELETED], [LATE_MINUTES], [OVERTIME_MINUTES], [PLANNED_SHIFT_ID], [STATUS], [UPDATED_AT], [UPDATED_BY], [VERSION_NO], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([ACTUAL_IN_TIME], [ACTUAL_OUT_TIME], [ATTENDANCE_DATE], [CREATED_AT], [CREATED_BY], [EARLY_LEAVE_MINUTES], [EMPLOYEE_ID], [IS_DELETED], [LATE_MINUTES], [OVERTIME_MINUTES], [PLANNED_SHIFT_ID], [STATUS], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
VALUES (i.[ACTUAL_IN_TIME], i.[ACTUAL_OUT_TIME], i.[ATTENDANCE_DATE], i.[CREATED_AT], i.[CREATED_BY], i.[EARLY_LEAVE_MINUTES], i.[EMPLOYEE_ID], i.[IS_DELETED], i.[LATE_MINUTES], i.[OVERTIME_MINUTES], i.[PLANNED_SHIFT_ID], i.[STATUS], i.[UPDATED_AT], i.[UPDATED_BY], i.[VERSION_NO])
OUTPUT INSERTED.[RECORD_ID], i._Position;
2026-01-28 02:44:02.843 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200), @p9='?' (Size = 20), @p10='?' (Size = 50), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (DbType = Int64), @p16='?' (Size = 100), @p17='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [HR_CORE].[AUDIT_LOGS] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, 0),
(@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, 1)) AS i ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
VALUES (i.[ACTION_TYPE], i.[IP_ADDRESS], i.[NEW_VALUE], i.[OLD_VALUE], i.[PERFORMED_AT], i.[PERFORMED_BY], i.[RECORD_ID], i.[TABLE_NAME], i.[USER_AGENT])
OUTPUT INSERTED.[LOG_ID], i._Position;
2026-01-28 02:44:02.856 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Int32'.
2026-01-28 02:44:02.860 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceSettingsController.ProcessAttendance (HRMS.API) in 945.5775ms
2026-01-28 02:44:02.869 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.ProcessAttendance (HRMS.API)'
2026-01-28 02:44:02.873 +03:00 [INF] HTTP POST /api/AttendanceSettings/process-attendance responded 200 in 1144.6701 ms
2026-01-28 02:44:02.879 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/AttendanceSettings/process-attendance - 200 null application/json; charset=utf-8 1158.361ms
2026-01-28 02:45:30.996 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/AttendanceSettings/process-attendance - application/json 32
2026-01-28 02:45:31.010 +03:00 [INF] CORS policy execution successful.
2026-01-28 02:45:31.040 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.ProcessAttendance (HRMS.API)'
2026-01-28 02:45:31.043 +03:00 [INF] Route matched with {action = "ProcessAttendance", controller = "AttendanceSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] ProcessAttendance(HRMS.Application.Features.Attendance.Process.Commands.ProcessAttendance.ProcessAttendanceCommand) on controller HRMS.API.Controllers.Attendance.AttendanceSettingsController (HRMS.API).
2026-01-28 02:45:31.073 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__targetDate_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[ROSTER_ID], [e].[CREATED_AT], [e].[CREATED_BY], [e].[EMPLOYEE_ID], [e].[IS_DELETED], [e].[IS_OFF_DAY], [e].[ROSTER_DATE], [e].[SHIFT_ID], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO], [s].[SHIFT_ID], [s].[CREATED_AT], [s].[CREATED_BY], [s].[END_TIME], [s].[GRACE_PERIOD_MINS], [s].[HOURS_COUNT], [s].[IS_CROSS_DAY], [s].[IS_DELETED], [s].[SHIFT_NAME_AR], [s].[START_TIME], [s].[UPDATED_AT], [s].[UPDATED_BY], [s].[VERSION_NO]
FROM [HR_ATTENDANCE].[EMPLOYEE_ROSTERS] AS [e]
LEFT JOIN [HR_ATTENDANCE].[SHIFT_TYPES] AS [s] ON [e].[SHIFT_ID] = [s].[SHIFT_ID]
WHERE [e].[ROSTER_DATE] = @__targetDate_0
2026-01-28 02:45:31.095 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__employeeIds_0='?' (Size = 4000), @__startRange_1='?' (DbType = DateTime2), @__endRange_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[LOG_ID], [r].[CREATED_AT], [r].[CREATED_BY], [r].[DEVICE_ID], [r].[EMPLOYEE_ID], [r].[IS_DELETED], [r].[IS_PROCESSED], [r].[PUNCH_TIME], [r].[PUNCH_TYPE], [r].[UPDATED_AT], [r].[UPDATED_BY], [r].[VERSION_NO]
FROM [HR_ATTENDANCE].[RAW_PUNCH_LOGS] AS [r]
WHERE [r].[EMPLOYEE_ID] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__employeeIds_0) WITH ([value] int '$') AS [e]
) AND [r].[PUNCH_TIME] >= @__startRange_1 AND [r].[PUNCH_TIME] < @__endRange_2
2026-01-28 02:45:31.116 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__employeeIds_0='?' (Size = 4000), @__targetDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[REQUEST_ID], [l].[ATTACHMENT_PATH], [l].[CREATED_AT], [l].[CREATED_BY], [l].[DAYS_COUNT], [l].[EMPLOYEE_ID], [l].[END_DATE], [l].[IS_DELETED], [l].[IS_POSTED_TO_BALANCE], [l].[LEAVE_TYPE_ID], [l].[REASON], [l].[REJECTION_REASON], [l].[START_DATE], [l].[STATUS], [l].[UPDATED_AT], [l].[UPDATED_BY], [l].[VERSION_NO]
FROM [HR_LEAVES].[LEAVE_REQUESTS] AS [l]
WHERE [l].[EMPLOYEE_ID] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__employeeIds_0) WITH ([value] int '$') AS [e]
) AND [l].[STATUS] = N'APPROVED' AND [l].[START_DATE] <= @__targetDate_1 AND [l].[END_DATE] >= @__targetDate_1
2026-01-28 02:45:31.143 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@__employeeIds_0='?' (Size = 4000), @__targetDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[OT_REQUEST_ID], [o].[APPROVED_BY], [o].[APPROVED_HOURS], [o].[CREATED_AT], [o].[CREATED_BY], [o].[EMPLOYEE_ID], [o].[HOURS_REQUESTED], [o].[IS_DELETED], [o].[REASON], [o].[REQUEST_DATE], [o].[STATUS], [o].[UPDATED_AT], [o].[UPDATED_BY], [o].[VERSION_NO], [o].[WORK_DATE]
FROM [HR_ATTENDANCE].[OVERTIME_REQUESTS] AS [o]
WHERE [o].[EMPLOYEE_ID] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__employeeIds_0) WITH ([value] int '$') AS [e]
) AND [o].[STATUS] = N'APPROVED' AND [o].[WORK_DATE] = @__targetDate_1
2026-01-28 02:45:31.162 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__targetDate_0='?' (DbType = DateTime2), @__employeeIds_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[RECORD_ID], [d].[ACTUAL_IN_TIME], [d].[ACTUAL_OUT_TIME], [d].[ATTENDANCE_DATE], [d].[CREATED_AT], [d].[CREATED_BY], [d].[EARLY_LEAVE_MINUTES], [d].[EMPLOYEE_ID], [d].[IS_DELETED], [d].[LATE_MINUTES], [d].[OVERTIME_MINUTES], [d].[PLANNED_SHIFT_ID], [d].[STATUS], [d].[UPDATED_AT], [d].[UPDATED_BY], [d].[VERSION_NO]
FROM [HR_ATTENDANCE].[DAILY_ATTENDANCE] AS [d]
WHERE [d].[ATTENDANCE_DATE] = @__targetDate_0 AND [d].[EMPLOYEE_ID] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__employeeIds_1) WITH ([value] int '$') AS [e]
)
2026-01-28 02:45:31.210 +03:00 [INF] Executed DbCommand (27ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 50), @p5='?' (DbType = Int16), @p6='?' (DbType = Int32), @p7='?' (Size = 1) (DbType = Byte), @p8='?' (DbType = Int16), @p9='?' (DbType = Int16), @p10='?' (DbType = Int32), @p11='?' (Size = 20), @p12='?' (DbType = DateTime2), @p13='?' (Size = 50), @p14='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_ATTENDANCE].[DAILY_ATTENDANCE] ([ACTUAL_IN_TIME], [ACTUAL_OUT_TIME], [ATTENDANCE_DATE], [CREATED_AT], [CREATED_BY], [EARLY_LEAVE_MINUTES], [EMPLOYEE_ID], [IS_DELETED], [LATE_MINUTES], [OVERTIME_MINUTES], [PLANNED_SHIFT_ID], [STATUS], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[RECORD_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2026-01-28 02:45:31.227 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-01-28 02:45:31.236 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Int32'.
2026-01-28 02:45:31.240 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceSettingsController.ProcessAttendance (HRMS.API) in 181.7667ms
2026-01-28 02:45:31.278 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.ProcessAttendance (HRMS.API)'
2026-01-28 02:45:31.282 +03:00 [INF] HTTP POST /api/AttendanceSettings/process-attendance responded 200 in 272.1353 ms
2026-01-28 02:45:31.285 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/AttendanceSettings/process-attendance - 200 null application/json; charset=utf-8 288.7711ms
2026-01-28 02:46:50.512 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/AttendanceSettings/shifts - application/json 204
2026-01-28 02:46:50.518 +03:00 [INF] CORS policy execution successful.
2026-01-28 02:46:50.520 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.CreateShift (HRMS.API)'
2026-01-28 02:46:50.528 +03:00 [INF] Route matched with {action = "CreateShift", controller = "AttendanceSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] CreateShift(HRMS.Application.Features.Attendance.Configuration.CreateShiftTypeCommand) on controller HRMS.API.Controllers.Attendance.AttendanceSettingsController (HRMS.API).
2026-01-28 02:46:50.583 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2026-01-28 02:46:50.613 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceSettingsController.CreateShift (HRMS.API) in 77.2551ms
2026-01-28 02:46:50.650 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.CreateShift (HRMS.API)'
2026-01-28 02:46:50.656 +03:00 [INF] HTTP POST /api/AttendanceSettings/shifts responded 400 in 138.1580 ms
2026-01-28 02:46:50.664 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/AttendanceSettings/shifts - 400 null application/problem+json; charset=utf-8 155.0931ms
2026-01-28 02:47:05.360 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/AttendanceSettings/shifts - application/json 169
2026-01-28 02:47:05.364 +03:00 [INF] CORS policy execution successful.
2026-01-28 02:47:05.367 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.CreateShift (HRMS.API)'
2026-01-28 02:47:05.369 +03:00 [INF] Route matched with {action = "CreateShift", controller = "AttendanceSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] CreateShift(HRMS.Application.Features.Attendance.Configuration.CreateShiftTypeCommand) on controller HRMS.API.Controllers.Attendance.AttendanceSettingsController (HRMS.API).
2026-01-28 02:47:05.551 +03:00 [INF] Executed DbCommand (130ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (DbType = Int16), @p4='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p5='?' (Size = 1) (DbType = Byte), @p6='?' (Size = 1) (DbType = Byte), @p7='?' (Size = 100), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2), @p10='?' (Size = 50), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_ATTENDANCE].[SHIFT_TYPES] ([CREATED_AT], [CREATED_BY], [END_TIME], [GRACE_PERIOD_MINS], [HOURS_COUNT], [IS_CROSS_DAY], [IS_DELETED], [SHIFT_NAME_AR], [START_TIME], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[SHIFT_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2026-01-28 02:47:05.597 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'HRMS.Infrastructure.Data.HRMSDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): String or binary data would be truncated in table 'HRMS_Hospital.HR_ATTENDANCE.SHIFT_TYPES', column 'END_TIME'. Truncated value: '16:00'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:ef71a09a-279c-4f80-9a8a-24f1d9964e7a
Error Number:2628,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): String or binary data would be truncated in table 'HRMS_Hospital.HR_ATTENDANCE.SHIFT_TYPES', column 'END_TIME'. Truncated value: '16:00'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:ef71a09a-279c-4f80-9a8a-24f1d9964e7a
Error Number:2628,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2026-01-28 02:47:21.855 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceSettingsController.CreateShift (HRMS.API) in 16474.5826ms
2026-01-28 02:47:21.861 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.CreateShift (HRMS.API)'
2026-01-28 02:47:22.498 +03:00 [ERR] Global Exception Caught: An error occurred while saving the entity changes. See the inner exception for details.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): String or binary data would be truncated in table 'HRMS_Hospital.HR_ATTENDANCE.SHIFT_TYPES', column 'END_TIME'. Truncated value: '16:00'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:ef71a09a-279c-4f80-9a8a-24f1d9964e7a
Error Number:2628,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at HRMS.Infrastructure.Data.HRMSDbContext.SaveChangesAsync(CancellationToken cancellationToken) in G:\HRMS_Hospital\Backend\HRMS\HRMS.Infrastructure\Data\HRMSDbContext.cs:line 37
   at HRMS.Application.Features.Attendance.Configuration.CreateShiftTypeHandler.Handle(CreateShiftTypeCommand request, CancellationToken cancellationToken) in G:\HRMS_Hospital\Backend\HRMS\HRMS.Application\Features\Attendance\Configuration\ShiftTypesFeatures.cs:line 76
   at HRMS.API.Controllers.Attendance.AttendanceSettingsController.CreateShift(CreateShiftTypeCommand command) in G:\HRMS_Hospital\Backend\HRMS\HRMS.API\Controllers\Attendance\AttendanceSettingsController.cs:line 35
   at lambda_method967(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at HRMS.API.Middleware.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in G:\HRMS_Hospital\Backend\HRMS\HRMS.API\Middleware\GlobalExceptionMiddleware.cs:line 25
2026-01-28 02:47:22.636 +03:00 [ERR] HTTP POST /api/AttendanceSettings/shifts responded 500 in 17271.2097 ms
2026-01-28 02:47:22.639 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/AttendanceSettings/shifts - 500 null application/json 17278.7742ms
2026-01-28 02:47:31.855 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/AttendanceSettings/shifts - application/json 163
2026-01-28 02:47:32.006 +03:00 [INF] CORS policy execution successful.
2026-01-28 02:47:32.017 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.CreateShift (HRMS.API)'
2026-01-28 02:47:32.023 +03:00 [INF] Route matched with {action = "CreateShift", controller = "AttendanceSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] CreateShift(HRMS.Application.Features.Attendance.Configuration.CreateShiftTypeCommand) on controller HRMS.API.Controllers.Attendance.AttendanceSettingsController (HRMS.API).
2026-01-28 02:47:32.057 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 50), @p2='?' (Size = 5), @p3='?' (DbType = Int16), @p4='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p5='?' (Size = 1) (DbType = Byte), @p6='?' (Size = 1) (DbType = Byte), @p7='?' (Size = 100), @p8='?' (Size = 5), @p9='?' (DbType = DateTime2), @p10='?' (Size = 50), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_ATTENDANCE].[SHIFT_TYPES] ([CREATED_AT], [CREATED_BY], [END_TIME], [GRACE_PERIOD_MINS], [HOURS_COUNT], [IS_CROSS_DAY], [IS_DELETED], [SHIFT_NAME_AR], [START_TIME], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[SHIFT_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2026-01-28 02:47:32.122 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-01-28 02:47:32.132 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Int32'.
2026-01-28 02:47:32.133 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceSettingsController.CreateShift (HRMS.API) in 94.2408ms
2026-01-28 02:47:32.145 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.CreateShift (HRMS.API)'
2026-01-28 02:47:32.150 +03:00 [INF] HTTP POST /api/AttendanceSettings/shifts responded 200 in 144.4176 ms
2026-01-28 02:47:32.154 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/AttendanceSettings/shifts - 200 null application/json; charset=utf-8 298.9073ms
2026-01-28 02:49:20.137 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/AttendanceSettings/initialize-roster - application/json 114
2026-01-28 02:49:20.157 +03:00 [INF] CORS policy execution successful.
2026-01-28 02:49:20.159 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.InitializeRoster (HRMS.API)'
2026-01-28 02:49:20.162 +03:00 [INF] Route matched with {action = "InitializeRoster", controller = "AttendanceSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Boolean]] InitializeRoster(HRMS.Application.Features.Attendance.Roster.Commands.InitializeRoster.InitializeRosterCommand) on controller HRMS.API.Controllers.Attendance.AttendanceSettingsController (HRMS.API).
2026-01-28 02:49:20.199 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
        WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-28 02:49:20.218 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__request_ShiftId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HR_ATTENDANCE].[SHIFT_TYPES] AS [s]
        WHERE [s].[SHIFT_ID] = @__request_ShiftId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-28 02:49:20.236 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32), @__request_StartDate_1='?' (DbType = DateTime2), @__request_EndDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[ROSTER_DATE]
FROM [HR_ATTENDANCE].[EMPLOYEE_ROSTERS] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0 AND [e].[ROSTER_DATE] >= @__request_StartDate_1 AND [e].[ROSTER_DATE] <= @__request_EndDate_2
2026-01-28 02:49:20.246 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Boolean'.
2026-01-28 02:49:20.249 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceSettingsController.InitializeRoster (HRMS.API) in 66.377ms
2026-01-28 02:49:20.260 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.InitializeRoster (HRMS.API)'
2026-01-28 02:49:20.275 +03:00 [INF] HTTP POST /api/AttendanceSettings/initialize-roster responded 200 in 118.0733 ms
2026-01-28 02:49:20.281 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/AttendanceSettings/initialize-roster - 200 null application/json; charset=utf-8 144.0562ms
2026-01-28 02:54:15.881 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/AttendanceSettings/process-attendance - application/json 32
2026-01-28 02:54:15.893 +03:00 [INF] CORS policy execution successful.
2026-01-28 02:54:15.895 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.ProcessAttendance (HRMS.API)'
2026-01-28 02:54:15.898 +03:00 [INF] Route matched with {action = "ProcessAttendance", controller = "AttendanceSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] ProcessAttendance(HRMS.Application.Features.Attendance.Process.Commands.ProcessAttendance.ProcessAttendanceCommand) on controller HRMS.API.Controllers.Attendance.AttendanceSettingsController (HRMS.API).
2026-01-28 02:54:15.951 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__targetDate_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[ROSTER_ID], [e].[CREATED_AT], [e].[CREATED_BY], [e].[EMPLOYEE_ID], [e].[IS_DELETED], [e].[IS_OFF_DAY], [e].[ROSTER_DATE], [e].[SHIFT_ID], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO], [s].[SHIFT_ID], [s].[CREATED_AT], [s].[CREATED_BY], [s].[END_TIME], [s].[GRACE_PERIOD_MINS], [s].[HOURS_COUNT], [s].[IS_CROSS_DAY], [s].[IS_DELETED], [s].[SHIFT_NAME_AR], [s].[START_TIME], [s].[UPDATED_AT], [s].[UPDATED_BY], [s].[VERSION_NO]
FROM [HR_ATTENDANCE].[EMPLOYEE_ROSTERS] AS [e]
LEFT JOIN [HR_ATTENDANCE].[SHIFT_TYPES] AS [s] ON [e].[SHIFT_ID] = [s].[SHIFT_ID]
WHERE [e].[ROSTER_DATE] = @__targetDate_0
2026-01-28 02:54:15.970 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__employeeIds_0='?' (Size = 4000), @__startRange_1='?' (DbType = DateTime2), @__endRange_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[LOG_ID], [r].[CREATED_AT], [r].[CREATED_BY], [r].[DEVICE_ID], [r].[EMPLOYEE_ID], [r].[IS_DELETED], [r].[IS_PROCESSED], [r].[PUNCH_TIME], [r].[PUNCH_TYPE], [r].[UPDATED_AT], [r].[UPDATED_BY], [r].[VERSION_NO]
FROM [HR_ATTENDANCE].[RAW_PUNCH_LOGS] AS [r]
WHERE [r].[EMPLOYEE_ID] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__employeeIds_0) WITH ([value] int '$') AS [e]
) AND [r].[PUNCH_TIME] >= @__startRange_1 AND [r].[PUNCH_TIME] < @__endRange_2
2026-01-28 02:54:15.995 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__employeeIds_0='?' (Size = 4000), @__targetDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[REQUEST_ID], [l].[ATTACHMENT_PATH], [l].[CREATED_AT], [l].[CREATED_BY], [l].[DAYS_COUNT], [l].[EMPLOYEE_ID], [l].[END_DATE], [l].[IS_DELETED], [l].[IS_POSTED_TO_BALANCE], [l].[LEAVE_TYPE_ID], [l].[REASON], [l].[REJECTION_REASON], [l].[START_DATE], [l].[STATUS], [l].[UPDATED_AT], [l].[UPDATED_BY], [l].[VERSION_NO]
FROM [HR_LEAVES].[LEAVE_REQUESTS] AS [l]
WHERE [l].[EMPLOYEE_ID] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__employeeIds_0) WITH ([value] int '$') AS [e]
) AND [l].[STATUS] = N'APPROVED' AND [l].[START_DATE] <= @__targetDate_1 AND [l].[END_DATE] >= @__targetDate_1
2026-01-28 02:54:16.018 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__employeeIds_0='?' (Size = 4000), @__targetDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[OT_REQUEST_ID], [o].[APPROVED_BY], [o].[APPROVED_HOURS], [o].[CREATED_AT], [o].[CREATED_BY], [o].[EMPLOYEE_ID], [o].[HOURS_REQUESTED], [o].[IS_DELETED], [o].[REASON], [o].[REQUEST_DATE], [o].[STATUS], [o].[UPDATED_AT], [o].[UPDATED_BY], [o].[VERSION_NO], [o].[WORK_DATE]
FROM [HR_ATTENDANCE].[OVERTIME_REQUESTS] AS [o]
WHERE [o].[EMPLOYEE_ID] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__employeeIds_0) WITH ([value] int '$') AS [e]
) AND [o].[STATUS] = N'APPROVED' AND [o].[WORK_DATE] = @__targetDate_1
2026-01-28 02:54:16.035 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__targetDate_0='?' (DbType = DateTime2), @__employeeIds_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[RECORD_ID], [d].[ACTUAL_IN_TIME], [d].[ACTUAL_OUT_TIME], [d].[ATTENDANCE_DATE], [d].[CREATED_AT], [d].[CREATED_BY], [d].[EARLY_LEAVE_MINUTES], [d].[EMPLOYEE_ID], [d].[IS_DELETED], [d].[LATE_MINUTES], [d].[OVERTIME_MINUTES], [d].[PLANNED_SHIFT_ID], [d].[STATUS], [d].[UPDATED_AT], [d].[UPDATED_BY], [d].[VERSION_NO]
FROM [HR_ATTENDANCE].[DAILY_ATTENDANCE] AS [d]
WHERE [d].[ATTENDANCE_DATE] = @__targetDate_0 AND [d].[EMPLOYEE_ID] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__employeeIds_1) WITH ([value] int '$') AS [e]
)
2026-01-28 02:54:16.065 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200), @p9='?' (DbType = Int64), @p10='?' (DbType = Int32), @p11='?' (DbType = DateTime2), @p12='?' (DbType = DateTime2), @p13='?' (DbType = DateTime2), @p14='?' (DbType = DateTime2), @p15='?' (Size = 50), @p16='?' (DbType = Int16), @p17='?' (DbType = Int32), @p18='?' (Size = 1) (DbType = Byte), @p19='?' (DbType = Int16), @p20='?' (DbType = Int16), @p21='?' (DbType = Int32), @p22='?' (Size = 20), @p23='?' (DbType = DateTime2), @p24='?' (Size = 50), @p25='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
DELETE FROM [HR_ATTENDANCE].[DAILY_ATTENDANCE]
OUTPUT 1
WHERE [RECORD_ID] = @p9 AND [VERSION_NO] = @p10;
INSERT INTO [HR_ATTENDANCE].[DAILY_ATTENDANCE] ([ACTUAL_IN_TIME], [ACTUAL_OUT_TIME], [ATTENDANCE_DATE], [CREATED_AT], [CREATED_BY], [EARLY_LEAVE_MINUTES], [EMPLOYEE_ID], [IS_DELETED], [LATE_MINUTES], [OVERTIME_MINUTES], [PLANNED_SHIFT_ID], [STATUS], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[RECORD_ID]
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25);
2026-01-28 02:54:16.091 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-01-28 02:54:16.101 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Int32'.
2026-01-28 02:54:16.103 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceSettingsController.ProcessAttendance (HRMS.API) in 191.6299ms
2026-01-28 02:54:16.113 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.ProcessAttendance (HRMS.API)'
2026-01-28 02:54:16.116 +03:00 [INF] HTTP POST /api/AttendanceSettings/process-attendance responded 200 in 223.5577 ms
2026-01-28 02:54:16.120 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/AttendanceSettings/process-attendance - 200 null application/json; charset=utf-8 238.8332ms
2026-01-28 02:58:26.148 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/AttendanceSettings/initialize-roster - application/json 114
2026-01-28 02:58:26.154 +03:00 [INF] CORS policy execution successful.
2026-01-28 02:58:26.156 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.InitializeRoster (HRMS.API)'
2026-01-28 02:58:26.159 +03:00 [INF] Route matched with {action = "InitializeRoster", controller = "AttendanceSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Boolean]] InitializeRoster(HRMS.Application.Features.Attendance.Roster.Commands.InitializeRoster.InitializeRosterCommand) on controller HRMS.API.Controllers.Attendance.AttendanceSettingsController (HRMS.API).
2026-01-28 02:58:26.191 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
        WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-28 02:58:26.240 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@__request_ShiftId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HR_ATTENDANCE].[SHIFT_TYPES] AS [s]
        WHERE [s].[SHIFT_ID] = @__request_ShiftId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-28 02:58:26.255 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32), @__request_StartDate_1='?' (DbType = DateTime2), @__request_EndDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[ROSTER_DATE]
FROM [HR_ATTENDANCE].[EMPLOYEE_ROSTERS] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0 AND [e].[ROSTER_DATE] >= @__request_StartDate_1 AND [e].[ROSTER_DATE] <= @__request_EndDate_2
2026-01-28 02:58:26.263 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Boolean'.
2026-01-28 02:58:26.265 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceSettingsController.InitializeRoster (HRMS.API) in 90.4929ms
2026-01-28 02:58:26.282 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.InitializeRoster (HRMS.API)'
2026-01-28 02:58:26.287 +03:00 [INF] HTTP POST /api/AttendanceSettings/initialize-roster responded 200 in 133.0785 ms
2026-01-28 02:58:26.291 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/AttendanceSettings/initialize-roster - 200 null application/json; charset=utf-8 143.0643ms
2026-01-28 03:00:43.807 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/AttendanceSettings/initialize-roster - application/json 114
2026-01-28 03:00:43.817 +03:00 [INF] CORS policy execution successful.
2026-01-28 03:00:43.820 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.InitializeRoster (HRMS.API)'
2026-01-28 03:00:43.831 +03:00 [INF] Route matched with {action = "InitializeRoster", controller = "AttendanceSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Boolean]] InitializeRoster(HRMS.Application.Features.Attendance.Roster.Commands.InitializeRoster.InitializeRosterCommand) on controller HRMS.API.Controllers.Attendance.AttendanceSettingsController (HRMS.API).
2026-01-28 03:00:44.037 +03:00 [INF] Executed DbCommand (193ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
        WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-28 03:00:44.051 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__request_ShiftId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HR_ATTENDANCE].[SHIFT_TYPES] AS [s]
        WHERE [s].[SHIFT_ID] = @__request_ShiftId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-28 03:00:44.067 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32), @__request_StartDate_1='?' (DbType = DateTime2), @__request_EndDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[ROSTER_DATE]
FROM [HR_ATTENDANCE].[EMPLOYEE_ROSTERS] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0 AND [e].[ROSTER_DATE] >= @__request_StartDate_1 AND [e].[ROSTER_DATE] <= @__request_EndDate_2
2026-01-28 03:00:44.088 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 50), @p2='?' (DbType = Int32), @p3='?' (Size = 1) (DbType = Byte), @p4='?' (Size = 1) (DbType = Byte), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime2), @p8='?' (Size = 50), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_ATTENDANCE].[EMPLOYEE_ROSTERS] ([CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [IS_DELETED], [IS_OFF_DAY], [ROSTER_DATE], [SHIFT_ID], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[ROSTER_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2026-01-28 03:00:44.112 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-01-28 03:00:44.123 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Boolean'.
2026-01-28 03:00:44.131 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceSettingsController.InitializeRoster (HRMS.API) in 289.4013ms
2026-01-28 03:00:44.134 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.InitializeRoster (HRMS.API)'
2026-01-28 03:00:44.137 +03:00 [INF] HTTP POST /api/AttendanceSettings/initialize-roster responded 200 in 320.0369 ms
2026-01-28 03:00:44.141 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/AttendanceSettings/initialize-roster - 200 null application/json; charset=utf-8 333.5093ms
2026-01-28 03:01:03.200 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/AttendanceSettings/initialize-roster - application/json 114
2026-01-28 03:01:03.214 +03:00 [INF] CORS policy execution successful.
2026-01-28 03:01:03.216 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.InitializeRoster (HRMS.API)'
2026-01-28 03:01:03.260 +03:00 [INF] Route matched with {action = "InitializeRoster", controller = "AttendanceSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Boolean]] InitializeRoster(HRMS.Application.Features.Attendance.Roster.Commands.InitializeRoster.InitializeRosterCommand) on controller HRMS.API.Controllers.Attendance.AttendanceSettingsController (HRMS.API).
2026-01-28 03:01:03.283 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
        WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-28 03:01:03.307 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__request_ShiftId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HR_ATTENDANCE].[SHIFT_TYPES] AS [s]
        WHERE [s].[SHIFT_ID] = @__request_ShiftId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-28 03:01:03.323 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32), @__request_StartDate_1='?' (DbType = DateTime2), @__request_EndDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[ROSTER_DATE]
FROM [HR_ATTENDANCE].[EMPLOYEE_ROSTERS] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0 AND [e].[ROSTER_DATE] >= @__request_StartDate_1 AND [e].[ROSTER_DATE] <= @__request_EndDate_2
2026-01-28 03:01:03.335 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Boolean'.
2026-01-28 03:01:03.338 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceSettingsController.InitializeRoster (HRMS.API) in 59.7648ms
2026-01-28 03:01:03.346 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.InitializeRoster (HRMS.API)'
2026-01-28 03:01:03.352 +03:00 [INF] HTTP POST /api/AttendanceSettings/initialize-roster responded 200 in 137.9031 ms
2026-01-28 03:01:03.383 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/AttendanceSettings/initialize-roster - 200 null application/json; charset=utf-8 183.3762ms
2026-01-28 03:01:35.783 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/AttendanceSettings/initialize-roster - application/json 114
2026-01-28 03:01:35.796 +03:00 [INF] CORS policy execution successful.
2026-01-28 03:01:35.798 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.InitializeRoster (HRMS.API)'
2026-01-28 03:01:35.801 +03:00 [INF] Route matched with {action = "InitializeRoster", controller = "AttendanceSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Boolean]] InitializeRoster(HRMS.Application.Features.Attendance.Roster.Commands.InitializeRoster.InitializeRosterCommand) on controller HRMS.API.Controllers.Attendance.AttendanceSettingsController (HRMS.API).
2026-01-28 03:01:35.843 +03:00 [INF] Executed DbCommand (31ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
        WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-28 03:01:35.856 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__request_ShiftId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HR_ATTENDANCE].[SHIFT_TYPES] AS [s]
        WHERE [s].[SHIFT_ID] = @__request_ShiftId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-28 03:01:35.874 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32), @__request_StartDate_1='?' (DbType = DateTime2), @__request_EndDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[ROSTER_DATE]
FROM [HR_ATTENDANCE].[EMPLOYEE_ROSTERS] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0 AND [e].[ROSTER_DATE] >= @__request_StartDate_1 AND [e].[ROSTER_DATE] <= @__request_EndDate_2
2026-01-28 03:01:35.889 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 50), @p2='?' (DbType = Int32), @p3='?' (Size = 1) (DbType = Byte), @p4='?' (Size = 1) (DbType = Byte), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime2), @p8='?' (Size = 50), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_ATTENDANCE].[EMPLOYEE_ROSTERS] ([CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [IS_DELETED], [IS_OFF_DAY], [ROSTER_DATE], [SHIFT_ID], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[ROSTER_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2026-01-28 03:01:35.924 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-01-28 03:01:35.936 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Boolean'.
2026-01-28 03:01:35.939 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceSettingsController.InitializeRoster (HRMS.API) in 129.8335ms
2026-01-28 03:01:35.944 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.InitializeRoster (HRMS.API)'
2026-01-28 03:01:35.958 +03:00 [INF] HTTP POST /api/AttendanceSettings/initialize-roster responded 200 in 162.1126 ms
2026-01-28 03:01:35.969 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/AttendanceSettings/initialize-roster - 200 null application/json; charset=utf-8 185.547ms
2026-01-28 03:02:36.521 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Attendance/punch - application/json 156
2026-01-28 03:02:36.542 +03:00 [INF] CORS policy execution successful.
2026-01-28 03:02:36.544 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceController.RegisterPunch (HRMS.API)'
2026-01-28 03:02:36.555 +03:00 [INF] Route matched with {action = "RegisterPunch", controller = "Attendance"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int64]] RegisterPunch(HRMS.Application.Features.Attendance.Punch.RegisterPunchCommand) on controller HRMS.API.Controllers.Attendance.AttendanceController (HRMS.API).
2026-01-28 03:02:36.585 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 50), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?' (Size = 1) (DbType = Byte), @p5='?' (Size = 1) (DbType = Byte), @p6='?' (DbType = DateTime2), @p7='?' (Size = 10), @p8='?' (DbType = DateTime2), @p9='?' (Size = 50), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_ATTENDANCE].[RAW_PUNCH_LOGS] ([CREATED_AT], [CREATED_BY], [DEVICE_ID], [EMPLOYEE_ID], [IS_DELETED], [IS_PROCESSED], [PUNCH_TIME], [PUNCH_TYPE], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2026-01-28 03:02:36.609 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-01-28 03:02:36.624 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__targetDate_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[ROSTER_ID], [e].[CREATED_AT], [e].[CREATED_BY], [e].[EMPLOYEE_ID], [e].[IS_DELETED], [e].[IS_OFF_DAY], [e].[ROSTER_DATE], [e].[SHIFT_ID], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO], [s].[SHIFT_ID], [s].[CREATED_AT], [s].[CREATED_BY], [s].[END_TIME], [s].[GRACE_PERIOD_MINS], [s].[HOURS_COUNT], [s].[IS_CROSS_DAY], [s].[IS_DELETED], [s].[SHIFT_NAME_AR], [s].[START_TIME], [s].[UPDATED_AT], [s].[UPDATED_BY], [s].[VERSION_NO]
FROM [HR_ATTENDANCE].[EMPLOYEE_ROSTERS] AS [e]
LEFT JOIN [HR_ATTENDANCE].[SHIFT_TYPES] AS [s] ON [e].[SHIFT_ID] = [s].[SHIFT_ID]
WHERE [e].[ROSTER_DATE] = @__targetDate_0
2026-01-28 03:02:36.649 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__employeeIds_0='?' (Size = 4000), @__startRange_1='?' (DbType = DateTime2), @__endRange_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[LOG_ID], [r].[CREATED_AT], [r].[CREATED_BY], [r].[DEVICE_ID], [r].[EMPLOYEE_ID], [r].[IS_DELETED], [r].[IS_PROCESSED], [r].[PUNCH_TIME], [r].[PUNCH_TYPE], [r].[UPDATED_AT], [r].[UPDATED_BY], [r].[VERSION_NO]
FROM [HR_ATTENDANCE].[RAW_PUNCH_LOGS] AS [r]
WHERE [r].[EMPLOYEE_ID] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__employeeIds_0) WITH ([value] int '$') AS [e]
) AND [r].[PUNCH_TIME] >= @__startRange_1 AND [r].[PUNCH_TIME] < @__endRange_2
2026-01-28 03:02:36.673 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__employeeIds_0='?' (Size = 4000), @__targetDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[REQUEST_ID], [l].[ATTACHMENT_PATH], [l].[CREATED_AT], [l].[CREATED_BY], [l].[DAYS_COUNT], [l].[EMPLOYEE_ID], [l].[END_DATE], [l].[IS_DELETED], [l].[IS_POSTED_TO_BALANCE], [l].[LEAVE_TYPE_ID], [l].[REASON], [l].[REJECTION_REASON], [l].[START_DATE], [l].[STATUS], [l].[UPDATED_AT], [l].[UPDATED_BY], [l].[VERSION_NO]
FROM [HR_LEAVES].[LEAVE_REQUESTS] AS [l]
WHERE [l].[EMPLOYEE_ID] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__employeeIds_0) WITH ([value] int '$') AS [e]
) AND [l].[STATUS] = N'APPROVED' AND [l].[START_DATE] <= @__targetDate_1 AND [l].[END_DATE] >= @__targetDate_1
2026-01-28 03:02:36.693 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__employeeIds_0='?' (Size = 4000), @__targetDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[OT_REQUEST_ID], [o].[APPROVED_BY], [o].[APPROVED_HOURS], [o].[CREATED_AT], [o].[CREATED_BY], [o].[EMPLOYEE_ID], [o].[HOURS_REQUESTED], [o].[IS_DELETED], [o].[REASON], [o].[REQUEST_DATE], [o].[STATUS], [o].[UPDATED_AT], [o].[UPDATED_BY], [o].[VERSION_NO], [o].[WORK_DATE]
FROM [HR_ATTENDANCE].[OVERTIME_REQUESTS] AS [o]
WHERE [o].[EMPLOYEE_ID] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__employeeIds_0) WITH ([value] int '$') AS [e]
) AND [o].[STATUS] = N'APPROVED' AND [o].[WORK_DATE] = @__targetDate_1
2026-01-28 03:02:36.715 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__targetDate_0='?' (DbType = DateTime2), @__employeeIds_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[RECORD_ID], [d].[ACTUAL_IN_TIME], [d].[ACTUAL_OUT_TIME], [d].[ATTENDANCE_DATE], [d].[CREATED_AT], [d].[CREATED_BY], [d].[EARLY_LEAVE_MINUTES], [d].[EMPLOYEE_ID], [d].[IS_DELETED], [d].[LATE_MINUTES], [d].[OVERTIME_MINUTES], [d].[PLANNED_SHIFT_ID], [d].[STATUS], [d].[UPDATED_AT], [d].[UPDATED_BY], [d].[VERSION_NO]
FROM [HR_ATTENDANCE].[DAILY_ATTENDANCE] AS [d]
WHERE [d].[ATTENDANCE_DATE] = @__targetDate_0 AND [d].[EMPLOYEE_ID] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__employeeIds_1) WITH ([value] int '$') AS [e]
)
2026-01-28 03:02:36.770 +03:00 [INF] Executed DbCommand (34ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200), @p9='?' (DbType = Int64), @p10='?' (DbType = Int32), @p11='?' (DbType = DateTime2), @p12='?' (DbType = DateTime2), @p13='?' (DbType = DateTime2), @p14='?' (DbType = DateTime2), @p15='?' (Size = 50), @p16='?' (DbType = Int16), @p17='?' (DbType = Int32), @p18='?' (Size = 1) (DbType = Byte), @p19='?' (DbType = Int16), @p20='?' (DbType = Int16), @p21='?' (DbType = Int32), @p22='?' (Size = 20), @p23='?' (DbType = DateTime2), @p24='?' (Size = 50), @p25='?' (DbType = Int32), @p26='?' (DbType = DateTime2), @p27='?' (DbType = DateTime2), @p28='?' (DbType = DateTime2), @p29='?' (DbType = DateTime2), @p30='?' (Size = 50), @p31='?' (DbType = Int16), @p32='?' (DbType = Int32), @p33='?' (Size = 1) (DbType = Byte), @p34='?' (DbType = Int16), @p35='?' (DbType = Int16), @p36='?' (DbType = Int32), @p37='?' (Size = 20), @p38='?' (DbType = DateTime2), @p39='?' (Size = 50), @p40='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
DELETE FROM [HR_ATTENDANCE].[DAILY_ATTENDANCE]
OUTPUT 1
WHERE [RECORD_ID] = @p9 AND [VERSION_NO] = @p10;
MERGE [HR_ATTENDANCE].[DAILY_ATTENDANCE] USING (
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, 0),
(@p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, 1)) AS i ([ACTUAL_IN_TIME], [ACTUAL_OUT_TIME], [ATTENDANCE_DATE], [CREATED_AT], [CREATED_BY], [EARLY_LEAVE_MINUTES], [EMPLOYEE_ID], [IS_DELETED], [LATE_MINUTES], [OVERTIME_MINUTES], [PLANNED_SHIFT_ID], [STATUS], [UPDATED_AT], [UPDATED_BY], [VERSION_NO], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([ACTUAL_IN_TIME], [ACTUAL_OUT_TIME], [ATTENDANCE_DATE], [CREATED_AT], [CREATED_BY], [EARLY_LEAVE_MINUTES], [EMPLOYEE_ID], [IS_DELETED], [LATE_MINUTES], [OVERTIME_MINUTES], [PLANNED_SHIFT_ID], [STATUS], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
VALUES (i.[ACTUAL_IN_TIME], i.[ACTUAL_OUT_TIME], i.[ATTENDANCE_DATE], i.[CREATED_AT], i.[CREATED_BY], i.[EARLY_LEAVE_MINUTES], i.[EMPLOYEE_ID], i.[IS_DELETED], i.[LATE_MINUTES], i.[OVERTIME_MINUTES], i.[PLANNED_SHIFT_ID], i.[STATUS], i.[UPDATED_AT], i.[UPDATED_BY], i.[VERSION_NO])
OUTPUT INSERTED.[RECORD_ID], i._Position;
2026-01-28 03:02:36.811 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200), @p9='?' (Size = 20), @p10='?' (Size = 50), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (DbType = Int64), @p16='?' (Size = 100), @p17='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [HR_CORE].[AUDIT_LOGS] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, 0),
(@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, 1)) AS i ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
VALUES (i.[ACTION_TYPE], i.[IP_ADDRESS], i.[NEW_VALUE], i.[OLD_VALUE], i.[PERFORMED_AT], i.[PERFORMED_BY], i.[RECORD_ID], i.[TABLE_NAME], i.[USER_AGENT])
OUTPUT INSERTED.[LOG_ID], i._Position;
2026-01-28 03:02:36.832 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Int64'.
2026-01-28 03:02:36.838 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceController.RegisterPunch (HRMS.API) in 277.0054ms
2026-01-28 03:02:36.842 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceController.RegisterPunch (HRMS.API)'
2026-01-28 03:02:36.848 +03:00 [INF] HTTP POST /api/Attendance/punch responded 200 in 306.5287 ms
2026-01-28 03:02:36.852 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Attendance/punch - 200 null application/json; charset=utf-8 330.9667ms
2026-01-28 03:05:14.307 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/AttendanceSettings/process-attendance - application/json 42
2026-01-28 03:05:14.312 +03:00 [INF] CORS policy execution successful.
2026-01-28 03:05:14.314 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.ProcessAttendance (HRMS.API)'
2026-01-28 03:05:14.317 +03:00 [INF] Route matched with {action = "ProcessAttendance", controller = "AttendanceSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] ProcessAttendance(HRMS.Application.Features.Attendance.Process.Commands.ProcessAttendance.ProcessAttendanceCommand) on controller HRMS.API.Controllers.Attendance.AttendanceSettingsController (HRMS.API).
2026-01-28 03:05:14.339 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__targetDate_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[ROSTER_ID], [e].[CREATED_AT], [e].[CREATED_BY], [e].[EMPLOYEE_ID], [e].[IS_DELETED], [e].[IS_OFF_DAY], [e].[ROSTER_DATE], [e].[SHIFT_ID], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO], [s].[SHIFT_ID], [s].[CREATED_AT], [s].[CREATED_BY], [s].[END_TIME], [s].[GRACE_PERIOD_MINS], [s].[HOURS_COUNT], [s].[IS_CROSS_DAY], [s].[IS_DELETED], [s].[SHIFT_NAME_AR], [s].[START_TIME], [s].[UPDATED_AT], [s].[UPDATED_BY], [s].[VERSION_NO]
FROM [HR_ATTENDANCE].[EMPLOYEE_ROSTERS] AS [e]
LEFT JOIN [HR_ATTENDANCE].[SHIFT_TYPES] AS [s] ON [e].[SHIFT_ID] = [s].[SHIFT_ID]
WHERE [e].[ROSTER_DATE] = @__targetDate_0
2026-01-28 03:05:14.374 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@__employeeIds_0='?' (Size = 4000), @__startRange_1='?' (DbType = DateTime2), @__endRange_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[LOG_ID], [r].[CREATED_AT], [r].[CREATED_BY], [r].[DEVICE_ID], [r].[EMPLOYEE_ID], [r].[IS_DELETED], [r].[IS_PROCESSED], [r].[PUNCH_TIME], [r].[PUNCH_TYPE], [r].[UPDATED_AT], [r].[UPDATED_BY], [r].[VERSION_NO]
FROM [HR_ATTENDANCE].[RAW_PUNCH_LOGS] AS [r]
WHERE [r].[EMPLOYEE_ID] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__employeeIds_0) WITH ([value] int '$') AS [e]
) AND [r].[PUNCH_TIME] >= @__startRange_1 AND [r].[PUNCH_TIME] < @__endRange_2
2026-01-28 03:05:14.401 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@__employeeIds_0='?' (Size = 4000), @__targetDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[REQUEST_ID], [l].[ATTACHMENT_PATH], [l].[CREATED_AT], [l].[CREATED_BY], [l].[DAYS_COUNT], [l].[EMPLOYEE_ID], [l].[END_DATE], [l].[IS_DELETED], [l].[IS_POSTED_TO_BALANCE], [l].[LEAVE_TYPE_ID], [l].[REASON], [l].[REJECTION_REASON], [l].[START_DATE], [l].[STATUS], [l].[UPDATED_AT], [l].[UPDATED_BY], [l].[VERSION_NO]
FROM [HR_LEAVES].[LEAVE_REQUESTS] AS [l]
WHERE [l].[EMPLOYEE_ID] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__employeeIds_0) WITH ([value] int '$') AS [e]
) AND [l].[STATUS] = N'APPROVED' AND [l].[START_DATE] <= @__targetDate_1 AND [l].[END_DATE] >= @__targetDate_1
2026-01-28 03:05:14.437 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@__employeeIds_0='?' (Size = 4000), @__targetDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[OT_REQUEST_ID], [o].[APPROVED_BY], [o].[APPROVED_HOURS], [o].[CREATED_AT], [o].[CREATED_BY], [o].[EMPLOYEE_ID], [o].[HOURS_REQUESTED], [o].[IS_DELETED], [o].[REASON], [o].[REQUEST_DATE], [o].[STATUS], [o].[UPDATED_AT], [o].[UPDATED_BY], [o].[VERSION_NO], [o].[WORK_DATE]
FROM [HR_ATTENDANCE].[OVERTIME_REQUESTS] AS [o]
WHERE [o].[EMPLOYEE_ID] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__employeeIds_0) WITH ([value] int '$') AS [e]
) AND [o].[STATUS] = N'APPROVED' AND [o].[WORK_DATE] = @__targetDate_1
2026-01-28 03:05:14.468 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@__targetDate_0='?' (DbType = DateTime2), @__employeeIds_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[RECORD_ID], [d].[ACTUAL_IN_TIME], [d].[ACTUAL_OUT_TIME], [d].[ATTENDANCE_DATE], [d].[CREATED_AT], [d].[CREATED_BY], [d].[EARLY_LEAVE_MINUTES], [d].[EMPLOYEE_ID], [d].[IS_DELETED], [d].[LATE_MINUTES], [d].[OVERTIME_MINUTES], [d].[PLANNED_SHIFT_ID], [d].[STATUS], [d].[UPDATED_AT], [d].[UPDATED_BY], [d].[VERSION_NO]
FROM [HR_ATTENDANCE].[DAILY_ATTENDANCE] AS [d]
WHERE [d].[ATTENDANCE_DATE] = @__targetDate_0 AND [d].[EMPLOYEE_ID] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__employeeIds_1) WITH ([value] int '$') AS [e]
)
2026-01-28 03:05:14.551 +03:00 [INF] Executed DbCommand (36ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200), @p9='?' (Size = 20), @p10='?' (Size = 50), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (DbType = Int64), @p16='?' (Size = 100), @p17='?' (Size = 200), @p18='?' (DbType = Int64), @p19='?' (DbType = Int32), @p20='?' (DbType = Int64), @p21='?' (DbType = Int32), @p22='?' (DbType = DateTime2), @p23='?' (DbType = DateTime2), @p24='?' (DbType = DateTime2), @p25='?' (DbType = DateTime2), @p26='?' (Size = 50), @p27='?' (DbType = Int16), @p28='?' (DbType = Int32), @p29='?' (Size = 1) (DbType = Byte), @p30='?' (DbType = Int16), @p31='?' (DbType = Int16), @p32='?' (DbType = Int32), @p33='?' (Size = 20), @p34='?' (DbType = DateTime2), @p35='?' (Size = 50), @p36='?' (DbType = Int32), @p37='?' (DbType = DateTime2), @p38='?' (DbType = DateTime2), @p39='?' (DbType = DateTime2), @p40='?' (DbType = DateTime2), @p41='?' (Size = 50), @p42='?' (DbType = Int16), @p43='?' (DbType = Int32), @p44='?' (Size = 1) (DbType = Byte), @p45='?' (DbType = Int16), @p46='?' (DbType = Int16), @p47='?' (DbType = Int32), @p48='?' (Size = 20), @p49='?' (DbType = DateTime2), @p50='?' (Size = 50), @p51='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
MERGE [HR_CORE].[AUDIT_LOGS] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, 0),
(@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, 1)) AS i ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
VALUES (i.[ACTION_TYPE], i.[IP_ADDRESS], i.[NEW_VALUE], i.[OLD_VALUE], i.[PERFORMED_AT], i.[PERFORMED_BY], i.[RECORD_ID], i.[TABLE_NAME], i.[USER_AGENT])
OUTPUT INSERTED.[LOG_ID], i._Position;
DELETE FROM [HR_ATTENDANCE].[DAILY_ATTENDANCE]
OUTPUT 1
WHERE [RECORD_ID] = @p18 AND [VERSION_NO] = @p19;
DELETE FROM [HR_ATTENDANCE].[DAILY_ATTENDANCE]
OUTPUT 1
WHERE [RECORD_ID] = @p20 AND [VERSION_NO] = @p21;
MERGE [HR_ATTENDANCE].[DAILY_ATTENDANCE] USING (
VALUES (@p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, 0),
(@p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51, 1)) AS i ([ACTUAL_IN_TIME], [ACTUAL_OUT_TIME], [ATTENDANCE_DATE], [CREATED_AT], [CREATED_BY], [EARLY_LEAVE_MINUTES], [EMPLOYEE_ID], [IS_DELETED], [LATE_MINUTES], [OVERTIME_MINUTES], [PLANNED_SHIFT_ID], [STATUS], [UPDATED_AT], [UPDATED_BY], [VERSION_NO], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([ACTUAL_IN_TIME], [ACTUAL_OUT_TIME], [ATTENDANCE_DATE], [CREATED_AT], [CREATED_BY], [EARLY_LEAVE_MINUTES], [EMPLOYEE_ID], [IS_DELETED], [LATE_MINUTES], [OVERTIME_MINUTES], [PLANNED_SHIFT_ID], [STATUS], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
VALUES (i.[ACTUAL_IN_TIME], i.[ACTUAL_OUT_TIME], i.[ATTENDANCE_DATE], i.[CREATED_AT], i.[CREATED_BY], i.[EARLY_LEAVE_MINUTES], i.[EMPLOYEE_ID], i.[IS_DELETED], i.[LATE_MINUTES], i.[OVERTIME_MINUTES], i.[PLANNED_SHIFT_ID], i.[STATUS], i.[UPDATED_AT], i.[UPDATED_BY], i.[VERSION_NO])
OUTPUT INSERTED.[RECORD_ID], i._Position;
2026-01-28 03:05:14.593 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200), @p9='?' (Size = 20), @p10='?' (Size = 50), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (DbType = Int64), @p16='?' (Size = 100), @p17='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [HR_CORE].[AUDIT_LOGS] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, 0),
(@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, 1)) AS i ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
VALUES (i.[ACTION_TYPE], i.[IP_ADDRESS], i.[NEW_VALUE], i.[OLD_VALUE], i.[PERFORMED_AT], i.[PERFORMED_BY], i.[RECORD_ID], i.[TABLE_NAME], i.[USER_AGENT])
OUTPUT INSERTED.[LOG_ID], i._Position;
2026-01-28 03:05:14.609 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Int32'.
2026-01-28 03:05:14.611 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceSettingsController.ProcessAttendance (HRMS.API) in 281.5275ms
2026-01-28 03:05:14.616 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.ProcessAttendance (HRMS.API)'
2026-01-28 03:05:14.624 +03:00 [INF] HTTP POST /api/AttendanceSettings/process-attendance responded 200 in 311.9437 ms
2026-01-28 03:05:14.627 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/AttendanceSettings/process-attendance - 200 null application/json; charset=utf-8 320.3675ms
2026-01-28 03:08:11.958 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/AttendanceSettings/apply-swap - application/json 139
2026-01-28 03:08:11.963 +03:00 [INF] CORS policy execution successful.
2026-01-28 03:08:11.966 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.ApplySwap (HRMS.API)'
2026-01-28 03:08:11.976 +03:00 [INF] Route matched with {action = "ApplySwap", controller = "AttendanceSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] ApplySwap(HRMS.Application.Features.Attendance.Requests.CreateSwapRequestCommand) on controller HRMS.API.Controllers.Attendance.AttendanceSettingsController (HRMS.API).
2026-01-28 03:08:12.227 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__request_RosterDate_Year_0='?' (DbType = Int16), @__request_RosterDate_Month_1='?' (DbType = Byte)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HR_PAYROLL].[PAYROLL_RUNS] AS [p]
        WHERE [p].[Year] = @__request_RosterDate_Year_0 AND [p].[Month] = @__request_RosterDate_Month_1 AND [p].[Status] IN (N'APPROVED', N'PAID')) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-28 03:08:12.247 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__request_TargetEmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
        WHERE [e].[EMPLOYEE_ID] = @__request_TargetEmployeeId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-28 03:08:12.329 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 50), @p2='?' (Size = 1) (DbType = Byte), @p3='?' (Size = 200), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2), @p6='?' (Size = 20), @p7='?' (DbType = Int32), @p8='?' (DbType = DateTime2), @p9='?' (Size = 50), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_ATTENDANCE].[SHIFT_SWAP_REQUESTS] ([CREATED_AT], [CREATED_BY], [IS_DELETED], [MANAGER_COMMENT], [REQUESTER_ID], [ROSTER_DATE], [STATUS], [TARGET_EMPLOYEE_ID], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[REQUEST_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2026-01-28 03:08:12.350 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-01-28 03:08:12.360 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Int32'.
2026-01-28 03:08:12.363 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceSettingsController.ApplySwap (HRMS.API) in 179.3276ms
2026-01-28 03:08:12.383 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.ApplySwap (HRMS.API)'
2026-01-28 03:08:12.387 +03:00 [INF] HTTP POST /api/AttendanceSettings/apply-swap responded 200 in 423.5105 ms
2026-01-28 03:08:12.392 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/AttendanceSettings/apply-swap - 200 null application/json; charset=utf-8 434.4062ms
2026-01-28 03:12:32.857 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/AttendanceSettings/action-swap-request - application/json 126
2026-01-28 03:12:32.872 +03:00 [INF] CORS policy execution successful.
2026-01-28 03:12:32.879 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.ActionSwapRequest (HRMS.API)'
2026-01-28 03:12:32.892 +03:00 [INF] Route matched with {action = "ActionSwapRequest", controller = "AttendanceSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Boolean]] ActionSwapRequest(HRMS.Application.Features.Attendance.Requests.ActionSwapRequestCommand) on controller HRMS.API.Controllers.Attendance.AttendanceSettingsController (HRMS.API).
2026-01-28 03:12:32.908 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2026-01-28 03:12:32.911 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceSettingsController.ActionSwapRequest (HRMS.API) in 10.7955ms
2026-01-28 03:12:32.919 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.ActionSwapRequest (HRMS.API)'
2026-01-28 03:12:32.922 +03:00 [INF] HTTP POST /api/AttendanceSettings/action-swap-request responded 400 in 50.1525 ms
2026-01-28 03:12:32.925 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/AttendanceSettings/action-swap-request - 400 null application/problem+json; charset=utf-8 208.2596ms
2026-01-28 03:13:55.793 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/AttendanceSettings/action-swap-request - application/json 120
2026-01-28 03:13:55.800 +03:00 [INF] CORS policy execution successful.
2026-01-28 03:13:55.803 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.ActionSwapRequest (HRMS.API)'
2026-01-28 03:13:55.811 +03:00 [INF] Route matched with {action = "ActionSwapRequest", controller = "AttendanceSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Boolean]] ActionSwapRequest(HRMS.Application.Features.Attendance.Requests.ActionSwapRequestCommand) on controller HRMS.API.Controllers.Attendance.AttendanceSettingsController (HRMS.API).
2026-01-28 03:13:55.957 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__request_RequestId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[REQUEST_ID], [s].[CREATED_AT], [s].[CREATED_BY], [s].[IS_DELETED], [s].[MANAGER_COMMENT], [s].[REQUESTER_ID], [s].[ROSTER_DATE], [s].[STATUS], [s].[TARGET_EMPLOYEE_ID], [s].[UPDATED_AT], [s].[UPDATED_BY], [s].[VERSION_NO]
FROM [HR_ATTENDANCE].[SHIFT_SWAP_REQUESTS] AS [s]
WHERE [s].[REQUEST_ID] = @__request_RequestId_0
2026-01-28 03:13:55.980 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__swapRequest_RosterDate_Year_0='?' (DbType = Int16), @__swapRequest_RosterDate_Month_1='?' (DbType = Byte)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HR_PAYROLL].[PAYROLL_RUNS] AS [p]
        WHERE [p].[Year] = @__swapRequest_RosterDate_Year_0 AND [p].[Month] = @__swapRequest_RosterDate_Month_1 AND [p].[Status] IN (N'APPROVED', N'PAID')) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-28 03:13:56.011 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__swapRequest_RequesterId_0='?' (DbType = Int32), @__swapRequest_RosterDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[ROSTER_ID], [e].[CREATED_AT], [e].[CREATED_BY], [e].[EMPLOYEE_ID], [e].[IS_DELETED], [e].[IS_OFF_DAY], [e].[ROSTER_DATE], [e].[SHIFT_ID], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO]
FROM [HR_ATTENDANCE].[EMPLOYEE_ROSTERS] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__swapRequest_RequesterId_0 AND [e].[ROSTER_DATE] = @__swapRequest_RosterDate_1
2026-01-28 03:13:56.041 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__swapRequest_TargetEmployeeId_0='?' (DbType = Int32), @__swapRequest_RosterDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[ROSTER_ID], [e].[CREATED_AT], [e].[CREATED_BY], [e].[EMPLOYEE_ID], [e].[IS_DELETED], [e].[IS_OFF_DAY], [e].[ROSTER_DATE], [e].[SHIFT_ID], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO]
FROM [HR_ATTENDANCE].[EMPLOYEE_ROSTERS] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__swapRequest_TargetEmployeeId_0 AND [e].[ROSTER_DATE] = @__swapRequest_RosterDate_1
2026-01-28 03:13:56.073 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200), @p11='?' (DbType = Int32), @p9='?' (Size = 200), @p10='?' (Size = 20), @p12='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
UPDATE [HR_ATTENDANCE].[SHIFT_SWAP_REQUESTS] SET [MANAGER_COMMENT] = @p9, [STATUS] = @p10
OUTPUT 1
WHERE [REQUEST_ID] = @p11 AND [VERSION_NO] = @p12;
2026-01-28 03:13:56.089 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Boolean'.
2026-01-28 03:13:56.091 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceSettingsController.ActionSwapRequest (HRMS.API) in 228.9788ms
2026-01-28 03:13:56.109 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.ActionSwapRequest (HRMS.API)'
2026-01-28 03:13:56.114 +03:00 [INF] HTTP POST /api/AttendanceSettings/action-swap-request responded 200 in 314.1955 ms
2026-01-28 03:13:56.118 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/AttendanceSettings/action-swap-request - 200 null application/json; charset=utf-8 325.7347ms
2026-01-28 03:18:53.316 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/AttendanceSettings/initialize-roster - application/json 114
2026-01-28 03:18:53.321 +03:00 [INF] CORS policy execution successful.
2026-01-28 03:18:53.323 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.InitializeRoster (HRMS.API)'
2026-01-28 03:18:53.327 +03:00 [INF] Route matched with {action = "InitializeRoster", controller = "AttendanceSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Boolean]] InitializeRoster(HRMS.Application.Features.Attendance.Roster.Commands.InitializeRoster.InitializeRosterCommand) on controller HRMS.API.Controllers.Attendance.AttendanceSettingsController (HRMS.API).
2026-01-28 03:18:53.350 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
        WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-28 03:18:53.368 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__request_ShiftId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HR_ATTENDANCE].[SHIFT_TYPES] AS [s]
        WHERE [s].[SHIFT_ID] = @__request_ShiftId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-28 03:18:58.916 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceSettingsController.InitializeRoster (HRMS.API) in 5578.2061ms
2026-01-28 03:18:58.920 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.InitializeRoster (HRMS.API)'
2026-01-28 03:18:59.245 +03:00 [ERR] Global Exception Caught: ŸÜŸàÿπ ÿßŸÑŸÖŸÜÿßŸàÿ®ÿ© ÿ∫Ÿäÿ± ŸÖŸàÿ¨ŸàÿØ
FluentValidation.ValidationException: ŸÜŸàÿπ ÿßŸÑŸÖŸÜÿßŸàÿ®ÿ© ÿ∫Ÿäÿ± ŸÖŸàÿ¨ŸàÿØ
   at HRMS.Application.Features.Attendance.Roster.Commands.InitializeRoster.InitializeRosterHandler.Handle(InitializeRosterCommand request, CancellationToken cancellationToken) in G:\HRMS_Hospital\Backend\HRMS\HRMS.Application\Features\Attendance\Roster\Commands\InitializeRoster\InitializeRosterCommand.cs:line 60
   at HRMS.API.Controllers.Attendance.AttendanceSettingsController.InitializeRoster(InitializeRosterCommand command) in G:\HRMS_Hospital\Backend\HRMS\HRMS.API\Controllers\Attendance\AttendanceSettingsController.cs:line 61
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at HRMS.API.Middleware.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in G:\HRMS_Hospital\Backend\HRMS\HRMS.API\Middleware\GlobalExceptionMiddleware.cs:line 25
2026-01-28 03:18:59.272 +03:00 [INF] HTTP POST /api/AttendanceSettings/initialize-roster responded 400 in 5950.6821 ms
2026-01-28 03:18:59.274 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/AttendanceSettings/initialize-roster - 400 null application/json 5958.3312ms
2026-01-28 03:19:04.939 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/AttendanceSettings/initialize-roster - application/json 114
2026-01-28 03:19:04.943 +03:00 [INF] CORS policy execution successful.
2026-01-28 03:19:04.944 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.InitializeRoster (HRMS.API)'
2026-01-28 03:19:04.948 +03:00 [INF] Route matched with {action = "InitializeRoster", controller = "AttendanceSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Boolean]] InitializeRoster(HRMS.Application.Features.Attendance.Roster.Commands.InitializeRoster.InitializeRosterCommand) on controller HRMS.API.Controllers.Attendance.AttendanceSettingsController (HRMS.API).
2026-01-28 03:19:04.965 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
        WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-28 03:19:04.983 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__request_ShiftId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HR_ATTENDANCE].[SHIFT_TYPES] AS [s]
        WHERE [s].[SHIFT_ID] = @__request_ShiftId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-28 03:19:04.995 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32), @__request_StartDate_1='?' (DbType = DateTime2), @__request_EndDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[ROSTER_DATE]
FROM [HR_ATTENDANCE].[EMPLOYEE_ROSTERS] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0 AND [e].[ROSTER_DATE] >= @__request_StartDate_1 AND [e].[ROSTER_DATE] <= @__request_EndDate_2
2026-01-28 03:19:05.005 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Boolean'.
2026-01-28 03:19:05.007 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceSettingsController.InitializeRoster (HRMS.API) in 54.513ms
2026-01-28 03:19:05.010 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.InitializeRoster (HRMS.API)'
2026-01-28 03:19:05.016 +03:00 [INF] HTTP POST /api/AttendanceSettings/initialize-roster responded 200 in 73.2087 ms
2026-01-28 03:19:05.025 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/AttendanceSettings/initialize-roster - 200 null application/json; charset=utf-8 86.3665ms
2026-01-28 03:24:24.714 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/AttendanceSettings/apply-overtime - application/json 150
2026-01-28 03:24:24.869 +03:00 [INF] CORS policy execution successful.
2026-01-28 03:24:24.872 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.ApplyOvertime (HRMS.API)'
2026-01-28 03:24:24.882 +03:00 [INF] Route matched with {action = "ApplyOvertime", controller = "AttendanceSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] ApplyOvertime(HRMS.Application.Features.Attendance.Requests.ApplyOvertimeCommand) on controller HRMS.API.Controllers.Attendance.AttendanceSettingsController (HRMS.API).
2026-01-28 03:24:24.977 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@__request_WorkDate_Year_0='?' (DbType = Int16), @__request_WorkDate_Month_1='?' (DbType = Byte)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HR_PAYROLL].[PAYROLL_RUNS] AS [p]
        WHERE [p].[Year] = @__request_WorkDate_Year_0 AND [p].[Month] = @__request_WorkDate_Month_1 AND [p].[Status] IN (N'APPROVED', N'PAID')) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-28 03:24:25.010 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Precision = 4) (Scale = 2) (DbType = Decimal), @p2='?' (DbType = DateTime2), @p3='?' (Size = 50), @p4='?' (DbType = Int32), @p5='?' (Precision = 4) (Scale = 2) (DbType = Decimal), @p6='?' (Size = 1) (DbType = Byte), @p7='?' (Size = 200), @p8='?' (DbType = DateTime2), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2), @p11='?' (Size = 50), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_ATTENDANCE].[OVERTIME_REQUESTS] ([APPROVED_BY], [APPROVED_HOURS], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [HOURS_REQUESTED], [IS_DELETED], [REASON], [REQUEST_DATE], [STATUS], [UPDATED_AT], [UPDATED_BY], [VERSION_NO], [WORK_DATE])
OUTPUT INSERTED.[OT_REQUEST_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2026-01-28 03:24:25.043 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-01-28 03:24:25.054 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Int32'.
2026-01-28 03:24:25.055 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceSettingsController.ApplyOvertime (HRMS.API) in 166.5185ms
2026-01-28 03:24:25.059 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.ApplyOvertime (HRMS.API)'
2026-01-28 03:24:25.061 +03:00 [INF] HTTP POST /api/AttendanceSettings/apply-overtime responded 200 in 191.6486 ms
2026-01-28 03:24:25.068 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/AttendanceSettings/apply-overtime - 200 null application/json; charset=utf-8 353.5388ms
2026-01-28 03:26:24.638 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/AttendanceSettings/apply-overtime - application/json 148
2026-01-28 03:26:24.814 +03:00 [INF] CORS policy execution successful.
2026-01-28 03:26:24.818 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.ApplyOvertime (HRMS.API)'
2026-01-28 03:26:24.821 +03:00 [INF] Route matched with {action = "ApplyOvertime", controller = "AttendanceSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] ApplyOvertime(HRMS.Application.Features.Attendance.Requests.ApplyOvertimeCommand) on controller HRMS.API.Controllers.Attendance.AttendanceSettingsController (HRMS.API).
2026-01-28 03:26:24.847 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__request_WorkDate_Year_0='?' (DbType = Int16), @__request_WorkDate_Month_1='?' (DbType = Byte)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HR_PAYROLL].[PAYROLL_RUNS] AS [p]
        WHERE [p].[Year] = @__request_WorkDate_Year_0 AND [p].[Month] = @__request_WorkDate_Month_1 AND [p].[Status] IN (N'APPROVED', N'PAID')) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-28 03:26:24.869 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Precision = 4) (Scale = 2) (DbType = Decimal), @p2='?' (DbType = DateTime2), @p3='?' (Size = 50), @p4='?' (DbType = Int32), @p5='?' (Precision = 4) (Scale = 2) (DbType = Decimal), @p6='?' (Size = 1) (DbType = Byte), @p7='?' (Size = 200), @p8='?' (DbType = DateTime2), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2), @p11='?' (Size = 50), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_ATTENDANCE].[OVERTIME_REQUESTS] ([APPROVED_BY], [APPROVED_HOURS], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [HOURS_REQUESTED], [IS_DELETED], [REASON], [REQUEST_DATE], [STATUS], [UPDATED_AT], [UPDATED_BY], [VERSION_NO], [WORK_DATE])
OUTPUT INSERTED.[OT_REQUEST_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2026-01-28 03:26:24.891 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-01-28 03:26:24.898 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Int32'.
2026-01-28 03:26:24.900 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceSettingsController.ApplyOvertime (HRMS.API) in 70.5707ms
2026-01-28 03:26:24.909 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.ApplyOvertime (HRMS.API)'
2026-01-28 03:26:24.912 +03:00 [INF] HTTP POST /api/AttendanceSettings/apply-overtime responded 200 in 98.2781 ms
2026-01-28 03:26:24.916 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/AttendanceSettings/apply-overtime - 200 null application/json; charset=utf-8 277.5589ms
2026-01-28 03:27:35.758 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/AttendanceSettings/action-overtime - application/json 118
2026-01-28 03:27:35.770 +03:00 [INF] CORS policy execution successful.
2026-01-28 03:27:35.774 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.ActionOvertime (HRMS.API)'
2026-01-28 03:27:35.782 +03:00 [INF] Route matched with {action = "ActionOvertime", controller = "AttendanceSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Boolean]] ActionOvertime(HRMS.Application.Features.Attendance.Requests.ActionOvertimeCommand) on controller HRMS.API.Controllers.Attendance.AttendanceSettingsController (HRMS.API).
2026-01-28 03:27:35.827 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__request_RequestId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[OT_REQUEST_ID], [o].[APPROVED_BY], [o].[APPROVED_HOURS], [o].[CREATED_AT], [o].[CREATED_BY], [o].[EMPLOYEE_ID], [o].[HOURS_REQUESTED], [o].[IS_DELETED], [o].[REASON], [o].[REQUEST_DATE], [o].[STATUS], [o].[UPDATED_AT], [o].[UPDATED_BY], [o].[VERSION_NO], [o].[WORK_DATE]
FROM [HR_ATTENDANCE].[OVERTIME_REQUESTS] AS [o]
WHERE [o].[OT_REQUEST_ID] = @__request_RequestId_0
2026-01-28 03:27:35.847 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__otRequest_WorkDate_Year_0='?' (DbType = Int16), @__otRequest_WorkDate_Month_1='?' (DbType = Byte)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HR_PAYROLL].[PAYROLL_RUNS] AS [p]
        WHERE [p].[Year] = @__otRequest_WorkDate_Year_0 AND [p].[Month] = @__otRequest_WorkDate_Month_1 AND [p].[Status] IN (N'APPROVED', N'PAID')) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-28 03:27:35.856 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Boolean'.
2026-01-28 03:27:35.858 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceSettingsController.ActionOvertime (HRMS.API) in 71.0383ms
2026-01-28 03:27:35.870 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.ActionOvertime (HRMS.API)'
2026-01-28 03:27:35.874 +03:00 [INF] HTTP POST /api/AttendanceSettings/action-overtime responded 200 in 104.6140 ms
2026-01-28 03:27:35.879 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/AttendanceSettings/action-overtime - 200 null application/json; charset=utf-8 126.8884ms
2026-01-28 03:28:28.309 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/AttendanceSettings/action-overtime - application/json 118
2026-01-28 03:28:28.332 +03:00 [INF] CORS policy execution successful.
2026-01-28 03:28:28.335 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.ActionOvertime (HRMS.API)'
2026-01-28 03:28:28.339 +03:00 [INF] Route matched with {action = "ActionOvertime", controller = "AttendanceSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Boolean]] ActionOvertime(HRMS.Application.Features.Attendance.Requests.ActionOvertimeCommand) on controller HRMS.API.Controllers.Attendance.AttendanceSettingsController (HRMS.API).
2026-01-28 03:28:28.354 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__request_RequestId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[OT_REQUEST_ID], [o].[APPROVED_BY], [o].[APPROVED_HOURS], [o].[CREATED_AT], [o].[CREATED_BY], [o].[EMPLOYEE_ID], [o].[HOURS_REQUESTED], [o].[IS_DELETED], [o].[REASON], [o].[REQUEST_DATE], [o].[STATUS], [o].[UPDATED_AT], [o].[UPDATED_BY], [o].[VERSION_NO], [o].[WORK_DATE]
FROM [HR_ATTENDANCE].[OVERTIME_REQUESTS] AS [o]
WHERE [o].[OT_REQUEST_ID] = @__request_RequestId_0
2026-01-28 03:28:28.367 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__otRequest_WorkDate_Year_0='?' (DbType = Int16), @__otRequest_WorkDate_Month_1='?' (DbType = Byte)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HR_PAYROLL].[PAYROLL_RUNS] AS [p]
        WHERE [p].[Year] = @__otRequest_WorkDate_Year_0 AND [p].[Month] = @__otRequest_WorkDate_Month_1 AND [p].[Status] IN (N'APPROVED', N'PAID')) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-28 03:28:28.380 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Boolean'.
2026-01-28 03:28:28.384 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceSettingsController.ActionOvertime (HRMS.API) in 39.7688ms
2026-01-28 03:28:28.397 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.ActionOvertime (HRMS.API)'
2026-01-28 03:28:28.402 +03:00 [INF] HTTP POST /api/AttendanceSettings/action-overtime responded 200 in 70.0676 ms
2026-01-28 03:28:28.405 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/AttendanceSettings/action-overtime - 200 null application/json; charset=utf-8 96.0262ms
2026-01-28 03:30:09.759 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/AttendanceSettings/action-overtime - application/json 119
2026-01-28 03:30:09.770 +03:00 [INF] CORS policy execution successful.
2026-01-28 03:30:09.774 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.ActionOvertime (HRMS.API)'
2026-01-28 03:30:09.775 +03:00 [INF] Route matched with {action = "ActionOvertime", controller = "AttendanceSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Boolean]] ActionOvertime(HRMS.Application.Features.Attendance.Requests.ActionOvertimeCommand) on controller HRMS.API.Controllers.Attendance.AttendanceSettingsController (HRMS.API).
2026-01-28 03:30:09.815 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[@__request_RequestId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[OT_REQUEST_ID], [o].[APPROVED_BY], [o].[APPROVED_HOURS], [o].[CREATED_AT], [o].[CREATED_BY], [o].[EMPLOYEE_ID], [o].[HOURS_REQUESTED], [o].[IS_DELETED], [o].[REASON], [o].[REQUEST_DATE], [o].[STATUS], [o].[UPDATED_AT], [o].[UPDATED_BY], [o].[VERSION_NO], [o].[WORK_DATE]
FROM [HR_ATTENDANCE].[OVERTIME_REQUESTS] AS [o]
WHERE [o].[OT_REQUEST_ID] = @__request_RequestId_0
2026-01-28 03:30:09.831 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__otRequest_WorkDate_Year_0='?' (DbType = Int16), @__otRequest_WorkDate_Month_1='?' (DbType = Byte)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HR_PAYROLL].[PAYROLL_RUNS] AS [p]
        WHERE [p].[Year] = @__otRequest_WorkDate_Year_0 AND [p].[Month] = @__otRequest_WorkDate_Month_1 AND [p].[Status] IN (N'APPROVED', N'PAID')) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-28 03:30:09.854 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200), @p12='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (Precision = 4) (Scale = 2) (DbType = Decimal), @p11='?' (Size = 20), @p13='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
UPDATE [HR_ATTENDANCE].[OVERTIME_REQUESTS] SET [APPROVED_BY] = @p9, [APPROVED_HOURS] = @p10, [STATUS] = @p11
OUTPUT 1
WHERE [OT_REQUEST_ID] = @p12 AND [VERSION_NO] = @p13;
2026-01-28 03:30:09.875 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__targetDate_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[ROSTER_ID], [e].[CREATED_AT], [e].[CREATED_BY], [e].[EMPLOYEE_ID], [e].[IS_DELETED], [e].[IS_OFF_DAY], [e].[ROSTER_DATE], [e].[SHIFT_ID], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO], [s].[SHIFT_ID], [s].[CREATED_AT], [s].[CREATED_BY], [s].[END_TIME], [s].[GRACE_PERIOD_MINS], [s].[HOURS_COUNT], [s].[IS_CROSS_DAY], [s].[IS_DELETED], [s].[SHIFT_NAME_AR], [s].[START_TIME], [s].[UPDATED_AT], [s].[UPDATED_BY], [s].[VERSION_NO]
FROM [HR_ATTENDANCE].[EMPLOYEE_ROSTERS] AS [e]
LEFT JOIN [HR_ATTENDANCE].[SHIFT_TYPES] AS [s] ON [e].[SHIFT_ID] = [s].[SHIFT_ID]
WHERE [e].[ROSTER_DATE] = @__targetDate_0
2026-01-28 03:30:09.884 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Boolean'.
2026-01-28 03:30:09.886 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceSettingsController.ActionOvertime (HRMS.API) in 95.2619ms
2026-01-28 03:30:09.889 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.ActionOvertime (HRMS.API)'
2026-01-28 03:30:09.894 +03:00 [INF] HTTP POST /api/AttendanceSettings/action-overtime responded 200 in 123.6999 ms
2026-01-28 03:30:09.897 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/AttendanceSettings/action-overtime - 200 null application/json; charset=utf-8 137.9446ms
2026-01-28 03:34:13.263 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/AttendanceSettings/process-attendance - application/json 46
2026-01-28 03:34:13.269 +03:00 [INF] CORS policy execution successful.
2026-01-28 03:34:13.271 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.ProcessAttendance (HRMS.API)'
2026-01-28 03:34:13.273 +03:00 [INF] Route matched with {action = "ProcessAttendance", controller = "AttendanceSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] ProcessAttendance(HRMS.Application.Features.Attendance.Process.Commands.ProcessAttendance.ProcessAttendanceCommand) on controller HRMS.API.Controllers.Attendance.AttendanceSettingsController (HRMS.API).
2026-01-28 03:34:13.296 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__targetDate_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[ROSTER_ID], [e].[CREATED_AT], [e].[CREATED_BY], [e].[EMPLOYEE_ID], [e].[IS_DELETED], [e].[IS_OFF_DAY], [e].[ROSTER_DATE], [e].[SHIFT_ID], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO], [s].[SHIFT_ID], [s].[CREATED_AT], [s].[CREATED_BY], [s].[END_TIME], [s].[GRACE_PERIOD_MINS], [s].[HOURS_COUNT], [s].[IS_CROSS_DAY], [s].[IS_DELETED], [s].[SHIFT_NAME_AR], [s].[START_TIME], [s].[UPDATED_AT], [s].[UPDATED_BY], [s].[VERSION_NO]
FROM [HR_ATTENDANCE].[EMPLOYEE_ROSTERS] AS [e]
LEFT JOIN [HR_ATTENDANCE].[SHIFT_TYPES] AS [s] ON [e].[SHIFT_ID] = [s].[SHIFT_ID]
WHERE [e].[ROSTER_DATE] = @__targetDate_0
2026-01-28 03:34:13.369 +03:00 [INF] Executed DbCommand (57ms) [Parameters=[@__employeeIds_0='?' (Size = 4000), @__startRange_1='?' (DbType = DateTime2), @__endRange_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[LOG_ID], [r].[CREATED_AT], [r].[CREATED_BY], [r].[DEVICE_ID], [r].[EMPLOYEE_ID], [r].[IS_DELETED], [r].[IS_PROCESSED], [r].[PUNCH_TIME], [r].[PUNCH_TYPE], [r].[UPDATED_AT], [r].[UPDATED_BY], [r].[VERSION_NO]
FROM [HR_ATTENDANCE].[RAW_PUNCH_LOGS] AS [r]
WHERE [r].[EMPLOYEE_ID] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__employeeIds_0) WITH ([value] int '$') AS [e]
) AND [r].[PUNCH_TIME] >= @__startRange_1 AND [r].[PUNCH_TIME] < @__endRange_2
2026-01-28 03:34:13.397 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[@__employeeIds_0='?' (Size = 4000), @__targetDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[REQUEST_ID], [l].[ATTACHMENT_PATH], [l].[CREATED_AT], [l].[CREATED_BY], [l].[DAYS_COUNT], [l].[EMPLOYEE_ID], [l].[END_DATE], [l].[IS_DELETED], [l].[IS_POSTED_TO_BALANCE], [l].[LEAVE_TYPE_ID], [l].[REASON], [l].[REJECTION_REASON], [l].[START_DATE], [l].[STATUS], [l].[UPDATED_AT], [l].[UPDATED_BY], [l].[VERSION_NO]
FROM [HR_LEAVES].[LEAVE_REQUESTS] AS [l]
WHERE [l].[EMPLOYEE_ID] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__employeeIds_0) WITH ([value] int '$') AS [e]
) AND [l].[STATUS] = N'APPROVED' AND [l].[START_DATE] <= @__targetDate_1 AND [l].[END_DATE] >= @__targetDate_1
2026-01-28 03:34:13.424 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@__employeeIds_0='?' (Size = 4000), @__targetDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[OT_REQUEST_ID], [o].[APPROVED_BY], [o].[APPROVED_HOURS], [o].[CREATED_AT], [o].[CREATED_BY], [o].[EMPLOYEE_ID], [o].[HOURS_REQUESTED], [o].[IS_DELETED], [o].[REASON], [o].[REQUEST_DATE], [o].[STATUS], [o].[UPDATED_AT], [o].[UPDATED_BY], [o].[VERSION_NO], [o].[WORK_DATE]
FROM [HR_ATTENDANCE].[OVERTIME_REQUESTS] AS [o]
WHERE [o].[EMPLOYEE_ID] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__employeeIds_0) WITH ([value] int '$') AS [e]
) AND [o].[STATUS] = N'APPROVED' AND [o].[WORK_DATE] = @__targetDate_1
2026-01-28 03:34:13.451 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__targetDate_0='?' (DbType = DateTime2), @__employeeIds_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[RECORD_ID], [d].[ACTUAL_IN_TIME], [d].[ACTUAL_OUT_TIME], [d].[ATTENDANCE_DATE], [d].[CREATED_AT], [d].[CREATED_BY], [d].[EARLY_LEAVE_MINUTES], [d].[EMPLOYEE_ID], [d].[IS_DELETED], [d].[LATE_MINUTES], [d].[OVERTIME_MINUTES], [d].[PLANNED_SHIFT_ID], [d].[STATUS], [d].[UPDATED_AT], [d].[UPDATED_BY], [d].[VERSION_NO]
FROM [HR_ATTENDANCE].[DAILY_ATTENDANCE] AS [d]
WHERE [d].[ATTENDANCE_DATE] = @__targetDate_0 AND [d].[EMPLOYEE_ID] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__employeeIds_1) WITH ([value] int '$') AS [e]
)
2026-01-28 03:34:13.524 +03:00 [INF] Executed DbCommand (38ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200), @p9='?' (Size = 20), @p10='?' (Size = 50), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (DbType = Int64), @p16='?' (Size = 100), @p17='?' (Size = 200), @p18='?' (DbType = Int64), @p19='?' (DbType = Int32), @p20='?' (DbType = Int64), @p21='?' (DbType = Int32), @p22='?' (DbType = DateTime2), @p23='?' (DbType = DateTime2), @p24='?' (DbType = DateTime2), @p25='?' (DbType = DateTime2), @p26='?' (Size = 50), @p27='?' (DbType = Int16), @p28='?' (DbType = Int32), @p29='?' (Size = 1) (DbType = Byte), @p30='?' (DbType = Int16), @p31='?' (DbType = Int16), @p32='?' (DbType = Int32), @p33='?' (Size = 20), @p34='?' (DbType = DateTime2), @p35='?' (Size = 50), @p36='?' (DbType = Int32), @p37='?' (DbType = DateTime2), @p38='?' (DbType = DateTime2), @p39='?' (DbType = DateTime2), @p40='?' (DbType = DateTime2), @p41='?' (Size = 50), @p42='?' (DbType = Int16), @p43='?' (DbType = Int32), @p44='?' (Size = 1) (DbType = Byte), @p45='?' (DbType = Int16), @p46='?' (DbType = Int16), @p47='?' (DbType = Int32), @p48='?' (Size = 20), @p49='?' (DbType = DateTime2), @p50='?' (Size = 50), @p51='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
MERGE [HR_CORE].[AUDIT_LOGS] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, 0),
(@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, 1)) AS i ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
VALUES (i.[ACTION_TYPE], i.[IP_ADDRESS], i.[NEW_VALUE], i.[OLD_VALUE], i.[PERFORMED_AT], i.[PERFORMED_BY], i.[RECORD_ID], i.[TABLE_NAME], i.[USER_AGENT])
OUTPUT INSERTED.[LOG_ID], i._Position;
DELETE FROM [HR_ATTENDANCE].[DAILY_ATTENDANCE]
OUTPUT 1
WHERE [RECORD_ID] = @p18 AND [VERSION_NO] = @p19;
DELETE FROM [HR_ATTENDANCE].[DAILY_ATTENDANCE]
OUTPUT 1
WHERE [RECORD_ID] = @p20 AND [VERSION_NO] = @p21;
MERGE [HR_ATTENDANCE].[DAILY_ATTENDANCE] USING (
VALUES (@p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, 0),
(@p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51, 1)) AS i ([ACTUAL_IN_TIME], [ACTUAL_OUT_TIME], [ATTENDANCE_DATE], [CREATED_AT], [CREATED_BY], [EARLY_LEAVE_MINUTES], [EMPLOYEE_ID], [IS_DELETED], [LATE_MINUTES], [OVERTIME_MINUTES], [PLANNED_SHIFT_ID], [STATUS], [UPDATED_AT], [UPDATED_BY], [VERSION_NO], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([ACTUAL_IN_TIME], [ACTUAL_OUT_TIME], [ATTENDANCE_DATE], [CREATED_AT], [CREATED_BY], [EARLY_LEAVE_MINUTES], [EMPLOYEE_ID], [IS_DELETED], [LATE_MINUTES], [OVERTIME_MINUTES], [PLANNED_SHIFT_ID], [STATUS], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
VALUES (i.[ACTUAL_IN_TIME], i.[ACTUAL_OUT_TIME], i.[ATTENDANCE_DATE], i.[CREATED_AT], i.[CREATED_BY], i.[EARLY_LEAVE_MINUTES], i.[EMPLOYEE_ID], i.[IS_DELETED], i.[LATE_MINUTES], i.[OVERTIME_MINUTES], i.[PLANNED_SHIFT_ID], i.[STATUS], i.[UPDATED_AT], i.[UPDATED_BY], i.[VERSION_NO])
OUTPUT INSERTED.[RECORD_ID], i._Position;
2026-01-28 03:34:13.561 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200), @p9='?' (Size = 20), @p10='?' (Size = 50), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (DbType = Int64), @p16='?' (Size = 100), @p17='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [HR_CORE].[AUDIT_LOGS] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, 0),
(@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, 1)) AS i ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
VALUES (i.[ACTION_TYPE], i.[IP_ADDRESS], i.[NEW_VALUE], i.[OLD_VALUE], i.[PERFORMED_AT], i.[PERFORMED_BY], i.[RECORD_ID], i.[TABLE_NAME], i.[USER_AGENT])
OUTPUT INSERTED.[LOG_ID], i._Position;
2026-01-28 03:34:13.601 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Int32'.
2026-01-28 03:34:13.611 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceSettingsController.ProcessAttendance (HRMS.API) in 328.6439ms
2026-01-28 03:34:13.621 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.ProcessAttendance (HRMS.API)'
2026-01-28 03:34:13.624 +03:00 [INF] HTTP POST /api/AttendanceSettings/process-attendance responded 200 in 355.1028 ms
2026-01-28 03:34:13.627 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/AttendanceSettings/process-attendance - 200 null application/json; charset=utf-8 364.4882ms
2026-01-28 03:34:57.398 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/AttendanceSettings/process-attendance - application/json 32
2026-01-28 03:34:57.407 +03:00 [INF] CORS policy execution successful.
2026-01-28 03:34:57.409 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.ProcessAttendance (HRMS.API)'
2026-01-28 03:34:57.443 +03:00 [INF] Route matched with {action = "ProcessAttendance", controller = "AttendanceSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] ProcessAttendance(HRMS.Application.Features.Attendance.Process.Commands.ProcessAttendance.ProcessAttendanceCommand) on controller HRMS.API.Controllers.Attendance.AttendanceSettingsController (HRMS.API).
2026-01-28 03:34:57.459 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__targetDate_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[ROSTER_ID], [e].[CREATED_AT], [e].[CREATED_BY], [e].[EMPLOYEE_ID], [e].[IS_DELETED], [e].[IS_OFF_DAY], [e].[ROSTER_DATE], [e].[SHIFT_ID], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO], [s].[SHIFT_ID], [s].[CREATED_AT], [s].[CREATED_BY], [s].[END_TIME], [s].[GRACE_PERIOD_MINS], [s].[HOURS_COUNT], [s].[IS_CROSS_DAY], [s].[IS_DELETED], [s].[SHIFT_NAME_AR], [s].[START_TIME], [s].[UPDATED_AT], [s].[UPDATED_BY], [s].[VERSION_NO]
FROM [HR_ATTENDANCE].[EMPLOYEE_ROSTERS] AS [e]
LEFT JOIN [HR_ATTENDANCE].[SHIFT_TYPES] AS [s] ON [e].[SHIFT_ID] = [s].[SHIFT_ID]
WHERE [e].[ROSTER_DATE] = @__targetDate_0
2026-01-28 03:34:57.480 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__employeeIds_0='?' (Size = 4000), @__startRange_1='?' (DbType = DateTime2), @__endRange_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[LOG_ID], [r].[CREATED_AT], [r].[CREATED_BY], [r].[DEVICE_ID], [r].[EMPLOYEE_ID], [r].[IS_DELETED], [r].[IS_PROCESSED], [r].[PUNCH_TIME], [r].[PUNCH_TYPE], [r].[UPDATED_AT], [r].[UPDATED_BY], [r].[VERSION_NO]
FROM [HR_ATTENDANCE].[RAW_PUNCH_LOGS] AS [r]
WHERE [r].[EMPLOYEE_ID] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__employeeIds_0) WITH ([value] int '$') AS [e]
) AND [r].[PUNCH_TIME] >= @__startRange_1 AND [r].[PUNCH_TIME] < @__endRange_2
2026-01-28 03:34:57.507 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[@__employeeIds_0='?' (Size = 4000), @__targetDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[REQUEST_ID], [l].[ATTACHMENT_PATH], [l].[CREATED_AT], [l].[CREATED_BY], [l].[DAYS_COUNT], [l].[EMPLOYEE_ID], [l].[END_DATE], [l].[IS_DELETED], [l].[IS_POSTED_TO_BALANCE], [l].[LEAVE_TYPE_ID], [l].[REASON], [l].[REJECTION_REASON], [l].[START_DATE], [l].[STATUS], [l].[UPDATED_AT], [l].[UPDATED_BY], [l].[VERSION_NO]
FROM [HR_LEAVES].[LEAVE_REQUESTS] AS [l]
WHERE [l].[EMPLOYEE_ID] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__employeeIds_0) WITH ([value] int '$') AS [e]
) AND [l].[STATUS] = N'APPROVED' AND [l].[START_DATE] <= @__targetDate_1 AND [l].[END_DATE] >= @__targetDate_1
2026-01-28 03:34:57.526 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__employeeIds_0='?' (Size = 4000), @__targetDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[OT_REQUEST_ID], [o].[APPROVED_BY], [o].[APPROVED_HOURS], [o].[CREATED_AT], [o].[CREATED_BY], [o].[EMPLOYEE_ID], [o].[HOURS_REQUESTED], [o].[IS_DELETED], [o].[REASON], [o].[REQUEST_DATE], [o].[STATUS], [o].[UPDATED_AT], [o].[UPDATED_BY], [o].[VERSION_NO], [o].[WORK_DATE]
FROM [HR_ATTENDANCE].[OVERTIME_REQUESTS] AS [o]
WHERE [o].[EMPLOYEE_ID] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__employeeIds_0) WITH ([value] int '$') AS [e]
) AND [o].[STATUS] = N'APPROVED' AND [o].[WORK_DATE] = @__targetDate_1
2026-01-28 03:34:57.547 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__targetDate_0='?' (DbType = DateTime2), @__employeeIds_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[RECORD_ID], [d].[ACTUAL_IN_TIME], [d].[ACTUAL_OUT_TIME], [d].[ATTENDANCE_DATE], [d].[CREATED_AT], [d].[CREATED_BY], [d].[EARLY_LEAVE_MINUTES], [d].[EMPLOYEE_ID], [d].[IS_DELETED], [d].[LATE_MINUTES], [d].[OVERTIME_MINUTES], [d].[PLANNED_SHIFT_ID], [d].[STATUS], [d].[UPDATED_AT], [d].[UPDATED_BY], [d].[VERSION_NO]
FROM [HR_ATTENDANCE].[DAILY_ATTENDANCE] AS [d]
WHERE [d].[ATTENDANCE_DATE] = @__targetDate_0 AND [d].[EMPLOYEE_ID] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__employeeIds_1) WITH ([value] int '$') AS [e]
)
2026-01-28 03:34:57.599 +03:00 [INF] Executed DbCommand (39ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200), @p9='?' (Size = 20), @p10='?' (Size = 50), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (DbType = Int64), @p16='?' (Size = 100), @p17='?' (Size = 200), @p18='?' (DbType = Int64), @p19='?' (DbType = Int32), @p20='?' (DbType = Int64), @p21='?' (DbType = Int32), @p22='?' (DbType = DateTime2), @p23='?' (DbType = DateTime2), @p24='?' (DbType = DateTime2), @p25='?' (DbType = DateTime2), @p26='?' (Size = 50), @p27='?' (DbType = Int16), @p28='?' (DbType = Int32), @p29='?' (Size = 1) (DbType = Byte), @p30='?' (DbType = Int16), @p31='?' (DbType = Int16), @p32='?' (DbType = Int32), @p33='?' (Size = 20), @p34='?' (DbType = DateTime2), @p35='?' (Size = 50), @p36='?' (DbType = Int32), @p37='?' (DbType = DateTime2), @p38='?' (DbType = DateTime2), @p39='?' (DbType = DateTime2), @p40='?' (DbType = DateTime2), @p41='?' (Size = 50), @p42='?' (DbType = Int16), @p43='?' (DbType = Int32), @p44='?' (Size = 1) (DbType = Byte), @p45='?' (DbType = Int16), @p46='?' (DbType = Int16), @p47='?' (DbType = Int32), @p48='?' (Size = 20), @p49='?' (DbType = DateTime2), @p50='?' (Size = 50), @p51='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
MERGE [HR_CORE].[AUDIT_LOGS] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, 0),
(@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, 1)) AS i ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
VALUES (i.[ACTION_TYPE], i.[IP_ADDRESS], i.[NEW_VALUE], i.[OLD_VALUE], i.[PERFORMED_AT], i.[PERFORMED_BY], i.[RECORD_ID], i.[TABLE_NAME], i.[USER_AGENT])
OUTPUT INSERTED.[LOG_ID], i._Position;
DELETE FROM [HR_ATTENDANCE].[DAILY_ATTENDANCE]
OUTPUT 1
WHERE [RECORD_ID] = @p18 AND [VERSION_NO] = @p19;
DELETE FROM [HR_ATTENDANCE].[DAILY_ATTENDANCE]
OUTPUT 1
WHERE [RECORD_ID] = @p20 AND [VERSION_NO] = @p21;
MERGE [HR_ATTENDANCE].[DAILY_ATTENDANCE] USING (
VALUES (@p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, 0),
(@p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51, 1)) AS i ([ACTUAL_IN_TIME], [ACTUAL_OUT_TIME], [ATTENDANCE_DATE], [CREATED_AT], [CREATED_BY], [EARLY_LEAVE_MINUTES], [EMPLOYEE_ID], [IS_DELETED], [LATE_MINUTES], [OVERTIME_MINUTES], [PLANNED_SHIFT_ID], [STATUS], [UPDATED_AT], [UPDATED_BY], [VERSION_NO], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([ACTUAL_IN_TIME], [ACTUAL_OUT_TIME], [ATTENDANCE_DATE], [CREATED_AT], [CREATED_BY], [EARLY_LEAVE_MINUTES], [EMPLOYEE_ID], [IS_DELETED], [LATE_MINUTES], [OVERTIME_MINUTES], [PLANNED_SHIFT_ID], [STATUS], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
VALUES (i.[ACTUAL_IN_TIME], i.[ACTUAL_OUT_TIME], i.[ATTENDANCE_DATE], i.[CREATED_AT], i.[CREATED_BY], i.[EARLY_LEAVE_MINUTES], i.[EMPLOYEE_ID], i.[IS_DELETED], i.[LATE_MINUTES], i.[OVERTIME_MINUTES], i.[PLANNED_SHIFT_ID], i.[STATUS], i.[UPDATED_AT], i.[UPDATED_BY], i.[VERSION_NO])
OUTPUT INSERTED.[RECORD_ID], i._Position;
2026-01-28 03:34:57.646 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200), @p9='?' (Size = 20), @p10='?' (Size = 50), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (DbType = Int64), @p16='?' (Size = 100), @p17='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [HR_CORE].[AUDIT_LOGS] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, 0),
(@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, 1)) AS i ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
VALUES (i.[ACTION_TYPE], i.[IP_ADDRESS], i.[NEW_VALUE], i.[OLD_VALUE], i.[PERFORMED_AT], i.[PERFORMED_BY], i.[RECORD_ID], i.[TABLE_NAME], i.[USER_AGENT])
OUTPUT INSERTED.[LOG_ID], i._Position;
2026-01-28 03:34:57.660 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Int32'.
2026-01-28 03:34:57.662 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceSettingsController.ProcessAttendance (HRMS.API) in 212.3243ms
2026-01-28 03:34:57.700 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.ProcessAttendance (HRMS.API)'
2026-01-28 03:34:57.703 +03:00 [INF] HTTP POST /api/AttendanceSettings/process-attendance responded 200 in 295.9250 ms
2026-01-28 03:34:57.707 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/AttendanceSettings/process-attendance - 200 null application/json; charset=utf-8 309.9263ms
2026-01-28 03:36:36.912 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/AttendanceSettings/process-attendance - application/json 42
2026-01-28 03:36:36.918 +03:00 [INF] CORS policy execution successful.
2026-01-28 03:36:36.920 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.ProcessAttendance (HRMS.API)'
2026-01-28 03:36:36.923 +03:00 [INF] Route matched with {action = "ProcessAttendance", controller = "AttendanceSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] ProcessAttendance(HRMS.Application.Features.Attendance.Process.Commands.ProcessAttendance.ProcessAttendanceCommand) on controller HRMS.API.Controllers.Attendance.AttendanceSettingsController (HRMS.API).
2026-01-28 03:36:36.966 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__targetDate_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[ROSTER_ID], [e].[CREATED_AT], [e].[CREATED_BY], [e].[EMPLOYEE_ID], [e].[IS_DELETED], [e].[IS_OFF_DAY], [e].[ROSTER_DATE], [e].[SHIFT_ID], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO], [s].[SHIFT_ID], [s].[CREATED_AT], [s].[CREATED_BY], [s].[END_TIME], [s].[GRACE_PERIOD_MINS], [s].[HOURS_COUNT], [s].[IS_CROSS_DAY], [s].[IS_DELETED], [s].[SHIFT_NAME_AR], [s].[START_TIME], [s].[UPDATED_AT], [s].[UPDATED_BY], [s].[VERSION_NO]
FROM [HR_ATTENDANCE].[EMPLOYEE_ROSTERS] AS [e]
LEFT JOIN [HR_ATTENDANCE].[SHIFT_TYPES] AS [s] ON [e].[SHIFT_ID] = [s].[SHIFT_ID]
WHERE [e].[ROSTER_DATE] = @__targetDate_0
2026-01-28 03:36:36.989 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__employeeIds_0='?' (Size = 4000), @__startRange_1='?' (DbType = DateTime2), @__endRange_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[LOG_ID], [r].[CREATED_AT], [r].[CREATED_BY], [r].[DEVICE_ID], [r].[EMPLOYEE_ID], [r].[IS_DELETED], [r].[IS_PROCESSED], [r].[PUNCH_TIME], [r].[PUNCH_TYPE], [r].[UPDATED_AT], [r].[UPDATED_BY], [r].[VERSION_NO]
FROM [HR_ATTENDANCE].[RAW_PUNCH_LOGS] AS [r]
WHERE [r].[EMPLOYEE_ID] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__employeeIds_0) WITH ([value] int '$') AS [e]
) AND [r].[PUNCH_TIME] >= @__startRange_1 AND [r].[PUNCH_TIME] < @__endRange_2
2026-01-28 03:36:37.012 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@__employeeIds_0='?' (Size = 4000), @__targetDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[REQUEST_ID], [l].[ATTACHMENT_PATH], [l].[CREATED_AT], [l].[CREATED_BY], [l].[DAYS_COUNT], [l].[EMPLOYEE_ID], [l].[END_DATE], [l].[IS_DELETED], [l].[IS_POSTED_TO_BALANCE], [l].[LEAVE_TYPE_ID], [l].[REASON], [l].[REJECTION_REASON], [l].[START_DATE], [l].[STATUS], [l].[UPDATED_AT], [l].[UPDATED_BY], [l].[VERSION_NO]
FROM [HR_LEAVES].[LEAVE_REQUESTS] AS [l]
WHERE [l].[EMPLOYEE_ID] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__employeeIds_0) WITH ([value] int '$') AS [e]
) AND [l].[STATUS] = N'APPROVED' AND [l].[START_DATE] <= @__targetDate_1 AND [l].[END_DATE] >= @__targetDate_1
2026-01-28 03:36:37.034 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__employeeIds_0='?' (Size = 4000), @__targetDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[OT_REQUEST_ID], [o].[APPROVED_BY], [o].[APPROVED_HOURS], [o].[CREATED_AT], [o].[CREATED_BY], [o].[EMPLOYEE_ID], [o].[HOURS_REQUESTED], [o].[IS_DELETED], [o].[REASON], [o].[REQUEST_DATE], [o].[STATUS], [o].[UPDATED_AT], [o].[UPDATED_BY], [o].[VERSION_NO], [o].[WORK_DATE]
FROM [HR_ATTENDANCE].[OVERTIME_REQUESTS] AS [o]
WHERE [o].[EMPLOYEE_ID] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__employeeIds_0) WITH ([value] int '$') AS [e]
) AND [o].[STATUS] = N'APPROVED' AND [o].[WORK_DATE] = @__targetDate_1
2026-01-28 03:36:37.052 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__targetDate_0='?' (DbType = DateTime2), @__employeeIds_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[RECORD_ID], [d].[ACTUAL_IN_TIME], [d].[ACTUAL_OUT_TIME], [d].[ATTENDANCE_DATE], [d].[CREATED_AT], [d].[CREATED_BY], [d].[EARLY_LEAVE_MINUTES], [d].[EMPLOYEE_ID], [d].[IS_DELETED], [d].[LATE_MINUTES], [d].[OVERTIME_MINUTES], [d].[PLANNED_SHIFT_ID], [d].[STATUS], [d].[UPDATED_AT], [d].[UPDATED_BY], [d].[VERSION_NO]
FROM [HR_ATTENDANCE].[DAILY_ATTENDANCE] AS [d]
WHERE [d].[ATTENDANCE_DATE] = @__targetDate_0 AND [d].[EMPLOYEE_ID] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__employeeIds_1) WITH ([value] int '$') AS [e]
)
2026-01-28 03:36:37.099 +03:00 [INF] Executed DbCommand (37ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200), @p9='?' (Size = 20), @p10='?' (Size = 50), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (DbType = Int64), @p16='?' (Size = 100), @p17='?' (Size = 200), @p18='?' (DbType = Int64), @p19='?' (DbType = Int32), @p20='?' (DbType = Int64), @p21='?' (DbType = Int32), @p22='?' (DbType = DateTime2), @p23='?' (DbType = DateTime2), @p24='?' (DbType = DateTime2), @p25='?' (DbType = DateTime2), @p26='?' (Size = 50), @p27='?' (DbType = Int16), @p28='?' (DbType = Int32), @p29='?' (Size = 1) (DbType = Byte), @p30='?' (DbType = Int16), @p31='?' (DbType = Int16), @p32='?' (DbType = Int32), @p33='?' (Size = 20), @p34='?' (DbType = DateTime2), @p35='?' (Size = 50), @p36='?' (DbType = Int32), @p37='?' (DbType = DateTime2), @p38='?' (DbType = DateTime2), @p39='?' (DbType = DateTime2), @p40='?' (DbType = DateTime2), @p41='?' (Size = 50), @p42='?' (DbType = Int16), @p43='?' (DbType = Int32), @p44='?' (Size = 1) (DbType = Byte), @p45='?' (DbType = Int16), @p46='?' (DbType = Int16), @p47='?' (DbType = Int32), @p48='?' (Size = 20), @p49='?' (DbType = DateTime2), @p50='?' (Size = 50), @p51='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
MERGE [HR_CORE].[AUDIT_LOGS] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, 0),
(@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, 1)) AS i ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
VALUES (i.[ACTION_TYPE], i.[IP_ADDRESS], i.[NEW_VALUE], i.[OLD_VALUE], i.[PERFORMED_AT], i.[PERFORMED_BY], i.[RECORD_ID], i.[TABLE_NAME], i.[USER_AGENT])
OUTPUT INSERTED.[LOG_ID], i._Position;
DELETE FROM [HR_ATTENDANCE].[DAILY_ATTENDANCE]
OUTPUT 1
WHERE [RECORD_ID] = @p18 AND [VERSION_NO] = @p19;
DELETE FROM [HR_ATTENDANCE].[DAILY_ATTENDANCE]
OUTPUT 1
WHERE [RECORD_ID] = @p20 AND [VERSION_NO] = @p21;
MERGE [HR_ATTENDANCE].[DAILY_ATTENDANCE] USING (
VALUES (@p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, 0),
(@p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51, 1)) AS i ([ACTUAL_IN_TIME], [ACTUAL_OUT_TIME], [ATTENDANCE_DATE], [CREATED_AT], [CREATED_BY], [EARLY_LEAVE_MINUTES], [EMPLOYEE_ID], [IS_DELETED], [LATE_MINUTES], [OVERTIME_MINUTES], [PLANNED_SHIFT_ID], [STATUS], [UPDATED_AT], [UPDATED_BY], [VERSION_NO], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([ACTUAL_IN_TIME], [ACTUAL_OUT_TIME], [ATTENDANCE_DATE], [CREATED_AT], [CREATED_BY], [EARLY_LEAVE_MINUTES], [EMPLOYEE_ID], [IS_DELETED], [LATE_MINUTES], [OVERTIME_MINUTES], [PLANNED_SHIFT_ID], [STATUS], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
VALUES (i.[ACTUAL_IN_TIME], i.[ACTUAL_OUT_TIME], i.[ATTENDANCE_DATE], i.[CREATED_AT], i.[CREATED_BY], i.[EARLY_LEAVE_MINUTES], i.[EMPLOYEE_ID], i.[IS_DELETED], i.[LATE_MINUTES], i.[OVERTIME_MINUTES], i.[PLANNED_SHIFT_ID], i.[STATUS], i.[UPDATED_AT], i.[UPDATED_BY], i.[VERSION_NO])
OUTPUT INSERTED.[RECORD_ID], i._Position;
2026-01-28 03:36:37.134 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200), @p9='?' (Size = 20), @p10='?' (Size = 50), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (DbType = Int64), @p16='?' (Size = 100), @p17='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [HR_CORE].[AUDIT_LOGS] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, 0),
(@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, 1)) AS i ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
VALUES (i.[ACTION_TYPE], i.[IP_ADDRESS], i.[NEW_VALUE], i.[OLD_VALUE], i.[PERFORMED_AT], i.[PERFORMED_BY], i.[RECORD_ID], i.[TABLE_NAME], i.[USER_AGENT])
OUTPUT INSERTED.[LOG_ID], i._Position;
2026-01-28 03:36:37.149 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Int32'.
2026-01-28 03:36:37.150 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceSettingsController.ProcessAttendance (HRMS.API) in 199.7485ms
2026-01-28 03:36:37.180 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.ProcessAttendance (HRMS.API)'
2026-01-28 03:36:37.183 +03:00 [INF] HTTP POST /api/AttendanceSettings/process-attendance responded 200 in 264.4743 ms
2026-01-28 03:36:37.185 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/AttendanceSettings/process-attendance - 200 null application/json; charset=utf-8 273.8372ms
2026-01-28 16:45:54.302 +03:00 [INF] üöÄ Starting HRMS Hospital API...
2026-01-28 16:45:58.810 +03:00 [INF] ‚úÖ HRMS Hospital API started successfully
2026-01-28 16:45:58.868 +03:00 [INF] User profile is available. Using 'C:\Users\MT\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-28 16:45:59.423 +03:00 [INF] Now listening on: https://localhost:5001
2026-01-28 16:45:59.425 +03:00 [INF] Now listening on: http://localhost:5000
2026-01-28 16:45:59.539 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-28 16:45:59.541 +03:00 [INF] Hosting environment: Development
2026-01-28 16:45:59.542 +03:00 [INF] Content root path: G:\HRMS_Hospital\Backend\HRMS\HRMS.API
2026-01-28 16:46:02.108 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - null null
2026-01-28 16:46:04.849 +03:00 [INF] HTTP GET /swagger/index.html responded 200 in 2469.7220 ms
2026-01-28 16:46:04.923 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - 200 null text/html;charset=utf-8 2824.1299ms
2026-01-28 16:46:05.587 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - null null
2026-01-28 16:46:05.625 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 37.6788ms
2026-01-28 16:46:05.669 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_vs/browserLink - null null
2026-01-28 16:46:05.786 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_vs/browserLink - 200 null text/javascript; charset=UTF-8 117.4159ms
2026-01-28 16:46:07.244 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - null null
2026-01-28 16:46:07.626 +03:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 368.0498 ms
2026-01-28 16:46:07.633 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 388.5454ms
2026-01-28 16:56:41.375 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/AttendanceSettings/shifts - application/json 152
2026-01-28 16:56:41.391 +03:00 [INF] CORS policy execution successful.
2026-01-28 16:56:41.399 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.CreateShift (HRMS.API)'
2026-01-28 16:56:41.432 +03:00 [INF] Route matched with {action = "CreateShift", controller = "AttendanceSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] CreateShift(HRMS.Application.Features.Attendance.Configuration.CreateShiftTypeCommand) on controller HRMS.API.Controllers.Attendance.AttendanceSettingsController (HRMS.API).
2026-01-28 16:56:43.906 +03:00 [WRN] No store type was specified for the decimal property 'HoursCount' on entity type 'ShiftType'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-01-28 16:56:43.909 +03:00 [WRN] No store type was specified for the decimal property 'MaxSalary' on entity type 'JobGrade'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-01-28 16:56:43.911 +03:00 [WRN] No store type was specified for the decimal property 'MinSalary' on entity type 'JobGrade'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-01-28 16:56:46.531 +03:00 [INF] Executed DbCommand (150ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (DbType = Int16), @p4='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p5='?' (Size = 1) (DbType = Byte), @p6='?' (Size = 1) (DbType = Byte), @p7='?' (Size = 100), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2), @p10='?' (Size = 50), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_ATTENDANCE].[SHIFT_TYPES] ([CREATED_AT], [CREATED_BY], [END_TIME], [GRACE_PERIOD_MINS], [HOURS_COUNT], [IS_CROSS_DAY], [IS_DELETED], [SHIFT_NAME_AR], [START_TIME], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[SHIFT_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2026-01-28 16:56:46.620 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'HRMS.Infrastructure.Data.HRMSDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): String or binary data would be truncated in table 'HRMS_Hospital.HR_ATTENDANCE.SHIFT_TYPES', column 'END_TIME'. Truncated value: '16:00'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:c8366b3d-491f-4ad5-9b10-10f0547d638c
Error Number:2628,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): String or binary data would be truncated in table 'HRMS_Hospital.HR_ATTENDANCE.SHIFT_TYPES', column 'END_TIME'. Truncated value: '16:00'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:c8366b3d-491f-4ad5-9b10-10f0547d638c
Error Number:2628,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2026-01-28 16:57:09.331 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceSettingsController.CreateShift (HRMS.API) in 27891.5393ms
2026-01-28 16:57:09.336 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.CreateShift (HRMS.API)'
2026-01-28 16:57:09.814 +03:00 [ERR] Global Exception Caught: An error occurred while saving the entity changes. See the inner exception for details.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): String or binary data would be truncated in table 'HRMS_Hospital.HR_ATTENDANCE.SHIFT_TYPES', column 'END_TIME'. Truncated value: '16:00'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:c8366b3d-491f-4ad5-9b10-10f0547d638c
Error Number:2628,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at HRMS.Infrastructure.Data.HRMSDbContext.SaveChangesAsync(CancellationToken cancellationToken) in G:\HRMS_Hospital\Backend\HRMS\HRMS.Infrastructure\Data\HRMSDbContext.cs:line 37
   at HRMS.Application.Features.Attendance.Configuration.CreateShiftTypeHandler.Handle(CreateShiftTypeCommand request, CancellationToken cancellationToken) in G:\HRMS_Hospital\Backend\HRMS\HRMS.Application\Features\Attendance\Configuration\ShiftTypesFeatures.cs:line 76
   at HRMS.API.Controllers.Attendance.AttendanceSettingsController.CreateShift(CreateShiftTypeCommand command) in G:\HRMS_Hospital\Backend\HRMS\HRMS.API\Controllers\Attendance\AttendanceSettingsController.cs:line 35
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at HRMS.API.Middleware.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in G:\HRMS_Hospital\Backend\HRMS\HRMS.API\Middleware\GlobalExceptionMiddleware.cs:line 25
2026-01-28 16:57:09.850 +03:00 [ERR] HTTP POST /api/AttendanceSettings/shifts responded 500 in 28461.3243 ms
2026-01-28 16:57:09.865 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/AttendanceSettings/shifts - 500 null application/json 28490.651ms
2026-01-28 16:57:20.337 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/AttendanceSettings/shifts - application/json 146
2026-01-28 16:57:20.345 +03:00 [INF] CORS policy execution successful.
2026-01-28 16:57:20.346 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.CreateShift (HRMS.API)'
2026-01-28 16:57:20.348 +03:00 [INF] Route matched with {action = "CreateShift", controller = "AttendanceSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] CreateShift(HRMS.Application.Features.Attendance.Configuration.CreateShiftTypeCommand) on controller HRMS.API.Controllers.Attendance.AttendanceSettingsController (HRMS.API).
2026-01-28 16:57:20.435 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 50), @p2='?' (Size = 5), @p3='?' (DbType = Int16), @p4='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p5='?' (Size = 1) (DbType = Byte), @p6='?' (Size = 1) (DbType = Byte), @p7='?' (Size = 100), @p8='?' (Size = 5), @p9='?' (DbType = DateTime2), @p10='?' (Size = 50), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_ATTENDANCE].[SHIFT_TYPES] ([CREATED_AT], [CREATED_BY], [END_TIME], [GRACE_PERIOD_MINS], [HOURS_COUNT], [IS_CROSS_DAY], [IS_DELETED], [SHIFT_NAME_AR], [START_TIME], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[SHIFT_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2026-01-28 16:57:20.552 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-01-28 16:57:20.572 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Int32'.
2026-01-28 16:57:20.577 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceSettingsController.CreateShift (HRMS.API) in 226.0391ms
2026-01-28 16:57:20.580 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.CreateShift (HRMS.API)'
2026-01-28 16:57:20.581 +03:00 [INF] HTTP POST /api/AttendanceSettings/shifts responded 200 in 236.8017 ms
2026-01-28 16:57:20.585 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/AttendanceSettings/shifts - 200 null application/json; charset=utf-8 247.7359ms
2026-01-28 16:58:51.031 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/AttendanceSettings/initialize-roster - application/json 122
2026-01-28 16:58:51.040 +03:00 [INF] CORS policy execution successful.
2026-01-28 16:58:51.041 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.InitializeRoster (HRMS.API)'
2026-01-28 16:58:51.055 +03:00 [INF] Route matched with {action = "InitializeRoster", controller = "AttendanceSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Boolean]] InitializeRoster(HRMS.Application.Features.Attendance.Roster.Commands.InitializeRoster.InitializeRosterCommand) on controller HRMS.API.Controllers.Attendance.AttendanceSettingsController (HRMS.API).
2026-01-28 16:58:51.514 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
        WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-28 16:58:51.532 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__request_ShiftId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HR_ATTENDANCE].[SHIFT_TYPES] AS [s]
        WHERE [s].[SHIFT_ID] = @__request_ShiftId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-28 16:58:51.595 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32), @__request_StartDate_1='?' (DbType = DateTime2), @__request_EndDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[ROSTER_DATE]
FROM [HR_ATTENDANCE].[EMPLOYEE_ROSTERS] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0 AND [e].[ROSTER_DATE] >= @__request_StartDate_1 AND [e].[ROSTER_DATE] <= @__request_EndDate_2
2026-01-28 16:58:51.669 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 50), @p2='?' (DbType = Int32), @p3='?' (Size = 1) (DbType = Byte), @p4='?' (Size = 1) (DbType = Byte), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime2), @p8='?' (Size = 50), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_ATTENDANCE].[EMPLOYEE_ROSTERS] ([CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [IS_DELETED], [IS_OFF_DAY], [ROSTER_DATE], [SHIFT_ID], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[ROSTER_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2026-01-28 16:58:51.684 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-01-28 16:58:51.690 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Boolean'.
2026-01-28 16:58:51.691 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceSettingsController.InitializeRoster (HRMS.API) in 554.1518ms
2026-01-28 16:58:51.693 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.InitializeRoster (HRMS.API)'
2026-01-28 16:58:51.694 +03:00 [INF] HTTP POST /api/AttendanceSettings/initialize-roster responded 200 in 653.8154 ms
2026-01-28 16:58:51.696 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/AttendanceSettings/initialize-roster - 200 null application/json; charset=utf-8 664.6039ms
2026-01-28 17:02:22.116 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Attendance/punch - application/json 162
2026-01-28 17:02:22.261 +03:00 [INF] CORS policy execution successful.
2026-01-28 17:02:22.263 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceController.RegisterPunch (HRMS.API)'
2026-01-28 17:02:22.268 +03:00 [INF] Route matched with {action = "RegisterPunch", controller = "Attendance"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int64]] RegisterPunch(HRMS.Application.Features.Attendance.Punch.RegisterPunchCommand) on controller HRMS.API.Controllers.Attendance.AttendanceController (HRMS.API).
2026-01-28 17:02:22.307 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 50), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?' (Size = 1) (DbType = Byte), @p5='?' (Size = 1) (DbType = Byte), @p6='?' (DbType = DateTime2), @p7='?' (Size = 10), @p8='?' (DbType = DateTime2), @p9='?' (Size = 50), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_ATTENDANCE].[RAW_PUNCH_LOGS] ([CREATED_AT], [CREATED_BY], [DEVICE_ID], [EMPLOYEE_ID], [IS_DELETED], [IS_PROCESSED], [PUNCH_TIME], [PUNCH_TYPE], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2026-01-28 17:02:22.314 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-01-28 17:02:22.459 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__targetDate_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[ROSTER_ID], [e].[CREATED_AT], [e].[CREATED_BY], [e].[EMPLOYEE_ID], [e].[IS_DELETED], [e].[IS_OFF_DAY], [e].[ROSTER_DATE], [e].[SHIFT_ID], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO], [s].[SHIFT_ID], [s].[CREATED_AT], [s].[CREATED_BY], [s].[END_TIME], [s].[GRACE_PERIOD_MINS], [s].[HOURS_COUNT], [s].[IS_CROSS_DAY], [s].[IS_DELETED], [s].[SHIFT_NAME_AR], [s].[START_TIME], [s].[UPDATED_AT], [s].[UPDATED_BY], [s].[VERSION_NO]
FROM [HR_ATTENDANCE].[EMPLOYEE_ROSTERS] AS [e]
LEFT JOIN [HR_ATTENDANCE].[SHIFT_TYPES] AS [s] ON [e].[SHIFT_ID] = [s].[SHIFT_ID]
WHERE [e].[ROSTER_DATE] = @__targetDate_0
2026-01-28 17:02:22.562 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__employeeIds_0='?' (Size = 4000), @__startRange_1='?' (DbType = DateTime2), @__endRange_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[LOG_ID], [r].[CREATED_AT], [r].[CREATED_BY], [r].[DEVICE_ID], [r].[EMPLOYEE_ID], [r].[IS_DELETED], [r].[IS_PROCESSED], [r].[PUNCH_TIME], [r].[PUNCH_TYPE], [r].[UPDATED_AT], [r].[UPDATED_BY], [r].[VERSION_NO]
FROM [HR_ATTENDANCE].[RAW_PUNCH_LOGS] AS [r]
WHERE [r].[EMPLOYEE_ID] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__employeeIds_0) WITH ([value] int '$') AS [e]
) AND [r].[PUNCH_TIME] >= @__startRange_1 AND [r].[PUNCH_TIME] < @__endRange_2
2026-01-28 17:02:22.601 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@__employeeIds_0='?' (Size = 4000), @__targetDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[REQUEST_ID], [l].[ATTACHMENT_PATH], [l].[CREATED_AT], [l].[CREATED_BY], [l].[DAYS_COUNT], [l].[EMPLOYEE_ID], [l].[END_DATE], [l].[IS_DELETED], [l].[IS_POSTED_TO_BALANCE], [l].[LEAVE_TYPE_ID], [l].[REASON], [l].[REJECTION_REASON], [l].[START_DATE], [l].[STATUS], [l].[UPDATED_AT], [l].[UPDATED_BY], [l].[VERSION_NO]
FROM [HR_LEAVES].[LEAVE_REQUESTS] AS [l]
WHERE [l].[EMPLOYEE_ID] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__employeeIds_0) WITH ([value] int '$') AS [e]
) AND [l].[STATUS] = N'APPROVED' AND [l].[START_DATE] <= @__targetDate_1 AND [l].[END_DATE] >= @__targetDate_1
2026-01-28 17:02:22.620 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__employeeIds_0='?' (Size = 4000), @__targetDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[OT_REQUEST_ID], [o].[APPROVED_BY], [o].[APPROVED_HOURS], [o].[CREATED_AT], [o].[CREATED_BY], [o].[EMPLOYEE_ID], [o].[HOURS_REQUESTED], [o].[IS_DELETED], [o].[REASON], [o].[REQUEST_DATE], [o].[STATUS], [o].[UPDATED_AT], [o].[UPDATED_BY], [o].[VERSION_NO], [o].[WORK_DATE]
FROM [HR_ATTENDANCE].[OVERTIME_REQUESTS] AS [o]
WHERE [o].[EMPLOYEE_ID] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__employeeIds_0) WITH ([value] int '$') AS [e]
) AND [o].[STATUS] = N'APPROVED' AND [o].[WORK_DATE] = @__targetDate_1
2026-01-28 17:02:22.638 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__targetDate_0='?' (DbType = DateTime2), @__employeeIds_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[RECORD_ID], [d].[ACTUAL_IN_TIME], [d].[ACTUAL_OUT_TIME], [d].[ATTENDANCE_DATE], [d].[CREATED_AT], [d].[CREATED_BY], [d].[EARLY_LEAVE_MINUTES], [d].[EMPLOYEE_ID], [d].[IS_DELETED], [d].[LATE_MINUTES], [d].[OVERTIME_MINUTES], [d].[PLANNED_SHIFT_ID], [d].[STATUS], [d].[UPDATED_AT], [d].[UPDATED_BY], [d].[VERSION_NO]
FROM [HR_ATTENDANCE].[DAILY_ATTENDANCE] AS [d]
WHERE [d].[ATTENDANCE_DATE] = @__targetDate_0 AND [d].[EMPLOYEE_ID] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__employeeIds_1) WITH ([value] int '$') AS [e]
)
2026-01-28 17:02:22.681 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 50), @p5='?' (DbType = Int16), @p6='?' (DbType = Int32), @p7='?' (Size = 1) (DbType = Byte), @p8='?' (DbType = Int16), @p9='?' (DbType = Int16), @p10='?' (DbType = Int32), @p11='?' (Size = 20), @p12='?' (DbType = DateTime2), @p13='?' (Size = 50), @p14='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_ATTENDANCE].[DAILY_ATTENDANCE] ([ACTUAL_IN_TIME], [ACTUAL_OUT_TIME], [ATTENDANCE_DATE], [CREATED_AT], [CREATED_BY], [EARLY_LEAVE_MINUTES], [EMPLOYEE_ID], [IS_DELETED], [LATE_MINUTES], [OVERTIME_MINUTES], [PLANNED_SHIFT_ID], [STATUS], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[RECORD_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2026-01-28 17:02:22.689 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-01-28 17:02:22.693 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Int64'.
2026-01-28 17:02:22.696 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceController.RegisterPunch (HRMS.API) in 425.8552ms
2026-01-28 17:02:22.698 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceController.RegisterPunch (HRMS.API)'
2026-01-28 17:02:22.699 +03:00 [INF] HTTP POST /api/Attendance/punch responded 200 in 438.0192 ms
2026-01-28 17:02:22.701 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Attendance/punch - 200 null application/json; charset=utf-8 585.0246ms
2026-01-28 17:05:43.461 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Attendance/punch - application/json 163
2026-01-28 17:05:43.471 +03:00 [INF] CORS policy execution successful.
2026-01-28 17:05:43.472 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceController.RegisterPunch (HRMS.API)'
2026-01-28 17:05:43.474 +03:00 [INF] Route matched with {action = "RegisterPunch", controller = "Attendance"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int64]] RegisterPunch(HRMS.Application.Features.Attendance.Punch.RegisterPunchCommand) on controller HRMS.API.Controllers.Attendance.AttendanceController (HRMS.API).
2026-01-28 17:05:43.490 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 50), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?' (Size = 1) (DbType = Byte), @p5='?' (Size = 1) (DbType = Byte), @p6='?' (DbType = DateTime2), @p7='?' (Size = 10), @p8='?' (DbType = DateTime2), @p9='?' (Size = 50), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_ATTENDANCE].[RAW_PUNCH_LOGS] ([CREATED_AT], [CREATED_BY], [DEVICE_ID], [EMPLOYEE_ID], [IS_DELETED], [IS_PROCESSED], [PUNCH_TIME], [PUNCH_TYPE], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2026-01-28 17:05:43.500 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-01-28 17:05:43.515 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__targetDate_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[ROSTER_ID], [e].[CREATED_AT], [e].[CREATED_BY], [e].[EMPLOYEE_ID], [e].[IS_DELETED], [e].[IS_OFF_DAY], [e].[ROSTER_DATE], [e].[SHIFT_ID], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO], [s].[SHIFT_ID], [s].[CREATED_AT], [s].[CREATED_BY], [s].[END_TIME], [s].[GRACE_PERIOD_MINS], [s].[HOURS_COUNT], [s].[IS_CROSS_DAY], [s].[IS_DELETED], [s].[SHIFT_NAME_AR], [s].[START_TIME], [s].[UPDATED_AT], [s].[UPDATED_BY], [s].[VERSION_NO]
FROM [HR_ATTENDANCE].[EMPLOYEE_ROSTERS] AS [e]
LEFT JOIN [HR_ATTENDANCE].[SHIFT_TYPES] AS [s] ON [e].[SHIFT_ID] = [s].[SHIFT_ID]
WHERE [e].[ROSTER_DATE] = @__targetDate_0
2026-01-28 17:05:43.529 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__employeeIds_0='?' (Size = 4000), @__startRange_1='?' (DbType = DateTime2), @__endRange_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[LOG_ID], [r].[CREATED_AT], [r].[CREATED_BY], [r].[DEVICE_ID], [r].[EMPLOYEE_ID], [r].[IS_DELETED], [r].[IS_PROCESSED], [r].[PUNCH_TIME], [r].[PUNCH_TYPE], [r].[UPDATED_AT], [r].[UPDATED_BY], [r].[VERSION_NO]
FROM [HR_ATTENDANCE].[RAW_PUNCH_LOGS] AS [r]
WHERE [r].[EMPLOYEE_ID] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__employeeIds_0) WITH ([value] int '$') AS [e]
) AND [r].[PUNCH_TIME] >= @__startRange_1 AND [r].[PUNCH_TIME] < @__endRange_2
2026-01-28 17:05:43.541 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__employeeIds_0='?' (Size = 4000), @__targetDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[REQUEST_ID], [l].[ATTACHMENT_PATH], [l].[CREATED_AT], [l].[CREATED_BY], [l].[DAYS_COUNT], [l].[EMPLOYEE_ID], [l].[END_DATE], [l].[IS_DELETED], [l].[IS_POSTED_TO_BALANCE], [l].[LEAVE_TYPE_ID], [l].[REASON], [l].[REJECTION_REASON], [l].[START_DATE], [l].[STATUS], [l].[UPDATED_AT], [l].[UPDATED_BY], [l].[VERSION_NO]
FROM [HR_LEAVES].[LEAVE_REQUESTS] AS [l]
WHERE [l].[EMPLOYEE_ID] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__employeeIds_0) WITH ([value] int '$') AS [e]
) AND [l].[STATUS] = N'APPROVED' AND [l].[START_DATE] <= @__targetDate_1 AND [l].[END_DATE] >= @__targetDate_1
2026-01-28 17:05:43.552 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__employeeIds_0='?' (Size = 4000), @__targetDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[OT_REQUEST_ID], [o].[APPROVED_BY], [o].[APPROVED_HOURS], [o].[CREATED_AT], [o].[CREATED_BY], [o].[EMPLOYEE_ID], [o].[HOURS_REQUESTED], [o].[IS_DELETED], [o].[REASON], [o].[REQUEST_DATE], [o].[STATUS], [o].[UPDATED_AT], [o].[UPDATED_BY], [o].[VERSION_NO], [o].[WORK_DATE]
FROM [HR_ATTENDANCE].[OVERTIME_REQUESTS] AS [o]
WHERE [o].[EMPLOYEE_ID] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__employeeIds_0) WITH ([value] int '$') AS [e]
) AND [o].[STATUS] = N'APPROVED' AND [o].[WORK_DATE] = @__targetDate_1
2026-01-28 17:05:43.569 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__targetDate_0='?' (DbType = DateTime2), @__employeeIds_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[RECORD_ID], [d].[ACTUAL_IN_TIME], [d].[ACTUAL_OUT_TIME], [d].[ATTENDANCE_DATE], [d].[CREATED_AT], [d].[CREATED_BY], [d].[EARLY_LEAVE_MINUTES], [d].[EMPLOYEE_ID], [d].[IS_DELETED], [d].[LATE_MINUTES], [d].[OVERTIME_MINUTES], [d].[PLANNED_SHIFT_ID], [d].[STATUS], [d].[UPDATED_AT], [d].[UPDATED_BY], [d].[VERSION_NO]
FROM [HR_ATTENDANCE].[DAILY_ATTENDANCE] AS [d]
WHERE [d].[ATTENDANCE_DATE] = @__targetDate_0 AND [d].[EMPLOYEE_ID] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__employeeIds_1) WITH ([value] int '$') AS [e]
)
2026-01-28 17:05:43.602 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200), @p9='?' (DbType = Int64), @p10='?' (DbType = Int32), @p11='?' (DbType = DateTime2), @p12='?' (DbType = DateTime2), @p13='?' (DbType = DateTime2), @p14='?' (DbType = DateTime2), @p15='?' (Size = 50), @p16='?' (DbType = Int16), @p17='?' (DbType = Int32), @p18='?' (Size = 1) (DbType = Byte), @p19='?' (DbType = Int16), @p20='?' (DbType = Int16), @p21='?' (DbType = Int32), @p22='?' (Size = 20), @p23='?' (DbType = DateTime2), @p24='?' (Size = 50), @p25='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
DELETE FROM [HR_ATTENDANCE].[DAILY_ATTENDANCE]
OUTPUT 1
WHERE [RECORD_ID] = @p9 AND [VERSION_NO] = @p10;
INSERT INTO [HR_ATTENDANCE].[DAILY_ATTENDANCE] ([ACTUAL_IN_TIME], [ACTUAL_OUT_TIME], [ATTENDANCE_DATE], [CREATED_AT], [CREATED_BY], [EARLY_LEAVE_MINUTES], [EMPLOYEE_ID], [IS_DELETED], [LATE_MINUTES], [OVERTIME_MINUTES], [PLANNED_SHIFT_ID], [STATUS], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[RECORD_ID]
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25);
2026-01-28 17:05:43.621 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-01-28 17:05:43.625 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Int64'.
2026-01-28 17:05:43.626 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceController.RegisterPunch (HRMS.API) in 149.4165ms
2026-01-28 17:05:43.627 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceController.RegisterPunch (HRMS.API)'
2026-01-28 17:05:43.629 +03:00 [INF] HTTP POST /api/Attendance/punch responded 200 in 157.6827 ms
2026-01-28 17:05:43.632 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Attendance/punch - 200 null application/json; charset=utf-8 171.1815ms
2026-01-28 17:07:30.411 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/AttendanceSettings/process-attendance - application/json 46
2026-01-28 17:07:30.420 +03:00 [INF] CORS policy execution successful.
2026-01-28 17:07:30.421 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.ProcessAttendance (HRMS.API)'
2026-01-28 17:07:30.429 +03:00 [INF] Route matched with {action = "ProcessAttendance", controller = "AttendanceSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] ProcessAttendance(HRMS.Application.Features.Attendance.Process.Commands.ProcessAttendance.ProcessAttendanceCommand) on controller HRMS.API.Controllers.Attendance.AttendanceSettingsController (HRMS.API).
2026-01-28 17:07:30.453 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__targetDate_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[ROSTER_ID], [e].[CREATED_AT], [e].[CREATED_BY], [e].[EMPLOYEE_ID], [e].[IS_DELETED], [e].[IS_OFF_DAY], [e].[ROSTER_DATE], [e].[SHIFT_ID], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO], [s].[SHIFT_ID], [s].[CREATED_AT], [s].[CREATED_BY], [s].[END_TIME], [s].[GRACE_PERIOD_MINS], [s].[HOURS_COUNT], [s].[IS_CROSS_DAY], [s].[IS_DELETED], [s].[SHIFT_NAME_AR], [s].[START_TIME], [s].[UPDATED_AT], [s].[UPDATED_BY], [s].[VERSION_NO]
FROM [HR_ATTENDANCE].[EMPLOYEE_ROSTERS] AS [e]
LEFT JOIN [HR_ATTENDANCE].[SHIFT_TYPES] AS [s] ON [e].[SHIFT_ID] = [s].[SHIFT_ID]
WHERE [e].[ROSTER_DATE] = @__targetDate_0
2026-01-28 17:07:30.463 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__employeeIds_0='?' (Size = 4000), @__startRange_1='?' (DbType = DateTime2), @__endRange_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[LOG_ID], [r].[CREATED_AT], [r].[CREATED_BY], [r].[DEVICE_ID], [r].[EMPLOYEE_ID], [r].[IS_DELETED], [r].[IS_PROCESSED], [r].[PUNCH_TIME], [r].[PUNCH_TYPE], [r].[UPDATED_AT], [r].[UPDATED_BY], [r].[VERSION_NO]
FROM [HR_ATTENDANCE].[RAW_PUNCH_LOGS] AS [r]
WHERE [r].[EMPLOYEE_ID] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__employeeIds_0) WITH ([value] int '$') AS [e]
) AND [r].[PUNCH_TIME] >= @__startRange_1 AND [r].[PUNCH_TIME] < @__endRange_2
2026-01-28 17:07:30.474 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__employeeIds_0='?' (Size = 4000), @__targetDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[REQUEST_ID], [l].[ATTACHMENT_PATH], [l].[CREATED_AT], [l].[CREATED_BY], [l].[DAYS_COUNT], [l].[EMPLOYEE_ID], [l].[END_DATE], [l].[IS_DELETED], [l].[IS_POSTED_TO_BALANCE], [l].[LEAVE_TYPE_ID], [l].[REASON], [l].[REJECTION_REASON], [l].[START_DATE], [l].[STATUS], [l].[UPDATED_AT], [l].[UPDATED_BY], [l].[VERSION_NO]
FROM [HR_LEAVES].[LEAVE_REQUESTS] AS [l]
WHERE [l].[EMPLOYEE_ID] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__employeeIds_0) WITH ([value] int '$') AS [e]
) AND [l].[STATUS] = N'APPROVED' AND [l].[START_DATE] <= @__targetDate_1 AND [l].[END_DATE] >= @__targetDate_1
2026-01-28 17:07:30.484 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__employeeIds_0='?' (Size = 4000), @__targetDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[OT_REQUEST_ID], [o].[APPROVED_BY], [o].[APPROVED_HOURS], [o].[CREATED_AT], [o].[CREATED_BY], [o].[EMPLOYEE_ID], [o].[HOURS_REQUESTED], [o].[IS_DELETED], [o].[REASON], [o].[REQUEST_DATE], [o].[STATUS], [o].[UPDATED_AT], [o].[UPDATED_BY], [o].[VERSION_NO], [o].[WORK_DATE]
FROM [HR_ATTENDANCE].[OVERTIME_REQUESTS] AS [o]
WHERE [o].[EMPLOYEE_ID] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__employeeIds_0) WITH ([value] int '$') AS [e]
) AND [o].[STATUS] = N'APPROVED' AND [o].[WORK_DATE] = @__targetDate_1
2026-01-28 17:07:30.495 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__targetDate_0='?' (DbType = DateTime2), @__employeeIds_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[RECORD_ID], [d].[ACTUAL_IN_TIME], [d].[ACTUAL_OUT_TIME], [d].[ATTENDANCE_DATE], [d].[CREATED_AT], [d].[CREATED_BY], [d].[EARLY_LEAVE_MINUTES], [d].[EMPLOYEE_ID], [d].[IS_DELETED], [d].[LATE_MINUTES], [d].[OVERTIME_MINUTES], [d].[PLANNED_SHIFT_ID], [d].[STATUS], [d].[UPDATED_AT], [d].[UPDATED_BY], [d].[VERSION_NO]
FROM [HR_ATTENDANCE].[DAILY_ATTENDANCE] AS [d]
WHERE [d].[ATTENDANCE_DATE] = @__targetDate_0 AND [d].[EMPLOYEE_ID] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__employeeIds_1) WITH ([value] int '$') AS [e]
)
2026-01-28 17:07:30.511 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200), @p9='?' (DbType = Int64), @p10='?' (DbType = Int32), @p11='?' (DbType = DateTime2), @p12='?' (DbType = DateTime2), @p13='?' (DbType = DateTime2), @p14='?' (DbType = DateTime2), @p15='?' (Size = 50), @p16='?' (DbType = Int16), @p17='?' (DbType = Int32), @p18='?' (Size = 1) (DbType = Byte), @p19='?' (DbType = Int16), @p20='?' (DbType = Int16), @p21='?' (DbType = Int32), @p22='?' (Size = 20), @p23='?' (DbType = DateTime2), @p24='?' (Size = 50), @p25='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
DELETE FROM [HR_ATTENDANCE].[DAILY_ATTENDANCE]
OUTPUT 1
WHERE [RECORD_ID] = @p9 AND [VERSION_NO] = @p10;
INSERT INTO [HR_ATTENDANCE].[DAILY_ATTENDANCE] ([ACTUAL_IN_TIME], [ACTUAL_OUT_TIME], [ATTENDANCE_DATE], [CREATED_AT], [CREATED_BY], [EARLY_LEAVE_MINUTES], [EMPLOYEE_ID], [IS_DELETED], [LATE_MINUTES], [OVERTIME_MINUTES], [PLANNED_SHIFT_ID], [STATUS], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[RECORD_ID]
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25);
2026-01-28 17:07:30.521 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-01-28 17:07:30.525 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Int32'.
2026-01-28 17:07:30.527 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceSettingsController.ProcessAttendance (HRMS.API) in 95.1535ms
2026-01-28 17:07:30.530 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.ProcessAttendance (HRMS.API)'
2026-01-28 17:07:30.532 +03:00 [INF] HTTP POST /api/AttendanceSettings/process-attendance responded 200 in 112.0269 ms
2026-01-28 17:07:30.535 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/AttendanceSettings/process-attendance - 200 null application/json; charset=utf-8 123.4292ms
2026-01-28 17:11:19.699 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/AttendanceSettings/apply-overtime - application/json 147
2026-01-28 17:11:19.705 +03:00 [INF] CORS policy execution successful.
2026-01-28 17:11:19.823 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.ApplyOvertime (HRMS.API)'
2026-01-28 17:11:19.837 +03:00 [INF] Route matched with {action = "ApplyOvertime", controller = "AttendanceSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] ApplyOvertime(HRMS.Application.Features.Attendance.Requests.ApplyOvertimeCommand) on controller HRMS.API.Controllers.Attendance.AttendanceSettingsController (HRMS.API).
2026-01-28 17:11:19.883 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__request_WorkDate_Year_0='?' (DbType = Int16), @__request_WorkDate_Month_1='?' (DbType = Byte)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HR_PAYROLL].[PAYROLL_RUNS] AS [p]
        WHERE [p].[Year] = @__request_WorkDate_Year_0 AND [p].[Month] = @__request_WorkDate_Month_1 AND [p].[Status] IN (N'APPROVED', N'PAID')) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-28 17:11:19.932 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Precision = 4) (Scale = 2) (DbType = Decimal), @p2='?' (DbType = DateTime2), @p3='?' (Size = 50), @p4='?' (DbType = Int32), @p5='?' (Precision = 4) (Scale = 2) (DbType = Decimal), @p6='?' (Size = 1) (DbType = Byte), @p7='?' (Size = 200), @p8='?' (DbType = DateTime2), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2), @p11='?' (Size = 50), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_ATTENDANCE].[OVERTIME_REQUESTS] ([APPROVED_BY], [APPROVED_HOURS], [CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [HOURS_REQUESTED], [IS_DELETED], [REASON], [REQUEST_DATE], [STATUS], [UPDATED_AT], [UPDATED_BY], [VERSION_NO], [WORK_DATE])
OUTPUT INSERTED.[OT_REQUEST_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2026-01-28 17:11:19.942 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-01-28 17:11:19.948 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Int32'.
2026-01-28 17:11:19.950 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceSettingsController.ApplyOvertime (HRMS.API) in 104.2979ms
2026-01-28 17:11:19.953 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.ApplyOvertime (HRMS.API)'
2026-01-28 17:11:19.954 +03:00 [INF] HTTP POST /api/AttendanceSettings/apply-overtime responded 200 in 249.6721 ms
2026-01-28 17:11:19.956 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/AttendanceSettings/apply-overtime - 200 null application/json; charset=utf-8 256.8468ms
2026-01-28 17:14:19.695 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/AttendanceSettings/action-overtime - application/json 189
2026-01-28 17:14:19.701 +03:00 [INF] CORS policy execution successful.
2026-01-28 17:14:19.702 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.ActionOvertime (HRMS.API)'
2026-01-28 17:14:19.710 +03:00 [INF] Route matched with {action = "ActionOvertime", controller = "AttendanceSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Boolean]] ActionOvertime(HRMS.Application.Features.Attendance.Requests.ActionOvertimeCommand) on controller HRMS.API.Controllers.Attendance.AttendanceSettingsController (HRMS.API).
2026-01-28 17:14:19.858 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__request_RequestId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[OT_REQUEST_ID], [o].[APPROVED_BY], [o].[APPROVED_HOURS], [o].[CREATED_AT], [o].[CREATED_BY], [o].[EMPLOYEE_ID], [o].[HOURS_REQUESTED], [o].[IS_DELETED], [o].[REASON], [o].[REQUEST_DATE], [o].[STATUS], [o].[UPDATED_AT], [o].[UPDATED_BY], [o].[VERSION_NO], [o].[WORK_DATE]
FROM [HR_ATTENDANCE].[OVERTIME_REQUESTS] AS [o]
WHERE [o].[OT_REQUEST_ID] = @__request_RequestId_0
2026-01-28 17:14:19.874 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__otRequest_WorkDate_Year_0='?' (DbType = Int16), @__otRequest_WorkDate_Month_1='?' (DbType = Byte)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HR_PAYROLL].[PAYROLL_RUNS] AS [p]
        WHERE [p].[Year] = @__otRequest_WorkDate_Year_0 AND [p].[Month] = @__otRequest_WorkDate_Month_1 AND [p].[Status] IN (N'APPROVED', N'PAID')) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-28 17:14:19.901 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200), @p12='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (Precision = 4) (Scale = 2) (DbType = Decimal), @p11='?' (Size = 20), @p13='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
UPDATE [HR_ATTENDANCE].[OVERTIME_REQUESTS] SET [APPROVED_BY] = @p9, [APPROVED_HOURS] = @p10, [STATUS] = @p11
OUTPUT 1
WHERE [OT_REQUEST_ID] = @p12 AND [VERSION_NO] = @p13;
2026-01-28 17:14:19.910 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'HRMS.Infrastructure.Data.HRMSDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_OVERTIME_REQUESTS_EMPLOYEES_APPROVED_BY". The conflict occurred in database "HRMS_Hospital", table "HR_PERSONNEL.EMPLOYEES", column 'EMPLOYEE_ID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:c8366b3d-491f-4ad5-9b10-10f0547d638c
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_OVERTIME_REQUESTS_EMPLOYEES_APPROVED_BY". The conflict occurred in database "HRMS_Hospital", table "HR_PERSONNEL.EMPLOYEES", column 'EMPLOYEE_ID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:c8366b3d-491f-4ad5-9b10-10f0547d638c
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2026-01-28 17:14:39.361 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceSettingsController.ActionOvertime (HRMS.API) in 19647.5684ms
2026-01-28 17:14:39.384 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.ActionOvertime (HRMS.API)'
2026-01-28 17:14:39.853 +03:00 [ERR] Global Exception Caught: An error occurred while saving the entity changes. See the inner exception for details.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_OVERTIME_REQUESTS_EMPLOYEES_APPROVED_BY". The conflict occurred in database "HRMS_Hospital", table "HR_PERSONNEL.EMPLOYEES", column 'EMPLOYEE_ID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:c8366b3d-491f-4ad5-9b10-10f0547d638c
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at HRMS.Infrastructure.Data.HRMSDbContext.SaveChangesAsync(CancellationToken cancellationToken) in G:\HRMS_Hospital\Backend\HRMS\HRMS.Infrastructure\Data\HRMSDbContext.cs:line 37
   at HRMS.Application.Features.Attendance.Requests.ActionOvertimeHandler.Handle(ActionOvertimeCommand request, CancellationToken cancellationToken) in G:\HRMS_Hospital\Backend\HRMS\HRMS.Application\Features\Attendance\Requests\OvertimeFeatures.cs:line 192
   at HRMS.API.Controllers.Attendance.AttendanceSettingsController.ActionOvertime(ActionOvertimeCommand command) in G:\HRMS_Hospital\Backend\HRMS\HRMS.API\Controllers\Attendance\AttendanceSettingsController.cs:line 104
   at lambda_method1009(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at HRMS.API.Middleware.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in G:\HRMS_Hospital\Backend\HRMS\HRMS.API\Middleware\GlobalExceptionMiddleware.cs:line 25
2026-01-28 17:14:39.891 +03:00 [INF] HTTP POST /api/AttendanceSettings/action-overtime responded 400 in 20190.0624 ms
2026-01-28 17:14:39.893 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/AttendanceSettings/action-overtime - 400 null application/json 20198.1665ms
2026-01-28 17:14:50.055 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/AttendanceSettings/action-overtime - application/json 190
2026-01-28 17:14:50.058 +03:00 [INF] CORS policy execution successful.
2026-01-28 17:14:50.059 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.ActionOvertime (HRMS.API)'
2026-01-28 17:14:50.060 +03:00 [INF] Route matched with {action = "ActionOvertime", controller = "AttendanceSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Boolean]] ActionOvertime(HRMS.Application.Features.Attendance.Requests.ActionOvertimeCommand) on controller HRMS.API.Controllers.Attendance.AttendanceSettingsController (HRMS.API).
2026-01-28 17:14:50.067 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__request_RequestId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[OT_REQUEST_ID], [o].[APPROVED_BY], [o].[APPROVED_HOURS], [o].[CREATED_AT], [o].[CREATED_BY], [o].[EMPLOYEE_ID], [o].[HOURS_REQUESTED], [o].[IS_DELETED], [o].[REASON], [o].[REQUEST_DATE], [o].[STATUS], [o].[UPDATED_AT], [o].[UPDATED_BY], [o].[VERSION_NO], [o].[WORK_DATE]
FROM [HR_ATTENDANCE].[OVERTIME_REQUESTS] AS [o]
WHERE [o].[OT_REQUEST_ID] = @__request_RequestId_0
2026-01-28 17:14:50.137 +03:00 [INF] Executed DbCommand (62ms) [Parameters=[@__otRequest_WorkDate_Year_0='?' (DbType = Int16), @__otRequest_WorkDate_Month_1='?' (DbType = Byte)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HR_PAYROLL].[PAYROLL_RUNS] AS [p]
        WHERE [p].[Year] = @__otRequest_WorkDate_Year_0 AND [p].[Month] = @__otRequest_WorkDate_Month_1 AND [p].[Status] IN (N'APPROVED', N'PAID')) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-28 17:14:50.205 +03:00 [INF] Executed DbCommand (22ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200), @p12='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (Precision = 4) (Scale = 2) (DbType = Decimal), @p11='?' (Size = 20), @p13='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
UPDATE [HR_ATTENDANCE].[OVERTIME_REQUESTS] SET [APPROVED_BY] = @p9, [APPROVED_HOURS] = @p10, [STATUS] = @p11
OUTPUT 1
WHERE [OT_REQUEST_ID] = @p12 AND [VERSION_NO] = @p13;
2026-01-28 17:14:50.214 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__targetDate_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[ROSTER_ID], [e].[CREATED_AT], [e].[CREATED_BY], [e].[EMPLOYEE_ID], [e].[IS_DELETED], [e].[IS_OFF_DAY], [e].[ROSTER_DATE], [e].[SHIFT_ID], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO], [s].[SHIFT_ID], [s].[CREATED_AT], [s].[CREATED_BY], [s].[END_TIME], [s].[GRACE_PERIOD_MINS], [s].[HOURS_COUNT], [s].[IS_CROSS_DAY], [s].[IS_DELETED], [s].[SHIFT_NAME_AR], [s].[START_TIME], [s].[UPDATED_AT], [s].[UPDATED_BY], [s].[VERSION_NO]
FROM [HR_ATTENDANCE].[EMPLOYEE_ROSTERS] AS [e]
LEFT JOIN [HR_ATTENDANCE].[SHIFT_TYPES] AS [s] ON [e].[SHIFT_ID] = [s].[SHIFT_ID]
WHERE [e].[ROSTER_DATE] = @__targetDate_0
2026-01-28 17:14:50.222 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__employeeIds_0='?' (Size = 4000), @__startRange_1='?' (DbType = DateTime2), @__endRange_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[LOG_ID], [r].[CREATED_AT], [r].[CREATED_BY], [r].[DEVICE_ID], [r].[EMPLOYEE_ID], [r].[IS_DELETED], [r].[IS_PROCESSED], [r].[PUNCH_TIME], [r].[PUNCH_TYPE], [r].[UPDATED_AT], [r].[UPDATED_BY], [r].[VERSION_NO]
FROM [HR_ATTENDANCE].[RAW_PUNCH_LOGS] AS [r]
WHERE [r].[EMPLOYEE_ID] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__employeeIds_0) WITH ([value] int '$') AS [e]
) AND [r].[PUNCH_TIME] >= @__startRange_1 AND [r].[PUNCH_TIME] < @__endRange_2
2026-01-28 17:14:50.229 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__employeeIds_0='?' (Size = 4000), @__targetDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[REQUEST_ID], [l].[ATTACHMENT_PATH], [l].[CREATED_AT], [l].[CREATED_BY], [l].[DAYS_COUNT], [l].[EMPLOYEE_ID], [l].[END_DATE], [l].[IS_DELETED], [l].[IS_POSTED_TO_BALANCE], [l].[LEAVE_TYPE_ID], [l].[REASON], [l].[REJECTION_REASON], [l].[START_DATE], [l].[STATUS], [l].[UPDATED_AT], [l].[UPDATED_BY], [l].[VERSION_NO]
FROM [HR_LEAVES].[LEAVE_REQUESTS] AS [l]
WHERE [l].[EMPLOYEE_ID] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__employeeIds_0) WITH ([value] int '$') AS [e]
) AND [l].[STATUS] = N'APPROVED' AND [l].[START_DATE] <= @__targetDate_1 AND [l].[END_DATE] >= @__targetDate_1
2026-01-28 17:14:50.237 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__employeeIds_0='?' (Size = 4000), @__targetDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[OT_REQUEST_ID], [o].[APPROVED_BY], [o].[APPROVED_HOURS], [o].[CREATED_AT], [o].[CREATED_BY], [o].[EMPLOYEE_ID], [o].[HOURS_REQUESTED], [o].[IS_DELETED], [o].[REASON], [o].[REQUEST_DATE], [o].[STATUS], [o].[UPDATED_AT], [o].[UPDATED_BY], [o].[VERSION_NO], [o].[WORK_DATE]
FROM [HR_ATTENDANCE].[OVERTIME_REQUESTS] AS [o]
WHERE [o].[EMPLOYEE_ID] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__employeeIds_0) WITH ([value] int '$') AS [e]
) AND [o].[STATUS] = N'APPROVED' AND [o].[WORK_DATE] = @__targetDate_1
2026-01-28 17:14:50.247 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__targetDate_0='?' (DbType = DateTime2), @__employeeIds_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[RECORD_ID], [d].[ACTUAL_IN_TIME], [d].[ACTUAL_OUT_TIME], [d].[ATTENDANCE_DATE], [d].[CREATED_AT], [d].[CREATED_BY], [d].[EARLY_LEAVE_MINUTES], [d].[EMPLOYEE_ID], [d].[IS_DELETED], [d].[LATE_MINUTES], [d].[OVERTIME_MINUTES], [d].[PLANNED_SHIFT_ID], [d].[STATUS], [d].[UPDATED_AT], [d].[UPDATED_BY], [d].[VERSION_NO]
FROM [HR_ATTENDANCE].[DAILY_ATTENDANCE] AS [d]
WHERE [d].[ATTENDANCE_DATE] = @__targetDate_0 AND [d].[EMPLOYEE_ID] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__employeeIds_1) WITH ([value] int '$') AS [e]
)
2026-01-28 17:14:50.265 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200), @p9='?' (DbType = Int64), @p10='?' (DbType = Int32), @p11='?' (DbType = DateTime2), @p12='?' (DbType = DateTime2), @p13='?' (DbType = DateTime2), @p14='?' (DbType = DateTime2), @p15='?' (Size = 50), @p16='?' (DbType = Int16), @p17='?' (DbType = Int32), @p18='?' (Size = 1) (DbType = Byte), @p19='?' (DbType = Int16), @p20='?' (DbType = Int16), @p21='?' (DbType = Int32), @p22='?' (Size = 20), @p23='?' (DbType = DateTime2), @p24='?' (Size = 50), @p25='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
DELETE FROM [HR_ATTENDANCE].[DAILY_ATTENDANCE]
OUTPUT 1
WHERE [RECORD_ID] = @p9 AND [VERSION_NO] = @p10;
INSERT INTO [HR_ATTENDANCE].[DAILY_ATTENDANCE] ([ACTUAL_IN_TIME], [ACTUAL_OUT_TIME], [ATTENDANCE_DATE], [CREATED_AT], [CREATED_BY], [EARLY_LEAVE_MINUTES], [EMPLOYEE_ID], [IS_DELETED], [LATE_MINUTES], [OVERTIME_MINUTES], [PLANNED_SHIFT_ID], [STATUS], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[RECORD_ID]
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25);
2026-01-28 17:14:50.273 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-01-28 17:14:50.277 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Boolean'.
2026-01-28 17:14:50.306 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceSettingsController.ActionOvertime (HRMS.API) in 243.5904ms
2026-01-28 17:14:50.308 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.ActionOvertime (HRMS.API)'
2026-01-28 17:14:50.309 +03:00 [INF] HTTP POST /api/AttendanceSettings/action-overtime responded 200 in 251.6534 ms
2026-01-28 17:14:50.311 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/AttendanceSettings/action-overtime - 200 null application/json; charset=utf-8 256.8062ms
2026-01-28 17:18:03.578 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/AttendanceSettings/process-attendance - application/json 46
2026-01-28 17:18:03.587 +03:00 [INF] CORS policy execution successful.
2026-01-28 17:18:03.587 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.ProcessAttendance (HRMS.API)'
2026-01-28 17:18:03.589 +03:00 [INF] Route matched with {action = "ProcessAttendance", controller = "AttendanceSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] ProcessAttendance(HRMS.Application.Features.Attendance.Process.Commands.ProcessAttendance.ProcessAttendanceCommand) on controller HRMS.API.Controllers.Attendance.AttendanceSettingsController (HRMS.API).
2026-01-28 17:18:03.642 +03:00 [INF] Executed DbCommand (46ms) [Parameters=[@__targetDate_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[ROSTER_ID], [e].[CREATED_AT], [e].[CREATED_BY], [e].[EMPLOYEE_ID], [e].[IS_DELETED], [e].[IS_OFF_DAY], [e].[ROSTER_DATE], [e].[SHIFT_ID], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO], [s].[SHIFT_ID], [s].[CREATED_AT], [s].[CREATED_BY], [s].[END_TIME], [s].[GRACE_PERIOD_MINS], [s].[HOURS_COUNT], [s].[IS_CROSS_DAY], [s].[IS_DELETED], [s].[SHIFT_NAME_AR], [s].[START_TIME], [s].[UPDATED_AT], [s].[UPDATED_BY], [s].[VERSION_NO]
FROM [HR_ATTENDANCE].[EMPLOYEE_ROSTERS] AS [e]
LEFT JOIN [HR_ATTENDANCE].[SHIFT_TYPES] AS [s] ON [e].[SHIFT_ID] = [s].[SHIFT_ID]
WHERE [e].[ROSTER_DATE] = @__targetDate_0
2026-01-28 17:18:03.740 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__employeeIds_0='?' (Size = 4000), @__startRange_1='?' (DbType = DateTime2), @__endRange_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[LOG_ID], [r].[CREATED_AT], [r].[CREATED_BY], [r].[DEVICE_ID], [r].[EMPLOYEE_ID], [r].[IS_DELETED], [r].[IS_PROCESSED], [r].[PUNCH_TIME], [r].[PUNCH_TYPE], [r].[UPDATED_AT], [r].[UPDATED_BY], [r].[VERSION_NO]
FROM [HR_ATTENDANCE].[RAW_PUNCH_LOGS] AS [r]
WHERE [r].[EMPLOYEE_ID] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__employeeIds_0) WITH ([value] int '$') AS [e]
) AND [r].[PUNCH_TIME] >= @__startRange_1 AND [r].[PUNCH_TIME] < @__endRange_2
2026-01-28 17:18:03.757 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@__employeeIds_0='?' (Size = 4000), @__targetDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[REQUEST_ID], [l].[ATTACHMENT_PATH], [l].[CREATED_AT], [l].[CREATED_BY], [l].[DAYS_COUNT], [l].[EMPLOYEE_ID], [l].[END_DATE], [l].[IS_DELETED], [l].[IS_POSTED_TO_BALANCE], [l].[LEAVE_TYPE_ID], [l].[REASON], [l].[REJECTION_REASON], [l].[START_DATE], [l].[STATUS], [l].[UPDATED_AT], [l].[UPDATED_BY], [l].[VERSION_NO]
FROM [HR_LEAVES].[LEAVE_REQUESTS] AS [l]
WHERE [l].[EMPLOYEE_ID] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__employeeIds_0) WITH ([value] int '$') AS [e]
) AND [l].[STATUS] = N'APPROVED' AND [l].[START_DATE] <= @__targetDate_1 AND [l].[END_DATE] >= @__targetDate_1
2026-01-28 17:18:03.770 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__employeeIds_0='?' (Size = 4000), @__targetDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[OT_REQUEST_ID], [o].[APPROVED_BY], [o].[APPROVED_HOURS], [o].[CREATED_AT], [o].[CREATED_BY], [o].[EMPLOYEE_ID], [o].[HOURS_REQUESTED], [o].[IS_DELETED], [o].[REASON], [o].[REQUEST_DATE], [o].[STATUS], [o].[UPDATED_AT], [o].[UPDATED_BY], [o].[VERSION_NO], [o].[WORK_DATE]
FROM [HR_ATTENDANCE].[OVERTIME_REQUESTS] AS [o]
WHERE [o].[EMPLOYEE_ID] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__employeeIds_0) WITH ([value] int '$') AS [e]
) AND [o].[STATUS] = N'APPROVED' AND [o].[WORK_DATE] = @__targetDate_1
2026-01-28 17:18:03.781 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__targetDate_0='?' (DbType = DateTime2), @__employeeIds_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[RECORD_ID], [d].[ACTUAL_IN_TIME], [d].[ACTUAL_OUT_TIME], [d].[ATTENDANCE_DATE], [d].[CREATED_AT], [d].[CREATED_BY], [d].[EARLY_LEAVE_MINUTES], [d].[EMPLOYEE_ID], [d].[IS_DELETED], [d].[LATE_MINUTES], [d].[OVERTIME_MINUTES], [d].[PLANNED_SHIFT_ID], [d].[STATUS], [d].[UPDATED_AT], [d].[UPDATED_BY], [d].[VERSION_NO]
FROM [HR_ATTENDANCE].[DAILY_ATTENDANCE] AS [d]
WHERE [d].[ATTENDANCE_DATE] = @__targetDate_0 AND [d].[EMPLOYEE_ID] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__employeeIds_1) WITH ([value] int '$') AS [e]
)
2026-01-28 17:18:03.796 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200), @p9='?' (DbType = Int64), @p10='?' (DbType = Int32), @p11='?' (DbType = DateTime2), @p12='?' (DbType = DateTime2), @p13='?' (DbType = DateTime2), @p14='?' (DbType = DateTime2), @p15='?' (Size = 50), @p16='?' (DbType = Int16), @p17='?' (DbType = Int32), @p18='?' (Size = 1) (DbType = Byte), @p19='?' (DbType = Int16), @p20='?' (DbType = Int16), @p21='?' (DbType = Int32), @p22='?' (Size = 20), @p23='?' (DbType = DateTime2), @p24='?' (Size = 50), @p25='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
DELETE FROM [HR_ATTENDANCE].[DAILY_ATTENDANCE]
OUTPUT 1
WHERE [RECORD_ID] = @p9 AND [VERSION_NO] = @p10;
INSERT INTO [HR_ATTENDANCE].[DAILY_ATTENDANCE] ([ACTUAL_IN_TIME], [ACTUAL_OUT_TIME], [ATTENDANCE_DATE], [CREATED_AT], [CREATED_BY], [EARLY_LEAVE_MINUTES], [EMPLOYEE_ID], [IS_DELETED], [LATE_MINUTES], [OVERTIME_MINUTES], [PLANNED_SHIFT_ID], [STATUS], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[RECORD_ID]
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25);
2026-01-28 17:18:03.805 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-01-28 17:18:03.809 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Int32'.
2026-01-28 17:18:03.810 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceSettingsController.ProcessAttendance (HRMS.API) in 216.5317ms
2026-01-28 17:18:03.814 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.ProcessAttendance (HRMS.API)'
2026-01-28 17:18:03.816 +03:00 [INF] HTTP POST /api/AttendanceSettings/process-attendance responded 200 in 229.2936 ms
2026-01-28 17:18:03.818 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/AttendanceSettings/process-attendance - 200 null application/json; charset=utf-8 240.3449ms
2026-01-28 17:32:09.431 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/AttendanceSettings/process-attendance - application/json 46
2026-01-28 17:32:09.463 +03:00 [INF] CORS policy execution successful.
2026-01-28 17:32:09.465 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.ProcessAttendance (HRMS.API)'
2026-01-28 17:32:09.467 +03:00 [INF] Route matched with {action = "ProcessAttendance", controller = "AttendanceSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] ProcessAttendance(HRMS.Application.Features.Attendance.Process.Commands.ProcessAttendance.ProcessAttendanceCommand) on controller HRMS.API.Controllers.Attendance.AttendanceSettingsController (HRMS.API).
2026-01-28 17:32:09.484 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__targetDate_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[ROSTER_ID], [e].[CREATED_AT], [e].[CREATED_BY], [e].[EMPLOYEE_ID], [e].[IS_DELETED], [e].[IS_OFF_DAY], [e].[ROSTER_DATE], [e].[SHIFT_ID], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO], [s].[SHIFT_ID], [s].[CREATED_AT], [s].[CREATED_BY], [s].[END_TIME], [s].[GRACE_PERIOD_MINS], [s].[HOURS_COUNT], [s].[IS_CROSS_DAY], [s].[IS_DELETED], [s].[SHIFT_NAME_AR], [s].[START_TIME], [s].[UPDATED_AT], [s].[UPDATED_BY], [s].[VERSION_NO]
FROM [HR_ATTENDANCE].[EMPLOYEE_ROSTERS] AS [e]
LEFT JOIN [HR_ATTENDANCE].[SHIFT_TYPES] AS [s] ON [e].[SHIFT_ID] = [s].[SHIFT_ID]
WHERE [e].[ROSTER_DATE] = @__targetDate_0
2026-01-28 17:32:09.498 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__employeeIds_0='?' (Size = 4000), @__startRange_1='?' (DbType = DateTime2), @__endRange_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[LOG_ID], [r].[CREATED_AT], [r].[CREATED_BY], [r].[DEVICE_ID], [r].[EMPLOYEE_ID], [r].[IS_DELETED], [r].[IS_PROCESSED], [r].[PUNCH_TIME], [r].[PUNCH_TYPE], [r].[UPDATED_AT], [r].[UPDATED_BY], [r].[VERSION_NO]
FROM [HR_ATTENDANCE].[RAW_PUNCH_LOGS] AS [r]
WHERE [r].[EMPLOYEE_ID] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__employeeIds_0) WITH ([value] int '$') AS [e]
) AND [r].[PUNCH_TIME] >= @__startRange_1 AND [r].[PUNCH_TIME] < @__endRange_2
2026-01-28 17:32:09.511 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__employeeIds_0='?' (Size = 4000), @__targetDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[REQUEST_ID], [l].[ATTACHMENT_PATH], [l].[CREATED_AT], [l].[CREATED_BY], [l].[DAYS_COUNT], [l].[EMPLOYEE_ID], [l].[END_DATE], [l].[IS_DELETED], [l].[IS_POSTED_TO_BALANCE], [l].[LEAVE_TYPE_ID], [l].[REASON], [l].[REJECTION_REASON], [l].[START_DATE], [l].[STATUS], [l].[UPDATED_AT], [l].[UPDATED_BY], [l].[VERSION_NO]
FROM [HR_LEAVES].[LEAVE_REQUESTS] AS [l]
WHERE [l].[EMPLOYEE_ID] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__employeeIds_0) WITH ([value] int '$') AS [e]
) AND [l].[STATUS] = N'APPROVED' AND [l].[START_DATE] <= @__targetDate_1 AND [l].[END_DATE] >= @__targetDate_1
2026-01-28 17:32:09.522 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__employeeIds_0='?' (Size = 4000), @__targetDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[OT_REQUEST_ID], [o].[APPROVED_BY], [o].[APPROVED_HOURS], [o].[CREATED_AT], [o].[CREATED_BY], [o].[EMPLOYEE_ID], [o].[HOURS_REQUESTED], [o].[IS_DELETED], [o].[REASON], [o].[REQUEST_DATE], [o].[STATUS], [o].[UPDATED_AT], [o].[UPDATED_BY], [o].[VERSION_NO], [o].[WORK_DATE]
FROM [HR_ATTENDANCE].[OVERTIME_REQUESTS] AS [o]
WHERE [o].[EMPLOYEE_ID] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__employeeIds_0) WITH ([value] int '$') AS [e]
) AND [o].[STATUS] = N'APPROVED' AND [o].[WORK_DATE] = @__targetDate_1
2026-01-28 17:32:09.532 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__targetDate_0='?' (DbType = DateTime2), @__employeeIds_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[RECORD_ID], [d].[ACTUAL_IN_TIME], [d].[ACTUAL_OUT_TIME], [d].[ATTENDANCE_DATE], [d].[CREATED_AT], [d].[CREATED_BY], [d].[EARLY_LEAVE_MINUTES], [d].[EMPLOYEE_ID], [d].[IS_DELETED], [d].[LATE_MINUTES], [d].[OVERTIME_MINUTES], [d].[PLANNED_SHIFT_ID], [d].[STATUS], [d].[UPDATED_AT], [d].[UPDATED_BY], [d].[VERSION_NO]
FROM [HR_ATTENDANCE].[DAILY_ATTENDANCE] AS [d]
WHERE [d].[ATTENDANCE_DATE] = @__targetDate_0 AND [d].[EMPLOYEE_ID] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__employeeIds_1) WITH ([value] int '$') AS [e]
)
2026-01-28 17:32:09.548 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200), @p9='?' (DbType = Int64), @p10='?' (DbType = Int32), @p11='?' (DbType = DateTime2), @p12='?' (DbType = DateTime2), @p13='?' (DbType = DateTime2), @p14='?' (DbType = DateTime2), @p15='?' (Size = 50), @p16='?' (DbType = Int16), @p17='?' (DbType = Int32), @p18='?' (Size = 1) (DbType = Byte), @p19='?' (DbType = Int16), @p20='?' (DbType = Int16), @p21='?' (DbType = Int32), @p22='?' (Size = 20), @p23='?' (DbType = DateTime2), @p24='?' (Size = 50), @p25='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
DELETE FROM [HR_ATTENDANCE].[DAILY_ATTENDANCE]
OUTPUT 1
WHERE [RECORD_ID] = @p9 AND [VERSION_NO] = @p10;
INSERT INTO [HR_ATTENDANCE].[DAILY_ATTENDANCE] ([ACTUAL_IN_TIME], [ACTUAL_OUT_TIME], [ATTENDANCE_DATE], [CREATED_AT], [CREATED_BY], [EARLY_LEAVE_MINUTES], [EMPLOYEE_ID], [IS_DELETED], [LATE_MINUTES], [OVERTIME_MINUTES], [PLANNED_SHIFT_ID], [STATUS], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[RECORD_ID]
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25);
2026-01-28 17:32:09.558 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-01-28 17:32:09.562 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Int32'.
2026-01-28 17:32:09.563 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceSettingsController.ProcessAttendance (HRMS.API) in 94.1612ms
2026-01-28 17:32:09.565 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.ProcessAttendance (HRMS.API)'
2026-01-28 17:32:09.566 +03:00 [INF] HTTP POST /api/AttendanceSettings/process-attendance responded 200 in 103.0257 ms
2026-01-28 17:32:09.569 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/AttendanceSettings/process-attendance - 200 null application/json; charset=utf-8 169.9094ms
2026-01-28 17:32:57.695 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/AttendanceSettings/process-attendance - application/json 32
2026-01-28 17:32:57.702 +03:00 [INF] CORS policy execution successful.
2026-01-28 17:32:57.703 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.ProcessAttendance (HRMS.API)'
2026-01-28 17:32:57.704 +03:00 [INF] Route matched with {action = "ProcessAttendance", controller = "AttendanceSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] ProcessAttendance(HRMS.Application.Features.Attendance.Process.Commands.ProcessAttendance.ProcessAttendanceCommand) on controller HRMS.API.Controllers.Attendance.AttendanceSettingsController (HRMS.API).
2026-01-28 17:32:57.776 +03:00 [INF] Executed DbCommand (65ms) [Parameters=[@__targetDate_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[ROSTER_ID], [e].[CREATED_AT], [e].[CREATED_BY], [e].[EMPLOYEE_ID], [e].[IS_DELETED], [e].[IS_OFF_DAY], [e].[ROSTER_DATE], [e].[SHIFT_ID], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO], [s].[SHIFT_ID], [s].[CREATED_AT], [s].[CREATED_BY], [s].[END_TIME], [s].[GRACE_PERIOD_MINS], [s].[HOURS_COUNT], [s].[IS_CROSS_DAY], [s].[IS_DELETED], [s].[SHIFT_NAME_AR], [s].[START_TIME], [s].[UPDATED_AT], [s].[UPDATED_BY], [s].[VERSION_NO]
FROM [HR_ATTENDANCE].[EMPLOYEE_ROSTERS] AS [e]
LEFT JOIN [HR_ATTENDANCE].[SHIFT_TYPES] AS [s] ON [e].[SHIFT_ID] = [s].[SHIFT_ID]
WHERE [e].[ROSTER_DATE] = @__targetDate_0
2026-01-28 17:32:57.860 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__employeeIds_0='?' (Size = 4000), @__startRange_1='?' (DbType = DateTime2), @__endRange_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[LOG_ID], [r].[CREATED_AT], [r].[CREATED_BY], [r].[DEVICE_ID], [r].[EMPLOYEE_ID], [r].[IS_DELETED], [r].[IS_PROCESSED], [r].[PUNCH_TIME], [r].[PUNCH_TYPE], [r].[UPDATED_AT], [r].[UPDATED_BY], [r].[VERSION_NO]
FROM [HR_ATTENDANCE].[RAW_PUNCH_LOGS] AS [r]
WHERE [r].[EMPLOYEE_ID] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__employeeIds_0) WITH ([value] int '$') AS [e]
) AND [r].[PUNCH_TIME] >= @__startRange_1 AND [r].[PUNCH_TIME] < @__endRange_2
2026-01-28 17:32:57.866 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__employeeIds_0='?' (Size = 4000), @__targetDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[REQUEST_ID], [l].[ATTACHMENT_PATH], [l].[CREATED_AT], [l].[CREATED_BY], [l].[DAYS_COUNT], [l].[EMPLOYEE_ID], [l].[END_DATE], [l].[IS_DELETED], [l].[IS_POSTED_TO_BALANCE], [l].[LEAVE_TYPE_ID], [l].[REASON], [l].[REJECTION_REASON], [l].[START_DATE], [l].[STATUS], [l].[UPDATED_AT], [l].[UPDATED_BY], [l].[VERSION_NO]
FROM [HR_LEAVES].[LEAVE_REQUESTS] AS [l]
WHERE [l].[EMPLOYEE_ID] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__employeeIds_0) WITH ([value] int '$') AS [e]
) AND [l].[STATUS] = N'APPROVED' AND [l].[START_DATE] <= @__targetDate_1 AND [l].[END_DATE] >= @__targetDate_1
2026-01-28 17:32:57.872 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__employeeIds_0='?' (Size = 4000), @__targetDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[OT_REQUEST_ID], [o].[APPROVED_BY], [o].[APPROVED_HOURS], [o].[CREATED_AT], [o].[CREATED_BY], [o].[EMPLOYEE_ID], [o].[HOURS_REQUESTED], [o].[IS_DELETED], [o].[REASON], [o].[REQUEST_DATE], [o].[STATUS], [o].[UPDATED_AT], [o].[UPDATED_BY], [o].[VERSION_NO], [o].[WORK_DATE]
FROM [HR_ATTENDANCE].[OVERTIME_REQUESTS] AS [o]
WHERE [o].[EMPLOYEE_ID] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__employeeIds_0) WITH ([value] int '$') AS [e]
) AND [o].[STATUS] = N'APPROVED' AND [o].[WORK_DATE] = @__targetDate_1
2026-01-28 17:32:57.880 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__targetDate_0='?' (DbType = DateTime2), @__employeeIds_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[RECORD_ID], [d].[ACTUAL_IN_TIME], [d].[ACTUAL_OUT_TIME], [d].[ATTENDANCE_DATE], [d].[CREATED_AT], [d].[CREATED_BY], [d].[EARLY_LEAVE_MINUTES], [d].[EMPLOYEE_ID], [d].[IS_DELETED], [d].[LATE_MINUTES], [d].[OVERTIME_MINUTES], [d].[PLANNED_SHIFT_ID], [d].[STATUS], [d].[UPDATED_AT], [d].[UPDATED_BY], [d].[VERSION_NO]
FROM [HR_ATTENDANCE].[DAILY_ATTENDANCE] AS [d]
WHERE [d].[ATTENDANCE_DATE] = @__targetDate_0 AND [d].[EMPLOYEE_ID] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__employeeIds_1) WITH ([value] int '$') AS [e]
)
2026-01-28 17:32:57.886 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200), @p9='?' (DbType = Int64), @p10='?' (DbType = Int32), @p11='?' (DbType = DateTime2), @p12='?' (DbType = DateTime2), @p13='?' (DbType = DateTime2), @p14='?' (DbType = DateTime2), @p15='?' (Size = 50), @p16='?' (DbType = Int16), @p17='?' (DbType = Int32), @p18='?' (Size = 1) (DbType = Byte), @p19='?' (DbType = Int16), @p20='?' (DbType = Int16), @p21='?' (DbType = Int32), @p22='?' (Size = 20), @p23='?' (DbType = DateTime2), @p24='?' (Size = 50), @p25='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
DELETE FROM [HR_ATTENDANCE].[DAILY_ATTENDANCE]
OUTPUT 1
WHERE [RECORD_ID] = @p9 AND [VERSION_NO] = @p10;
INSERT INTO [HR_ATTENDANCE].[DAILY_ATTENDANCE] ([ACTUAL_IN_TIME], [ACTUAL_OUT_TIME], [ATTENDANCE_DATE], [CREATED_AT], [CREATED_BY], [EARLY_LEAVE_MINUTES], [EMPLOYEE_ID], [IS_DELETED], [LATE_MINUTES], [OVERTIME_MINUTES], [PLANNED_SHIFT_ID], [STATUS], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[RECORD_ID]
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25);
2026-01-28 17:32:57.893 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-01-28 17:32:57.898 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Int32'.
2026-01-28 17:32:57.900 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceSettingsController.ProcessAttendance (HRMS.API) in 193.5612ms
2026-01-28 17:32:57.902 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.ProcessAttendance (HRMS.API)'
2026-01-28 17:32:57.903 +03:00 [INF] HTTP POST /api/AttendanceSettings/process-attendance responded 200 in 201.5472 ms
2026-01-28 17:32:57.905 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/AttendanceSettings/process-attendance - 200 null application/json; charset=utf-8 210.3811ms
2026-01-28 17:40:01.842 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - null null
2026-01-28 17:40:01.882 +03:00 [INF] HTTP GET /swagger/index.html responded 200 in 1.6308 ms
2026-01-28 17:40:01.886 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - 200 null text/html;charset=utf-8 43.6593ms
2026-01-28 17:40:02.008 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - null null
2026-01-28 17:40:02.066 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_vs/browserLink - null null
2026-01-28 17:40:02.550 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 541.8356ms
2026-01-28 17:40:02.583 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_vs/browserLink - 200 null text/javascript; charset=UTF-8 517.4092ms
2026-01-28 17:40:03.020 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - null null
2026-01-28 17:40:03.956 +03:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 269.7658 ms
2026-01-28 17:40:03.961 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 940.8059ms
2026-01-28 17:40:58.043 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/AttendanceSettings/process-attendance - application/json 32
2026-01-28 17:40:58.063 +03:00 [INF] CORS policy execution successful.
2026-01-28 17:40:58.063 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.ProcessAttendance (HRMS.API)'
2026-01-28 17:40:58.072 +03:00 [INF] Route matched with {action = "ProcessAttendance", controller = "AttendanceSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] ProcessAttendance(HRMS.Application.Features.Attendance.Process.Commands.ProcessAttendance.ProcessAttendanceCommand) on controller HRMS.API.Controllers.Attendance.AttendanceSettingsController (HRMS.API).
2026-01-28 17:40:58.166 +03:00 [INF] Executed DbCommand (55ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXEC [HR_ATTENDANCE].[SP_PROCESS_ATTENDANCE] @TARGET_DATE = @p0, @USER_ID = @p1
2026-01-28 17:40:58.169 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Int32'.
2026-01-28 17:40:58.170 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceSettingsController.ProcessAttendance (HRMS.API) in 94.5724ms
2026-01-28 17:40:58.172 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.ProcessAttendance (HRMS.API)'
2026-01-28 17:40:58.173 +03:00 [INF] HTTP POST /api/AttendanceSettings/process-attendance responded 200 in 110.6226 ms
2026-01-28 17:40:58.176 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/AttendanceSettings/process-attendance - 200 null application/json; charset=utf-8 133.4682ms
2026-01-28 17:42:53.655 +03:00 [INF] üöÄ Starting HRMS Hospital API...
2026-01-28 17:42:55.181 +03:00 [INF] ‚úÖ HRMS Hospital API started successfully
2026-01-28 17:42:55.240 +03:00 [INF] User profile is available. Using 'C:\Users\MT\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-28 17:42:55.733 +03:00 [INF] Now listening on: https://localhost:5001
2026-01-28 17:42:55.736 +03:00 [INF] Now listening on: http://localhost:5000
2026-01-28 17:42:55.866 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-28 17:42:55.868 +03:00 [INF] Hosting environment: Development
2026-01-28 17:42:55.869 +03:00 [INF] Content root path: G:\HRMS_Hospital\Backend\HRMS\HRMS.API
2026-01-28 17:42:56.966 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - null null
2026-01-28 17:42:57.666 +03:00 [INF] HTTP GET /swagger/index.html responded 200 in 290.3791 ms
2026-01-28 17:42:57.814 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - 200 null text/html;charset=utf-8 857.1805ms
2026-01-28 17:42:58.653 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - null null
2026-01-28 17:42:58.653 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_vs/browserLink - null null
2026-01-28 17:42:58.802 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 150.2581ms
2026-01-28 17:42:59.158 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_vs/browserLink - 200 null text/javascript; charset=UTF-8 504.8096ms
2026-01-28 17:43:00.308 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - null null
2026-01-28 17:43:01.685 +03:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 595.5421 ms
2026-01-28 17:43:01.691 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 1383.868ms
2026-01-28 17:44:14.976 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/AttendanceSettings/process-attendance - application/json 46
2026-01-28 17:44:15.023 +03:00 [INF] CORS policy execution successful.
2026-01-28 17:44:15.135 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.ProcessAttendance (HRMS.API)'
2026-01-28 17:44:15.185 +03:00 [INF] Route matched with {action = "ProcessAttendance", controller = "AttendanceSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] ProcessAttendance(HRMS.Application.Features.Attendance.Process.Commands.ProcessAttendance.ProcessAttendanceCommand) on controller HRMS.API.Controllers.Attendance.AttendanceSettingsController (HRMS.API).
2026-01-28 17:44:17.117 +03:00 [WRN] No store type was specified for the decimal property 'HoursCount' on entity type 'ShiftType'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-01-28 17:44:17.120 +03:00 [WRN] No store type was specified for the decimal property 'MaxSalary' on entity type 'JobGrade'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-01-28 17:44:17.121 +03:00 [WRN] No store type was specified for the decimal property 'MinSalary' on entity type 'JobGrade'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-01-28 17:44:17.762 +03:00 [ERR] Failed executing DbCommand (104ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXEC [HR_ATTENDANCE].[SP_PROCESS_ATTENDANCE] @TARGET_DATE = @p0, @USER_ID = @p1
2026-01-28 17:44:51.537 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceSettingsController.ProcessAttendance (HRMS.API) in 36327.4683ms
2026-01-28 17:44:51.542 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.ProcessAttendance (HRMS.API)'
2026-01-28 17:44:51.899 +03:00 [ERR] Global Exception Caught: ÿÆÿ∑ÿ£ ÿ£ÿ´ŸÜÿßÿ° ÿ™ÿ¥ÿ∫ŸäŸÑ ŸÖÿ≠ÿ±ŸÉ ÿßŸÑŸÖÿπÿßŸÑÿ¨ÿ©: Cannot insert the value NULL into column 'IS_DELETED', table 'HRMS_Hospital.HR_ATTENDANCE.DAILY_ATTENDANCE'; column does not allow nulls. INSERT fails.
The statement has been terminated.
Warning: Null value is eliminated by an aggregate or other SET operation.
System.Exception: ÿÆÿ∑ÿ£ ÿ£ÿ´ŸÜÿßÿ° ÿ™ÿ¥ÿ∫ŸäŸÑ ŸÖÿ≠ÿ±ŸÉ ÿßŸÑŸÖÿπÿßŸÑÿ¨ÿ©: Cannot insert the value NULL into column 'IS_DELETED', table 'HRMS_Hospital.HR_ATTENDANCE.DAILY_ATTENDANCE'; column does not allow nulls. INSERT fails.
The statement has been terminated.
Warning: Null value is eliminated by an aggregate or other SET operation.
   at HRMS.Application.Features.Attendance.Process.Commands.ProcessAttendance.ProcessAttendanceHandler.Handle(ProcessAttendanceCommand request, CancellationToken cancellationToken) in G:\HRMS_Hospital\Backend\HRMS\HRMS.Application\Features\Attendance\Process\Commands\ProcessAttendance\ProcessAttendanceHandler.cs:line 41
   at HRMS.API.Controllers.Attendance.AttendanceSettingsController.ProcessAttendance(ProcessAttendanceCommand command) in G:\HRMS_Hospital\Backend\HRMS\HRMS.API\Controllers\Attendance\AttendanceSettingsController.cs:line 68
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at HRMS.API.Middleware.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in G:\HRMS_Hospital\Backend\HRMS\HRMS.API\Middleware\GlobalExceptionMiddleware.cs:line 25
2026-01-28 17:44:51.954 +03:00 [ERR] HTTP POST /api/AttendanceSettings/process-attendance responded 500 in 36957.0397 ms
2026-01-28 17:44:51.967 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/AttendanceSettings/process-attendance - 500 null application/json 36991.0888ms
2026-01-28 17:46:08.499 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/AttendanceSettings/process-attendance - application/json 46
2026-01-28 17:46:08.508 +03:00 [INF] CORS policy execution successful.
2026-01-28 17:46:08.509 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.ProcessAttendance (HRMS.API)'
2026-01-28 17:46:08.512 +03:00 [INF] Route matched with {action = "ProcessAttendance", controller = "AttendanceSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] ProcessAttendance(HRMS.Application.Features.Attendance.Process.Commands.ProcessAttendance.ProcessAttendanceCommand) on controller HRMS.API.Controllers.Attendance.AttendanceSettingsController (HRMS.API).
2026-01-28 17:46:08.599 +03:00 [INF] Executed DbCommand (67ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXEC [HR_ATTENDANCE].[SP_PROCESS_ATTENDANCE] @TARGET_DATE = @p0, @USER_ID = @p1
2026-01-28 17:46:08.608 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Int32'.
2026-01-28 17:46:08.612 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceSettingsController.ProcessAttendance (HRMS.API) in 96.0351ms
2026-01-28 17:46:08.613 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.ProcessAttendance (HRMS.API)'
2026-01-28 17:46:08.615 +03:00 [INF] HTTP POST /api/AttendanceSettings/process-attendance responded 200 in 107.3747 ms
2026-01-28 17:46:08.618 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/AttendanceSettings/process-attendance - 200 null application/json; charset=utf-8 119.0428ms
2026-01-28 17:51:38.967 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:5001/api/Attendance/overtime-requests/4 - null null
2026-01-28 17:51:38.983 +03:00 [INF] CORS policy execution successful.
2026-01-28 17:51:38.984 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceController.CancelOvertimeRequest (HRMS.API)'
2026-01-28 17:51:38.995 +03:00 [INF] Route matched with {action = "CancelOvertimeRequest", controller = "Attendance"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Boolean]] CancelOvertimeRequest(Int32) on controller HRMS.API.Controllers.Attendance.AttendanceController (HRMS.API).
2026-01-28 17:51:39.725 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[OT_REQUEST_ID], [o].[APPROVED_BY], [o].[APPROVED_HOURS], [o].[CREATED_AT], [o].[CREATED_BY], [o].[EMPLOYEE_ID], [o].[HOURS_REQUESTED], [o].[IS_DELETED], [o].[REASON], [o].[REQUEST_DATE], [o].[STATUS], [o].[UPDATED_AT], [o].[UPDATED_BY], [o].[VERSION_NO], [o].[WORK_DATE]
FROM [HR_ATTENDANCE].[OVERTIME_REQUESTS] AS [o]
WHERE [o].[OT_REQUEST_ID] = @__p_0
2026-01-28 17:51:39.891 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__otRequest_WorkDate_Year_0='?' (DbType = Int16), @__otRequest_WorkDate_Month_1='?' (DbType = Byte)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HR_PAYROLL].[PAYROLL_RUNS] AS [p]
        WHERE [p].[Year] = @__otRequest_WorkDate_Year_0 AND [p].[Month] = @__otRequest_WorkDate_Month_1 AND [p].[Status] IN (N'APPROVED', N'PAID')) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-28 17:51:40.154 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200), @p10='?' (DbType = Int32), @p9='?' (Size = 20), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
UPDATE [HR_ATTENDANCE].[OVERTIME_REQUESTS] SET [STATUS] = @p9
OUTPUT 1
WHERE [OT_REQUEST_ID] = @p10 AND [VERSION_NO] = @p11;
2026-01-28 17:51:40.235 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXEC [HR_ATTENDANCE].[SP_PROCESS_ATTENDANCE] @TARGET_DATE = @p0, @USER_ID = @p1
2026-01-28 17:51:40.240 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Boolean'.
2026-01-28 17:51:40.242 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceController.CancelOvertimeRequest (HRMS.API) in 1243.5024ms
2026-01-28 17:51:40.244 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceController.CancelOvertimeRequest (HRMS.API)'
2026-01-28 17:51:40.247 +03:00 [INF] HTTP DELETE /api/Attendance/overtime-requests/4 responded 200 in 1264.1141 ms
2026-01-28 17:51:40.248 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:5001/api/Attendance/overtime-requests/4 - 200 null application/json; charset=utf-8 1281.2986ms
2026-01-28 17:52:31.491 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/AttendanceSettings/process-attendance - application/json 46
2026-01-28 17:52:31.508 +03:00 [INF] CORS policy execution successful.
2026-01-28 17:52:31.623 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.ProcessAttendance (HRMS.API)'
2026-01-28 17:52:31.625 +03:00 [INF] Route matched with {action = "ProcessAttendance", controller = "AttendanceSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] ProcessAttendance(HRMS.Application.Features.Attendance.Process.Commands.ProcessAttendance.ProcessAttendanceCommand) on controller HRMS.API.Controllers.Attendance.AttendanceSettingsController (HRMS.API).
2026-01-28 17:52:31.672 +03:00 [INF] Executed DbCommand (41ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXEC [HR_ATTENDANCE].[SP_PROCESS_ATTENDANCE] @TARGET_DATE = @p0, @USER_ID = @p1
2026-01-28 17:52:31.676 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Int32'.
2026-01-28 17:52:31.678 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceSettingsController.ProcessAttendance (HRMS.API) in 49.7456ms
2026-01-28 17:52:31.680 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.ProcessAttendance (HRMS.API)'
2026-01-28 17:52:31.682 +03:00 [INF] HTTP POST /api/AttendanceSettings/process-attendance responded 200 in 173.8678 ms
2026-01-28 17:52:31.684 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/AttendanceSettings/process-attendance - 200 null application/json; charset=utf-8 192.8392ms
2026-01-28 17:58:03.277 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/AttendanceSettings/shifts - application/json 146
2026-01-28 17:58:03.298 +03:00 [INF] CORS policy execution successful.
2026-01-28 17:58:03.300 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.CreateShift (HRMS.API)'
2026-01-28 17:58:03.310 +03:00 [INF] Route matched with {action = "CreateShift", controller = "AttendanceSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] CreateShift(HRMS.Application.Features.Attendance.Configuration.CreateShiftTypeCommand) on controller HRMS.API.Controllers.Attendance.AttendanceSettingsController (HRMS.API).
2026-01-28 17:58:03.432 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 50), @p2='?' (Size = 5), @p3='?' (DbType = Int16), @p4='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p5='?' (Size = 1) (DbType = Byte), @p6='?' (Size = 1) (DbType = Byte), @p7='?' (Size = 100), @p8='?' (Size = 5), @p9='?' (DbType = DateTime2), @p10='?' (Size = 50), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_ATTENDANCE].[SHIFT_TYPES] ([CREATED_AT], [CREATED_BY], [END_TIME], [GRACE_PERIOD_MINS], [HOURS_COUNT], [IS_CROSS_DAY], [IS_DELETED], [SHIFT_NAME_AR], [START_TIME], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[SHIFT_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2026-01-28 17:58:03.464 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-01-28 17:58:03.469 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Int32'.
2026-01-28 17:58:03.471 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceSettingsController.CreateShift (HRMS.API) in 149.8178ms
2026-01-28 17:58:03.482 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.CreateShift (HRMS.API)'
2026-01-28 17:58:03.484 +03:00 [INF] HTTP POST /api/AttendanceSettings/shifts responded 200 in 185.5549 ms
2026-01-28 17:58:03.486 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/AttendanceSettings/shifts - 200 null application/json; charset=utf-8 208.5519ms
2026-01-28 17:59:41.524 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/AttendanceSettings/initialize-roster - application/json 122
2026-01-28 17:59:41.528 +03:00 [INF] CORS policy execution successful.
2026-01-28 17:59:41.529 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.InitializeRoster (HRMS.API)'
2026-01-28 17:59:41.535 +03:00 [INF] Route matched with {action = "InitializeRoster", controller = "AttendanceSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Boolean]] InitializeRoster(HRMS.Application.Features.Attendance.Roster.Commands.InitializeRoster.InitializeRosterCommand) on controller HRMS.API.Controllers.Attendance.AttendanceSettingsController (HRMS.API).
2026-01-28 17:59:41.572 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
        WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-28 17:59:41.587 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__request_ShiftId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HR_ATTENDANCE].[SHIFT_TYPES] AS [s]
        WHERE [s].[SHIFT_ID] = @__request_ShiftId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-28 17:59:41.624 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32), @__request_StartDate_1='?' (DbType = DateTime2), @__request_EndDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[ROSTER_DATE]
FROM [HR_ATTENDANCE].[EMPLOYEE_ROSTERS] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0 AND [e].[ROSTER_DATE] >= @__request_StartDate_1 AND [e].[ROSTER_DATE] <= @__request_EndDate_2
2026-01-28 17:59:41.775 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 50), @p2='?' (DbType = Int32), @p3='?' (Size = 1) (DbType = Byte), @p4='?' (Size = 1) (DbType = Byte), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime2), @p8='?' (Size = 50), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_ATTENDANCE].[EMPLOYEE_ROSTERS] ([CREATED_AT], [CREATED_BY], [EMPLOYEE_ID], [IS_DELETED], [IS_OFF_DAY], [ROSTER_DATE], [SHIFT_ID], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[ROSTER_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2026-01-28 17:59:41.787 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-01-28 17:59:41.791 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Boolean'.
2026-01-28 17:59:41.793 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceSettingsController.InitializeRoster (HRMS.API) in 255.6527ms
2026-01-28 17:59:41.795 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.InitializeRoster (HRMS.API)'
2026-01-28 17:59:41.797 +03:00 [INF] HTTP POST /api/AttendanceSettings/initialize-roster responded 200 in 268.9178 ms
2026-01-28 17:59:41.799 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/AttendanceSettings/initialize-roster - 200 null application/json; charset=utf-8 309.0598ms
2026-01-28 18:02:41.763 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/AttendanceSettings/apply-swap - application/json 194
2026-01-28 18:02:41.920 +03:00 [INF] CORS policy execution successful.
2026-01-28 18:02:41.921 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.ApplySwap (HRMS.API)'
2026-01-28 18:02:41.925 +03:00 [INF] Route matched with {action = "ApplySwap", controller = "AttendanceSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] ApplySwap(HRMS.Application.Features.Attendance.Requests.CreateSwapRequestCommand) on controller HRMS.API.Controllers.Attendance.AttendanceSettingsController (HRMS.API).
2026-01-28 18:02:41.947 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__request_RosterDate_Year_0='?' (DbType = Int16), @__request_RosterDate_Month_1='?' (DbType = Byte)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HR_PAYROLL].[PAYROLL_RUNS] AS [p]
        WHERE [p].[Year] = @__request_RosterDate_Year_0 AND [p].[Month] = @__request_RosterDate_Month_1 AND [p].[Status] IN (N'APPROVED', N'PAID')) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-28 18:02:41.959 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__request_TargetEmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
        WHERE [e].[EMPLOYEE_ID] = @__request_TargetEmployeeId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-28 18:02:41.990 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 50), @p2='?' (Size = 1) (DbType = Byte), @p3='?' (Size = 200), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2), @p6='?' (Size = 20), @p7='?' (DbType = Int32), @p8='?' (DbType = DateTime2), @p9='?' (Size = 50), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_ATTENDANCE].[SHIFT_SWAP_REQUESTS] ([CREATED_AT], [CREATED_BY], [IS_DELETED], [MANAGER_COMMENT], [REQUESTER_ID], [ROSTER_DATE], [STATUS], [TARGET_EMPLOYEE_ID], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[REQUEST_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2026-01-28 18:02:42.001 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-01-28 18:02:42.005 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Int32'.
2026-01-28 18:02:42.007 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceSettingsController.ApplySwap (HRMS.API) in 79.1598ms
2026-01-28 18:02:42.015 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.ApplySwap (HRMS.API)'
2026-01-28 18:02:42.016 +03:00 [INF] HTTP POST /api/AttendanceSettings/apply-swap responded 200 in 96.0447 ms
2026-01-28 18:02:42.018 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/AttendanceSettings/apply-swap - 200 null application/json; charset=utf-8 254.9633ms
2026-01-28 18:06:21.222 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/AttendanceSettings/action-swap-request - application/json 129
2026-01-28 18:06:21.227 +03:00 [INF] CORS policy execution successful.
2026-01-28 18:06:21.230 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.ActionSwapRequest (HRMS.API)'
2026-01-28 18:06:21.389 +03:00 [INF] Route matched with {action = "ActionSwapRequest", controller = "AttendanceSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Boolean]] ActionSwapRequest(HRMS.Application.Features.Attendance.Requests.ActionSwapRequestCommand) on controller HRMS.API.Controllers.Attendance.AttendanceSettingsController (HRMS.API).
2026-01-28 18:06:21.419 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__request_RequestId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[REQUEST_ID], [s].[CREATED_AT], [s].[CREATED_BY], [s].[IS_DELETED], [s].[MANAGER_COMMENT], [s].[REQUESTER_ID], [s].[ROSTER_DATE], [s].[STATUS], [s].[TARGET_EMPLOYEE_ID], [s].[UPDATED_AT], [s].[UPDATED_BY], [s].[VERSION_NO]
FROM [HR_ATTENDANCE].[SHIFT_SWAP_REQUESTS] AS [s]
WHERE [s].[REQUEST_ID] = @__request_RequestId_0
2026-01-28 18:06:21.430 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__swapRequest_RosterDate_Year_0='?' (DbType = Int16), @__swapRequest_RosterDate_Month_1='?' (DbType = Byte)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HR_PAYROLL].[PAYROLL_RUNS] AS [p]
        WHERE [p].[Year] = @__swapRequest_RosterDate_Year_0 AND [p].[Month] = @__swapRequest_RosterDate_Month_1 AND [p].[Status] IN (N'APPROVED', N'PAID')) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-28 18:06:21.446 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__swapRequest_RequesterId_0='?' (DbType = Int32), @__swapRequest_RosterDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[ROSTER_ID], [e].[CREATED_AT], [e].[CREATED_BY], [e].[EMPLOYEE_ID], [e].[IS_DELETED], [e].[IS_OFF_DAY], [e].[ROSTER_DATE], [e].[SHIFT_ID], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO]
FROM [HR_ATTENDANCE].[EMPLOYEE_ROSTERS] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__swapRequest_RequesterId_0 AND [e].[ROSTER_DATE] = @__swapRequest_RosterDate_1
2026-01-28 18:06:21.462 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__swapRequest_TargetEmployeeId_0='?' (DbType = Int32), @__swapRequest_RosterDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[ROSTER_ID], [e].[CREATED_AT], [e].[CREATED_BY], [e].[EMPLOYEE_ID], [e].[IS_DELETED], [e].[IS_OFF_DAY], [e].[ROSTER_DATE], [e].[SHIFT_ID], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO]
FROM [HR_ATTENDANCE].[EMPLOYEE_ROSTERS] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__swapRequest_TargetEmployeeId_0 AND [e].[ROSTER_DATE] = @__swapRequest_RosterDate_1
2026-01-28 18:06:21.503 +03:00 [INF] Executed DbCommand (27ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200), @p9='?' (Size = 20), @p10='?' (Size = 50), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (DbType = Int64), @p16='?' (Size = 100), @p17='?' (Size = 200), @p18='?' (Size = 20), @p19='?' (Size = 50), @p20='?' (Size = 4000), @p21='?' (Size = 4000), @p22='?' (DbType = DateTime2), @p23='?' (Size = 50), @p24='?' (DbType = Int64), @p25='?' (Size = 100), @p26='?' (Size = 200), @p28='?' (DbType = Int64), @p27='?' (DbType = Int32), @p29='?' (DbType = Int32), @p31='?' (DbType = Int64), @p30='?' (DbType = Int32), @p32='?' (DbType = Int32), @p35='?' (DbType = Int32), @p33='?' (Size = 200), @p34='?' (Size = 20), @p36='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
MERGE [HR_CORE].[AUDIT_LOGS] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, 0),
(@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, 1),
(@p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, 2)) AS i ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
VALUES (i.[ACTION_TYPE], i.[IP_ADDRESS], i.[NEW_VALUE], i.[OLD_VALUE], i.[PERFORMED_AT], i.[PERFORMED_BY], i.[RECORD_ID], i.[TABLE_NAME], i.[USER_AGENT])
OUTPUT INSERTED.[LOG_ID], i._Position;
UPDATE [HR_ATTENDANCE].[EMPLOYEE_ROSTERS] SET [SHIFT_ID] = @p27
OUTPUT 1
WHERE [ROSTER_ID] = @p28 AND [VERSION_NO] = @p29;
UPDATE [HR_ATTENDANCE].[EMPLOYEE_ROSTERS] SET [SHIFT_ID] = @p30
OUTPUT 1
WHERE [ROSTER_ID] = @p31 AND [VERSION_NO] = @p32;
UPDATE [HR_ATTENDANCE].[SHIFT_SWAP_REQUESTS] SET [MANAGER_COMMENT] = @p33, [STATUS] = @p34
OUTPUT 1
WHERE [REQUEST_ID] = @p35 AND [VERSION_NO] = @p36;
2026-01-28 18:06:21.513 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Boolean'.
2026-01-28 18:06:21.515 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceSettingsController.ActionSwapRequest (HRMS.API) in 119.8536ms
2026-01-28 18:06:21.566 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.ActionSwapRequest (HRMS.API)'
2026-01-28 18:06:21.568 +03:00 [INF] HTTP POST /api/AttendanceSettings/action-swap-request responded 200 in 341.0616 ms
2026-01-28 18:06:21.570 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/AttendanceSettings/action-swap-request - 200 null application/json; charset=utf-8 347.6423ms
2026-01-28 18:11:42.414 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Attendance/swap-requests/revoke - application/json 127
2026-01-28 18:11:42.529 +03:00 [INF] CORS policy execution successful.
2026-01-28 18:11:42.530 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceController.RevokeApprovedSwap (HRMS.API)'
2026-01-28 18:11:42.544 +03:00 [INF] Route matched with {action = "RevokeApprovedSwap", controller = "Attendance"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Boolean]] RevokeApprovedSwap(HRMS.Application.Features.Attendance.Requests.RevokeSwapRequestCommand) on controller HRMS.API.Controllers.Attendance.AttendanceController (HRMS.API).
2026-01-28 18:11:42.580 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[REQUEST_ID], [s].[CREATED_AT], [s].[CREATED_BY], [s].[IS_DELETED], [s].[MANAGER_COMMENT], [s].[REQUESTER_ID], [s].[ROSTER_DATE], [s].[STATUS], [s].[TARGET_EMPLOYEE_ID], [s].[UPDATED_AT], [s].[UPDATED_BY], [s].[VERSION_NO]
FROM [HR_ATTENDANCE].[SHIFT_SWAP_REQUESTS] AS [s]
WHERE [s].[REQUEST_ID] = @__p_0
2026-01-28 18:11:42.593 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__swapRequest_RosterDate_Year_0='?' (DbType = Int16), @__swapRequest_RosterDate_Month_1='?' (DbType = Byte)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HR_PAYROLL].[PAYROLL_RUNS] AS [p]
        WHERE [p].[Year] = @__swapRequest_RosterDate_Year_0 AND [p].[Month] = @__swapRequest_RosterDate_Month_1 AND [p].[Status] IN (N'APPROVED', N'PAID')) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-28 18:11:42.601 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__swapRequest_RequesterId_0='?' (DbType = Int32), @__swapRequest_RosterDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[ROSTER_ID], [e].[CREATED_AT], [e].[CREATED_BY], [e].[EMPLOYEE_ID], [e].[IS_DELETED], [e].[IS_OFF_DAY], [e].[ROSTER_DATE], [e].[SHIFT_ID], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO]
FROM [HR_ATTENDANCE].[EMPLOYEE_ROSTERS] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__swapRequest_RequesterId_0 AND [e].[ROSTER_DATE] = @__swapRequest_RosterDate_1
2026-01-28 18:11:42.611 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__swapRequest_TargetEmployeeId_0='?' (DbType = Int32), @__swapRequest_RosterDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[ROSTER_ID], [e].[CREATED_AT], [e].[CREATED_BY], [e].[EMPLOYEE_ID], [e].[IS_DELETED], [e].[IS_OFF_DAY], [e].[ROSTER_DATE], [e].[SHIFT_ID], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO]
FROM [HR_ATTENDANCE].[EMPLOYEE_ROSTERS] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__swapRequest_TargetEmployeeId_0 AND [e].[ROSTER_DATE] = @__swapRequest_RosterDate_1
2026-01-28 18:11:42.634 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200), @p9='?' (Size = 20), @p10='?' (Size = 50), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (DbType = Int64), @p16='?' (Size = 100), @p17='?' (Size = 200), @p18='?' (Size = 20), @p19='?' (Size = 50), @p20='?' (Size = 4000), @p21='?' (Size = 4000), @p22='?' (DbType = DateTime2), @p23='?' (Size = 50), @p24='?' (DbType = Int64), @p25='?' (Size = 100), @p26='?' (Size = 200), @p28='?' (DbType = Int64), @p27='?' (DbType = Int32), @p29='?' (DbType = Int32), @p31='?' (DbType = Int64), @p30='?' (DbType = Int32), @p32='?' (DbType = Int32), @p35='?' (DbType = Int32), @p33='?' (Size = 200), @p34='?' (Size = 20), @p36='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
MERGE [HR_CORE].[AUDIT_LOGS] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, 0),
(@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, 1),
(@p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, 2)) AS i ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
VALUES (i.[ACTION_TYPE], i.[IP_ADDRESS], i.[NEW_VALUE], i.[OLD_VALUE], i.[PERFORMED_AT], i.[PERFORMED_BY], i.[RECORD_ID], i.[TABLE_NAME], i.[USER_AGENT])
OUTPUT INSERTED.[LOG_ID], i._Position;
UPDATE [HR_ATTENDANCE].[EMPLOYEE_ROSTERS] SET [SHIFT_ID] = @p27
OUTPUT 1
WHERE [ROSTER_ID] = @p28 AND [VERSION_NO] = @p29;
UPDATE [HR_ATTENDANCE].[EMPLOYEE_ROSTERS] SET [SHIFT_ID] = @p30
OUTPUT 1
WHERE [ROSTER_ID] = @p31 AND [VERSION_NO] = @p32;
UPDATE [HR_ATTENDANCE].[SHIFT_SWAP_REQUESTS] SET [MANAGER_COMMENT] = @p33, [STATUS] = @p34
OUTPUT 1
WHERE [REQUEST_ID] = @p35 AND [VERSION_NO] = @p36;
2026-01-28 18:11:42.671 +03:00 [INF] Executed DbCommand (30ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXEC [HR_ATTENDANCE].[SP_PROCESS_ATTENDANCE] @TARGET_DATE = @p0, @USER_ID = @p1
2026-01-28 18:11:42.674 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Boolean'.
2026-01-28 18:11:42.676 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceController.RevokeApprovedSwap (HRMS.API) in 127.9453ms
2026-01-28 18:11:42.678 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceController.RevokeApprovedSwap (HRMS.API)'
2026-01-28 18:11:42.680 +03:00 [INF] HTTP POST /api/Attendance/swap-requests/revoke responded 200 in 151.0118 ms
2026-01-28 18:11:42.682 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Attendance/swap-requests/revoke - 200 null application/json; charset=utf-8 268.1785ms
2026-01-28 18:15:07.661 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/LeaveConfiguration/leave-types - null null
2026-01-28 18:15:07.674 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Leaves.LeaveConfigurationController.GetAllLeaveTypes (HRMS.API)'
2026-01-28 18:15:07.679 +03:00 [INF] Route matched with {action = "GetAllLeaveTypes", controller = "LeaveConfiguration"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[System.Collections.Generic.List`1[HRMS.Application.DTOs.Leaves.LeaveTypeDto]]]] GetAllLeaveTypes() on controller HRMS.API.Controllers.Leaves.LeaveConfigurationController (HRMS.API).
2026-01-28 18:15:07.965 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[LEAVE_TYPE_ID], [l].[CREATED_AT], [l].[CREATED_BY], [l].[DEFAULT_DAYS], [l].[IS_CARRY_FORWARD], [l].[IS_DEDUCTIBLE], [l].[IS_DELETED], [l].[IS_PAID], [l].[LEAVE_NAME_AR], [l].[LEAVE_NAME_EN], [l].[MAX_DAYS_PER_YEAR], [l].[REQUIRES_ATTACHMENT], [l].[UPDATED_AT], [l].[UPDATED_BY], [l].[VERSION_NO]
FROM [HR_LEAVES].[LEAVE_TYPES] AS [l]
2026-01-28 18:15:07.986 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[System.Collections.Generic.List`1[[HRMS.Application.DTOs.Leaves.LeaveTypeDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-28 18:15:07.992 +03:00 [INF] Executed action HRMS.API.Controllers.Leaves.LeaveConfigurationController.GetAllLeaveTypes (HRMS.API) in 310.2041ms
2026-01-28 18:15:08.021 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Leaves.LeaveConfigurationController.GetAllLeaveTypes (HRMS.API)'
2026-01-28 18:15:08.023 +03:00 [INF] HTTP GET /api/LeaveConfiguration/leave-types responded 200 in 350.4833 ms
2026-01-28 18:15:08.025 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/LeaveConfiguration/leave-types - 200 null application/json; charset=utf-8 363.7461ms
2026-01-28 19:32:50.175 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - null null
2026-01-28 19:32:50.206 +03:00 [INF] HTTP GET /swagger/index.html responded 200 in 5.2910 ms
2026-01-28 19:32:50.248 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - 200 null text/html;charset=utf-8 72.7225ms
2026-01-28 19:32:50.294 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - null null
2026-01-28 19:32:50.309 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_vs/browserLink - null null
2026-01-28 19:32:50.344 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 50.7747ms
2026-01-28 19:32:50.407 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_vs/browserLink - 200 null text/javascript; charset=UTF-8 97.8092ms
2026-01-28 19:32:52.838 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - null null
2026-01-28 19:32:54.064 +03:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 825.1404 ms
2026-01-28 19:32:54.068 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 1230.7643ms
2026-01-28 19:34:11.081 +03:00 [INF] üöÄ Starting HRMS Hospital API...
2026-01-28 19:34:16.536 +03:00 [INF] ‚úÖ HRMS Hospital API started successfully
2026-01-28 19:34:16.649 +03:00 [INF] User profile is available. Using 'C:\Users\MT\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-28 19:34:17.971 +03:00 [INF] Now listening on: https://localhost:5001
2026-01-28 19:34:17.974 +03:00 [INF] Now listening on: http://localhost:5000
2026-01-28 19:34:18.633 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-28 19:34:18.656 +03:00 [INF] Hosting environment: Development
2026-01-28 19:34:19.573 +03:00 [INF] Content root path: G:\HRMS_Hospital\Backend\HRMS\HRMS.API
2026-01-28 19:34:20.613 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - null null
2026-01-28 19:34:23.023 +03:00 [INF] HTTP GET /swagger/index.html responded 200 in 591.2980 ms
2026-01-28 19:34:23.055 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - 200 null text/html;charset=utf-8 2451.5687ms
2026-01-28 19:34:23.176 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - null null
2026-01-28 19:34:23.891 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 714.0569ms
2026-01-28 19:34:24.042 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_vs/browserLink - null null
2026-01-28 19:34:24.452 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_vs/browserLink - 200 null text/javascript; charset=UTF-8 409.4786ms
2026-01-28 19:34:26.076 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - null null
2026-01-28 19:34:28.234 +03:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 762.2961 ms
2026-01-28 19:34:28.242 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 2165.1662ms
2026-01-28 19:37:34.294 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Leaves/action - application/json 180
2026-01-28 19:37:34.341 +03:00 [INF] CORS policy execution successful.
2026-01-28 19:37:34.538 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Leaves.LeavesController.ProcessAction (HRMS.API)'
2026-01-28 19:37:34.596 +03:00 [INF] Route matched with {action = "ProcessAction", controller = "Leaves"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Boolean]] ProcessAction(HRMS.Application.DTOs.Leaves.LeaveActionDto) on controller HRMS.API.Controllers.Leaves.LeavesController (HRMS.API).
2026-01-28 19:37:38.646 +03:00 [WRN] No store type was specified for the decimal property 'HoursCount' on entity type 'ShiftType'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-01-28 19:37:38.656 +03:00 [WRN] No store type was specified for the decimal property 'MaxSalary' on entity type 'JobGrade'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-01-28 19:37:38.661 +03:00 [WRN] No store type was specified for the decimal property 'MinSalary' on entity type 'JobGrade'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-01-28 19:37:41.293 +03:00 [INF] Executed DbCommand (154ms) [Parameters=[@__request_Data_RequestId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [l].[REQUEST_ID], [l].[ATTACHMENT_PATH], [l].[CREATED_AT], [l].[CREATED_BY], [l].[DAYS_COUNT], [l].[EMPLOYEE_ID], [l].[END_DATE], [l].[IS_DELETED], [l].[IS_POSTED_TO_BALANCE], [l].[LEAVE_TYPE_ID], [l].[REASON], [l].[REJECTION_REASON], [l].[START_DATE], [l].[STATUS], [l].[UPDATED_AT], [l].[UPDATED_BY], [l].[VERSION_NO], [l0].[LEAVE_TYPE_ID], [l0].[CREATED_AT], [l0].[CREATED_BY], [l0].[DEFAULT_DAYS], [l0].[IS_CARRY_FORWARD], [l0].[IS_DEDUCTIBLE], [l0].[IS_DELETED], [l0].[IS_PAID], [l0].[LEAVE_NAME_AR], [l0].[LEAVE_NAME_EN], [l0].[MAX_DAYS_PER_YEAR], [l0].[REQUIRES_ATTACHMENT], [l0].[UPDATED_AT], [l0].[UPDATED_BY], [l0].[VERSION_NO]
FROM [HR_LEAVES].[LEAVE_REQUESTS] AS [l]
INNER JOIN [HR_LEAVES].[LEAVE_TYPES] AS [l0] ON [l].[LEAVE_TYPE_ID] = [l0].[LEAVE_TYPE_ID]
WHERE [l].[REQUEST_ID] = @__request_Data_RequestId_0
2026-01-28 19:37:41.840 +03:00 [INF] Executed DbCommand (29ms) [Parameters=[@__8__locals1_leaveRequest_EmployeeId_0='?' (DbType = Int32), @__8__locals1_leaveRequest_LeaveTypeId_1='?' (DbType = Int32), @__year_2='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[BALANCE_ID], [e].[CREATED_AT], [e].[CREATED_BY], [e].[CURRENT_BALANCE], [e].[EMPLOYEE_ID], [e].[IS_DELETED], [e].[LEAVE_TYPE_ID], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO], [e].[YEAR]
FROM [HR_LEAVES].[EMPLOYEE_LEAVE_BALANCES] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__8__locals1_leaveRequest_EmployeeId_0 AND [e].[LEAVE_TYPE_ID] = @__8__locals1_leaveRequest_LeaveTypeId_1 AND [e].[YEAR] = @__year_2
2026-01-28 19:37:42.099 +03:00 [ERR] Failed executing DbCommand (17ms) [Parameters=[@__leaveRequest_EmployeeId_0='?' (DbType = Int32), @__leaveRequest_StartDate_1='?' (DbType = DateTime2), @__leaveRequest_EndDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[ROSTER_ID], [e].[CREATED_AT], [e].[CREATED_BY], [e].[EMPLOYEE_ID], [e].[IS_DELETED], [e].[IS_OFF_DAY], [e].[ROSTER_DATE], [e].[SHIFT_ID], [e].[STATUS], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO]
FROM [HR_ATTENDANCE].[EMPLOYEE_ROSTERS] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__leaveRequest_EmployeeId_0 AND [e].[ROSTER_DATE] >= @__leaveRequest_StartDate_1 AND [e].[ROSTER_DATE] <= @__leaveRequest_EndDate_2
2026-01-28 19:37:42.164 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'HRMS.Infrastructure.Data.HRMSDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'STATUS'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:9e3c55fb-7a3f-40c4-b3ca-7b899c4d2822
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'STATUS'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:9e3c55fb-7a3f-40c4-b3ca-7b899c4d2822
Error Number:207,State:1,Class:16
2026-01-28 19:38:02.495 +03:00 [INF] Executed action HRMS.API.Controllers.Leaves.LeavesController.ProcessAction (HRMS.API) in 27886.5782ms
2026-01-28 19:38:02.500 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Leaves.LeavesController.ProcessAction (HRMS.API)'
2026-01-28 19:38:03.026 +03:00 [ERR] Global Exception Caught: Invalid column name 'STATUS'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'STATUS'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at HRMS.Application.Features.Leaves.Requests.Commands.ProcessLeaveAction.ProcessLeaveActionCommandHandler.Handle(ProcessLeaveActionCommand request, CancellationToken cancellationToken) in G:\HRMS_Hospital\Backend\HRMS\HRMS.Application\Features\Leaves\Requests\Commands\ProcessLeaveAction\ProcessLeaveActionCommand.cs:line 113
   at HRMS.Application.Features.Leaves.Requests.Commands.ProcessLeaveAction.ProcessLeaveActionCommandHandler.Handle(ProcessLeaveActionCommand request, CancellationToken cancellationToken) in G:\HRMS_Hospital\Backend\HRMS\HRMS.Application\Features\Leaves\Requests\Commands\ProcessLeaveAction\ProcessLeaveActionCommand.cs:line 149
   at HRMS.API.Controllers.Leaves.LeavesController.ProcessAction(LeaveActionDto actionDto) in G:\HRMS_Hospital\Backend\HRMS\HRMS.API\Controllers\Leaves\LeavesController.cs:line 57
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at HRMS.API.Middleware.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in G:\HRMS_Hospital\Backend\HRMS\HRMS.API\Middleware\GlobalExceptionMiddleware.cs:line 25
ClientConnectionId:9e3c55fb-7a3f-40c4-b3ca-7b899c4d2822
Error Number:207,State:1,Class:16
2026-01-28 19:38:03.076 +03:00 [ERR] HTTP POST /api/Leaves/action responded 500 in 28743.0258 ms
2026-01-28 19:38:03.098 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Leaves/action - 500 null application/json 28804.8608ms
2026-01-28 19:39:17.562 +03:00 [INF] üöÄ Starting HRMS Hospital API...
2026-01-28 19:39:18.042 +03:00 [FTL] ‚ùå Application terminated unexpectedly
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at Program.<Main>$(String[] args) in G:\HRMS_Hospital\Backend\HRMS\HRMS.API\Program.cs:line 71
2026-01-28 19:40:01.424 +03:00 [INF] üöÄ Starting HRMS Hospital API...
2026-01-28 19:40:02.046 +03:00 [FTL] ‚ùå Application terminated unexpectedly
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at Program.<Main>$(String[] args) in G:\HRMS_Hospital\Backend\HRMS\HRMS.API\Program.cs:line 71
2026-01-28 19:40:24.615 +03:00 [INF] üöÄ Starting HRMS Hospital API...
2026-01-28 19:40:28.194 +03:00 [INF] ‚úÖ HRMS Hospital API started successfully
2026-01-28 19:40:28.391 +03:00 [INF] User profile is available. Using 'C:\Users\MT\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-28 19:40:29.599 +03:00 [INF] Now listening on: https://localhost:5001
2026-01-28 19:40:32.392 +03:00 [INF] Now listening on: http://localhost:5000
2026-01-28 19:40:32.408 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - null null
2026-01-28 19:40:33.291 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-28 19:40:33.675 +03:00 [INF] Hosting environment: Development
2026-01-28 19:40:33.792 +03:00 [INF] Content root path: G:\HRMS_Hospital\Backend\HRMS\HRMS.API
2026-01-28 19:40:34.263 +03:00 [INF] HTTP GET /swagger/index.html responded 200 in 557.3419 ms
2026-01-28 19:40:35.111 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - null null
2026-01-28 19:40:36.643 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_vs/browserLink - null null
2026-01-28 19:40:42.097 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 6986.0262ms
2026-01-28 19:40:39.091 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - 200 null text/html;charset=utf-8 6697.9764ms
2026-01-28 19:40:45.327 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8684.8772ms
2026-01-28 19:40:45.496 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - null null
2026-01-28 19:40:46.260 +03:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 661.7211 ms
2026-01-28 19:40:46.264 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 767.9345ms
2026-01-28 19:41:51.724 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Leaves/action - application/json 182
2026-01-28 19:41:51.917 +03:00 [INF] CORS policy execution successful.
2026-01-28 19:41:51.988 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Leaves.LeavesController.ProcessAction (HRMS.API)'
2026-01-28 19:41:52.031 +03:00 [INF] Route matched with {action = "ProcessAction", controller = "Leaves"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Boolean]] ProcessAction(HRMS.Application.DTOs.Leaves.LeaveActionDto) on controller HRMS.API.Controllers.Leaves.LeavesController (HRMS.API).
2026-01-28 19:41:55.872 +03:00 [WRN] No store type was specified for the decimal property 'HoursCount' on entity type 'ShiftType'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-01-28 19:41:55.876 +03:00 [WRN] No store type was specified for the decimal property 'MaxSalary' on entity type 'JobGrade'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-01-28 19:41:55.879 +03:00 [WRN] No store type was specified for the decimal property 'MinSalary' on entity type 'JobGrade'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-01-28 19:41:58.147 +03:00 [INF] Executed DbCommand (111ms) [Parameters=[@__request_Data_RequestId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [l].[REQUEST_ID], [l].[ATTACHMENT_PATH], [l].[CREATED_AT], [l].[CREATED_BY], [l].[DAYS_COUNT], [l].[EMPLOYEE_ID], [l].[END_DATE], [l].[IS_DELETED], [l].[IS_POSTED_TO_BALANCE], [l].[LEAVE_TYPE_ID], [l].[REASON], [l].[REJECTION_REASON], [l].[START_DATE], [l].[STATUS], [l].[UPDATED_AT], [l].[UPDATED_BY], [l].[VERSION_NO], [l0].[LEAVE_TYPE_ID], [l0].[CREATED_AT], [l0].[CREATED_BY], [l0].[DEFAULT_DAYS], [l0].[IS_CARRY_FORWARD], [l0].[IS_DEDUCTIBLE], [l0].[IS_DELETED], [l0].[IS_PAID], [l0].[LEAVE_NAME_AR], [l0].[LEAVE_NAME_EN], [l0].[MAX_DAYS_PER_YEAR], [l0].[REQUIRES_ATTACHMENT], [l0].[UPDATED_AT], [l0].[UPDATED_BY], [l0].[VERSION_NO]
FROM [HR_LEAVES].[LEAVE_REQUESTS] AS [l]
INNER JOIN [HR_LEAVES].[LEAVE_TYPES] AS [l0] ON [l].[LEAVE_TYPE_ID] = [l0].[LEAVE_TYPE_ID]
WHERE [l].[REQUEST_ID] = @__request_Data_RequestId_0
2026-01-28 19:41:58.511 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__8__locals1_leaveRequest_EmployeeId_0='?' (DbType = Int32), @__8__locals1_leaveRequest_LeaveTypeId_1='?' (DbType = Int32), @__year_2='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[BALANCE_ID], [e].[CREATED_AT], [e].[CREATED_BY], [e].[CURRENT_BALANCE], [e].[EMPLOYEE_ID], [e].[IS_DELETED], [e].[LEAVE_TYPE_ID], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO], [e].[YEAR]
FROM [HR_LEAVES].[EMPLOYEE_LEAVE_BALANCES] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__8__locals1_leaveRequest_EmployeeId_0 AND [e].[LEAVE_TYPE_ID] = @__8__locals1_leaveRequest_LeaveTypeId_1 AND [e].[YEAR] = @__year_2
2026-01-28 19:41:58.749 +03:00 [INF] Executed DbCommand (37ms) [Parameters=[@__leaveRequest_EmployeeId_0='?' (DbType = Int32), @__leaveRequest_StartDate_1='?' (DbType = DateTime2), @__leaveRequest_EndDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[ROSTER_ID], [e].[CREATED_AT], [e].[CREATED_BY], [e].[EMPLOYEE_ID], [e].[IS_DELETED], [e].[IS_OFF_DAY], [e].[ROSTER_DATE], [e].[SHIFT_ID], [e].[STATUS], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO]
FROM [HR_ATTENDANCE].[EMPLOYEE_ROSTERS] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__leaveRequest_EmployeeId_0 AND [e].[ROSTER_DATE] >= @__leaveRequest_StartDate_1 AND [e].[ROSTER_DATE] <= @__leaveRequest_EndDate_2
2026-01-28 19:41:59.246 +03:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2026-01-28 19:41:59.340 +03:00 [INF] Executed DbCommand (83ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200), @p9='?' (Size = 20), @p10='?' (Size = 50), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (DbType = Int64), @p16='?' (Size = 100), @p17='?' (Size = 200), @p19='?' (DbType = Int32), @p18='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p20='?' (DbType = Int32), @p26='?' (DbType = Int32), @p21='?' (DbType = DateTime2), @p22='?' (Size = 50), @p23='?' (Size = 1) (DbType = Byte), @p24='?' (Size = 200), @p25='?' (Size = 20), @p27='?' (DbType = Int32), @p28='?' (DbType = DateTime2), @p29='?' (Size = 50), @p30='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p31='?' (DbType = Int32), @p32='?' (Size = 1) (DbType = Byte), @p33='?' (DbType = Int32), @p34='?' (Size = 200), @p35='?' (DbType = Int32), @p36='?' (DbType = DateTime2), @p37='?' (Size = 20), @p38='?' (DbType = DateTime2), @p39='?' (Size = 50), @p40='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
MERGE [HR_CORE].[AUDIT_LOGS] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, 0),
(@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, 1)) AS i ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
VALUES (i.[ACTION_TYPE], i.[IP_ADDRESS], i.[NEW_VALUE], i.[OLD_VALUE], i.[PERFORMED_AT], i.[PERFORMED_BY], i.[RECORD_ID], i.[TABLE_NAME], i.[USER_AGENT])
OUTPUT INSERTED.[LOG_ID], i._Position;
UPDATE [HR_LEAVES].[EMPLOYEE_LEAVE_BALANCES] SET [CURRENT_BALANCE] = @p18
OUTPUT 1
WHERE [BALANCE_ID] = @p19 AND [VERSION_NO] = @p20;
UPDATE [HR_LEAVES].[LEAVE_REQUESTS] SET [CREATED_AT] = @p21, [CREATED_BY] = @p22, [IS_POSTED_TO_BALANCE] = @p23, [REJECTION_REASON] = @p24, [STATUS] = @p25
OUTPUT 1
WHERE [REQUEST_ID] = @p26 AND [VERSION_NO] = @p27;
INSERT INTO [HR_LEAVES].[LEAVE_TRANSACTIONS] ([CREATED_AT], [CREATED_BY], [DAYS], [EMPLOYEE_ID], [IS_DELETED], [LEAVE_TYPE_ID], [NOTES], [REFERENCE_ID], [TRANSACTION_DATE], [TRANSACTION_TYPE], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[TRANSACTION_ID]
VALUES (@p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40);
2026-01-28 19:41:59.429 +03:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2026-01-28 19:41:59.438 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-01-28 19:41:59.482 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Boolean'.
2026-01-28 19:41:59.501 +03:00 [INF] Executed action HRMS.API.Controllers.Leaves.LeavesController.ProcessAction (HRMS.API) in 7445.5928ms
2026-01-28 19:41:59.506 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Leaves.LeavesController.ProcessAction (HRMS.API)'
2026-01-28 19:41:59.508 +03:00 [INF] HTTP POST /api/Leaves/action responded 200 in 7599.3278 ms
2026-01-28 19:41:59.547 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Leaves/action - 200 null application/json; charset=utf-8 7823.2618ms
2026-01-28 19:46:50.184 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - null null
2026-01-28 19:46:50.436 +03:00 [INF] HTTP GET /swagger/index.html responded 200 in 3.5844 ms
2026-01-28 19:46:50.530 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - null null
2026-01-28 19:46:50.575 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 45.0124ms
2026-01-28 19:46:50.566 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - 200 null text/html;charset=utf-8 381.693ms
2026-01-28 19:46:50.531 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_vs/browserLink - null null
2026-01-28 19:46:50.634 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_vs/browserLink - 200 null text/javascript; charset=UTF-8 103.507ms
2026-01-28 19:46:51.609 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - null null
2026-01-28 19:46:54.231 +03:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 785.6741 ms
2026-01-28 19:46:54.247 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 2638.0365ms
2026-01-28 19:52:12.445 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/LeaveConfiguration/leave-types - null null
2026-01-28 19:52:12.490 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Leaves.LeaveConfigurationController.GetAllLeaveTypes (HRMS.API)'
2026-01-28 19:52:12.500 +03:00 [INF] Route matched with {action = "GetAllLeaveTypes", controller = "LeaveConfiguration"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[System.Collections.Generic.List`1[HRMS.Application.DTOs.Leaves.LeaveTypeDto]]]] GetAllLeaveTypes() on controller HRMS.API.Controllers.Leaves.LeaveConfigurationController (HRMS.API).
2026-01-28 19:52:13.090 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[LEAVE_TYPE_ID], [l].[CREATED_AT], [l].[CREATED_BY], [l].[DEFAULT_DAYS], [l].[IS_CARRY_FORWARD], [l].[IS_DEDUCTIBLE], [l].[IS_DELETED], [l].[IS_PAID], [l].[LEAVE_NAME_AR], [l].[LEAVE_NAME_EN], [l].[MAX_DAYS_PER_YEAR], [l].[REQUIRES_ATTACHMENT], [l].[UPDATED_AT], [l].[UPDATED_BY], [l].[VERSION_NO]
FROM [HR_LEAVES].[LEAVE_TYPES] AS [l]
2026-01-28 19:52:13.119 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[System.Collections.Generic.List`1[[HRMS.Application.DTOs.Leaves.LeaveTypeDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-28 19:52:13.133 +03:00 [INF] Executed action HRMS.API.Controllers.Leaves.LeaveConfigurationController.GetAllLeaveTypes (HRMS.API) in 626.6033ms
2026-01-28 19:52:13.136 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Leaves.LeaveConfigurationController.GetAllLeaveTypes (HRMS.API)'
2026-01-28 19:52:13.137 +03:00 [INF] HTTP GET /api/LeaveConfiguration/leave-types responded 200 in 649.1816 ms
2026-01-28 19:52:13.142 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/LeaveConfiguration/leave-types - 200 null application/json; charset=utf-8 695.7749ms
2026-01-28 19:54:16.736 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Leaves/apply - application/json 187
2026-01-28 19:54:16.793 +03:00 [INF] CORS policy execution successful.
2026-01-28 19:54:16.795 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Leaves.LeavesController.ApplyForLeave (HRMS.API)'
2026-01-28 19:54:16.806 +03:00 [INF] Route matched with {action = "ApplyForLeave", controller = "Leaves"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] ApplyForLeave(HRMS.Application.Features.Leaves.Requests.Commands.CreateLeaveRequest.CreateLeaveRequestCommand) on controller HRMS.API.Controllers.Leaves.LeavesController (HRMS.API).
2026-01-28 19:54:17.051 +03:00 [INF] Executed DbCommand (33ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0
2026-01-28 19:54:17.122 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [l].[LEAVE_TYPE_ID], [l].[CREATED_AT], [l].[CREATED_BY], [l].[DEFAULT_DAYS], [l].[IS_CARRY_FORWARD], [l].[IS_DEDUCTIBLE], [l].[IS_DELETED], [l].[IS_PAID], [l].[LEAVE_NAME_AR], [l].[LEAVE_NAME_EN], [l].[MAX_DAYS_PER_YEAR], [l].[REQUIRES_ATTACHMENT], [l].[UPDATED_AT], [l].[UPDATED_BY], [l].[VERSION_NO]
FROM [HR_LEAVES].[LEAVE_TYPES] AS [l]
WHERE [l].[LEAVE_TYPE_ID] = @__p_0
2026-01-28 19:54:17.191 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__employeeId_0='?' (DbType = Int32), @__request_EndDate_1='?' (DbType = DateTime2), @__request_StartDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HR_LEAVES].[LEAVE_REQUESTS] AS [l]
        WHERE [l].[EMPLOYEE_ID] = @__employeeId_0 AND ([l].[STATUS] <> N'REJECTED' OR [l].[STATUS] IS NULL) AND [l].[START_DATE] <= @__request_EndDate_1 AND [l].[END_DATE] >= @__request_StartDate_2) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-28 19:54:17.355 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@__years_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[HOLIDAY_ID], [p].[CREATED_AT], [p].[CREATED_BY], [p].[END_DATE], [p].[HOLIDAY_NAME_AR], [p].[IS_DELETED], [p].[START_DATE], [p].[UPDATED_AT], [p].[UPDATED_BY], [p].[VERSION_NO], [p].[YEAR]
FROM [HR_LEAVES].[PUBLIC_HOLIDAYS] AS [p]
WHERE CAST([p].[YEAR] AS int) IN (
    SELECT [y].[value]
    FROM OPENJSON(@__years_0) WITH ([value] int '$') AS [y]
)
2026-01-28 19:54:17.419 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__8__locals1_employeeId_0='?' (DbType = Int32), @__8__locals1_request_LeaveTypeId_1='?' (DbType = Int32), @__year_2='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[BALANCE_ID], [e].[CREATED_AT], [e].[CREATED_BY], [e].[CURRENT_BALANCE], [e].[EMPLOYEE_ID], [e].[IS_DELETED], [e].[LEAVE_TYPE_ID], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO], [e].[YEAR]
FROM [HR_LEAVES].[EMPLOYEE_LEAVE_BALANCES] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__8__locals1_employeeId_0 AND [e].[LEAVE_TYPE_ID] = @__8__locals1_request_LeaveTypeId_1 AND [e].[YEAR] = @__year_2
2026-01-28 19:54:17.462 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[@p0='?' (Size = 500), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2), @p6='?' (Size = 1) (DbType = Byte), @p7='?' (Size = 1) (DbType = Byte), @p8='?' (DbType = Int32), @p9='?' (Size = 200), @p10='?' (Size = 200), @p11='?' (DbType = DateTime2), @p12='?' (Size = 20), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_LEAVES].[LEAVE_REQUESTS] ([ATTACHMENT_PATH], [CREATED_AT], [CREATED_BY], [DAYS_COUNT], [EMPLOYEE_ID], [END_DATE], [IS_DELETED], [IS_POSTED_TO_BALANCE], [LEAVE_TYPE_ID], [REASON], [REJECTION_REASON], [START_DATE], [STATUS], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[REQUEST_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
2026-01-28 19:54:17.495 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-01-28 19:54:17.502 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Int32'.
2026-01-28 19:54:17.506 +03:00 [INF] Executed action HRMS.API.Controllers.Leaves.LeavesController.ApplyForLeave (HRMS.API) in 696.5552ms
2026-01-28 19:54:17.509 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Leaves.LeavesController.ApplyForLeave (HRMS.API)'
2026-01-28 19:54:17.513 +03:00 [INF] HTTP POST /api/Leaves/apply responded 200 in 719.6272 ms
2026-01-28 19:54:17.516 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Leaves/apply - 200 null application/json; charset=utf-8 779.5536ms
2026-01-28 19:55:50.892 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Leaves/action - application/json 189
2026-01-28 19:55:50.927 +03:00 [INF] CORS policy execution successful.
2026-01-28 19:55:50.929 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Leaves.LeavesController.ProcessAction (HRMS.API)'
2026-01-28 19:55:50.936 +03:00 [INF] Route matched with {action = "ProcessAction", controller = "Leaves"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Boolean]] ProcessAction(HRMS.Application.DTOs.Leaves.LeaveActionDto) on controller HRMS.API.Controllers.Leaves.LeavesController (HRMS.API).
2026-01-28 19:55:50.972 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__request_Data_RequestId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [l].[REQUEST_ID], [l].[ATTACHMENT_PATH], [l].[CREATED_AT], [l].[CREATED_BY], [l].[DAYS_COUNT], [l].[EMPLOYEE_ID], [l].[END_DATE], [l].[IS_DELETED], [l].[IS_POSTED_TO_BALANCE], [l].[LEAVE_TYPE_ID], [l].[REASON], [l].[REJECTION_REASON], [l].[START_DATE], [l].[STATUS], [l].[UPDATED_AT], [l].[UPDATED_BY], [l].[VERSION_NO], [l0].[LEAVE_TYPE_ID], [l0].[CREATED_AT], [l0].[CREATED_BY], [l0].[DEFAULT_DAYS], [l0].[IS_CARRY_FORWARD], [l0].[IS_DEDUCTIBLE], [l0].[IS_DELETED], [l0].[IS_PAID], [l0].[LEAVE_NAME_AR], [l0].[LEAVE_NAME_EN], [l0].[MAX_DAYS_PER_YEAR], [l0].[REQUIRES_ATTACHMENT], [l0].[UPDATED_AT], [l0].[UPDATED_BY], [l0].[VERSION_NO]
FROM [HR_LEAVES].[LEAVE_REQUESTS] AS [l]
INNER JOIN [HR_LEAVES].[LEAVE_TYPES] AS [l0] ON [l].[LEAVE_TYPE_ID] = [l0].[LEAVE_TYPE_ID]
WHERE [l].[REQUEST_ID] = @__request_Data_RequestId_0
2026-01-28 19:55:50.985 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__8__locals1_leaveRequest_EmployeeId_0='?' (DbType = Int32), @__8__locals1_leaveRequest_LeaveTypeId_1='?' (DbType = Int32), @__year_2='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[BALANCE_ID], [e].[CREATED_AT], [e].[CREATED_BY], [e].[CURRENT_BALANCE], [e].[EMPLOYEE_ID], [e].[IS_DELETED], [e].[LEAVE_TYPE_ID], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO], [e].[YEAR]
FROM [HR_LEAVES].[EMPLOYEE_LEAVE_BALANCES] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__8__locals1_leaveRequest_EmployeeId_0 AND [e].[LEAVE_TYPE_ID] = @__8__locals1_leaveRequest_LeaveTypeId_1 AND [e].[YEAR] = @__year_2
2026-01-28 19:55:51.032 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__leaveRequest_EmployeeId_0='?' (DbType = Int32), @__leaveRequest_StartDate_Date_1='?' (DbType = DateTime2), @__leaveRequest_EndDate_Date_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[ROSTER_ID], [e].[CREATED_AT], [e].[CREATED_BY], [e].[EMPLOYEE_ID], [e].[IS_DELETED], [e].[IS_OFF_DAY], [e].[ROSTER_DATE], [e].[SHIFT_ID], [e].[STATUS], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO]
FROM [HR_ATTENDANCE].[EMPLOYEE_ROSTERS] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__leaveRequest_EmployeeId_0 AND CONVERT(date, [e].[ROSTER_DATE]) >= @__leaveRequest_StartDate_Date_1 AND CONVERT(date, [e].[ROSTER_DATE]) <= @__leaveRequest_EndDate_Date_2
2026-01-28 19:55:51.041 +03:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2026-01-28 19:55:51.096 +03:00 [INF] Executed DbCommand (51ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200), @p9='?' (Size = 20), @p10='?' (Size = 50), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (DbType = Int64), @p16='?' (Size = 100), @p17='?' (Size = 200), @p19='?' (DbType = Int32), @p18='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p20='?' (DbType = Int32), @p26='?' (DbType = Int32), @p21='?' (DbType = DateTime2), @p22='?' (Size = 50), @p23='?' (Size = 1) (DbType = Byte), @p24='?' (Size = 200), @p25='?' (Size = 20), @p27='?' (DbType = Int32), @p28='?' (DbType = DateTime2), @p29='?' (Size = 50), @p30='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p31='?' (DbType = Int32), @p32='?' (Size = 1) (DbType = Byte), @p33='?' (DbType = Int32), @p34='?' (Size = 200), @p35='?' (DbType = Int32), @p36='?' (DbType = DateTime2), @p37='?' (Size = 20), @p38='?' (DbType = DateTime2), @p39='?' (Size = 50), @p40='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
MERGE [HR_CORE].[AUDIT_LOGS] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, 0),
(@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, 1)) AS i ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
VALUES (i.[ACTION_TYPE], i.[IP_ADDRESS], i.[NEW_VALUE], i.[OLD_VALUE], i.[PERFORMED_AT], i.[PERFORMED_BY], i.[RECORD_ID], i.[TABLE_NAME], i.[USER_AGENT])
OUTPUT INSERTED.[LOG_ID], i._Position;
UPDATE [HR_LEAVES].[EMPLOYEE_LEAVE_BALANCES] SET [CURRENT_BALANCE] = @p18
OUTPUT 1
WHERE [BALANCE_ID] = @p19 AND [VERSION_NO] = @p20;
UPDATE [HR_LEAVES].[LEAVE_REQUESTS] SET [CREATED_AT] = @p21, [CREATED_BY] = @p22, [IS_POSTED_TO_BALANCE] = @p23, [REJECTION_REASON] = @p24, [STATUS] = @p25
OUTPUT 1
WHERE [REQUEST_ID] = @p26 AND [VERSION_NO] = @p27;
INSERT INTO [HR_LEAVES].[LEAVE_TRANSACTIONS] ([CREATED_AT], [CREATED_BY], [DAYS], [EMPLOYEE_ID], [IS_DELETED], [LEAVE_TYPE_ID], [NOTES], [REFERENCE_ID], [TRANSACTION_DATE], [TRANSACTION_TYPE], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[TRANSACTION_ID]
VALUES (@p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40);
2026-01-28 19:55:51.115 +03:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2026-01-28 19:55:51.127 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-01-28 19:55:51.139 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Boolean'.
2026-01-28 19:55:51.141 +03:00 [INF] Executed action HRMS.API.Controllers.Leaves.LeavesController.ProcessAction (HRMS.API) in 199.7798ms
2026-01-28 19:55:51.143 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Leaves.LeavesController.ProcessAction (HRMS.API)'
2026-01-28 19:55:51.145 +03:00 [INF] HTTP POST /api/Leaves/action responded 200 in 218.1059 ms
2026-01-28 19:55:51.149 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Leaves/action - 200 null application/json; charset=utf-8 256.3466ms
2026-01-28 20:02:02.572 +03:00 [INF] üöÄ Starting HRMS Hospital API...
2026-01-28 20:02:04.601 +03:00 [INF] ‚úÖ HRMS Hospital API started successfully
2026-01-28 20:02:04.668 +03:00 [INF] User profile is available. Using 'C:\Users\MT\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-28 20:02:05.176 +03:00 [INF] Now listening on: https://localhost:5001
2026-01-28 20:02:05.180 +03:00 [INF] Now listening on: http://localhost:5000
2026-01-28 20:02:05.385 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-28 20:02:05.433 +03:00 [INF] Hosting environment: Development
2026-01-28 20:02:05.434 +03:00 [INF] Content root path: G:\HRMS_Hospital\Backend\HRMS\HRMS.API
2026-01-28 20:02:06.328 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - null null
2026-01-28 20:02:07.135 +03:00 [INF] HTTP GET /swagger/index.html responded 200 in 265.1577 ms
2026-01-28 20:02:07.150 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - 200 null text/html;charset=utf-8 831.5532ms
2026-01-28 20:02:07.182 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - null null
2026-01-28 20:02:07.208 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 25.9248ms
2026-01-28 20:02:07.931 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_vs/browserLink - null null
2026-01-28 20:02:08.046 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_vs/browserLink - 200 null text/javascript; charset=UTF-8 114.531ms
2026-01-28 20:02:09.395 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - null null
2026-01-28 20:02:09.950 +03:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 550.9180 ms
2026-01-28 20:02:10.003 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 608.3918ms
2026-01-28 20:02:53.970 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Leaves/apply - application/json 187
2026-01-28 20:02:54.009 +03:00 [INF] CORS policy execution successful.
2026-01-28 20:02:54.020 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Leaves.LeavesController.ApplyForLeave (HRMS.API)'
2026-01-28 20:02:54.066 +03:00 [INF] Route matched with {action = "ApplyForLeave", controller = "Leaves"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] ApplyForLeave(HRMS.Application.Features.Leaves.Requests.Commands.CreateLeaveRequest.CreateLeaveRequestCommand) on controller HRMS.API.Controllers.Leaves.LeavesController (HRMS.API).
2026-01-28 20:02:56.649 +03:00 [WRN] No store type was specified for the decimal property 'HoursCount' on entity type 'ShiftType'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-01-28 20:02:56.652 +03:00 [WRN] No store type was specified for the decimal property 'MaxSalary' on entity type 'JobGrade'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-01-28 20:02:56.655 +03:00 [WRN] No store type was specified for the decimal property 'MinSalary' on entity type 'JobGrade'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-01-28 20:02:58.253 +03:00 [INF] Executed DbCommand (110ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0
2026-01-28 20:02:58.396 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [l].[LEAVE_TYPE_ID], [l].[CREATED_AT], [l].[CREATED_BY], [l].[DEFAULT_DAYS], [l].[IS_CARRY_FORWARD], [l].[IS_DEDUCTIBLE], [l].[IS_DELETED], [l].[IS_PAID], [l].[LEAVE_NAME_AR], [l].[LEAVE_NAME_EN], [l].[MAX_DAYS_PER_YEAR], [l].[REQUIRES_ATTACHMENT], [l].[UPDATED_AT], [l].[UPDATED_BY], [l].[VERSION_NO]
FROM [HR_LEAVES].[LEAVE_TYPES] AS [l]
WHERE [l].[LEAVE_TYPE_ID] = @__p_0
2026-01-28 20:02:58.604 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__employeeId_0='?' (DbType = Int32), @__request_EndDate_1='?' (DbType = DateTime2), @__request_StartDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HR_LEAVES].[LEAVE_REQUESTS] AS [l]
        WHERE [l].[EMPLOYEE_ID] = @__employeeId_0 AND ([l].[STATUS] <> N'REJECTED' OR [l].[STATUS] IS NULL) AND [l].[START_DATE] <= @__request_EndDate_1 AND [l].[END_DATE] >= @__request_StartDate_2) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-28 20:02:58.718 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__years_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[HOLIDAY_ID], [p].[CREATED_AT], [p].[CREATED_BY], [p].[END_DATE], [p].[HOLIDAY_NAME_AR], [p].[IS_DELETED], [p].[START_DATE], [p].[UPDATED_AT], [p].[UPDATED_BY], [p].[VERSION_NO], [p].[YEAR]
FROM [HR_LEAVES].[PUBLIC_HOLIDAYS] AS [p]
WHERE CAST([p].[YEAR] AS int) IN (
    SELECT [y].[value]
    FROM OPENJSON(@__years_0) WITH ([value] int '$') AS [y]
)
2026-01-28 20:02:58.778 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__8__locals1_employeeId_0='?' (DbType = Int32), @__8__locals1_request_LeaveTypeId_1='?' (DbType = Int32), @__year_2='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[BALANCE_ID], [e].[CREATED_AT], [e].[CREATED_BY], [e].[CURRENT_BALANCE], [e].[EMPLOYEE_ID], [e].[IS_DELETED], [e].[LEAVE_TYPE_ID], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO], [e].[YEAR]
FROM [HR_LEAVES].[EMPLOYEE_LEAVE_BALANCES] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__8__locals1_employeeId_0 AND [e].[LEAVE_TYPE_ID] = @__8__locals1_request_LeaveTypeId_1 AND [e].[YEAR] = @__year_2
2026-01-28 20:02:59.212 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (Size = 500), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2), @p6='?' (Size = 1) (DbType = Byte), @p7='?' (Size = 1) (DbType = Byte), @p8='?' (DbType = Int32), @p9='?' (Size = 200), @p10='?' (Size = 200), @p11='?' (DbType = DateTime2), @p12='?' (Size = 20), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_LEAVES].[LEAVE_REQUESTS] ([ATTACHMENT_PATH], [CREATED_AT], [CREATED_BY], [DAYS_COUNT], [EMPLOYEE_ID], [END_DATE], [IS_DELETED], [IS_POSTED_TO_BALANCE], [LEAVE_TYPE_ID], [REASON], [REJECTION_REASON], [START_DATE], [STATUS], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[REQUEST_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
2026-01-28 20:02:59.337 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-01-28 20:02:59.361 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Int32'.
2026-01-28 20:02:59.374 +03:00 [INF] Executed action HRMS.API.Controllers.Leaves.LeavesController.ApplyForLeave (HRMS.API) in 5300.0693ms
2026-01-28 20:02:59.377 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Leaves.LeavesController.ApplyForLeave (HRMS.API)'
2026-01-28 20:02:59.379 +03:00 [INF] HTTP POST /api/Leaves/apply responded 200 in 5374.1464 ms
2026-01-28 20:02:59.403 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Leaves/apply - 200 null application/json; charset=utf-8 5432.3878ms
2026-01-28 20:03:21.846 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Leaves/action - application/json 189
2026-01-28 20:03:21.864 +03:00 [INF] CORS policy execution successful.
2026-01-28 20:03:21.867 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Leaves.LeavesController.ProcessAction (HRMS.API)'
2026-01-28 20:03:21.879 +03:00 [INF] Route matched with {action = "ProcessAction", controller = "Leaves"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Boolean]] ProcessAction(HRMS.Application.DTOs.Leaves.LeaveActionDto) on controller HRMS.API.Controllers.Leaves.LeavesController (HRMS.API).
2026-01-28 20:03:22.170 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__request_Data_RequestId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [l].[REQUEST_ID], [l].[ATTACHMENT_PATH], [l].[CREATED_AT], [l].[CREATED_BY], [l].[DAYS_COUNT], [l].[EMPLOYEE_ID], [l].[END_DATE], [l].[IS_DELETED], [l].[IS_POSTED_TO_BALANCE], [l].[LEAVE_TYPE_ID], [l].[REASON], [l].[REJECTION_REASON], [l].[START_DATE], [l].[STATUS], [l].[UPDATED_AT], [l].[UPDATED_BY], [l].[VERSION_NO], [l0].[LEAVE_TYPE_ID], [l0].[CREATED_AT], [l0].[CREATED_BY], [l0].[DEFAULT_DAYS], [l0].[IS_CARRY_FORWARD], [l0].[IS_DEDUCTIBLE], [l0].[IS_DELETED], [l0].[IS_PAID], [l0].[LEAVE_NAME_AR], [l0].[LEAVE_NAME_EN], [l0].[MAX_DAYS_PER_YEAR], [l0].[REQUIRES_ATTACHMENT], [l0].[UPDATED_AT], [l0].[UPDATED_BY], [l0].[VERSION_NO]
FROM [HR_LEAVES].[LEAVE_REQUESTS] AS [l]
INNER JOIN [HR_LEAVES].[LEAVE_TYPES] AS [l0] ON [l].[LEAVE_TYPE_ID] = [l0].[LEAVE_TYPE_ID]
WHERE [l].[REQUEST_ID] = @__request_Data_RequestId_0
2026-01-28 20:03:22.206 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__8__locals1_leaveRequest_EmployeeId_0='?' (DbType = Int32), @__8__locals1_leaveRequest_LeaveTypeId_1='?' (DbType = Int32), @__year_2='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[BALANCE_ID], [e].[CREATED_AT], [e].[CREATED_BY], [e].[CURRENT_BALANCE], [e].[EMPLOYEE_ID], [e].[IS_DELETED], [e].[LEAVE_TYPE_ID], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO], [e].[YEAR]
FROM [HR_LEAVES].[EMPLOYEE_LEAVE_BALANCES] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__8__locals1_leaveRequest_EmployeeId_0 AND [e].[LEAVE_TYPE_ID] = @__8__locals1_leaveRequest_LeaveTypeId_1 AND [e].[YEAR] = @__year_2
2026-01-28 20:03:22.303 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__leaveRequest_EmployeeId_0='?' (DbType = Int32), @__leaveRequest_StartDate_Date_1='?' (DbType = DateTime2), @__leaveRequest_EndDate_Date_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[ROSTER_ID], [e].[CREATED_AT], [e].[CREATED_BY], [e].[EMPLOYEE_ID], [e].[IS_DELETED], [e].[IS_OFF_DAY], [e].[ROSTER_DATE], [e].[SHIFT_ID], [e].[STATUS], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO]
FROM [HR_ATTENDANCE].[EMPLOYEE_ROSTERS] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__leaveRequest_EmployeeId_0 AND CONVERT(date, [e].[ROSTER_DATE]) >= @__leaveRequest_StartDate_Date_1 AND CONVERT(date, [e].[ROSTER_DATE]) <= @__leaveRequest_EndDate_Date_2
2026-01-28 20:03:22.381 +03:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2026-01-28 20:03:22.418 +03:00 [INF] Executed DbCommand (32ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200), @p9='?' (Size = 20), @p10='?' (Size = 50), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (DbType = Int64), @p16='?' (Size = 100), @p17='?' (Size = 200), @p19='?' (DbType = Int32), @p18='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p20='?' (DbType = Int32), @p26='?' (DbType = Int32), @p21='?' (DbType = DateTime2), @p22='?' (Size = 50), @p23='?' (Size = 1) (DbType = Byte), @p24='?' (Size = 200), @p25='?' (Size = 20), @p27='?' (DbType = Int32), @p28='?' (DbType = DateTime2), @p29='?' (Size = 50), @p30='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p31='?' (DbType = Int32), @p32='?' (Size = 1) (DbType = Byte), @p33='?' (DbType = Int32), @p34='?' (Size = 200), @p35='?' (DbType = Int32), @p36='?' (DbType = DateTime2), @p37='?' (Size = 20), @p38='?' (DbType = DateTime2), @p39='?' (Size = 50), @p40='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
MERGE [HR_CORE].[AUDIT_LOGS] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, 0),
(@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, 1)) AS i ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
VALUES (i.[ACTION_TYPE], i.[IP_ADDRESS], i.[NEW_VALUE], i.[OLD_VALUE], i.[PERFORMED_AT], i.[PERFORMED_BY], i.[RECORD_ID], i.[TABLE_NAME], i.[USER_AGENT])
OUTPUT INSERTED.[LOG_ID], i._Position;
UPDATE [HR_LEAVES].[EMPLOYEE_LEAVE_BALANCES] SET [CURRENT_BALANCE] = @p18
OUTPUT 1
WHERE [BALANCE_ID] = @p19 AND [VERSION_NO] = @p20;
UPDATE [HR_LEAVES].[LEAVE_REQUESTS] SET [CREATED_AT] = @p21, [CREATED_BY] = @p22, [IS_POSTED_TO_BALANCE] = @p23, [REJECTION_REASON] = @p24, [STATUS] = @p25
OUTPUT 1
WHERE [REQUEST_ID] = @p26 AND [VERSION_NO] = @p27;
INSERT INTO [HR_LEAVES].[LEAVE_TRANSACTIONS] ([CREATED_AT], [CREATED_BY], [DAYS], [EMPLOYEE_ID], [IS_DELETED], [LEAVE_TYPE_ID], [NOTES], [REFERENCE_ID], [TRANSACTION_DATE], [TRANSACTION_TYPE], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[TRANSACTION_ID]
VALUES (@p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40);
2026-01-28 20:03:22.440 +03:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2026-01-28 20:03:22.446 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-01-28 20:03:22.470 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Boolean'.
2026-01-28 20:03:22.473 +03:00 [INF] Executed action HRMS.API.Controllers.Leaves.LeavesController.ProcessAction (HRMS.API) in 590.4619ms
2026-01-28 20:03:22.475 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Leaves.LeavesController.ProcessAction (HRMS.API)'
2026-01-28 20:03:22.476 +03:00 [INF] HTTP POST /api/Leaves/action responded 200 in 612.2173 ms
2026-01-28 20:03:22.479 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Leaves/action - 200 null application/json; charset=utf-8 633.413ms
2026-01-28 20:18:48.648 +03:00 [INF] üöÄ Starting HRMS Hospital API...
2026-01-28 20:18:53.613 +03:00 [INF] ‚úÖ HRMS Hospital API started successfully
2026-01-28 20:18:53.715 +03:00 [INF] User profile is available. Using 'C:\Users\MT\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-28 20:18:55.424 +03:00 [INF] Now listening on: https://localhost:5001
2026-01-28 20:18:55.429 +03:00 [INF] Now listening on: http://localhost:5000
2026-01-28 20:18:55.695 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-28 20:18:55.720 +03:00 [INF] Hosting environment: Development
2026-01-28 20:18:55.723 +03:00 [INF] Content root path: G:\HRMS_Hospital\Backend\HRMS\HRMS.API
2026-01-28 20:18:56.821 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - null null
2026-01-28 20:18:59.419 +03:00 [INF] HTTP GET /swagger/index.html responded 200 in 1538.7167 ms
2026-01-28 20:19:00.288 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - null null
2026-01-28 20:19:00.799 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - 200 null text/html;charset=utf-8 3991.6316ms
2026-01-28 20:19:00.292 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_vs/browserLink - null null
2026-01-28 20:19:00.969 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 682.5635ms
2026-01-28 20:19:01.250 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_vs/browserLink - 200 null text/javascript; charset=UTF-8 957.8351ms
2026-01-28 20:19:02.385 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - null null
2026-01-28 20:19:03.563 +03:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 1165.5318 ms
2026-01-28 20:19:04.219 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 1833.5527ms
2026-01-28 20:21:19.595 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Leaves/apply - application/json 226
2026-01-28 20:21:19.624 +03:00 [INF] CORS policy execution successful.
2026-01-28 20:21:19.686 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Leaves.LeavesController.ApplyForLeave (HRMS.API)'
2026-01-28 20:21:19.732 +03:00 [INF] Route matched with {action = "ApplyForLeave", controller = "Leaves"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] ApplyForLeave(HRMS.Application.Features.Leaves.Requests.Commands.CreateLeaveRequest.CreateLeaveRequestCommand) on controller HRMS.API.Controllers.Leaves.LeavesController (HRMS.API).
2026-01-28 20:21:22.623 +03:00 [WRN] No store type was specified for the decimal property 'HoursCount' on entity type 'ShiftType'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-01-28 20:21:22.626 +03:00 [WRN] No store type was specified for the decimal property 'MaxSalary' on entity type 'JobGrade'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-01-28 20:21:22.629 +03:00 [WRN] No store type was specified for the decimal property 'MinSalary' on entity type 'JobGrade'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-01-28 20:21:24.361 +03:00 [INF] Executed DbCommand (126ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0
2026-01-28 20:21:24.547 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [l].[LEAVE_TYPE_ID], [l].[CREATED_AT], [l].[CREATED_BY], [l].[DEFAULT_DAYS], [l].[IS_CARRY_FORWARD], [l].[IS_DEDUCTIBLE], [l].[IS_DELETED], [l].[IS_PAID], [l].[LEAVE_NAME_AR], [l].[LEAVE_NAME_EN], [l].[MAX_DAYS_PER_YEAR], [l].[REQUIRES_ATTACHMENT], [l].[UPDATED_AT], [l].[UPDATED_BY], [l].[VERSION_NO]
FROM [HR_LEAVES].[LEAVE_TYPES] AS [l]
WHERE [l].[LEAVE_TYPE_ID] = @__p_0
2026-01-28 20:21:24.812 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__employeeId_0='?' (DbType = Int32), @__request_EndDate_1='?' (DbType = DateTime2), @__request_StartDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HR_LEAVES].[LEAVE_REQUESTS] AS [l]
        WHERE [l].[EMPLOYEE_ID] = @__employeeId_0 AND ([l].[STATUS] <> N'REJECTED' OR [l].[STATUS] IS NULL) AND [l].[START_DATE] <= @__request_EndDate_1 AND [l].[END_DATE] >= @__request_StartDate_2) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-28 20:21:24.946 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__years_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[HOLIDAY_ID], [p].[CREATED_AT], [p].[CREATED_BY], [p].[END_DATE], [p].[HOLIDAY_NAME_AR], [p].[IS_DELETED], [p].[START_DATE], [p].[UPDATED_AT], [p].[UPDATED_BY], [p].[VERSION_NO], [p].[YEAR]
FROM [HR_LEAVES].[PUBLIC_HOLIDAYS] AS [p]
WHERE CAST([p].[YEAR] AS int) IN (
    SELECT [y].[value]
    FROM OPENJSON(@__years_0) WITH ([value] int '$') AS [y]
)
2026-01-28 20:21:41.661 +03:00 [INF] Executed action HRMS.API.Controllers.Leaves.LeavesController.ApplyForLeave (HRMS.API) in 21918.1448ms
2026-01-28 20:21:41.666 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Leaves.LeavesController.ApplyForLeave (HRMS.API)'
2026-01-28 20:21:42.061 +03:00 [ERR] Global Exception Caught: ŸÖÿØÿ© ÿßŸÑÿ•ÿ¨ÿßÿ≤ÿ© ÿßŸÑÿµÿßŸÅŸäÿ© ŸáŸä ÿµŸÅÿ± (ÿ±ÿ®ŸÖÿß ÿßÿÆÿ™ÿ±ÿ™ ÿ£ŸäÿßŸÖ ÿπÿ∑ŸÑ ŸÅŸÇÿ∑).
FluentValidation.ValidationException: ŸÖÿØÿ© ÿßŸÑÿ•ÿ¨ÿßÿ≤ÿ© ÿßŸÑÿµÿßŸÅŸäÿ© ŸáŸä ÿµŸÅÿ± (ÿ±ÿ®ŸÖÿß ÿßÿÆÿ™ÿ±ÿ™ ÿ£ŸäÿßŸÖ ÿπÿ∑ŸÑ ŸÅŸÇÿ∑).
   at HRMS.Application.Features.Leaves.Requests.Commands.CreateLeaveRequest.CreateLeaveRequestCommandHandler.Handle(CreateLeaveRequestCommand request, CancellationToken cancellationToken) in G:\HRMS_Hospital\Backend\HRMS\HRMS.Application\Features\Leaves\Requests\Commands\CreateLeaveRequest\CreateLeaveRequestCommand.cs:line 130
   at HRMS.API.Controllers.Leaves.LeavesController.ApplyForLeave(CreateLeaveRequestCommand command) in G:\HRMS_Hospital\Backend\HRMS\HRMS.API\Controllers\Leaves\LeavesController.cs:line 33
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at HRMS.API.Middleware.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in G:\HRMS_Hospital\Backend\HRMS\HRMS.API\Middleware\GlobalExceptionMiddleware.cs:line 25
2026-01-28 20:21:42.129 +03:00 [INF] HTTP POST /api/Leaves/apply responded 400 in 22511.5551 ms
2026-01-28 20:21:42.146 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Leaves/apply - 400 null application/json 22550.7035ms
2026-01-28 20:21:56.304 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Leaves/apply - application/json 226
2026-01-28 20:21:56.324 +03:00 [INF] CORS policy execution successful.
2026-01-28 20:21:56.329 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Leaves.LeavesController.ApplyForLeave (HRMS.API)'
2026-01-28 20:21:56.333 +03:00 [INF] Route matched with {action = "ApplyForLeave", controller = "Leaves"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] ApplyForLeave(HRMS.Application.Features.Leaves.Requests.Commands.CreateLeaveRequest.CreateLeaveRequestCommand) on controller HRMS.API.Controllers.Leaves.LeavesController (HRMS.API).
2026-01-28 20:21:56.472 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0
2026-01-28 20:21:56.480 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [l].[LEAVE_TYPE_ID], [l].[CREATED_AT], [l].[CREATED_BY], [l].[DEFAULT_DAYS], [l].[IS_CARRY_FORWARD], [l].[IS_DEDUCTIBLE], [l].[IS_DELETED], [l].[IS_PAID], [l].[LEAVE_NAME_AR], [l].[LEAVE_NAME_EN], [l].[MAX_DAYS_PER_YEAR], [l].[REQUIRES_ATTACHMENT], [l].[UPDATED_AT], [l].[UPDATED_BY], [l].[VERSION_NO]
FROM [HR_LEAVES].[LEAVE_TYPES] AS [l]
WHERE [l].[LEAVE_TYPE_ID] = @__p_0
2026-01-28 20:21:56.491 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__employeeId_0='?' (DbType = Int32), @__request_EndDate_1='?' (DbType = DateTime2), @__request_StartDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HR_LEAVES].[LEAVE_REQUESTS] AS [l]
        WHERE [l].[EMPLOYEE_ID] = @__employeeId_0 AND ([l].[STATUS] <> N'REJECTED' OR [l].[STATUS] IS NULL) AND [l].[START_DATE] <= @__request_EndDate_1 AND [l].[END_DATE] >= @__request_StartDate_2) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-28 20:21:56.498 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__years_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[HOLIDAY_ID], [p].[CREATED_AT], [p].[CREATED_BY], [p].[END_DATE], [p].[HOLIDAY_NAME_AR], [p].[IS_DELETED], [p].[START_DATE], [p].[UPDATED_AT], [p].[UPDATED_BY], [p].[VERSION_NO], [p].[YEAR]
FROM [HR_LEAVES].[PUBLIC_HOLIDAYS] AS [p]
WHERE CAST([p].[YEAR] AS int) IN (
    SELECT [y].[value]
    FROM OPENJSON(@__years_0) WITH ([value] int '$') AS [y]
)
2026-01-28 20:21:56.536 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__8__locals1_employeeId_0='?' (DbType = Int32), @__8__locals1_request_LeaveTypeId_1='?' (DbType = Int32), @__year_2='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[BALANCE_ID], [e].[CREATED_AT], [e].[CREATED_BY], [e].[CURRENT_BALANCE], [e].[EMPLOYEE_ID], [e].[IS_DELETED], [e].[LEAVE_TYPE_ID], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO], [e].[YEAR]
FROM [HR_LEAVES].[EMPLOYEE_LEAVE_BALANCES] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__8__locals1_employeeId_0 AND [e].[LEAVE_TYPE_ID] = @__8__locals1_request_LeaveTypeId_1 AND [e].[YEAR] = @__year_2
2026-01-28 20:21:56.973 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 500), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2), @p6='?' (Size = 1) (DbType = Byte), @p7='?' (Size = 1) (DbType = Byte), @p8='?' (DbType = Int32), @p9='?' (Size = 200), @p10='?' (Size = 200), @p11='?' (DbType = DateTime2), @p12='?' (Size = 20), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_LEAVES].[LEAVE_REQUESTS] ([ATTACHMENT_PATH], [CREATED_AT], [CREATED_BY], [DAYS_COUNT], [EMPLOYEE_ID], [END_DATE], [IS_DELETED], [IS_POSTED_TO_BALANCE], [LEAVE_TYPE_ID], [REASON], [REJECTION_REASON], [START_DATE], [STATUS], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[REQUEST_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
2026-01-28 20:21:57.118 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-01-28 20:21:57.144 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Int32'.
2026-01-28 20:21:57.152 +03:00 [INF] Executed action HRMS.API.Controllers.Leaves.LeavesController.ApplyForLeave (HRMS.API) in 711.9998ms
2026-01-28 20:21:57.154 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Leaves.LeavesController.ApplyForLeave (HRMS.API)'
2026-01-28 20:21:57.155 +03:00 [INF] HTTP POST /api/Leaves/apply responded 200 in 835.4118 ms
2026-01-28 20:21:57.157 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Leaves/apply - 200 null application/json; charset=utf-8 853.9612ms
2026-01-28 20:23:18.216 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Leaves/action - application/json 162
2026-01-28 20:23:18.284 +03:00 [INF] CORS policy execution successful.
2026-01-28 20:23:18.285 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Leaves.LeavesController.ProcessAction (HRMS.API)'
2026-01-28 20:23:18.297 +03:00 [INF] Route matched with {action = "ProcessAction", controller = "Leaves"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Boolean]] ProcessAction(HRMS.Application.DTOs.Leaves.LeaveActionDto) on controller HRMS.API.Controllers.Leaves.LeavesController (HRMS.API).
2026-01-28 20:23:18.575 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__request_Data_RequestId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [l].[REQUEST_ID], [l].[ATTACHMENT_PATH], [l].[CREATED_AT], [l].[CREATED_BY], [l].[DAYS_COUNT], [l].[EMPLOYEE_ID], [l].[END_DATE], [l].[IS_DELETED], [l].[IS_POSTED_TO_BALANCE], [l].[LEAVE_TYPE_ID], [l].[REASON], [l].[REJECTION_REASON], [l].[START_DATE], [l].[STATUS], [l].[UPDATED_AT], [l].[UPDATED_BY], [l].[VERSION_NO], [l0].[LEAVE_TYPE_ID], [l0].[CREATED_AT], [l0].[CREATED_BY], [l0].[DEFAULT_DAYS], [l0].[IS_CARRY_FORWARD], [l0].[IS_DEDUCTIBLE], [l0].[IS_DELETED], [l0].[IS_PAID], [l0].[LEAVE_NAME_AR], [l0].[LEAVE_NAME_EN], [l0].[MAX_DAYS_PER_YEAR], [l0].[REQUIRES_ATTACHMENT], [l0].[UPDATED_AT], [l0].[UPDATED_BY], [l0].[VERSION_NO]
FROM [HR_LEAVES].[LEAVE_REQUESTS] AS [l]
INNER JOIN [HR_LEAVES].[LEAVE_TYPES] AS [l0] ON [l].[LEAVE_TYPE_ID] = [l0].[LEAVE_TYPE_ID]
WHERE [l].[REQUEST_ID] = @__request_Data_RequestId_0
2026-01-28 20:23:18.605 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__8__locals1_leaveRequest_EmployeeId_0='?' (DbType = Int32), @__8__locals1_leaveRequest_LeaveTypeId_1='?' (DbType = Int32), @__year_2='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[BALANCE_ID], [e].[CREATED_AT], [e].[CREATED_BY], [e].[CURRENT_BALANCE], [e].[EMPLOYEE_ID], [e].[IS_DELETED], [e].[LEAVE_TYPE_ID], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO], [e].[YEAR]
FROM [HR_LEAVES].[EMPLOYEE_LEAVE_BALANCES] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__8__locals1_leaveRequest_EmployeeId_0 AND [e].[LEAVE_TYPE_ID] = @__8__locals1_leaveRequest_LeaveTypeId_1 AND [e].[YEAR] = @__year_2
2026-01-28 20:23:50.128 +03:00 [INF] Executed action HRMS.API.Controllers.Leaves.LeavesController.ProcessAction (HRMS.API) in 31827.5768ms
2026-01-28 20:23:50.192 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Leaves.LeavesController.ProcessAction (HRMS.API)'
2026-01-28 20:23:51.052 +03:00 [ERR] Global Exception Caught: The current provider doesn't have a store type mapping for properties of type 'CancellationToken'.
System.InvalidOperationException: The current provider doesn't have a store type mapping for properties of type 'CancellationToken'.
   at Microsoft.EntityFrameworkCore.Storage.RelationalTypeMappingSourceExtensions.GetMapping(IRelationalTypeMappingSource typeMappingSource, Type clrType, IModel model)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RawSqlCommandBuilder.Build(String sql, IEnumerable`1 parameters, IModel model)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.ExecuteSqlRawAsync(DatabaseFacade databaseFacade, String sql, IEnumerable`1 parameters, CancellationToken cancellationToken)
   at HRMS.Application.Features.Leaves.Requests.Commands.ProcessLeaveAction.ProcessLeaveActionCommandHandler.Handle(ProcessLeaveActionCommand request, CancellationToken cancellationToken) in G:\HRMS_Hospital\Backend\HRMS\HRMS.Application\Features\Leaves\Requests\Commands\ProcessLeaveAction\ProcessLeaveActionCommand.cs:line 121
   at HRMS.Application.Features.Leaves.Requests.Commands.ProcessLeaveAction.ProcessLeaveActionCommandHandler.Handle(ProcessLeaveActionCommand request, CancellationToken cancellationToken) in G:\HRMS_Hospital\Backend\HRMS\HRMS.Application\Features\Leaves\Requests\Commands\ProcessLeaveAction\ProcessLeaveActionCommand.cs:line 147
   at HRMS.API.Controllers.Leaves.LeavesController.ProcessAction(LeaveActionDto actionDto) in G:\HRMS_Hospital\Backend\HRMS\HRMS.API\Controllers\Leaves\LeavesController.cs:line 57
   at lambda_method798(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at HRMS.API.Middleware.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in G:\HRMS_Hospital\Backend\HRMS\HRMS.API\Middleware\GlobalExceptionMiddleware.cs:line 25
2026-01-28 20:23:51.901 +03:00 [ERR] HTTP POST /api/Leaves/action responded 500 in 33617.2372 ms
2026-01-28 20:23:51.915 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Leaves/action - 500 null application/json 33699.8243ms
2026-01-28 20:27:44.968 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - null null
2026-01-28 20:27:45.025 +03:00 [INF] HTTP GET /swagger/index.html responded 200 in 2.5523 ms
2026-01-28 20:27:45.153 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - null null
2026-01-28 20:27:45.153 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_vs/browserLink - null null
2026-01-28 20:27:45.865 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - 200 null text/html;charset=utf-8 896.6822ms
2026-01-28 20:27:45.897 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 744.0263ms
2026-01-28 20:27:45.936 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_vs/browserLink - 200 null text/javascript; charset=UTF-8 783.3626ms
2026-01-28 20:27:46.638 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - null null
2026-01-28 20:27:47.593 +03:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 384.5890 ms
2026-01-28 20:27:47.598 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 960.9285ms
2026-01-28 20:28:36.271 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Leaves/action - application/json 168
2026-01-28 20:28:36.275 +03:00 [INF] CORS policy execution successful.
2026-01-28 20:28:36.276 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Leaves.LeavesController.ProcessAction (HRMS.API)'
2026-01-28 20:28:36.283 +03:00 [INF] Route matched with {action = "ProcessAction", controller = "Leaves"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Boolean]] ProcessAction(HRMS.Application.DTOs.Leaves.LeaveActionDto) on controller HRMS.API.Controllers.Leaves.LeavesController (HRMS.API).
2026-01-28 20:28:36.401 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__request_Data_RequestId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [l].[REQUEST_ID], [l].[ATTACHMENT_PATH], [l].[CREATED_AT], [l].[CREATED_BY], [l].[DAYS_COUNT], [l].[EMPLOYEE_ID], [l].[END_DATE], [l].[IS_DELETED], [l].[IS_POSTED_TO_BALANCE], [l].[LEAVE_TYPE_ID], [l].[REASON], [l].[REJECTION_REASON], [l].[START_DATE], [l].[STATUS], [l].[UPDATED_AT], [l].[UPDATED_BY], [l].[VERSION_NO], [l0].[LEAVE_TYPE_ID], [l0].[CREATED_AT], [l0].[CREATED_BY], [l0].[DEFAULT_DAYS], [l0].[IS_CARRY_FORWARD], [l0].[IS_DEDUCTIBLE], [l0].[IS_DELETED], [l0].[IS_PAID], [l0].[LEAVE_NAME_AR], [l0].[LEAVE_NAME_EN], [l0].[MAX_DAYS_PER_YEAR], [l0].[REQUIRES_ATTACHMENT], [l0].[UPDATED_AT], [l0].[UPDATED_BY], [l0].[VERSION_NO]
FROM [HR_LEAVES].[LEAVE_REQUESTS] AS [l]
INNER JOIN [HR_LEAVES].[LEAVE_TYPES] AS [l0] ON [l].[LEAVE_TYPE_ID] = [l0].[LEAVE_TYPE_ID]
WHERE [l].[REQUEST_ID] = @__request_Data_RequestId_0
2026-01-28 20:28:36.417 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__8__locals1_leaveRequest_EmployeeId_0='?' (DbType = Int32), @__8__locals1_leaveRequest_LeaveTypeId_1='?' (DbType = Int32), @__year_2='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[BALANCE_ID], [e].[CREATED_AT], [e].[CREATED_BY], [e].[CURRENT_BALANCE], [e].[EMPLOYEE_ID], [e].[IS_DELETED], [e].[LEAVE_TYPE_ID], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO], [e].[YEAR]
FROM [HR_LEAVES].[EMPLOYEE_LEAVE_BALANCES] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__8__locals1_leaveRequest_EmployeeId_0 AND [e].[LEAVE_TYPE_ID] = @__8__locals1_leaveRequest_LeaveTypeId_1 AND [e].[YEAR] = @__year_2
2026-01-28 20:28:36.460 +03:00 [INF] Executed DbCommand (28ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']

    UPDATE [HR_ATTENDANCE].[EMPLOYEE_ROSTERS]
    SET [STATUS] = 'ON_LEAVE', 
        [IS_OFF_DAY] = 1
    WHERE [EMPLOYEE_ID] = @p0 
    AND CAST([ROSTER_DATE] AS DATE) BETWEEN CAST(@p1 AS DATE) AND CAST(@p2 AS DATE)
2026-01-28 20:28:36.531 +03:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2026-01-28 20:28:36.560 +03:00 [INF] Executed DbCommand (24ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200), @p9='?' (Size = 20), @p10='?' (Size = 50), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (DbType = Int64), @p16='?' (Size = 100), @p17='?' (Size = 200), @p19='?' (DbType = Int32), @p18='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p20='?' (DbType = Int32), @p26='?' (DbType = Int32), @p21='?' (DbType = DateTime2), @p22='?' (Size = 50), @p23='?' (Size = 1) (DbType = Byte), @p24='?' (Size = 200), @p25='?' (Size = 20), @p27='?' (DbType = Int32), @p28='?' (DbType = DateTime2), @p29='?' (Size = 50), @p30='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p31='?' (DbType = Int32), @p32='?' (Size = 1) (DbType = Byte), @p33='?' (DbType = Int32), @p34='?' (Size = 200), @p35='?' (DbType = Int32), @p36='?' (DbType = DateTime2), @p37='?' (Size = 20), @p38='?' (DbType = DateTime2), @p39='?' (Size = 50), @p40='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
MERGE [HR_CORE].[AUDIT_LOGS] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, 0),
(@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, 1)) AS i ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
VALUES (i.[ACTION_TYPE], i.[IP_ADDRESS], i.[NEW_VALUE], i.[OLD_VALUE], i.[PERFORMED_AT], i.[PERFORMED_BY], i.[RECORD_ID], i.[TABLE_NAME], i.[USER_AGENT])
OUTPUT INSERTED.[LOG_ID], i._Position;
UPDATE [HR_LEAVES].[EMPLOYEE_LEAVE_BALANCES] SET [CURRENT_BALANCE] = @p18
OUTPUT 1
WHERE [BALANCE_ID] = @p19 AND [VERSION_NO] = @p20;
UPDATE [HR_LEAVES].[LEAVE_REQUESTS] SET [CREATED_AT] = @p21, [CREATED_BY] = @p22, [IS_POSTED_TO_BALANCE] = @p23, [REJECTION_REASON] = @p24, [STATUS] = @p25
OUTPUT 1
WHERE [REQUEST_ID] = @p26 AND [VERSION_NO] = @p27;
INSERT INTO [HR_LEAVES].[LEAVE_TRANSACTIONS] ([CREATED_AT], [CREATED_BY], [DAYS], [EMPLOYEE_ID], [IS_DELETED], [LEAVE_TYPE_ID], [NOTES], [REFERENCE_ID], [TRANSACTION_DATE], [TRANSACTION_TYPE], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[TRANSACTION_ID]
VALUES (@p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40);
2026-01-28 20:28:36.591 +03:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2026-01-28 20:28:36.598 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-01-28 20:28:36.614 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Boolean'.
2026-01-28 20:28:36.619 +03:00 [INF] Executed action HRMS.API.Controllers.Leaves.LeavesController.ProcessAction (HRMS.API) in 328.9612ms
2026-01-28 20:28:36.621 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Leaves.LeavesController.ProcessAction (HRMS.API)'
2026-01-28 20:28:36.623 +03:00 [INF] HTTP POST /api/Leaves/action responded 200 in 348.3865 ms
2026-01-28 20:28:36.630 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Leaves/action - 200 null application/json; charset=utf-8 391.5996ms
2026-01-28 20:32:06.102 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Leaves/action - application/json 168
2026-01-28 20:32:06.118 +03:00 [INF] CORS policy execution successful.
2026-01-28 20:32:06.119 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Leaves.LeavesController.ProcessAction (HRMS.API)'
2026-01-28 20:32:06.126 +03:00 [INF] Route matched with {action = "ProcessAction", controller = "Leaves"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Boolean]] ProcessAction(HRMS.Application.DTOs.Leaves.LeaveActionDto) on controller HRMS.API.Controllers.Leaves.LeavesController (HRMS.API).
2026-01-28 20:32:06.262 +03:00 [INF] Executed DbCommand (28ms) [Parameters=[@__request_Data_RequestId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [l].[REQUEST_ID], [l].[ATTACHMENT_PATH], [l].[CREATED_AT], [l].[CREATED_BY], [l].[DAYS_COUNT], [l].[EMPLOYEE_ID], [l].[END_DATE], [l].[IS_DELETED], [l].[IS_POSTED_TO_BALANCE], [l].[LEAVE_TYPE_ID], [l].[REASON], [l].[REJECTION_REASON], [l].[START_DATE], [l].[STATUS], [l].[UPDATED_AT], [l].[UPDATED_BY], [l].[VERSION_NO], [l0].[LEAVE_TYPE_ID], [l0].[CREATED_AT], [l0].[CREATED_BY], [l0].[DEFAULT_DAYS], [l0].[IS_CARRY_FORWARD], [l0].[IS_DEDUCTIBLE], [l0].[IS_DELETED], [l0].[IS_PAID], [l0].[LEAVE_NAME_AR], [l0].[LEAVE_NAME_EN], [l0].[MAX_DAYS_PER_YEAR], [l0].[REQUIRES_ATTACHMENT], [l0].[UPDATED_AT], [l0].[UPDATED_BY], [l0].[VERSION_NO]
FROM [HR_LEAVES].[LEAVE_REQUESTS] AS [l]
INNER JOIN [HR_LEAVES].[LEAVE_TYPES] AS [l0] ON [l].[LEAVE_TYPE_ID] = [l0].[LEAVE_TYPE_ID]
WHERE [l].[REQUEST_ID] = @__request_Data_RequestId_0
2026-01-28 20:32:17.141 +03:00 [INF] Executed action HRMS.API.Controllers.Leaves.LeavesController.ProcessAction (HRMS.API) in 11008.2327ms
2026-01-28 20:32:17.157 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Leaves.LeavesController.ProcessAction (HRMS.API)'
2026-01-28 20:32:17.663 +03:00 [ERR] Global Exception Caught: ŸÑÿß ŸäŸÖŸÉŸÜ ÿ™ÿπÿØŸäŸÑ ÿ∑ŸÑÿ® ÿ®ÿ≠ÿßŸÑÿ© APPROVED
FluentValidation.ValidationException: ŸÑÿß ŸäŸÖŸÉŸÜ ÿ™ÿπÿØŸäŸÑ ÿ∑ŸÑÿ® ÿ®ÿ≠ÿßŸÑÿ© APPROVED
   at HRMS.Application.Features.Leaves.Requests.Commands.ProcessLeaveAction.ProcessLeaveActionCommandHandler.Handle(ProcessLeaveActionCommand request, CancellationToken cancellationToken)
   at HRMS.Application.Features.Leaves.Requests.Commands.ProcessLeaveAction.ProcessLeaveActionCommandHandler.Handle(ProcessLeaveActionCommand request, CancellationToken cancellationToken)
   at HRMS.API.Controllers.Leaves.LeavesController.ProcessAction(LeaveActionDto actionDto) in G:\HRMS_Hospital\Backend\HRMS\HRMS.API\Controllers\Leaves\LeavesController.cs:line 57
   at lambda_method928(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at HRMS.API.Middleware.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in G:\HRMS_Hospital\Backend\HRMS\HRMS.API\Middleware\GlobalExceptionMiddleware.cs:line 25
2026-01-28 20:32:17.716 +03:00 [INF] HTTP POST /api/Leaves/action responded 400 in 11598.6143 ms
2026-01-28 20:32:17.718 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Leaves/action - 400 null application/json 11616.0225ms
2026-01-28 20:34:45.262 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Leaves/apply - application/json 200
2026-01-28 20:34:45.266 +03:00 [INF] CORS policy execution successful.
2026-01-28 20:34:45.270 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Leaves.LeavesController.ApplyForLeave (HRMS.API)'
2026-01-28 20:34:45.277 +03:00 [INF] Route matched with {action = "ApplyForLeave", controller = "Leaves"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] ApplyForLeave(HRMS.Application.Features.Leaves.Requests.Commands.CreateLeaveRequest.CreateLeaveRequestCommand) on controller HRMS.API.Controllers.Leaves.LeavesController (HRMS.API).
2026-01-28 20:34:45.386 +03:00 [INF] Executed DbCommand (66ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0
2026-01-28 20:34:45.423 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [l].[LEAVE_TYPE_ID], [l].[CREATED_AT], [l].[CREATED_BY], [l].[DEFAULT_DAYS], [l].[IS_CARRY_FORWARD], [l].[IS_DEDUCTIBLE], [l].[IS_DELETED], [l].[IS_PAID], [l].[LEAVE_NAME_AR], [l].[LEAVE_NAME_EN], [l].[MAX_DAYS_PER_YEAR], [l].[REQUIRES_ATTACHMENT], [l].[UPDATED_AT], [l].[UPDATED_BY], [l].[VERSION_NO]
FROM [HR_LEAVES].[LEAVE_TYPES] AS [l]
WHERE [l].[LEAVE_TYPE_ID] = @__p_0
2026-01-28 20:34:45.438 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__employeeId_0='?' (DbType = Int32), @__request_EndDate_1='?' (DbType = DateTime2), @__request_StartDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HR_LEAVES].[LEAVE_REQUESTS] AS [l]
        WHERE [l].[EMPLOYEE_ID] = @__employeeId_0 AND ([l].[STATUS] <> N'REJECTED' OR [l].[STATUS] IS NULL) AND [l].[START_DATE] <= @__request_EndDate_1 AND [l].[END_DATE] >= @__request_StartDate_2) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-28 20:34:45.460 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__years_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[HOLIDAY_ID], [p].[CREATED_AT], [p].[CREATED_BY], [p].[END_DATE], [p].[HOLIDAY_NAME_AR], [p].[IS_DELETED], [p].[START_DATE], [p].[UPDATED_AT], [p].[UPDATED_BY], [p].[VERSION_NO], [p].[YEAR]
FROM [HR_LEAVES].[PUBLIC_HOLIDAYS] AS [p]
WHERE CAST([p].[YEAR] AS int) IN (
    SELECT [y].[value]
    FROM OPENJSON(@__years_0) WITH ([value] int '$') AS [y]
)
2026-01-28 20:35:01.713 +03:00 [INF] Executed action HRMS.API.Controllers.Leaves.LeavesController.ApplyForLeave (HRMS.API) in 16402.5659ms
2026-01-28 20:35:01.737 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Leaves.LeavesController.ApplyForLeave (HRMS.API)'
2026-01-28 20:35:02.253 +03:00 [ERR] Global Exception Caught: ŸÖÿØÿ© ÿßŸÑÿ•ÿ¨ÿßÿ≤ÿ© ÿßŸÑÿµÿßŸÅŸäÿ© ŸáŸä ÿµŸÅÿ± (ÿ±ÿ®ŸÖÿß ÿßÿÆÿ™ÿ±ÿ™ ÿ£ŸäÿßŸÖ ÿπÿ∑ŸÑ ŸÅŸÇÿ∑).
FluentValidation.ValidationException: ŸÖÿØÿ© ÿßŸÑÿ•ÿ¨ÿßÿ≤ÿ© ÿßŸÑÿµÿßŸÅŸäÿ© ŸáŸä ÿµŸÅÿ± (ÿ±ÿ®ŸÖÿß ÿßÿÆÿ™ÿ±ÿ™ ÿ£ŸäÿßŸÖ ÿπÿ∑ŸÑ ŸÅŸÇÿ∑).
   at HRMS.Application.Features.Leaves.Requests.Commands.CreateLeaveRequest.CreateLeaveRequestCommandHandler.Handle(CreateLeaveRequestCommand request, CancellationToken cancellationToken)
   at HRMS.API.Controllers.Leaves.LeavesController.ApplyForLeave(CreateLeaveRequestCommand command) in G:\HRMS_Hospital\Backend\HRMS\HRMS.API\Controllers\Leaves\LeavesController.cs:line 33
   at lambda_method986(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at HRMS.API.Middleware.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in G:\HRMS_Hospital\Backend\HRMS\HRMS.API\Middleware\GlobalExceptionMiddleware.cs:line 25
2026-01-28 20:35:02.286 +03:00 [INF] HTTP POST /api/Leaves/apply responded 400 in 17019.6872 ms
2026-01-28 20:35:02.288 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Leaves/apply - 400 null application/json 17026.3651ms
2026-01-28 20:36:07.500 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Leaves/apply - application/json 195
2026-01-28 20:36:07.721 +03:00 [INF] CORS policy execution successful.
2026-01-28 20:36:07.723 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Leaves.LeavesController.ApplyForLeave (HRMS.API)'
2026-01-28 20:36:07.727 +03:00 [INF] Route matched with {action = "ApplyForLeave", controller = "Leaves"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] ApplyForLeave(HRMS.Application.Features.Leaves.Requests.Commands.CreateLeaveRequest.CreateLeaveRequestCommand) on controller HRMS.API.Controllers.Leaves.LeavesController (HRMS.API).
2026-01-28 20:36:07.741 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0
2026-01-28 20:36:07.755 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [l].[LEAVE_TYPE_ID], [l].[CREATED_AT], [l].[CREATED_BY], [l].[DEFAULT_DAYS], [l].[IS_CARRY_FORWARD], [l].[IS_DEDUCTIBLE], [l].[IS_DELETED], [l].[IS_PAID], [l].[LEAVE_NAME_AR], [l].[LEAVE_NAME_EN], [l].[MAX_DAYS_PER_YEAR], [l].[REQUIRES_ATTACHMENT], [l].[UPDATED_AT], [l].[UPDATED_BY], [l].[VERSION_NO]
FROM [HR_LEAVES].[LEAVE_TYPES] AS [l]
WHERE [l].[LEAVE_TYPE_ID] = @__p_0
2026-01-28 20:36:07.770 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__employeeId_0='?' (DbType = Int32), @__request_EndDate_1='?' (DbType = DateTime2), @__request_StartDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HR_LEAVES].[LEAVE_REQUESTS] AS [l]
        WHERE [l].[EMPLOYEE_ID] = @__employeeId_0 AND ([l].[STATUS] <> N'REJECTED' OR [l].[STATUS] IS NULL) AND [l].[START_DATE] <= @__request_EndDate_1 AND [l].[END_DATE] >= @__request_StartDate_2) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-28 20:36:07.814 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__years_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[HOLIDAY_ID], [p].[CREATED_AT], [p].[CREATED_BY], [p].[END_DATE], [p].[HOLIDAY_NAME_AR], [p].[IS_DELETED], [p].[START_DATE], [p].[UPDATED_AT], [p].[UPDATED_BY], [p].[VERSION_NO], [p].[YEAR]
FROM [HR_LEAVES].[PUBLIC_HOLIDAYS] AS [p]
WHERE CAST([p].[YEAR] AS int) IN (
    SELECT [y].[value]
    FROM OPENJSON(@__years_0) WITH ([value] int '$') AS [y]
)
2026-01-28 20:36:07.832 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__8__locals1_employeeId_0='?' (DbType = Int32), @__8__locals1_request_LeaveTypeId_1='?' (DbType = Int32), @__year_2='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[BALANCE_ID], [e].[CREATED_AT], [e].[CREATED_BY], [e].[CURRENT_BALANCE], [e].[EMPLOYEE_ID], [e].[IS_DELETED], [e].[LEAVE_TYPE_ID], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO], [e].[YEAR]
FROM [HR_LEAVES].[EMPLOYEE_LEAVE_BALANCES] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__8__locals1_employeeId_0 AND [e].[LEAVE_TYPE_ID] = @__8__locals1_request_LeaveTypeId_1 AND [e].[YEAR] = @__year_2
2026-01-28 20:36:07.872 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[@p0='?' (Size = 500), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2), @p6='?' (Size = 1) (DbType = Byte), @p7='?' (Size = 1) (DbType = Byte), @p8='?' (DbType = Int32), @p9='?' (Size = 200), @p10='?' (Size = 200), @p11='?' (DbType = DateTime2), @p12='?' (Size = 20), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_LEAVES].[LEAVE_REQUESTS] ([ATTACHMENT_PATH], [CREATED_AT], [CREATED_BY], [DAYS_COUNT], [EMPLOYEE_ID], [END_DATE], [IS_DELETED], [IS_POSTED_TO_BALANCE], [LEAVE_TYPE_ID], [REASON], [REJECTION_REASON], [START_DATE], [STATUS], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[REQUEST_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
2026-01-28 20:36:07.943 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-01-28 20:36:07.961 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Int32'.
2026-01-28 20:36:08.106 +03:00 [INF] Executed action HRMS.API.Controllers.Leaves.LeavesController.ApplyForLeave (HRMS.API) in 372.9313ms
2026-01-28 20:36:08.163 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Leaves.LeavesController.ApplyForLeave (HRMS.API)'
2026-01-28 20:36:08.164 +03:00 [INF] HTTP POST /api/Leaves/apply responded 200 in 443.1168 ms
2026-01-28 20:36:08.167 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Leaves/apply - 200 null application/json; charset=utf-8 666.5744ms
2026-01-28 20:37:06.586 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Leaves/action - application/json 191
2026-01-28 20:37:06.640 +03:00 [INF] CORS policy execution successful.
2026-01-28 20:37:06.642 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Leaves.LeavesController.ProcessAction (HRMS.API)'
2026-01-28 20:37:06.643 +03:00 [INF] Route matched with {action = "ProcessAction", controller = "Leaves"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Boolean]] ProcessAction(HRMS.Application.DTOs.Leaves.LeaveActionDto) on controller HRMS.API.Controllers.Leaves.LeavesController (HRMS.API).
2026-01-28 20:37:06.663 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__request_Data_RequestId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [l].[REQUEST_ID], [l].[ATTACHMENT_PATH], [l].[CREATED_AT], [l].[CREATED_BY], [l].[DAYS_COUNT], [l].[EMPLOYEE_ID], [l].[END_DATE], [l].[IS_DELETED], [l].[IS_POSTED_TO_BALANCE], [l].[LEAVE_TYPE_ID], [l].[REASON], [l].[REJECTION_REASON], [l].[START_DATE], [l].[STATUS], [l].[UPDATED_AT], [l].[UPDATED_BY], [l].[VERSION_NO], [l0].[LEAVE_TYPE_ID], [l0].[CREATED_AT], [l0].[CREATED_BY], [l0].[DEFAULT_DAYS], [l0].[IS_CARRY_FORWARD], [l0].[IS_DEDUCTIBLE], [l0].[IS_DELETED], [l0].[IS_PAID], [l0].[LEAVE_NAME_AR], [l0].[LEAVE_NAME_EN], [l0].[MAX_DAYS_PER_YEAR], [l0].[REQUIRES_ATTACHMENT], [l0].[UPDATED_AT], [l0].[UPDATED_BY], [l0].[VERSION_NO]
FROM [HR_LEAVES].[LEAVE_REQUESTS] AS [l]
INNER JOIN [HR_LEAVES].[LEAVE_TYPES] AS [l0] ON [l].[LEAVE_TYPE_ID] = [l0].[LEAVE_TYPE_ID]
WHERE [l].[REQUEST_ID] = @__request_Data_RequestId_0
2026-01-28 20:37:06.700 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__8__locals1_leaveRequest_EmployeeId_0='?' (DbType = Int32), @__8__locals1_leaveRequest_LeaveTypeId_1='?' (DbType = Int32), @__year_2='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[BALANCE_ID], [e].[CREATED_AT], [e].[CREATED_BY], [e].[CURRENT_BALANCE], [e].[EMPLOYEE_ID], [e].[IS_DELETED], [e].[LEAVE_TYPE_ID], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO], [e].[YEAR]
FROM [HR_LEAVES].[EMPLOYEE_LEAVE_BALANCES] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__8__locals1_leaveRequest_EmployeeId_0 AND [e].[LEAVE_TYPE_ID] = @__8__locals1_leaveRequest_LeaveTypeId_1 AND [e].[YEAR] = @__year_2
2026-01-28 20:37:06.718 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']

    UPDATE [HR_ATTENDANCE].[EMPLOYEE_ROSTERS]
    SET [STATUS] = 'ON_LEAVE', 
        [IS_OFF_DAY] = 1
    WHERE [EMPLOYEE_ID] = @p0 
    AND CAST([ROSTER_DATE] AS DATE) BETWEEN CAST(@p1 AS DATE) AND CAST(@p2 AS DATE)
2026-01-28 20:37:06.733 +03:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2026-01-28 20:37:06.769 +03:00 [INF] Executed DbCommand (28ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200), @p9='?' (Size = 20), @p10='?' (Size = 50), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (DbType = Int64), @p16='?' (Size = 100), @p17='?' (Size = 200), @p19='?' (DbType = Int32), @p18='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p20='?' (DbType = Int32), @p26='?' (DbType = Int32), @p21='?' (DbType = DateTime2), @p22='?' (Size = 50), @p23='?' (Size = 1) (DbType = Byte), @p24='?' (Size = 200), @p25='?' (Size = 20), @p27='?' (DbType = Int32), @p28='?' (DbType = DateTime2), @p29='?' (Size = 50), @p30='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p31='?' (DbType = Int32), @p32='?' (Size = 1) (DbType = Byte), @p33='?' (DbType = Int32), @p34='?' (Size = 200), @p35='?' (DbType = Int32), @p36='?' (DbType = DateTime2), @p37='?' (Size = 20), @p38='?' (DbType = DateTime2), @p39='?' (Size = 50), @p40='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
MERGE [HR_CORE].[AUDIT_LOGS] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, 0),
(@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, 1)) AS i ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
VALUES (i.[ACTION_TYPE], i.[IP_ADDRESS], i.[NEW_VALUE], i.[OLD_VALUE], i.[PERFORMED_AT], i.[PERFORMED_BY], i.[RECORD_ID], i.[TABLE_NAME], i.[USER_AGENT])
OUTPUT INSERTED.[LOG_ID], i._Position;
UPDATE [HR_LEAVES].[EMPLOYEE_LEAVE_BALANCES] SET [CURRENT_BALANCE] = @p18
OUTPUT 1
WHERE [BALANCE_ID] = @p19 AND [VERSION_NO] = @p20;
UPDATE [HR_LEAVES].[LEAVE_REQUESTS] SET [CREATED_AT] = @p21, [CREATED_BY] = @p22, [IS_POSTED_TO_BALANCE] = @p23, [REJECTION_REASON] = @p24, [STATUS] = @p25
OUTPUT 1
WHERE [REQUEST_ID] = @p26 AND [VERSION_NO] = @p27;
INSERT INTO [HR_LEAVES].[LEAVE_TRANSACTIONS] ([CREATED_AT], [CREATED_BY], [DAYS], [EMPLOYEE_ID], [IS_DELETED], [LEAVE_TYPE_ID], [NOTES], [REFERENCE_ID], [TRANSACTION_DATE], [TRANSACTION_TYPE], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[TRANSACTION_ID]
VALUES (@p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40);
2026-01-28 20:37:06.801 +03:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2026-01-28 20:37:06.809 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-01-28 20:37:06.828 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Boolean'.
2026-01-28 20:37:06.831 +03:00 [INF] Executed action HRMS.API.Controllers.Leaves.LeavesController.ProcessAction (HRMS.API) in 179.4916ms
2026-01-28 20:37:06.843 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Leaves.LeavesController.ProcessAction (HRMS.API)'
2026-01-28 20:37:06.847 +03:00 [INF] HTTP POST /api/Leaves/action responded 200 in 207.3186 ms
2026-01-28 20:37:06.851 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Leaves/action - 200 null application/json; charset=utf-8 264.1578ms
