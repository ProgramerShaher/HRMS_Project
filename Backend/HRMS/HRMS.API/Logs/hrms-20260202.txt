2026-02-02 00:00:50.210 +03:00 [INF] üöÄ Starting HRMS Hospital API...
2026-02-02 00:00:51.106 +03:00 [FTL] ‚ùå Application terminated unexpectedly
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at Program.<Main>$(String[] args) in D:\HRMS_Hospital\Backend\HRMS\HRMS.API\Program.cs:line 76
2026-02-02 00:01:40.864 +03:00 [INF] üöÄ Starting HRMS Hospital API...
2026-02-02 00:01:41.314 +03:00 [FTL] ‚ùå Application terminated unexpectedly
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at Program.<Main>$(String[] args) in D:\HRMS_Hospital\Backend\HRMS\HRMS.API\Program.cs:line 76
2026-02-02 00:02:00.306 +03:00 [INF] üöÄ Starting HRMS Hospital API...
2026-02-02 00:02:01.695 +03:00 [INF] ‚úÖ HRMS Hospital API started successfully
2026-02-02 00:02:01.761 +03:00 [INF] User profile is available. Using 'C:\Users\MT\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-02-02 00:02:02.583 +03:00 [INF] Now listening on: https://localhost:5001
2026-02-02 00:02:02.613 +03:00 [INF] Now listening on: http://localhost:5000
2026-02-02 00:02:02.831 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-02 00:02:02.843 +03:00 [INF] Hosting environment: Development
2026-02-02 00:02:02.844 +03:00 [INF] Content root path: D:\HRMS_Hospital\Backend\HRMS\HRMS.API
2026-02-02 00:02:03.781 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - null null
2026-02-02 00:02:04.356 +03:00 [INF] HTTP GET /swagger/index.html responded 200 in 318.1389 ms
2026-02-02 00:02:04.419 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - 200 null text/html;charset=utf-8 651.9834ms
2026-02-02 00:02:05.231 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_vs/browserLink - null null
2026-02-02 00:02:05.231 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - null null
2026-02-02 00:02:05.308 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 77.2276ms
2026-02-02 00:02:05.455 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_vs/browserLink - 200 null text/javascript; charset=UTF-8 224.0042ms
2026-02-02 00:02:06.658 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - null null
2026-02-02 00:02:07.272 +03:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 611.2175 ms
2026-02-02 00:02:07.278 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 619.4713ms
2026-02-02 00:02:13.042 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/AttendanceSettings/shifts - null null
2026-02-02 00:02:13.074 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.GetAllShifts (HRMS.API)'
2026-02-02 00:02:13.140 +03:00 [INF] Route matched with {action = "GetAllShifts", controller = "AttendanceSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[HRMS.Application.DTOs.Attendance.ShiftTypeDto]]] GetAllShifts() on controller HRMS.API.Controllers.Attendance.AttendanceSettingsController (HRMS.API).
2026-02-02 00:02:16.288 +03:00 [WRN] No store type was specified for the decimal property 'HoursCount' on entity type 'ShiftType'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-02-02 00:02:16.291 +03:00 [WRN] No store type was specified for the decimal property 'MaxSalary' on entity type 'JobGrade'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-02-02 00:02:16.298 +03:00 [WRN] No store type was specified for the decimal property 'MinSalary' on entity type 'JobGrade'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-02-02 00:02:18.140 +03:00 [INF] Executed DbCommand (60ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[SHIFT_ID] AS [ShiftId], [s].[SHIFT_NAME_AR] AS [ShiftNameAr], [s].[START_TIME] AS [StartTime], [s].[END_TIME] AS [EndTime], [s].[HOURS_COUNT] AS [HoursCount], [s].[IS_CROSS_DAY] AS [IsCrossDay], [s].[GRACE_PERIOD_MINS] AS [GracePeriodMins]
FROM [HR_ATTENDANCE].[SHIFT_TYPES] AS [s]
WHERE [s].[IS_DELETED] = CAST(0 AS tinyint)
ORDER BY [s].[SHIFT_ID]
2026-02-02 00:02:18.226 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HRMS.Application.DTOs.Attendance.ShiftTypeDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-02 00:02:18.262 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceSettingsController.GetAllShifts (HRMS.API) in 5113.6202ms
2026-02-02 00:02:18.265 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.GetAllShifts (HRMS.API)'
2026-02-02 00:02:18.266 +03:00 [INF] HTTP GET /api/AttendanceSettings/shifts responded 200 in 5215.2218 ms
2026-02-02 00:02:18.281 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/AttendanceSettings/shifts - 200 null application/json; charset=utf-8 5239.5261ms
2026-02-02 00:02:32.586 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/LeaveConfiguration/leave-types - null null
2026-02-02 00:02:32.595 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Leaves.LeaveConfigurationController.GetAllLeaveTypes (HRMS.API)'
2026-02-02 00:02:32.621 +03:00 [INF] Route matched with {action = "GetAllLeaveTypes", controller = "LeaveConfiguration"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[System.Collections.Generic.List`1[HRMS.Application.DTOs.Leaves.LeaveTypeDto]]]] GetAllLeaveTypes() on controller HRMS.API.Controllers.Leaves.LeaveConfigurationController (HRMS.API).
2026-02-02 00:02:32.675 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[LEAVE_TYPE_ID] AS [LeaveTypeId], [l].[LEAVE_NAME_AR] AS [LeaveTypeNameAr], [l].[DEFAULT_DAYS] AS [DefaultDays], [l].[IS_DEDUCTIBLE] AS [IsDeductible], [l].[REQUIRES_ATTACHMENT] AS [RequiresAttachment]
FROM [HR_LEAVES].[LEAVE_TYPES] AS [l]
WHERE [l].[IS_DELETED] = CAST(0 AS tinyint)
ORDER BY [l].[LEAVE_NAME_AR]
2026-02-02 00:02:32.680 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[System.Collections.Generic.List`1[[HRMS.Application.DTOs.Leaves.LeaveTypeDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-02 00:02:32.696 +03:00 [INF] Executed action HRMS.API.Controllers.Leaves.LeaveConfigurationController.GetAllLeaveTypes (HRMS.API) in 71.0229ms
2026-02-02 00:02:32.720 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Leaves.LeaveConfigurationController.GetAllLeaveTypes (HRMS.API)'
2026-02-02 00:02:32.721 +03:00 [INF] HTTP GET /api/LeaveConfiguration/leave-types responded 200 in 127.1874 ms
2026-02-02 00:02:32.724 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/LeaveConfiguration/leave-types - 200 null application/json; charset=utf-8 137.3242ms
2026-02-02 00:04:23.896 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Departments - null null
2026-02-02 00:04:23.901 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Core.DepartmentsController.GetAll (HRMS.API)'
2026-02-02 00:04:23.974 +03:00 [INF] Route matched with {action = "GetAll", controller = "Departments"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(HRMS.Application.Features.Core.Departments.Queries.GetAllDepartments.GetAllDepartmentsQuery) on controller HRMS.API.Controllers.Core.DepartmentsController (HRMS.API).
2026-02-02 00:04:24.766 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [HR_CORE].[DEPARTMENTS] AS [d]
WHERE [d].[IS_DELETED] = CAST(0 AS tinyint)
2026-02-02 00:04:24.991 +03:00 [INF] Executed DbCommand (45ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d1].[DEPT_ID] AS [DeptId], [d1].[DEPT_NAME_AR] AS [DeptNameAr], [d1].[DEPT_NAME_EN] AS [DeptNameEn], [d1].[PARENT_DEPT_ID] AS [ParentDeptId], [d1].[COST_CENTER_CODE] AS [CostCenterCode], [d1].[MANAGER_ID] AS [ManagerId], [d1].[IS_ACTIVE] AS [IsActive], [d0].[DEPT_NAME_AR] AS [ParentDeptNameAr]
FROM (
    SELECT [d].[DEPT_ID], [d].[COST_CENTER_CODE], [d].[DEPT_NAME_AR], [d].[DEPT_NAME_EN], [d].[IS_ACTIVE], [d].[MANAGER_ID], [d].[PARENT_DEPT_ID]
    FROM [HR_CORE].[DEPARTMENTS] AS [d]
    WHERE [d].[IS_DELETED] = CAST(0 AS tinyint)
    ORDER BY [d].[DEPT_NAME_AR]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d1]
LEFT JOIN [HR_CORE].[DEPARTMENTS] AS [d0] ON [d1].[PARENT_DEPT_ID] = [d0].[DEPT_ID]
ORDER BY [d1].[DEPT_NAME_AR]
2026-02-02 00:04:25.003 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[HRMS.Application.DTOs.Core.PagedResult`1[[HRMS.Application.DTOs.Core.DepartmentDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-02 00:04:25.022 +03:00 [INF] Executed action HRMS.API.Controllers.Core.DepartmentsController.GetAll (HRMS.API) in 969.0996ms
2026-02-02 00:04:25.025 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Core.DepartmentsController.GetAll (HRMS.API)'
2026-02-02 00:04:25.026 +03:00 [INF] HTTP GET /api/Departments responded 200 in 1125.5337 ms
2026-02-02 00:04:25.029 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Departments - 200 null application/json; charset=utf-8 1132.5947ms
2026-02-02 00:05:01.338 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Employees - null null
2026-02-02 00:05:01.345 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.GetAll (HRMS.API)'
2026-02-02 00:05:01.360 +03:00 [INF] Route matched with {action = "GetAll", controller = "Employees"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Application.DTOs.Core.PagedResult`1[HRMS.Application.DTOs.Personnel.EmployeeListDto]]] GetAll(HRMS.Application.Features.Personnel.Employees.Queries.GetAllEmployees.GetAllEmployeesQuery) on controller HRMS.API.Controllers.Personnel.EmployeesController (HRMS.API).
2026-02-02 00:05:01.416 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
WHERE [e].[IS_DELETED] = CAST(0 AS tinyint)
2026-02-02 00:05:01.489 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [e0].[EMPLOYEE_ID], [e0].[EMPLOYEE_NUMBER], [e0].[FIRST_NAME_AR], [e0].[SECOND_NAME_AR], [e0].[LAST_NAME_AR], [e0].[FULL_NAME_EN], [d].[DEPT_NAME_AR], [j].[JOB_TITLE_AR], [e0].[MOBILE], [e0].[HIRE_DATE], ~CAST([e0].[IS_DELETED] ^ CAST(0 AS tinyint) AS bit)
FROM (
    SELECT [e].[EMPLOYEE_ID], [e].[CREATED_AT], [e].[DEPARTMENT_ID], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[MOBILE], [e].[SECOND_NAME_AR]
    FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
    WHERE [e].[IS_DELETED] = CAST(0 AS tinyint)
    ORDER BY [e].[CREATED_AT] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [e0]
INNER JOIN [HR_CORE].[DEPARTMENTS] AS [d] ON [e0].[DEPARTMENT_ID] = [d].[DEPT_ID]
INNER JOIN [HR_CORE].[JOBS] AS [j] ON [e0].[JOB_ID] = [j].[JOB_ID]
ORDER BY [e0].[CREATED_AT] DESC
2026-02-02 00:05:01.500 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Application.DTOs.Core.PagedResult`1[[HRMS.Application.DTOs.Personnel.EmployeeListDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-02 00:05:01.517 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeesController.GetAll (HRMS.API) in 149.1414ms
2026-02-02 00:05:01.525 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.GetAll (HRMS.API)'
2026-02-02 00:05:01.526 +03:00 [INF] HTTP GET /api/Employees responded 200 in 181.6246 ms
2026-02-02 00:05:01.529 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Employees - 200 null application/json; charset=utf-8 190.5877ms
2026-02-02 00:05:23.260 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/JobGrades - null null
2026-02-02 00:05:23.270 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Core.JobGradesController.GetAll (HRMS.API)'
2026-02-02 00:05:23.323 +03:00 [INF] Route matched with {action = "GetAll", controller = "JobGrades"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(HRMS.Application.Features.Core.JobGrades.Queries.GetAllJobGrades.GetAllJobGradesQuery) on controller HRMS.API.Controllers.Core.JobGradesController (HRMS.API).
2026-02-02 00:05:23.347 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [HR_CORE].[JOB_GRADES] AS [j]
WHERE [j].[IS_DELETED] = CAST(0 AS tinyint)
2026-02-02 00:05:23.368 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [j].[JOB_GRADE_ID] AS [JobGradeId], [j].[GRADE_CODE] AS [GradeCode], [j].[GRADE_NAME_AR] AS [GradeNameAr], [j].[GRADE_NAME_EN] AS [GradeNameEn], [j].[GRADE_LEVEL] AS [GradeLevel], [j].[MIN_SALARY] AS [MinSalary], [j].[MAX_SALARY] AS [MaxSalary]
FROM [HR_CORE].[JOB_GRADES] AS [j]
WHERE [j].[IS_DELETED] = CAST(0 AS tinyint)
ORDER BY [j].[GRADE_LEVEL]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2026-02-02 00:05:23.374 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[HRMS.Application.DTOs.Core.PagedResult`1[[HRMS.Application.DTOs.Core.JobGradeListDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-02 00:05:23.384 +03:00 [INF] Executed action HRMS.API.Controllers.Core.JobGradesController.GetAll (HRMS.API) in 58.9002ms
2026-02-02 00:05:23.423 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Core.JobGradesController.GetAll (HRMS.API)'
2026-02-02 00:05:23.431 +03:00 [INF] HTTP GET /api/JobGrades responded 200 in 164.6101 ms
2026-02-02 00:05:23.433 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/JobGrades - 200 null application/json; charset=utf-8 173.2583ms
2026-02-02 00:05:49.629 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Jobs - null null
2026-02-02 00:05:49.633 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Core.JobsController.GetAll (HRMS.API)'
2026-02-02 00:05:49.647 +03:00 [INF] Route matched with {action = "GetAll", controller = "Jobs"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(HRMS.Application.Features.Core.Jobs.Queries.GetAllJobs.GetAllJobsQuery) on controller HRMS.API.Controllers.Core.JobsController (HRMS.API).
2026-02-02 00:05:49.691 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [HR_CORE].[JOBS] AS [j]
WHERE [j].[IS_DELETED] = CAST(0 AS tinyint)
2026-02-02 00:05:49.721 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [j1].[JOB_ID] AS [JobId], [j1].[JOB_TITLE_AR] AS [JobTitleAr], [j1].[JOB_TITLE_EN] AS [JobTitleEn], [j1].[DEFAULT_GRADE_ID] AS [DefaultGradeId], [j1].[IS_MEDICAL] AS [IsMedical], [j0].[GRADE_NAME_AR] AS [GradeNameAr]
FROM (
    SELECT [j].[JOB_ID], [j].[DEFAULT_GRADE_ID], [j].[IS_MEDICAL], [j].[JOB_TITLE_AR], [j].[JOB_TITLE_EN]
    FROM [HR_CORE].[JOBS] AS [j]
    WHERE [j].[IS_DELETED] = CAST(0 AS tinyint)
    ORDER BY [j].[JOB_TITLE_AR]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [j1]
LEFT JOIN [HR_CORE].[JOB_GRADES] AS [j0] ON [j1].[DEFAULT_GRADE_ID] = [j0].[JOB_GRADE_ID]
ORDER BY [j1].[JOB_TITLE_AR]
2026-02-02 00:05:49.727 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[HRMS.Application.DTOs.Core.PagedResult`1[[HRMS.Application.DTOs.Core.JobDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-02 00:05:49.748 +03:00 [INF] Executed action HRMS.API.Controllers.Core.JobsController.GetAll (HRMS.API) in 95.0731ms
2026-02-02 00:05:49.753 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Core.JobsController.GetAll (HRMS.API)'
2026-02-02 00:05:49.755 +03:00 [INF] HTTP GET /api/Jobs responded 200 in 121.8120 ms
2026-02-02 00:05:49.757 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Jobs - 200 null application/json; charset=utf-8 128.4156ms
2026-02-02 00:10:21.633 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Leaves/Balances/initialize - application/json 115
2026-02-02 00:10:21.642 +03:00 [INF] CORS policy execution successful.
2026-02-02 00:10:21.645 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Leaves.LeaveBalanceController.InitializeBalances (HRMS.API)'
2026-02-02 00:10:21.676 +03:00 [INF] Route matched with {action = "InitializeBalances", controller = "LeaveBalance"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[System.Boolean]]] InitializeBalances(HRMS.Application.DTOs.Leaves.InitializeBalancesDto) on controller HRMS.API.Controllers.Leaves.LeaveBalanceController (HRMS.API).
2026-02-02 00:11:40.346 +03:00 [INF] Executed action HRMS.API.Controllers.Leaves.LeaveBalanceController.InitializeBalances (HRMS.API) in 78555.6782ms
2026-02-02 00:11:40.400 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Leaves.LeaveBalanceController.InitializeBalances (HRMS.API)'
2026-02-02 00:11:40.443 +03:00 [ERR] CRITICAL ERROR CAUGHT: Validation failed: 
 -- LeaveTypeId: ŸÖÿπÿ±ŸÅ ŸÜŸàÿπ ÿßŸÑÿ•ÿ¨ÿßÿ≤ÿ© ÿ∫Ÿäÿ± ÿµÿ≠Ÿäÿ≠ Severity: Error
 -- DepartmentId: ŸÖÿπÿ±ŸÅ ÿßŸÑŸÇÿ≥ŸÖ ÿ∫Ÿäÿ± ÿµÿ≠Ÿäÿ≠ Severity: Error
 -- CustomDays: 'Custom Days' Ÿäÿ¨ÿ® ÿ£ŸÜ ŸäŸÉŸàŸÜ ÿ£ŸÉÿ®ÿ± ŸÖŸÜ '0'. Severity: Error
FluentValidation.ValidationException: Validation failed: 
 -- LeaveTypeId: ŸÖÿπÿ±ŸÅ ŸÜŸàÿπ ÿßŸÑÿ•ÿ¨ÿßÿ≤ÿ© ÿ∫Ÿäÿ± ÿµÿ≠Ÿäÿ≠ Severity: Error
 -- DepartmentId: ŸÖÿπÿ±ŸÅ ÿßŸÑŸÇÿ≥ŸÖ ÿ∫Ÿäÿ± ÿµÿ≠Ÿäÿ≠ Severity: Error
 -- CustomDays: 'Custom Days' Ÿäÿ¨ÿ® ÿ£ŸÜ ŸäŸÉŸàŸÜ ÿ£ŸÉÿ®ÿ± ŸÖŸÜ '0'. Severity: Error
   at HRMS.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\HRMS_Hospital\Backend\HRMS\HRMS.Application\Behaviors\ValidationBehavior.cs:line 32
   at HRMS.API.Controllers.Leaves.LeaveBalanceController.InitializeBalances(InitializeBalancesDto dto) in D:\HRMS_Hospital\Backend\HRMS\HRMS.API\Controllers\Leaves\LeaveBalanceController.cs:line 53
   at lambda_method168(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at HRMS.API.Middleware.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\HRMS_Hospital\Backend\HRMS\HRMS.API\Middleware\GlobalExceptionMiddleware.cs:line 31
2026-02-02 00:11:40.503 +03:00 [INF] HTTP POST /api/Leaves/Balances/initialize responded 400 in 78865.6808 ms
2026-02-02 00:11:40.505 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Leaves/Balances/initialize - 400 null application/json 78872.6208ms
2026-02-02 00:12:00.546 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Leaves/Balances/initialize - application/json 131
2026-02-02 00:12:00.553 +03:00 [INF] CORS policy execution successful.
2026-02-02 00:12:00.555 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Leaves.LeaveBalanceController.InitializeBalances (HRMS.API)'
2026-02-02 00:12:00.557 +03:00 [INF] Route matched with {action = "InitializeBalances", controller = "LeaveBalance"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[System.Boolean]]] InitializeBalances(HRMS.Application.DTOs.Leaves.InitializeBalancesDto) on controller HRMS.API.Controllers.Leaves.LeaveBalanceController (HRMS.API).
2026-02-02 00:12:00.704 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@__request_LeaveTypeId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[LEAVE_TYPE_ID], [l].[CREATED_AT], [l].[CREATED_BY], [l].[DEFAULT_DAYS], [l].[IS_CARRY_FORWARD], [l].[IS_DEDUCTIBLE], [l].[IS_DELETED], [l].[IS_PAID], [l].[LEAVE_NAME_AR], [l].[LEAVE_NAME_EN], [l].[MAX_DAYS_PER_YEAR], [l].[REQUIRES_ATTACHMENT], [l].[UPDATED_AT], [l].[UPDATED_BY], [l].[VERSION_NO]
FROM [HR_LEAVES].[LEAVE_TYPES] AS [l]
WHERE [l].[IS_DELETED] = CAST(0 AS tinyint) AND [l].[IS_DEDUCTIBLE] = CAST(1 AS tinyint) AND [l].[LEAVE_TYPE_ID] = @__request_LeaveTypeId_Value_0
2026-02-02 00:12:00.894 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__request_DepartmentId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[EMPLOYEE_ID] AS [EmployeeId], [e].[HIRE_DATE] AS [HireDate]
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
WHERE [e].[IS_DELETED] = CAST(0 AS tinyint) AND [e].[DEPARTMENT_ID] = @__request_DepartmentId_Value_0
2026-02-02 00:12:00.953 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__8__locals2_employee_EmployeeId_0='?' (DbType = Int32), @__leaveType_LeaveTypeId_1='?' (DbType = Int32), @__8__locals1_request_Year_2='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[BALANCE_ID], [e].[CREATED_AT], [e].[CREATED_BY], [e].[CURRENT_BALANCE], [e].[EMPLOYEE_ID], [e].[IS_DELETED], [e].[LEAVE_TYPE_ID], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO], [e].[YEAR]
FROM [HR_LEAVES].[EMPLOYEE_LEAVE_BALANCES] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__8__locals2_employee_EmployeeId_0 AND [e].[LEAVE_TYPE_ID] = @__leaveType_LeaveTypeId_1 AND [e].[YEAR] = @__8__locals1_request_Year_2 AND [e].[IS_DELETED] = CAST(0 AS tinyint)
2026-02-02 00:12:01.033 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals2_employee_EmployeeId_0='?' (DbType = Int32), @__leaveType_LeaveTypeId_1='?' (DbType = Int32), @__8__locals1_request_Year_2='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[BALANCE_ID], [e].[CREATED_AT], [e].[CREATED_BY], [e].[CURRENT_BALANCE], [e].[EMPLOYEE_ID], [e].[IS_DELETED], [e].[LEAVE_TYPE_ID], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO], [e].[YEAR]
FROM [HR_LEAVES].[EMPLOYEE_LEAVE_BALANCES] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__8__locals2_employee_EmployeeId_0 AND [e].[LEAVE_TYPE_ID] = @__leaveType_LeaveTypeId_1 AND [e].[YEAR] = @__8__locals1_request_Year_2 AND [e].[IS_DELETED] = CAST(0 AS tinyint)
2026-02-02 00:12:01.039 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals2_employee_EmployeeId_0='?' (DbType = Int32), @__leaveType_LeaveTypeId_1='?' (DbType = Int32), @__8__locals1_request_Year_2='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[BALANCE_ID], [e].[CREATED_AT], [e].[CREATED_BY], [e].[CURRENT_BALANCE], [e].[EMPLOYEE_ID], [e].[IS_DELETED], [e].[LEAVE_TYPE_ID], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO], [e].[YEAR]
FROM [HR_LEAVES].[EMPLOYEE_LEAVE_BALANCES] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__8__locals2_employee_EmployeeId_0 AND [e].[LEAVE_TYPE_ID] = @__leaveType_LeaveTypeId_1 AND [e].[YEAR] = @__8__locals1_request_Year_2 AND [e].[IS_DELETED] = CAST(0 AS tinyint)
2026-02-02 00:12:01.046 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals2_employee_EmployeeId_0='?' (DbType = Int32), @__leaveType_LeaveTypeId_1='?' (DbType = Int32), @__8__locals1_request_Year_2='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[BALANCE_ID], [e].[CREATED_AT], [e].[CREATED_BY], [e].[CURRENT_BALANCE], [e].[EMPLOYEE_ID], [e].[IS_DELETED], [e].[LEAVE_TYPE_ID], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO], [e].[YEAR]
FROM [HR_LEAVES].[EMPLOYEE_LEAVE_BALANCES] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__8__locals2_employee_EmployeeId_0 AND [e].[LEAVE_TYPE_ID] = @__leaveType_LeaveTypeId_1 AND [e].[YEAR] = @__8__locals1_request_Year_2 AND [e].[IS_DELETED] = CAST(0 AS tinyint)
2026-02-02 00:12:01.051 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals2_employee_EmployeeId_0='?' (DbType = Int32), @__leaveType_LeaveTypeId_1='?' (DbType = Int32), @__8__locals1_request_Year_2='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[BALANCE_ID], [e].[CREATED_AT], [e].[CREATED_BY], [e].[CURRENT_BALANCE], [e].[EMPLOYEE_ID], [e].[IS_DELETED], [e].[LEAVE_TYPE_ID], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO], [e].[YEAR]
FROM [HR_LEAVES].[EMPLOYEE_LEAVE_BALANCES] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__8__locals2_employee_EmployeeId_0 AND [e].[LEAVE_TYPE_ID] = @__leaveType_LeaveTypeId_1 AND [e].[YEAR] = @__8__locals1_request_Year_2 AND [e].[IS_DELETED] = CAST(0 AS tinyint)
2026-02-02 00:12:01.057 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals2_employee_EmployeeId_0='?' (DbType = Int32), @__leaveType_LeaveTypeId_1='?' (DbType = Int32), @__8__locals1_request_Year_2='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[BALANCE_ID], [e].[CREATED_AT], [e].[CREATED_BY], [e].[CURRENT_BALANCE], [e].[EMPLOYEE_ID], [e].[IS_DELETED], [e].[LEAVE_TYPE_ID], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO], [e].[YEAR]
FROM [HR_LEAVES].[EMPLOYEE_LEAVE_BALANCES] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__8__locals2_employee_EmployeeId_0 AND [e].[LEAVE_TYPE_ID] = @__leaveType_LeaveTypeId_1 AND [e].[YEAR] = @__8__locals1_request_Year_2 AND [e].[IS_DELETED] = CAST(0 AS tinyint)
2026-02-02 00:12:01.506 +03:00 [INF] Executed DbCommand (31ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200), @p9='?' (Size = 20), @p10='?' (Size = 50), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (DbType = Int64), @p16='?' (Size = 100), @p17='?' (Size = 200), @p19='?' (DbType = Int32), @p18='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p20='?' (DbType = Int32), @p22='?' (DbType = Int32), @p21='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p23='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
MERGE [HR_CORE].[AUDIT_LOGS] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, 0),
(@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, 1)) AS i ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
VALUES (i.[ACTION_TYPE], i.[IP_ADDRESS], i.[NEW_VALUE], i.[OLD_VALUE], i.[PERFORMED_AT], i.[PERFORMED_BY], i.[RECORD_ID], i.[TABLE_NAME], i.[USER_AGENT])
OUTPUT INSERTED.[LOG_ID], i._Position;
UPDATE [HR_LEAVES].[EMPLOYEE_LEAVE_BALANCES] SET [CURRENT_BALANCE] = @p18
OUTPUT 1
WHERE [BALANCE_ID] = @p19 AND [VERSION_NO] = @p20;
UPDATE [HR_LEAVES].[EMPLOYEE_LEAVE_BALANCES] SET [CURRENT_BALANCE] = @p21
OUTPUT 1
WHERE [BALANCE_ID] = @p22 AND [VERSION_NO] = @p23;
2026-02-02 00:12:01.579 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[System.Boolean, System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-02 00:12:01.583 +03:00 [INF] Executed action HRMS.API.Controllers.Leaves.LeaveBalanceController.InitializeBalances (HRMS.API) in 1023.8352ms
2026-02-02 00:12:01.586 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Leaves.LeaveBalanceController.InitializeBalances (HRMS.API)'
2026-02-02 00:12:01.587 +03:00 [INF] HTTP POST /api/Leaves/Balances/initialize responded 200 in 1035.6099 ms
2026-02-02 00:12:01.590 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Leaves/Balances/initialize - 200 null application/json; charset=utf-8 1044.228ms
2026-02-02 00:23:24.668 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Leaves/Requests - application/json 175
2026-02-02 00:23:24.751 +03:00 [INF] CORS policy execution successful.
2026-02-02 00:23:24.896 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Leaves.LeaveRequestsController.CreateLeaveRequest (HRMS.API)'
2026-02-02 00:23:24.915 +03:00 [INF] Route matched with {action = "CreateLeaveRequest", controller = "LeaveRequests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[System.Int32]]] CreateLeaveRequest(HRMS.Application.Features.Leaves.Requests.Commands.CreateLeaveRequest.CreateLeaveRequestCommand) on controller HRMS.API.Controllers.Leaves.LeaveRequestsController (HRMS.API).
2026-02-02 00:23:25.099 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
        WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0 AND [e].[IS_DELETED] = CAST(0 AS tinyint)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-02-02 00:23:25.150 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[@__request_LeaveTypeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [l].[LEAVE_TYPE_ID], [l].[CREATED_AT], [l].[CREATED_BY], [l].[DEFAULT_DAYS], [l].[IS_CARRY_FORWARD], [l].[IS_DEDUCTIBLE], [l].[IS_DELETED], [l].[IS_PAID], [l].[LEAVE_NAME_AR], [l].[LEAVE_NAME_EN], [l].[MAX_DAYS_PER_YEAR], [l].[REQUIRES_ATTACHMENT], [l].[UPDATED_AT], [l].[UPDATED_BY], [l].[VERSION_NO]
FROM [HR_LEAVES].[LEAVE_TYPES] AS [l]
WHERE [l].[LEAVE_TYPE_ID] = @__request_LeaveTypeId_0 AND [l].[IS_DELETED] = CAST(0 AS tinyint)
2026-02-02 00:23:25.179 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__8__locals1_request_EmployeeId_0='?' (DbType = Int32), @__8__locals1_request_LeaveTypeId_1='?' (DbType = Int32), @__year_2='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[BALANCE_ID], [e].[CREATED_AT], [e].[CREATED_BY], [e].[CURRENT_BALANCE], [e].[EMPLOYEE_ID], [e].[IS_DELETED], [e].[LEAVE_TYPE_ID], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO], [e].[YEAR]
FROM [HR_LEAVES].[EMPLOYEE_LEAVE_BALANCES] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__8__locals1_request_EmployeeId_0 AND [e].[LEAVE_TYPE_ID] = @__8__locals1_request_LeaveTypeId_1 AND [e].[YEAR] = @__year_2 AND [e].[IS_DELETED] = CAST(0 AS tinyint)
2026-02-02 00:23:25.231 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32), @__request_StartDate_1='?' (DbType = DateTime2), @__request_EndDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HR_LEAVES].[LEAVE_REQUESTS] AS [l]
        WHERE [l].[EMPLOYEE_ID] = @__request_EmployeeId_0 AND [l].[IS_DELETED] = CAST(0 AS tinyint) AND [l].[STATUS] IN (N'PENDING', N'MANAGER_APPROVED', N'HR_APPROVED') AND ((@__request_StartDate_1 >= [l].[START_DATE] AND @__request_StartDate_1 <= [l].[END_DATE]) OR (@__request_EndDate_2 >= [l].[START_DATE] AND @__request_EndDate_2 <= [l].[END_DATE]) OR (@__request_StartDate_1 <= [l].[START_DATE] AND @__request_EndDate_2 >= [l].[END_DATE]))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-02-02 00:23:25.418 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (Size = 500), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2), @p6='?' (Size = 1) (DbType = Byte), @p7='?' (Size = 1) (DbType = Byte), @p8='?' (DbType = Int32), @p9='?' (Size = 200), @p10='?' (Size = 200), @p11='?' (DbType = DateTime2), @p12='?' (Size = 20), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_LEAVES].[LEAVE_REQUESTS] ([ATTACHMENT_PATH], [CREATED_AT], [CREATED_BY], [DAYS_COUNT], [EMPLOYEE_ID], [END_DATE], [IS_DELETED], [IS_POSTED_TO_BALANCE], [LEAVE_TYPE_ID], [REASON], [REJECTION_REASON], [START_DATE], [STATUS], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[REQUEST_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
2026-02-02 00:23:25.477 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-02-02 00:23:25.483 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[System.Int32, System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-02 00:23:25.491 +03:00 [INF] Executed action HRMS.API.Controllers.Leaves.LeaveRequestsController.CreateLeaveRequest (HRMS.API) in 572.5762ms
2026-02-02 00:23:25.495 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Leaves.LeaveRequestsController.CreateLeaveRequest (HRMS.API)'
2026-02-02 00:23:25.496 +03:00 [INF] HTTP POST /api/Leaves/Requests responded 200 in 745.2867 ms
2026-02-02 00:23:25.505 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Leaves/Requests - 200 null application/json; charset=utf-8 837.2532ms
2026-02-02 00:31:34.276 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Leaves/Requests/pending - null null
2026-02-02 00:31:34.280 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Leaves.LeaveRequestsController.GetPendingRequests (HRMS.API)'
2026-02-02 00:31:34.300 +03:00 [INF] Route matched with {action = "GetPendingRequests", controller = "LeaveRequests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[System.Collections.Generic.List`1[HRMS.Application.DTOs.Leaves.LeaveRequestDto]]]] GetPendingRequests() on controller HRMS.API.Controllers.Leaves.LeaveRequestsController (HRMS.API).
2026-02-02 00:31:34.311 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[System.Collections.Generic.List`1[[HRMS.Application.DTOs.Leaves.LeaveRequestDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-02 00:31:34.320 +03:00 [INF] Executed action HRMS.API.Controllers.Leaves.LeaveRequestsController.GetPendingRequests (HRMS.API) in 10.5828ms
2026-02-02 00:31:34.323 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Leaves.LeaveRequestsController.GetPendingRequests (HRMS.API)'
2026-02-02 00:31:34.330 +03:00 [INF] HTTP GET /api/Leaves/Requests/pending responded 200 in 50.1925 ms
2026-02-02 00:31:34.333 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Leaves/Requests/pending - 200 null application/json; charset=utf-8 56.6248ms
2026-02-02 00:31:50.180 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Leaves/Requests/employee/9 - null null
2026-02-02 00:31:50.193 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Leaves.LeaveRequestsController.GetEmployeeRequests (HRMS.API)'
2026-02-02 00:31:50.232 +03:00 [INF] Route matched with {action = "GetEmployeeRequests", controller = "LeaveRequests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[System.Collections.Generic.List`1[HRMS.Application.DTOs.Leaves.LeaveRequestDto]]]] GetEmployeeRequests(Int32) on controller HRMS.API.Controllers.Leaves.LeaveRequestsController (HRMS.API).
2026-02-02 00:31:50.238 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[System.Collections.Generic.List`1[[HRMS.Application.DTOs.Leaves.LeaveRequestDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-02 00:31:50.245 +03:00 [INF] Executed action HRMS.API.Controllers.Leaves.LeaveRequestsController.GetEmployeeRequests (HRMS.API) in 8.9282ms
2026-02-02 00:31:50.249 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Leaves.LeaveRequestsController.GetEmployeeRequests (HRMS.API)'
2026-02-02 00:31:50.252 +03:00 [INF] HTTP GET /api/Leaves/Requests/employee/9 responded 200 in 59.5975 ms
2026-02-02 00:31:50.255 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Leaves/Requests/employee/9 - 200 null application/json; charset=utf-8 74.5584ms
2026-02-02 00:32:39.931 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:5001/api/Leaves/Requests/9/approve - application/json 142
2026-02-02 00:32:39.969 +03:00 [INF] CORS policy execution successful.
2026-02-02 00:32:39.971 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Leaves.LeaveRequestsController.ApproveRequest (HRMS.API)'
2026-02-02 00:32:39.987 +03:00 [INF] Route matched with {action = "ApproveRequest", controller = "LeaveRequests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[System.Boolean]]] ApproveRequest(Int32, HRMS.Application.Features.Leaves.Requests.Commands.ApproveLeaveRequest.ApproveLeaveRequestCommand) on controller HRMS.API.Controllers.Leaves.LeaveRequestsController (HRMS.API).
2026-02-02 00:32:40.113 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@__request_RequestId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [l].[REQUEST_ID], [l].[ATTACHMENT_PATH], [l].[CREATED_AT], [l].[CREATED_BY], [l].[DAYS_COUNT], [l].[EMPLOYEE_ID], [l].[END_DATE], [l].[IS_DELETED], [l].[IS_POSTED_TO_BALANCE], [l].[LEAVE_TYPE_ID], [l].[REASON], [l].[REJECTION_REASON], [l].[START_DATE], [l].[STATUS], [l].[UPDATED_AT], [l].[UPDATED_BY], [l].[VERSION_NO], [l0].[LEAVE_TYPE_ID], [l0].[CREATED_AT], [l0].[CREATED_BY], [l0].[DEFAULT_DAYS], [l0].[IS_CARRY_FORWARD], [l0].[IS_DEDUCTIBLE], [l0].[IS_DELETED], [l0].[IS_PAID], [l0].[LEAVE_NAME_AR], [l0].[LEAVE_NAME_EN], [l0].[MAX_DAYS_PER_YEAR], [l0].[REQUIRES_ATTACHMENT], [l0].[UPDATED_AT], [l0].[UPDATED_BY], [l0].[VERSION_NO]
FROM [HR_LEAVES].[LEAVE_REQUESTS] AS [l]
INNER JOIN [HR_LEAVES].[LEAVE_TYPES] AS [l0] ON [l].[LEAVE_TYPE_ID] = [l0].[LEAVE_TYPE_ID]
WHERE [l].[REQUEST_ID] = @__request_RequestId_0 AND [l].[IS_DELETED] = CAST(0 AS tinyint)
2026-02-02 00:32:40.148 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__8__locals1_leaveRequest_EmployeeId_0='?' (DbType = Int32), @__8__locals1_leaveRequest_LeaveTypeId_1='?' (DbType = Int32), @__year_2='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[BALANCE_ID], [e].[CREATED_AT], [e].[CREATED_BY], [e].[CURRENT_BALANCE], [e].[EMPLOYEE_ID], [e].[IS_DELETED], [e].[LEAVE_TYPE_ID], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO], [e].[YEAR]
FROM [HR_LEAVES].[EMPLOYEE_LEAVE_BALANCES] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__8__locals1_leaveRequest_EmployeeId_0 AND [e].[LEAVE_TYPE_ID] = @__8__locals1_leaveRequest_LeaveTypeId_1 AND [e].[YEAR] = @__year_2 AND [e].[IS_DELETED] = CAST(0 AS tinyint)
2026-02-02 00:32:40.164 +03:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2026-02-02 00:32:40.190 +03:00 [INF] Executed DbCommand (24ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200), @p9='?' (Size = 20), @p10='?' (Size = 50), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (DbType = Int64), @p16='?' (Size = 100), @p17='?' (Size = 200), @p19='?' (DbType = Int32), @p18='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p20='?' (DbType = Int32), @p23='?' (DbType = Int32), @p21='?' (Size = 200), @p22='?' (Size = 20), @p24='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
MERGE [HR_CORE].[AUDIT_LOGS] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, 0),
(@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, 1)) AS i ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
VALUES (i.[ACTION_TYPE], i.[IP_ADDRESS], i.[NEW_VALUE], i.[OLD_VALUE], i.[PERFORMED_AT], i.[PERFORMED_BY], i.[RECORD_ID], i.[TABLE_NAME], i.[USER_AGENT])
OUTPUT INSERTED.[LOG_ID], i._Position;
UPDATE [HR_LEAVES].[EMPLOYEE_LEAVE_BALANCES] SET [CURRENT_BALANCE] = @p18
OUTPUT 1
WHERE [BALANCE_ID] = @p19 AND [VERSION_NO] = @p20;
UPDATE [HR_LEAVES].[LEAVE_REQUESTS] SET [REJECTION_REASON] = @p21, [STATUS] = @p22
OUTPUT 1
WHERE [REQUEST_ID] = @p23 AND [VERSION_NO] = @p24;
2026-02-02 00:32:40.207 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[System.Boolean, System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-02 00:32:40.209 +03:00 [INF] Executed action HRMS.API.Controllers.Leaves.LeaveRequestsController.ApproveRequest (HRMS.API) in 218.795ms
2026-02-02 00:32:40.211 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Leaves.LeaveRequestsController.ApproveRequest (HRMS.API)'
2026-02-02 00:32:40.212 +03:00 [INF] HTTP PUT /api/Leaves/Requests/9/approve responded 200 in 242.9595 ms
2026-02-02 00:32:40.218 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:5001/api/Leaves/Requests/9/approve - 200 null application/json; charset=utf-8 287.5003ms
2026-02-02 00:38:10.411 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Leaves/Requests - application/json 186
2026-02-02 00:38:10.464 +03:00 [INF] CORS policy execution successful.
2026-02-02 00:38:10.465 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Leaves.LeaveRequestsController.CreateLeaveRequest (HRMS.API)'
2026-02-02 00:38:10.472 +03:00 [INF] Route matched with {action = "CreateLeaveRequest", controller = "LeaveRequests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[System.Int32]]] CreateLeaveRequest(HRMS.Application.Features.Leaves.Requests.Commands.CreateLeaveRequest.CreateLeaveRequestCommand) on controller HRMS.API.Controllers.Leaves.LeaveRequestsController (HRMS.API).
2026-02-02 00:38:10.491 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2026-02-02 00:38:10.514 +03:00 [INF] Executed action HRMS.API.Controllers.Leaves.LeaveRequestsController.CreateLeaveRequest (HRMS.API) in 38.2218ms
2026-02-02 00:38:10.521 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Leaves.LeaveRequestsController.CreateLeaveRequest (HRMS.API)'
2026-02-02 00:38:10.523 +03:00 [INF] HTTP POST /api/Leaves/Requests responded 400 in 59.0726 ms
2026-02-02 00:38:10.525 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Leaves/Requests - 400 null application/json; charset=utf-8 114.2178ms
2026-02-02 00:39:48.466 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Leaves/Requests - application/json 231
2026-02-02 00:39:48.511 +03:00 [INF] CORS policy execution successful.
2026-02-02 00:39:48.513 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Leaves.LeaveRequestsController.CreateLeaveRequest (HRMS.API)'
2026-02-02 00:39:48.538 +03:00 [INF] Route matched with {action = "CreateLeaveRequest", controller = "LeaveRequests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[System.Int32]]] CreateLeaveRequest(HRMS.Application.Features.Leaves.Requests.Commands.CreateLeaveRequest.CreateLeaveRequestCommand) on controller HRMS.API.Controllers.Leaves.LeaveRequestsController (HRMS.API).
2026-02-02 00:39:48.616 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
        WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0 AND [e].[IS_DELETED] = CAST(0 AS tinyint)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-02-02 00:39:48.820 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@__request_LeaveTypeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [l].[LEAVE_TYPE_ID], [l].[CREATED_AT], [l].[CREATED_BY], [l].[DEFAULT_DAYS], [l].[IS_CARRY_FORWARD], [l].[IS_DEDUCTIBLE], [l].[IS_DELETED], [l].[IS_PAID], [l].[LEAVE_NAME_AR], [l].[LEAVE_NAME_EN], [l].[MAX_DAYS_PER_YEAR], [l].[REQUIRES_ATTACHMENT], [l].[UPDATED_AT], [l].[UPDATED_BY], [l].[VERSION_NO]
FROM [HR_LEAVES].[LEAVE_TYPES] AS [l]
WHERE [l].[LEAVE_TYPE_ID] = @__request_LeaveTypeId_0 AND [l].[IS_DELETED] = CAST(0 AS tinyint)
2026-02-02 00:39:48.837 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__8__locals1_request_EmployeeId_0='?' (DbType = Int32), @__8__locals1_request_LeaveTypeId_1='?' (DbType = Int32), @__year_2='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[BALANCE_ID], [e].[CREATED_AT], [e].[CREATED_BY], [e].[CURRENT_BALANCE], [e].[EMPLOYEE_ID], [e].[IS_DELETED], [e].[LEAVE_TYPE_ID], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO], [e].[YEAR]
FROM [HR_LEAVES].[EMPLOYEE_LEAVE_BALANCES] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__8__locals1_request_EmployeeId_0 AND [e].[LEAVE_TYPE_ID] = @__8__locals1_request_LeaveTypeId_1 AND [e].[YEAR] = @__year_2 AND [e].[IS_DELETED] = CAST(0 AS tinyint)
2026-02-02 00:39:48.843 +03:00 [INF] Executing ObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[System.Int32, System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-02 00:39:48.846 +03:00 [INF] Executed action HRMS.API.Controllers.Leaves.LeaveRequestsController.CreateLeaveRequest (HRMS.API) in 299.2335ms
2026-02-02 00:39:48.848 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Leaves.LeaveRequestsController.CreateLeaveRequest (HRMS.API)'
2026-02-02 00:39:48.850 +03:00 [INF] HTTP POST /api/Leaves/Requests responded 400 in 338.8050 ms
2026-02-02 00:39:48.857 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Leaves/Requests - 400 null application/json; charset=utf-8 390.2776ms
2026-02-02 00:40:43.121 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Leaves/Requests - application/json 204
2026-02-02 00:40:43.779 +03:00 [INF] CORS policy execution successful.
2026-02-02 00:40:44.103 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Leaves.LeaveRequestsController.CreateLeaveRequest (HRMS.API)'
2026-02-02 00:40:44.105 +03:00 [INF] Route matched with {action = "CreateLeaveRequest", controller = "LeaveRequests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[System.Int32]]] CreateLeaveRequest(HRMS.Application.Features.Leaves.Requests.Commands.CreateLeaveRequest.CreateLeaveRequestCommand) on controller HRMS.API.Controllers.Leaves.LeaveRequestsController (HRMS.API).
2026-02-02 00:40:57.009 +03:00 [INF] Executed action HRMS.API.Controllers.Leaves.LeaveRequestsController.CreateLeaveRequest (HRMS.API) in 12901.6512ms
2026-02-02 00:40:57.661 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Leaves.LeaveRequestsController.CreateLeaveRequest (HRMS.API)'
2026-02-02 00:40:57.706 +03:00 [ERR] CRITICAL ERROR CAUGHT: Validation failed: 
 -- Reason: ÿ≥ÿ®ÿ® ÿßŸÑÿ•ÿ¨ÿßÿ≤ÿ© Ÿäÿ¨ÿ® ÿ£ŸÜ ŸäŸÉŸàŸÜ Ÿàÿßÿ∂ÿ≠ÿßŸã (10 ÿ£ÿ≠ÿ±ŸÅ ÿπŸÑŸâ ÿßŸÑÿ£ŸÇŸÑ) Severity: Error
FluentValidation.ValidationException: Validation failed: 
 -- Reason: ÿ≥ÿ®ÿ® ÿßŸÑÿ•ÿ¨ÿßÿ≤ÿ© Ÿäÿ¨ÿ® ÿ£ŸÜ ŸäŸÉŸàŸÜ Ÿàÿßÿ∂ÿ≠ÿßŸã (10 ÿ£ÿ≠ÿ±ŸÅ ÿπŸÑŸâ ÿßŸÑÿ£ŸÇŸÑ) Severity: Error
   at HRMS.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\HRMS_Hospital\Backend\HRMS\HRMS.Application\Behaviors\ValidationBehavior.cs:line 32
   at HRMS.API.Controllers.Leaves.LeaveRequestsController.CreateLeaveRequest(CreateLeaveRequestCommand command) in D:\HRMS_Hospital\Backend\HRMS\HRMS.API\Controllers\Leaves\LeaveRequestsController.cs:line 44
   at lambda_method592(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at HRMS.API.Middleware.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\HRMS_Hospital\Backend\HRMS\HRMS.API\Middleware\GlobalExceptionMiddleware.cs:line 31
2026-02-02 00:40:57.731 +03:00 [INF] HTTP POST /api/Leaves/Requests responded 400 in 13952.2699 ms
2026-02-02 00:40:57.733 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Leaves/Requests - 400 null application/json 14612.0515ms
2026-02-02 00:41:10.980 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Leaves/Requests - application/json 220
2026-02-02 00:41:11.035 +03:00 [INF] CORS policy execution successful.
2026-02-02 00:41:11.043 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Leaves.LeaveRequestsController.CreateLeaveRequest (HRMS.API)'
2026-02-02 00:41:11.047 +03:00 [INF] Route matched with {action = "CreateLeaveRequest", controller = "LeaveRequests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[System.Int32]]] CreateLeaveRequest(HRMS.Application.Features.Leaves.Requests.Commands.CreateLeaveRequest.CreateLeaveRequestCommand) on controller HRMS.API.Controllers.Leaves.LeaveRequestsController (HRMS.API).
2026-02-02 00:41:11.087 +03:00 [INF] Executed DbCommand (22ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
        WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0 AND [e].[IS_DELETED] = CAST(0 AS tinyint)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-02-02 00:41:11.100 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__request_LeaveTypeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [l].[LEAVE_TYPE_ID], [l].[CREATED_AT], [l].[CREATED_BY], [l].[DEFAULT_DAYS], [l].[IS_CARRY_FORWARD], [l].[IS_DEDUCTIBLE], [l].[IS_DELETED], [l].[IS_PAID], [l].[LEAVE_NAME_AR], [l].[LEAVE_NAME_EN], [l].[MAX_DAYS_PER_YEAR], [l].[REQUIRES_ATTACHMENT], [l].[UPDATED_AT], [l].[UPDATED_BY], [l].[VERSION_NO]
FROM [HR_LEAVES].[LEAVE_TYPES] AS [l]
WHERE [l].[LEAVE_TYPE_ID] = @__request_LeaveTypeId_0 AND [l].[IS_DELETED] = CAST(0 AS tinyint)
2026-02-02 00:41:11.111 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32), @__request_StartDate_1='?' (DbType = DateTime2), @__request_EndDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HR_LEAVES].[LEAVE_REQUESTS] AS [l]
        WHERE [l].[EMPLOYEE_ID] = @__request_EmployeeId_0 AND [l].[IS_DELETED] = CAST(0 AS tinyint) AND [l].[STATUS] IN (N'PENDING', N'MANAGER_APPROVED', N'HR_APPROVED') AND ((@__request_StartDate_1 >= [l].[START_DATE] AND @__request_StartDate_1 <= [l].[END_DATE]) OR (@__request_EndDate_2 >= [l].[START_DATE] AND @__request_EndDate_2 <= [l].[END_DATE]) OR (@__request_StartDate_1 <= [l].[START_DATE] AND @__request_EndDate_2 >= [l].[END_DATE]))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-02-02 00:41:11.129 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 500), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2), @p6='?' (Size = 1) (DbType = Byte), @p7='?' (Size = 1) (DbType = Byte), @p8='?' (DbType = Int32), @p9='?' (Size = 200), @p10='?' (Size = 200), @p11='?' (DbType = DateTime2), @p12='?' (Size = 20), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_LEAVES].[LEAVE_REQUESTS] ([ATTACHMENT_PATH], [CREATED_AT], [CREATED_BY], [DAYS_COUNT], [EMPLOYEE_ID], [END_DATE], [IS_DELETED], [IS_POSTED_TO_BALANCE], [LEAVE_TYPE_ID], [REASON], [REJECTION_REASON], [START_DATE], [STATUS], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[REQUEST_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
2026-02-02 00:41:11.150 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-02-02 00:41:11.179 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[System.Int32, System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-02 00:41:11.183 +03:00 [INF] Executed action HRMS.API.Controllers.Leaves.LeaveRequestsController.CreateLeaveRequest (HRMS.API) in 127.0536ms
2026-02-02 00:41:11.186 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Leaves.LeaveRequestsController.CreateLeaveRequest (HRMS.API)'
2026-02-02 00:41:11.190 +03:00 [INF] HTTP POST /api/Leaves/Requests responded 200 in 154.2727 ms
2026-02-02 00:41:11.193 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Leaves/Requests - 200 null application/json; charset=utf-8 212.8408ms
2026-02-02 00:42:07.657 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Leaves/Requests/pending - null null
2026-02-02 00:42:07.661 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Leaves.LeaveRequestsController.GetPendingRequests (HRMS.API)'
2026-02-02 00:42:07.663 +03:00 [INF] Route matched with {action = "GetPendingRequests", controller = "LeaveRequests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[System.Collections.Generic.List`1[HRMS.Application.DTOs.Leaves.LeaveRequestDto]]]] GetPendingRequests() on controller HRMS.API.Controllers.Leaves.LeaveRequestsController (HRMS.API).
2026-02-02 00:42:07.738 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[System.Collections.Generic.List`1[[HRMS.Application.DTOs.Leaves.LeaveRequestDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-02 00:42:07.863 +03:00 [INF] Executed action HRMS.API.Controllers.Leaves.LeaveRequestsController.GetPendingRequests (HRMS.API) in 124.7582ms
2026-02-02 00:42:07.869 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Leaves.LeaveRequestsController.GetPendingRequests (HRMS.API)'
2026-02-02 00:42:07.870 +03:00 [INF] HTTP GET /api/Leaves/Requests/pending responded 200 in 208.9394 ms
2026-02-02 00:42:07.872 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Leaves/Requests/pending - 200 null application/json; charset=utf-8 215.3039ms
2026-02-02 00:44:10.291 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Leaves/Requests - application/json 208
2026-02-02 00:44:10.302 +03:00 [INF] CORS policy execution successful.
2026-02-02 00:44:10.307 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Leaves.LeaveRequestsController.CreateLeaveRequest (HRMS.API)'
2026-02-02 00:44:10.309 +03:00 [INF] Route matched with {action = "CreateLeaveRequest", controller = "LeaveRequests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[System.Int32]]] CreateLeaveRequest(HRMS.Application.Features.Leaves.Requests.Commands.CreateLeaveRequest.CreateLeaveRequestCommand) on controller HRMS.API.Controllers.Leaves.LeaveRequestsController (HRMS.API).
2026-02-02 00:44:10.335 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
        WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0 AND [e].[IS_DELETED] = CAST(0 AS tinyint)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-02-02 00:44:10.348 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__request_LeaveTypeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [l].[LEAVE_TYPE_ID], [l].[CREATED_AT], [l].[CREATED_BY], [l].[DEFAULT_DAYS], [l].[IS_CARRY_FORWARD], [l].[IS_DEDUCTIBLE], [l].[IS_DELETED], [l].[IS_PAID], [l].[LEAVE_NAME_AR], [l].[LEAVE_NAME_EN], [l].[MAX_DAYS_PER_YEAR], [l].[REQUIRES_ATTACHMENT], [l].[UPDATED_AT], [l].[UPDATED_BY], [l].[VERSION_NO]
FROM [HR_LEAVES].[LEAVE_TYPES] AS [l]
WHERE [l].[LEAVE_TYPE_ID] = @__request_LeaveTypeId_0 AND [l].[IS_DELETED] = CAST(0 AS tinyint)
2026-02-02 00:44:10.363 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__8__locals1_request_EmployeeId_0='?' (DbType = Int32), @__8__locals1_request_LeaveTypeId_1='?' (DbType = Int32), @__year_2='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[BALANCE_ID], [e].[CREATED_AT], [e].[CREATED_BY], [e].[CURRENT_BALANCE], [e].[EMPLOYEE_ID], [e].[IS_DELETED], [e].[LEAVE_TYPE_ID], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO], [e].[YEAR]
FROM [HR_LEAVES].[EMPLOYEE_LEAVE_BALANCES] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__8__locals1_request_EmployeeId_0 AND [e].[LEAVE_TYPE_ID] = @__8__locals1_request_LeaveTypeId_1 AND [e].[YEAR] = @__year_2 AND [e].[IS_DELETED] = CAST(0 AS tinyint)
2026-02-02 00:44:10.376 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32), @__request_StartDate_1='?' (DbType = DateTime2), @__request_EndDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HR_LEAVES].[LEAVE_REQUESTS] AS [l]
        WHERE [l].[EMPLOYEE_ID] = @__request_EmployeeId_0 AND [l].[IS_DELETED] = CAST(0 AS tinyint) AND [l].[STATUS] IN (N'PENDING', N'MANAGER_APPROVED', N'HR_APPROVED') AND ((@__request_StartDate_1 >= [l].[START_DATE] AND @__request_StartDate_1 <= [l].[END_DATE]) OR (@__request_EndDate_2 >= [l].[START_DATE] AND @__request_EndDate_2 <= [l].[END_DATE]) OR (@__request_StartDate_1 <= [l].[START_DATE] AND @__request_EndDate_2 >= [l].[END_DATE]))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-02-02 00:44:10.382 +03:00 [INF] Executing ObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[System.Int32, System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-02 00:44:10.385 +03:00 [INF] Executed action HRMS.API.Controllers.Leaves.LeaveRequestsController.CreateLeaveRequest (HRMS.API) in 71.7638ms
2026-02-02 00:44:10.391 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Leaves.LeaveRequestsController.CreateLeaveRequest (HRMS.API)'
2026-02-02 00:44:10.394 +03:00 [INF] HTTP POST /api/Leaves/Requests responded 400 in 91.9838 ms
2026-02-02 00:44:10.397 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Leaves/Requests - 400 null application/json; charset=utf-8 106.1298ms
2026-02-02 00:46:55.547 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Leaves/Requests/employee/10 - null null
2026-02-02 00:46:55.555 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Leaves.LeaveRequestsController.GetEmployeeRequests (HRMS.API)'
2026-02-02 00:46:55.557 +03:00 [INF] Route matched with {action = "GetEmployeeRequests", controller = "LeaveRequests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[System.Collections.Generic.List`1[HRMS.Application.DTOs.Leaves.LeaveRequestDto]]]] GetEmployeeRequests(Int32) on controller HRMS.API.Controllers.Leaves.LeaveRequestsController (HRMS.API).
2026-02-02 00:46:55.560 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[System.Collections.Generic.List`1[[HRMS.Application.DTOs.Leaves.LeaveRequestDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-02 00:46:55.565 +03:00 [INF] Executed action HRMS.API.Controllers.Leaves.LeaveRequestsController.GetEmployeeRequests (HRMS.API) in 5.4197ms
2026-02-02 00:46:55.567 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Leaves.LeaveRequestsController.GetEmployeeRequests (HRMS.API)'
2026-02-02 00:46:55.569 +03:00 [INF] HTTP GET /api/Leaves/Requests/employee/10 responded 200 in 13.3667 ms
2026-02-02 00:46:55.571 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Leaves/Requests/employee/10 - 200 null application/json; charset=utf-8 24.1779ms
2026-02-02 00:47:02.852 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Leaves/Requests/employee/9 - null null
2026-02-02 00:47:02.856 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Leaves.LeaveRequestsController.GetEmployeeRequests (HRMS.API)'
2026-02-02 00:47:02.857 +03:00 [INF] Route matched with {action = "GetEmployeeRequests", controller = "LeaveRequests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[System.Collections.Generic.List`1[HRMS.Application.DTOs.Leaves.LeaveRequestDto]]]] GetEmployeeRequests(Int32) on controller HRMS.API.Controllers.Leaves.LeaveRequestsController (HRMS.API).
2026-02-02 00:47:02.861 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[System.Collections.Generic.List`1[[HRMS.Application.DTOs.Leaves.LeaveRequestDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-02 00:47:02.863 +03:00 [INF] Executed action HRMS.API.Controllers.Leaves.LeaveRequestsController.GetEmployeeRequests (HRMS.API) in 2.6311ms
2026-02-02 00:47:02.865 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Leaves.LeaveRequestsController.GetEmployeeRequests (HRMS.API)'
2026-02-02 00:47:02.866 +03:00 [INF] HTTP GET /api/Leaves/Requests/employee/9 responded 200 in 11.1206 ms
2026-02-02 00:47:02.869 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Leaves/Requests/employee/9 - 200 null application/json; charset=utf-8 16.5512ms
2026-02-02 01:32:14.032 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Leaves/Requests/employee/17 - null null
2026-02-02 01:32:14.236 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Leaves.LeaveRequestsController.GetEmployeeRequests (HRMS.API)'
2026-02-02 01:32:14.238 +03:00 [INF] Route matched with {action = "GetEmployeeRequests", controller = "LeaveRequests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[System.Collections.Generic.List`1[HRMS.Application.DTOs.Leaves.LeaveRequestDto]]]] GetEmployeeRequests(Int32) on controller HRMS.API.Controllers.Leaves.LeaveRequestsController (HRMS.API).
2026-02-02 01:32:14.247 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[System.Collections.Generic.List`1[[HRMS.Application.DTOs.Leaves.LeaveRequestDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-02 01:32:14.250 +03:00 [INF] Executed action HRMS.API.Controllers.Leaves.LeaveRequestsController.GetEmployeeRequests (HRMS.API) in 3.4002ms
2026-02-02 01:32:14.253 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Leaves.LeaveRequestsController.GetEmployeeRequests (HRMS.API)'
2026-02-02 01:32:14.254 +03:00 [INF] HTTP GET /api/Leaves/Requests/employee/17 responded 200 in 18.5728 ms
2026-02-02 01:32:14.258 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Leaves/Requests/employee/17 - 200 null application/json; charset=utf-8 225.9235ms
2026-02-02 01:32:31.612 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Leaves/Requests/employee/7 - null null
2026-02-02 01:32:31.620 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Leaves.LeaveRequestsController.GetEmployeeRequests (HRMS.API)'
2026-02-02 01:32:31.677 +03:00 [INF] Route matched with {action = "GetEmployeeRequests", controller = "LeaveRequests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[System.Collections.Generic.List`1[HRMS.Application.DTOs.Leaves.LeaveRequestDto]]]] GetEmployeeRequests(Int32) on controller HRMS.API.Controllers.Leaves.LeaveRequestsController (HRMS.API).
2026-02-02 01:32:31.686 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[System.Collections.Generic.List`1[[HRMS.Application.DTOs.Leaves.LeaveRequestDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-02 01:32:31.688 +03:00 [INF] Executed action HRMS.API.Controllers.Leaves.LeaveRequestsController.GetEmployeeRequests (HRMS.API) in 2.6619ms
2026-02-02 01:32:31.693 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Leaves.LeaveRequestsController.GetEmployeeRequests (HRMS.API)'
2026-02-02 01:32:31.694 +03:00 [INF] HTTP GET /api/Leaves/Requests/employee/7 responded 200 in 74.4694 ms
2026-02-02 01:32:31.696 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Leaves/Requests/employee/7 - 200 null application/json; charset=utf-8 84.1817ms
2026-02-02 01:33:13.380 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Leaves/Requests/employee/17 - null null
2026-02-02 01:33:13.386 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Leaves.LeaveRequestsController.GetEmployeeRequests (HRMS.API)'
2026-02-02 01:33:13.387 +03:00 [INF] Route matched with {action = "GetEmployeeRequests", controller = "LeaveRequests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[System.Collections.Generic.List`1[HRMS.Application.DTOs.Leaves.LeaveRequestDto]]]] GetEmployeeRequests(Int32) on controller HRMS.API.Controllers.Leaves.LeaveRequestsController (HRMS.API).
2026-02-02 01:33:13.391 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[System.Collections.Generic.List`1[[HRMS.Application.DTOs.Leaves.LeaveRequestDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-02 01:33:13.393 +03:00 [INF] Executed action HRMS.API.Controllers.Leaves.LeaveRequestsController.GetEmployeeRequests (HRMS.API) in 2.2518ms
2026-02-02 01:33:13.399 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Leaves.LeaveRequestsController.GetEmployeeRequests (HRMS.API)'
2026-02-02 01:33:13.400 +03:00 [INF] HTTP GET /api/Leaves/Requests/employee/17 responded 200 in 14.1511 ms
2026-02-02 01:33:13.403 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Leaves/Requests/employee/17 - 200 null application/json; charset=utf-8 52.6633ms
2026-02-02 01:37:09.205 +03:00 [INF] üöÄ Starting HRMS Hospital API...
2026-02-02 01:37:12.184 +03:00 [INF] ‚úÖ HRMS Hospital API started successfully
2026-02-02 01:37:12.306 +03:00 [INF] User profile is available. Using 'C:\Users\MT\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-02-02 01:37:13.554 +03:00 [INF] Now listening on: https://localhost:5001
2026-02-02 01:37:13.598 +03:00 [INF] Now listening on: http://localhost:5000
2026-02-02 01:37:13.886 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-02 01:37:17.426 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - null null
2026-02-02 01:37:17.554 +03:00 [INF] Hosting environment: Development
2026-02-02 01:37:18.870 +03:00 [INF] Content root path: D:\HRMS_Hospital\Backend\HRMS\HRMS.API
2026-02-02 01:37:19.394 +03:00 [INF] HTTP GET /swagger/index.html responded 200 in 708.2205 ms
2026-02-02 01:37:19.615 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - null null
2026-02-02 01:37:20.492 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_vs/browserLink - null null
2026-02-02 01:37:20.602 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - 200 null text/html;charset=utf-8 3218.4637ms
2026-02-02 01:37:20.615 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 999.93ms
2026-02-02 01:37:21.597 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_vs/browserLink - 200 null text/javascript; charset=UTF-8 1105.1594ms
2026-02-02 01:37:22.327 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - null null
2026-02-02 01:37:23.663 +03:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 511.0998 ms
2026-02-02 01:37:23.852 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 1524.624ms
2026-02-02 01:37:49.117 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Leaves/Requests/pending - null null
2026-02-02 01:37:49.183 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Leaves.LeaveRequestsController.GetPendingRequests (HRMS.API)'
2026-02-02 01:37:49.230 +03:00 [INF] Route matched with {action = "GetPendingRequests", controller = "LeaveRequests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[System.Collections.Generic.List`1[HRMS.Application.DTOs.Leaves.LeaveRequestDto]]]] GetPendingRequests() on controller HRMS.API.Controllers.Leaves.LeaveRequestsController (HRMS.API).
2026-02-02 01:37:52.484 +03:00 [WRN] No store type was specified for the decimal property 'HoursCount' on entity type 'ShiftType'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-02-02 01:37:52.489 +03:00 [WRN] No store type was specified for the decimal property 'MaxSalary' on entity type 'JobGrade'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-02-02 01:37:52.507 +03:00 [WRN] No store type was specified for the decimal property 'MinSalary' on entity type 'JobGrade'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-02-02 01:37:54.261 +03:00 [INF] Executed DbCommand (65ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[REQUEST_ID], [l].[ATTACHMENT_PATH], [l].[CREATED_AT], [l].[CREATED_BY], [l].[DAYS_COUNT], [l].[EMPLOYEE_ID], [l].[END_DATE], [l].[IS_DELETED], [l].[IS_POSTED_TO_BALANCE], [l].[LEAVE_TYPE_ID], [l].[REASON], [l].[REJECTION_REASON], [l].[START_DATE], [l].[STATUS], [l].[UPDATED_AT], [l].[UPDATED_BY], [l].[VERSION_NO], [l0].[LEAVE_TYPE_ID], [l0].[CREATED_AT], [l0].[CREATED_BY], [l0].[DEFAULT_DAYS], [l0].[IS_CARRY_FORWARD], [l0].[IS_DEDUCTIBLE], [l0].[IS_DELETED], [l0].[IS_PAID], [l0].[LEAVE_NAME_AR], [l0].[LEAVE_NAME_EN], [l0].[MAX_DAYS_PER_YEAR], [l0].[REQUIRES_ATTACHMENT], [l0].[UPDATED_AT], [l0].[UPDATED_BY], [l0].[VERSION_NO], [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO]
FROM [HR_LEAVES].[LEAVE_REQUESTS] AS [l]
INNER JOIN [HR_LEAVES].[LEAVE_TYPES] AS [l0] ON [l].[LEAVE_TYPE_ID] = [l0].[LEAVE_TYPE_ID]
INNER JOIN [HR_PERSONNEL].[EMPLOYEES] AS [e] ON [l].[EMPLOYEE_ID] = [e].[EMPLOYEE_ID]
WHERE [l].[STATUS] = N'PENDING' AND [l].[IS_DELETED] = CAST(0 AS tinyint)
ORDER BY [l].[START_DATE]
2026-02-02 01:37:54.359 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[System.Collections.Generic.List`1[[HRMS.Application.DTOs.Leaves.LeaveRequestDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-02 01:37:54.402 +03:00 [INF] Executed action HRMS.API.Controllers.Leaves.LeaveRequestsController.GetPendingRequests (HRMS.API) in 5162.8509ms
2026-02-02 01:37:54.405 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Leaves.LeaveRequestsController.GetPendingRequests (HRMS.API)'
2026-02-02 01:37:54.407 +03:00 [INF] HTTP GET /api/Leaves/Requests/pending responded 200 in 5236.4012 ms
2026-02-02 01:37:54.423 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Leaves/Requests/pending - 200 null application/json; charset=utf-8 5305.8714ms
2026-02-02 01:38:20.888 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Leaves/Requests/employee/17 - null null
2026-02-02 01:38:20.904 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Leaves.LeaveRequestsController.GetEmployeeRequests (HRMS.API)'
2026-02-02 01:38:20.942 +03:00 [INF] Route matched with {action = "GetEmployeeRequests", controller = "LeaveRequests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[System.Collections.Generic.List`1[HRMS.Application.DTOs.Leaves.LeaveRequestDto]]]] GetEmployeeRequests(Int32) on controller HRMS.API.Controllers.Leaves.LeaveRequestsController (HRMS.API).
2026-02-02 01:38:21.096 +03:00 [INF] Executed DbCommand (57ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[REQUEST_ID], [l].[ATTACHMENT_PATH], [l].[CREATED_AT], [l].[CREATED_BY], [l].[DAYS_COUNT], [l].[EMPLOYEE_ID], [l].[END_DATE], [l].[IS_DELETED], [l].[IS_POSTED_TO_BALANCE], [l].[LEAVE_TYPE_ID], [l].[REASON], [l].[REJECTION_REASON], [l].[START_DATE], [l].[STATUS], [l].[UPDATED_AT], [l].[UPDATED_BY], [l].[VERSION_NO], [l0].[LEAVE_TYPE_ID], [l0].[CREATED_AT], [l0].[CREATED_BY], [l0].[DEFAULT_DAYS], [l0].[IS_CARRY_FORWARD], [l0].[IS_DEDUCTIBLE], [l0].[IS_DELETED], [l0].[IS_PAID], [l0].[LEAVE_NAME_AR], [l0].[LEAVE_NAME_EN], [l0].[MAX_DAYS_PER_YEAR], [l0].[REQUIRES_ATTACHMENT], [l0].[UPDATED_AT], [l0].[UPDATED_BY], [l0].[VERSION_NO]
FROM [HR_LEAVES].[LEAVE_REQUESTS] AS [l]
INNER JOIN [HR_LEAVES].[LEAVE_TYPES] AS [l0] ON [l].[LEAVE_TYPE_ID] = [l0].[LEAVE_TYPE_ID]
WHERE [l].[EMPLOYEE_ID] = @__request_EmployeeId_0 AND [l].[IS_DELETED] = CAST(0 AS tinyint)
ORDER BY [l].[START_DATE] DESC
2026-02-02 01:38:21.109 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[System.Collections.Generic.List`1[[HRMS.Application.DTOs.Leaves.LeaveRequestDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-02 01:38:21.113 +03:00 [INF] Executed action HRMS.API.Controllers.Leaves.LeaveRequestsController.GetEmployeeRequests (HRMS.API) in 164.3246ms
2026-02-02 01:38:21.115 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Leaves.LeaveRequestsController.GetEmployeeRequests (HRMS.API)'
2026-02-02 01:38:21.117 +03:00 [INF] HTTP GET /api/Leaves/Requests/employee/17 responded 200 in 213.8159 ms
2026-02-02 01:38:21.121 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Leaves/Requests/employee/17 - 200 null application/json; charset=utf-8 232.5049ms
2026-02-02 01:41:03.306 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:5001/api/Leaves/Requests/10/approve - application/json 116
2026-02-02 01:41:03.320 +03:00 [INF] CORS policy execution successful.
2026-02-02 01:41:03.368 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Leaves.LeaveRequestsController.ApproveRequest (HRMS.API)'
2026-02-02 01:41:03.395 +03:00 [INF] Route matched with {action = "ApproveRequest", controller = "LeaveRequests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[System.Boolean]]] ApproveRequest(Int32, HRMS.Application.Features.Leaves.Requests.Commands.ApproveLeaveRequest.ApproveLeaveRequestCommand) on controller HRMS.API.Controllers.Leaves.LeaveRequestsController (HRMS.API).
2026-02-02 01:41:03.835 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__request_RequestId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [l].[REQUEST_ID], [l].[ATTACHMENT_PATH], [l].[CREATED_AT], [l].[CREATED_BY], [l].[DAYS_COUNT], [l].[EMPLOYEE_ID], [l].[END_DATE], [l].[IS_DELETED], [l].[IS_POSTED_TO_BALANCE], [l].[LEAVE_TYPE_ID], [l].[REASON], [l].[REJECTION_REASON], [l].[START_DATE], [l].[STATUS], [l].[UPDATED_AT], [l].[UPDATED_BY], [l].[VERSION_NO], [l0].[LEAVE_TYPE_ID], [l0].[CREATED_AT], [l0].[CREATED_BY], [l0].[DEFAULT_DAYS], [l0].[IS_CARRY_FORWARD], [l0].[IS_DEDUCTIBLE], [l0].[IS_DELETED], [l0].[IS_PAID], [l0].[LEAVE_NAME_AR], [l0].[LEAVE_NAME_EN], [l0].[MAX_DAYS_PER_YEAR], [l0].[REQUIRES_ATTACHMENT], [l0].[UPDATED_AT], [l0].[UPDATED_BY], [l0].[VERSION_NO]
FROM [HR_LEAVES].[LEAVE_REQUESTS] AS [l]
INNER JOIN [HR_LEAVES].[LEAVE_TYPES] AS [l0] ON [l].[LEAVE_TYPE_ID] = [l0].[LEAVE_TYPE_ID]
WHERE [l].[REQUEST_ID] = @__request_RequestId_0 AND [l].[IS_DELETED] = CAST(0 AS tinyint)
2026-02-02 01:41:04.815 +03:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2026-02-02 01:41:04.921 +03:00 [INF] Executed DbCommand (43ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200), @p11='?' (DbType = Int32), @p9='?' (Size = 200), @p10='?' (Size = 20), @p12='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
UPDATE [HR_LEAVES].[LEAVE_REQUESTS] SET [REJECTION_REASON] = @p9, [STATUS] = @p10
OUTPUT 1
WHERE [REQUEST_ID] = @p11 AND [VERSION_NO] = @p12;
2026-02-02 01:41:05.024 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[System.Boolean, System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-02 01:41:05.031 +03:00 [INF] Executed action HRMS.API.Controllers.Leaves.LeaveRequestsController.ApproveRequest (HRMS.API) in 1631.2576ms
2026-02-02 01:41:05.041 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Leaves.LeaveRequestsController.ApproveRequest (HRMS.API)'
2026-02-02 01:41:05.043 +03:00 [INF] HTTP PUT /api/Leaves/Requests/10/approve responded 200 in 1728.9528 ms
2026-02-02 01:41:05.045 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:5001/api/Leaves/Requests/10/approve - 200 null application/json; charset=utf-8 1739.2971ms
2026-02-02 01:46:24.152 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:5001/api/Leaves/Requests/9/reject - application/json 72
2026-02-02 01:46:24.157 +03:00 [INF] CORS policy execution successful.
2026-02-02 01:46:24.158 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Leaves.LeaveRequestsController.RejectRequest (HRMS.API)'
2026-02-02 01:46:24.175 +03:00 [INF] Route matched with {action = "RejectRequest", controller = "LeaveRequests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[System.Boolean]]] RejectRequest(Int32, HRMS.Application.Features.Leaves.Requests.Commands.RejectLeaveRequest.RejectLeaveRequestCommand) on controller HRMS.API.Controllers.Leaves.LeaveRequestsController (HRMS.API).
2026-02-02 01:46:29.643 +03:00 [INF] Executed action HRMS.API.Controllers.Leaves.LeaveRequestsController.RejectRequest (HRMS.API) in 5463.2713ms
2026-02-02 01:46:29.667 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Leaves.LeaveRequestsController.RejectRequest (HRMS.API)'
2026-02-02 01:46:29.714 +03:00 [ERR] CRITICAL ERROR CAUGHT: Validation failed: 
 -- RejectionReason: ÿ≥ÿ®ÿ® ÿßŸÑÿ±ŸÅÿ∂ Ÿäÿ¨ÿ® ÿ£ŸÜ ŸäŸÉŸàŸÜ Ÿàÿßÿ∂ÿ≠ÿßŸã (10 ÿ£ÿ≠ÿ±ŸÅ ÿπŸÑŸâ ÿßŸÑÿ£ŸÇŸÑ) Severity: Error
FluentValidation.ValidationException: Validation failed: 
 -- RejectionReason: ÿ≥ÿ®ÿ® ÿßŸÑÿ±ŸÅÿ∂ Ÿäÿ¨ÿ® ÿ£ŸÜ ŸäŸÉŸàŸÜ Ÿàÿßÿ∂ÿ≠ÿßŸã (10 ÿ£ÿ≠ÿ±ŸÅ ÿπŸÑŸâ ÿßŸÑÿ£ŸÇŸÑ) Severity: Error
   at HRMS.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\HRMS_Hospital\Backend\HRMS\HRMS.Application\Behaviors\ValidationBehavior.cs:line 32
   at HRMS.API.Controllers.Leaves.LeaveRequestsController.RejectRequest(Int32 id, RejectLeaveRequestCommand command) in D:\HRMS_Hospital\Backend\HRMS\HRMS.API\Controllers\Leaves\LeaveRequestsController.cs:line 102
   at lambda_method622(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at HRMS.API.Middleware.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\HRMS_Hospital\Backend\HRMS\HRMS.API\Middleware\GlobalExceptionMiddleware.cs:line 31
2026-02-02 01:46:29.797 +03:00 [INF] HTTP PUT /api/Leaves/Requests/9/reject responded 400 in 5640.8350 ms
2026-02-02 01:46:29.800 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:5001/api/Leaves/Requests/9/reject - 400 null application/json 5648.4358ms
2026-02-02 01:46:45.774 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:5001/api/Leaves/Requests/9/reject - application/json 105
2026-02-02 01:46:45.778 +03:00 [INF] CORS policy execution successful.
2026-02-02 01:46:45.780 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Leaves.LeaveRequestsController.RejectRequest (HRMS.API)'
2026-02-02 01:46:45.781 +03:00 [INF] Route matched with {action = "RejectRequest", controller = "LeaveRequests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[System.Boolean]]] RejectRequest(Int32, HRMS.Application.Features.Leaves.Requests.Commands.RejectLeaveRequest.RejectLeaveRequestCommand) on controller HRMS.API.Controllers.Leaves.LeaveRequestsController (HRMS.API).
2026-02-02 01:46:45.838 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__request_RequestId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [l].[REQUEST_ID], [l].[ATTACHMENT_PATH], [l].[CREATED_AT], [l].[CREATED_BY], [l].[DAYS_COUNT], [l].[EMPLOYEE_ID], [l].[END_DATE], [l].[IS_DELETED], [l].[IS_POSTED_TO_BALANCE], [l].[LEAVE_TYPE_ID], [l].[REASON], [l].[REJECTION_REASON], [l].[START_DATE], [l].[STATUS], [l].[UPDATED_AT], [l].[UPDATED_BY], [l].[VERSION_NO]
FROM [HR_LEAVES].[LEAVE_REQUESTS] AS [l]
WHERE [l].[REQUEST_ID] = @__request_RequestId_0 AND [l].[IS_DELETED] = CAST(0 AS tinyint)
2026-02-02 01:46:45.844 +03:00 [INF] Executing ObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[System.Boolean, System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-02 01:46:45.846 +03:00 [INF] Executed action HRMS.API.Controllers.Leaves.LeaveRequestsController.RejectRequest (HRMS.API) in 60.9274ms
2026-02-02 01:46:45.849 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Leaves.LeaveRequestsController.RejectRequest (HRMS.API)'
2026-02-02 01:46:45.850 +03:00 [INF] HTTP PUT /api/Leaves/Requests/9/reject responded 400 in 71.4877 ms
2026-02-02 01:46:45.854 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:5001/api/Leaves/Requests/9/reject - 400 null application/json; charset=utf-8 80.6257ms
2026-02-02 01:56:39.951 +03:00 [INF] üöÄ Starting HRMS Hospital API...
2026-02-02 01:56:46.646 +03:00 [INF] ‚úÖ HRMS Hospital API started successfully
2026-02-02 01:56:50.415 +03:00 [INF] User profile is available. Using 'C:\Users\MT\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-02-02 01:56:51.806 +03:00 [INF] Now listening on: https://localhost:5001
2026-02-02 01:56:51.852 +03:00 [INF] Now listening on: http://localhost:5000
2026-02-02 01:56:52.419 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-02 01:56:53.983 +03:00 [INF] Hosting environment: Development
2026-02-02 01:56:54.000 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - null null
2026-02-02 01:56:54.478 +03:00 [INF] Content root path: D:\HRMS_Hospital\Backend\HRMS\HRMS.API
2026-02-02 01:56:58.623 +03:00 [INF] HTTP GET /swagger/index.html responded 200 in 2895.4886 ms
2026-02-02 01:56:58.735 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - null null
2026-02-02 01:56:59.773 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_vs/browserLink - null null
2026-02-02 01:57:00.139 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - 200 null text/html;charset=utf-8 6153.9444ms
2026-02-02 01:57:00.142 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 1408.2035ms
2026-02-02 01:57:00.676 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_vs/browserLink - 200 null text/javascript; charset=UTF-8 902.7863ms
2026-02-02 01:57:01.774 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - null null
2026-02-02 01:57:04.380 +03:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 751.9629 ms
2026-02-02 01:57:04.858 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 3083.3511ms
2026-02-02 02:19:17.990 +03:00 [INF] üöÄ Starting HRMS Hospital API...
2026-02-02 02:19:24.212 +03:00 [INF] ‚úÖ HRMS Hospital API started successfully
2026-02-02 02:19:24.333 +03:00 [INF] User profile is available. Using 'C:\Users\MT\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-02-02 02:19:25.117 +03:00 [INF] Now listening on: https://localhost:5001
2026-02-02 02:19:25.136 +03:00 [INF] Now listening on: http://localhost:5000
2026-02-02 02:19:25.457 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-02 02:19:26.239 +03:00 [INF] Hosting environment: Development
2026-02-02 02:19:26.601 +03:00 [INF] Content root path: D:\HRMS_Hospital\Backend\HRMS\HRMS.API
2026-02-02 02:19:26.824 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - null null
2026-02-02 02:19:32.576 +03:00 [INF] HTTP GET /swagger/index.html responded 200 in 4745.2943 ms
2026-02-02 02:19:32.675 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - null null
2026-02-02 02:19:33.437 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_vs/browserLink - null null
2026-02-02 02:19:33.587 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 909.225ms
2026-02-02 02:19:33.589 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - 200 null text/html;charset=utf-8 6776.9333ms
2026-02-02 02:19:33.884 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_vs/browserLink - 200 null text/javascript; charset=UTF-8 447.31ms
2026-02-02 02:19:35.008 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - null null
2026-02-02 02:19:37.037 +03:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 453.4081 ms
2026-02-02 02:19:37.042 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 2033.7847ms
2026-02-02 02:21:08.111 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Leaves/Approvals/stats - null null
2026-02-02 02:21:08.166 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Leaves.ApprovalsController.GetStats (HRMS.API)'
2026-02-02 02:21:08.207 +03:00 [INF] Route matched with {action = "GetStats", controller = "Approvals"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[HRMS.Application.Features.Leaves.Dashboard.Queries.GetApprovalStats.ApprovalStatsDto]]] GetStats() on controller HRMS.API.Controllers.Leaves.ApprovalsController (HRMS.API).
2026-02-02 02:21:12.336 +03:00 [WRN] No store type was specified for the decimal property 'HoursCount' on entity type 'ShiftType'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-02-02 02:21:12.339 +03:00 [WRN] No store type was specified for the decimal property 'MaxSalary' on entity type 'JobGrade'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-02-02 02:21:12.341 +03:00 [WRN] No store type was specified for the decimal property 'MinSalary' on entity type 'JobGrade'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-02-02 02:21:16.062 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [HR_LEAVES].[LEAVE_REQUESTS] AS [l]
WHERE [l].[STATUS] = N'PENDING' AND [l].[IS_DELETED] = CAST(0 AS tinyint)
2026-02-02 02:21:16.300 +03:00 [ERR] Failed executing DbCommand (147ms) [Parameters=[@__today_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [HR_LEAVES].[LEAVE_APPROVAL_HISTORY] AS [l]
WHERE [l].[ACTION_TYPE] = N'APPROVE' AND [l].[ACTION_DATE] >= @__today_0
2026-02-02 02:21:16.348 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'HRMS.Infrastructure.Data.HRMSDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'HR_LEAVES.LEAVE_APPROVAL_HISTORY'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:e6c07a9e-d60c-470c-a4af-9e843166a5cc
Error Number:208,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'HR_LEAVES.LEAVE_APPROVAL_HISTORY'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:e6c07a9e-d60c-470c-a4af-9e843166a5cc
Error Number:208,State:1,Class:16
2026-02-02 02:21:30.741 +03:00 [INF] Executed action HRMS.API.Controllers.Leaves.ApprovalsController.GetStats (HRMS.API) in 22520.7563ms
2026-02-02 02:21:30.745 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Leaves.ApprovalsController.GetStats (HRMS.API)'
2026-02-02 02:21:30.962 +03:00 [ERR] CRITICAL ERROR CAUGHT: Invalid object name 'HR_LEAVES.LEAVE_APPROVAL_HISTORY'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'HR_LEAVES.LEAVE_APPROVAL_HISTORY'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at HRMS.Application.Features.Leaves.Dashboard.Queries.GetApprovalStats.GetApprovalStatsQueryHandler.Handle(GetApprovalStatsQuery request, CancellationToken cancellationToken) in D:\HRMS_Hospital\Backend\HRMS\HRMS.Application\Features\Leaves\Dashboard\Queries\GetApprovalStats\GetApprovalStatsQuery.cs:line 37
   at HRMS.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\HRMS_Hospital\Backend\HRMS\HRMS.Application\Behaviors\ValidationBehavior.cs:line 36
   at HRMS.API.Controllers.Leaves.ApprovalsController.GetStats() in D:\HRMS_Hospital\Backend\HRMS\HRMS.API\Controllers\Leaves\ApprovalsController.cs:line 60
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at HRMS.API.Middleware.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\HRMS_Hospital\Backend\HRMS\HRMS.API\Middleware\GlobalExceptionMiddleware.cs:line 31
ClientConnectionId:e6c07a9e-d60c-470c-a4af-9e843166a5cc
Error Number:208,State:1,Class:16
2026-02-02 02:21:31.039 +03:00 [ERR] HTTP GET /api/Leaves/Approvals/stats responded 500 in 22888.5443 ms
2026-02-02 02:21:31.062 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Leaves/Approvals/stats - 500 null application/json 22951.1623ms
2026-02-02 02:21:41.409 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Leaves/Approvals/delayed - null null
2026-02-02 02:21:41.423 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Leaves.ApprovalsController.GetDelayed (HRMS.API)'
2026-02-02 02:21:41.447 +03:00 [INF] Route matched with {action = "GetDelayed", controller = "Approvals"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[System.Collections.Generic.List`1[HRMS.Application.DTOs.Leaves.LeaveRequestDto]]]] GetDelayed() on controller HRMS.API.Controllers.Leaves.ApprovalsController (HRMS.API).
2026-02-02 02:21:42.013 +03:00 [INF] Executed DbCommand (24ms) [Parameters=[@__thresholdDate_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[REQUEST_ID], [l].[ATTACHMENT_PATH], [l].[CREATED_AT], [l].[CREATED_BY], [l].[DAYS_COUNT], [l].[EMPLOYEE_ID], [l].[END_DATE], [l].[IS_DELETED], [l].[IS_POSTED_TO_BALANCE], [l].[LEAVE_TYPE_ID], [l].[REASON], [l].[REJECTION_REASON], [l].[START_DATE], [l].[STATUS], [l].[UPDATED_AT], [l].[UPDATED_BY], [l].[VERSION_NO], [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO], [l0].[LEAVE_TYPE_ID], [l0].[CREATED_AT], [l0].[CREATED_BY], [l0].[DEFAULT_DAYS], [l0].[IS_CARRY_FORWARD], [l0].[IS_DEDUCTIBLE], [l0].[IS_DELETED], [l0].[IS_PAID], [l0].[LEAVE_NAME_AR], [l0].[LEAVE_NAME_EN], [l0].[MAX_DAYS_PER_YEAR], [l0].[REQUIRES_ATTACHMENT], [l0].[UPDATED_AT], [l0].[UPDATED_BY], [l0].[VERSION_NO]
FROM [HR_LEAVES].[LEAVE_REQUESTS] AS [l]
INNER JOIN [HR_PERSONNEL].[EMPLOYEES] AS [e] ON [l].[EMPLOYEE_ID] = [e].[EMPLOYEE_ID]
INNER JOIN [HR_LEAVES].[LEAVE_TYPES] AS [l0] ON [l].[LEAVE_TYPE_ID] = [l0].[LEAVE_TYPE_ID]
WHERE [l].[STATUS] = N'PENDING' AND [l].[IS_DELETED] = CAST(0 AS tinyint) AND [l].[CREATED_AT] <= @__thresholdDate_0
ORDER BY [l].[CREATED_AT]
2026-02-02 02:21:42.063 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[System.Collections.Generic.List`1[[HRMS.Application.DTOs.Leaves.LeaveRequestDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-02 02:21:42.081 +03:00 [INF] Executed action HRMS.API.Controllers.Leaves.ApprovalsController.GetDelayed (HRMS.API) in 627.6737ms
2026-02-02 02:21:42.083 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Leaves.ApprovalsController.GetDelayed (HRMS.API)'
2026-02-02 02:21:42.085 +03:00 [INF] HTTP GET /api/Leaves/Approvals/delayed responded 200 in 664.3573 ms
2026-02-02 02:21:42.088 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Leaves/Approvals/delayed - 200 null application/json; charset=utf-8 678.5167ms
2026-02-02 02:21:56.593 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Leaves/Approvals/reports/transactions - null null
2026-02-02 02:21:56.666 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Leaves.ApprovalsController.GetTransactionReport (HRMS.API)'
2026-02-02 02:21:56.695 +03:00 [INF] Route matched with {action = "GetTransactionReport", controller = "Approvals"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[System.Collections.Generic.List`1[HRMS.Application.Features.Leaves.Reports.Queries.GetLeaveTransactionReport.LeaveTransactionReportDto]]]] GetTransactionReport(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Int32], System.String) on controller HRMS.API.Controllers.Leaves.ApprovalsController (HRMS.API).
2026-02-02 02:21:56.973 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[REQUEST_ID], [e].[FIRST_NAME_AR] + N' ' + [e].[FIRST_NAME_AR], [d].[DEPT_NAME_AR], [l0].[LEAVE_NAME_AR], [l].[START_DATE], [l].[END_DATE], [l].[DAYS_COUNT], COALESCE([l].[STATUS], N'Unknown'), [l].[CREATED_AT]
FROM [HR_LEAVES].[LEAVE_REQUESTS] AS [l]
INNER JOIN [HR_PERSONNEL].[EMPLOYEES] AS [e] ON [l].[EMPLOYEE_ID] = [e].[EMPLOYEE_ID]
INNER JOIN [HR_CORE].[DEPARTMENTS] AS [d] ON [e].[DEPARTMENT_ID] = [d].[DEPT_ID]
INNER JOIN [HR_LEAVES].[LEAVE_TYPES] AS [l0] ON [l].[LEAVE_TYPE_ID] = [l0].[LEAVE_TYPE_ID]
ORDER BY [l].[START_DATE] DESC
2026-02-02 02:21:56.979 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[System.Collections.Generic.List`1[[HRMS.Application.Features.Leaves.Reports.Queries.GetLeaveTransactionReport.LeaveTransactionReportDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-02 02:21:56.992 +03:00 [INF] Executed action HRMS.API.Controllers.Leaves.ApprovalsController.GetTransactionReport (HRMS.API) in 292.8686ms
2026-02-02 02:21:56.994 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Leaves.ApprovalsController.GetTransactionReport (HRMS.API)'
2026-02-02 02:21:56.996 +03:00 [INF] HTTP GET /api/Leaves/Approvals/reports/transactions responded 200 in 330.6201 ms
2026-02-02 02:21:56.998 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Leaves/Approvals/reports/transactions - 200 null application/json; charset=utf-8 405.3311ms
2026-02-02 02:22:16.804 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Leaves/Approvals/reports/payroll - null null
2026-02-02 02:22:16.843 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Leaves.ApprovalsController.GetPayrollReport (HRMS.API)'
2026-02-02 02:22:16.857 +03:00 [INF] Route matched with {action = "GetPayrollReport", controller = "Approvals"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[System.Collections.Generic.List`1[HRMS.Application.Features.Leaves.Reports.Queries.GetPayrollIntegrationReport.PayrollLeaveDto]]]] GetPayrollReport(Int32, Int32) on controller HRMS.API.Controllers.Leaves.ApprovalsController (HRMS.API).
2026-02-02 02:22:26.883 +03:00 [INF] Executed action HRMS.API.Controllers.Leaves.ApprovalsController.GetPayrollReport (HRMS.API) in 10016.2084ms
2026-02-02 02:22:26.886 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Leaves.ApprovalsController.GetPayrollReport (HRMS.API)'
2026-02-02 02:22:26.928 +03:00 [ERR] CRITICAL ERROR CAUGHT: Year, Month, and Day parameters describe an un-representable DateTime.
System.ArgumentOutOfRangeException: Year, Month, and Day parameters describe an un-representable DateTime.
   at System.DateTime..ctor(Int32 year, Int32 month, Int32 day)
   at HRMS.Application.Features.Leaves.Reports.Queries.GetPayrollIntegrationReport.GetPayrollIntegrationReportQueryHandler.Handle(GetPayrollIntegrationReportQuery request, CancellationToken cancellationToken) in D:\HRMS_Hospital\Backend\HRMS\HRMS.Application\Features\Leaves\Reports\Queries\GetPayrollIntegrationReport\GetPayrollIntegrationReportQuery.cs:line 35
   at HRMS.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\HRMS_Hospital\Backend\HRMS\HRMS.Application\Behaviors\ValidationBehavior.cs:line 36
   at HRMS.API.Controllers.Leaves.ApprovalsController.GetPayrollReport(Int32 month, Int32 year) in D:\HRMS_Hospital\Backend\HRMS\HRMS.API\Controllers\Leaves\ApprovalsController.cs:line 108
   at lambda_method150(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at HRMS.API.Middleware.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\HRMS_Hospital\Backend\HRMS\HRMS.API\Middleware\GlobalExceptionMiddleware.cs:line 31
2026-02-02 02:22:26.945 +03:00 [ERR] HTTP GET /api/Leaves/Approvals/reports/payroll responded 500 in 10101.5180 ms
2026-02-02 02:22:26.951 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Leaves/Approvals/reports/payroll - 500 null application/json 10147.509ms
2026-02-02 02:22:36.654 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Leaves/Approvals/reports/payroll?month=1&year=2026 - null null
2026-02-02 02:22:36.658 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Leaves.ApprovalsController.GetPayrollReport (HRMS.API)'
2026-02-02 02:22:36.660 +03:00 [INF] Route matched with {action = "GetPayrollReport", controller = "Approvals"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[System.Collections.Generic.List`1[HRMS.Application.Features.Leaves.Reports.Queries.GetPayrollIntegrationReport.PayrollLeaveDto]]]] GetPayrollReport(Int32, Int32) on controller HRMS.API.Controllers.Leaves.ApprovalsController (HRMS.API).
2026-02-02 02:22:36.745 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__endDate_0='?' (DbType = DateTime2), @__startDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[REQUEST_ID], [l].[ATTACHMENT_PATH], [l].[CREATED_AT], [l].[CREATED_BY], [l].[DAYS_COUNT], [l].[EMPLOYEE_ID], [l].[END_DATE], [l].[IS_DELETED], [l].[IS_POSTED_TO_BALANCE], [l].[LEAVE_TYPE_ID], [l].[REASON], [l].[REJECTION_REASON], [l].[START_DATE], [l].[STATUS], [l].[UPDATED_AT], [l].[UPDATED_BY], [l].[VERSION_NO], [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO], [l0].[LEAVE_TYPE_ID], [l0].[CREATED_AT], [l0].[CREATED_BY], [l0].[DEFAULT_DAYS], [l0].[IS_CARRY_FORWARD], [l0].[IS_DEDUCTIBLE], [l0].[IS_DELETED], [l0].[IS_PAID], [l0].[LEAVE_NAME_AR], [l0].[LEAVE_NAME_EN], [l0].[MAX_DAYS_PER_YEAR], [l0].[REQUIRES_ATTACHMENT], [l0].[UPDATED_AT], [l0].[UPDATED_BY], [l0].[VERSION_NO]
FROM [HR_LEAVES].[LEAVE_REQUESTS] AS [l]
INNER JOIN [HR_PERSONNEL].[EMPLOYEES] AS [e] ON [l].[EMPLOYEE_ID] = [e].[EMPLOYEE_ID]
INNER JOIN [HR_LEAVES].[LEAVE_TYPES] AS [l0] ON [l].[LEAVE_TYPE_ID] = [l0].[LEAVE_TYPE_ID]
WHERE [l].[STATUS] IN (N'MANAGER_APPROVED', N'HR_APPROVED') AND [l].[IS_DELETED] = CAST(0 AS tinyint) AND [l].[START_DATE] <= @__endDate_0 AND [l].[END_DATE] >= @__startDate_1
2026-02-02 02:22:36.754 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[System.Collections.Generic.List`1[[HRMS.Application.Features.Leaves.Reports.Queries.GetPayrollIntegrationReport.PayrollLeaveDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-02 02:22:36.760 +03:00 [INF] Executed action HRMS.API.Controllers.Leaves.ApprovalsController.GetPayrollReport (HRMS.API) in 96.3227ms
2026-02-02 02:22:36.762 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Leaves.ApprovalsController.GetPayrollReport (HRMS.API)'
2026-02-02 02:22:36.764 +03:00 [INF] HTTP GET /api/Leaves/Approvals/reports/payroll responded 200 in 105.6034 ms
2026-02-02 02:22:36.767 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Leaves/Approvals/reports/payroll?month=1&year=2026 - 200 null application/json; charset=utf-8 112.4752ms
2026-02-02 02:28:08.899 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Leaves/Approvals/stats - null null
2026-02-02 02:28:09.135 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Leaves.ApprovalsController.GetStats (HRMS.API)'
2026-02-02 02:28:09.138 +03:00 [INF] Route matched with {action = "GetStats", controller = "Approvals"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[HRMS.Application.Features.Leaves.Dashboard.Queries.GetApprovalStats.ApprovalStatsDto]]] GetStats() on controller HRMS.API.Controllers.Leaves.ApprovalsController (HRMS.API).
2026-02-02 02:28:09.179 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [HR_LEAVES].[LEAVE_REQUESTS] AS [l]
WHERE [l].[STATUS] = N'PENDING' AND [l].[IS_DELETED] = CAST(0 AS tinyint)
2026-02-02 02:28:09.189 +03:00 [ERR] Failed executing DbCommand (4ms) [Parameters=[@__today_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [HR_LEAVES].[LEAVE_APPROVAL_HISTORY] AS [l]
WHERE [l].[ACTION_TYPE] = N'APPROVE' AND [l].[ACTION_DATE] >= @__today_0
2026-02-02 02:28:09.205 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'HRMS.Infrastructure.Data.HRMSDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'HR_LEAVES.LEAVE_APPROVAL_HISTORY'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:04dd1441-d2af-4680-a777-96d5e1acecb4
Error Number:208,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'HR_LEAVES.LEAVE_APPROVAL_HISTORY'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:04dd1441-d2af-4680-a777-96d5e1acecb4
Error Number:208,State:1,Class:16
2026-02-02 02:28:35.243 +03:00 [INF] Executed action HRMS.API.Controllers.Leaves.ApprovalsController.GetStats (HRMS.API) in 26099.7287ms
2026-02-02 02:28:35.264 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Leaves.ApprovalsController.GetStats (HRMS.API)'
2026-02-02 02:28:35.484 +03:00 [ERR] CRITICAL ERROR CAUGHT: Invalid object name 'HR_LEAVES.LEAVE_APPROVAL_HISTORY'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'HR_LEAVES.LEAVE_APPROVAL_HISTORY'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at HRMS.Application.Features.Leaves.Dashboard.Queries.GetApprovalStats.GetApprovalStatsQueryHandler.Handle(GetApprovalStatsQuery request, CancellationToken cancellationToken) in D:\HRMS_Hospital\Backend\HRMS\HRMS.Application\Features\Leaves\Dashboard\Queries\GetApprovalStats\GetApprovalStatsQuery.cs:line 37
   at HRMS.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\HRMS_Hospital\Backend\HRMS\HRMS.Application\Behaviors\ValidationBehavior.cs:line 36
   at HRMS.API.Controllers.Leaves.ApprovalsController.GetStats() in D:\HRMS_Hospital\Backend\HRMS\HRMS.API\Controllers\Leaves\ApprovalsController.cs:line 60
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at HRMS.API.Middleware.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\HRMS_Hospital\Backend\HRMS\HRMS.API\Middleware\GlobalExceptionMiddleware.cs:line 31
ClientConnectionId:04dd1441-d2af-4680-a777-96d5e1acecb4
Error Number:208,State:1,Class:16
2026-02-02 02:28:35.527 +03:00 [ERR] HTTP GET /api/Leaves/Approvals/stats responded 500 in 26393.0508 ms
2026-02-02 02:28:35.530 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Leaves/Approvals/stats - 500 null application/json 26631.0157ms
2026-02-02 02:49:48.951 +03:00 [INF] üöÄ Starting HRMS Hospital API...
2026-02-02 02:49:50.875 +03:00 [INF] ‚úÖ HRMS Hospital API started successfully
2026-02-02 02:49:50.954 +03:00 [INF] User profile is available. Using 'C:\Users\MT\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-02-02 02:49:51.627 +03:00 [INF] Now listening on: https://localhost:5001
2026-02-02 02:49:51.637 +03:00 [INF] Now listening on: http://localhost:5000
2026-02-02 02:49:51.807 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-02 02:49:51.821 +03:00 [INF] Hosting environment: Development
2026-02-02 02:49:51.822 +03:00 [INF] Content root path: D:\HRMS_Hospital\Backend\HRMS\HRMS.API
2026-02-02 02:49:53.168 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - null null
2026-02-02 02:49:53.964 +03:00 [INF] HTTP GET /swagger/index.html responded 200 in 376.4720 ms
2026-02-02 02:49:54.098 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - 200 null text/html;charset=utf-8 940.5918ms
2026-02-02 02:49:54.717 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - null null
2026-02-02 02:49:54.718 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_vs/browserLink - null null
2026-02-02 02:49:54.729 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 11.7383ms
2026-02-02 02:49:54.788 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_vs/browserLink - 200 null text/javascript; charset=UTF-8 69.9956ms
2026-02-02 02:49:58.874 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - null null
2026-02-02 02:49:59.176 +03:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 297.5079 ms
2026-02-02 02:49:59.180 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 305.4764ms
2026-02-02 02:54:59.410 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Leaves/Approvals/stats - null null
2026-02-02 02:54:59.529 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Leaves.ApprovalsController.GetStats (HRMS.API)'
2026-02-02 02:54:59.584 +03:00 [INF] Route matched with {action = "GetStats", controller = "Approvals"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[HRMS.Application.Features.Leaves.Dashboard.Queries.GetApprovalStats.ApprovalStatsDto]]] GetStats() on controller HRMS.API.Controllers.Leaves.ApprovalsController (HRMS.API).
2026-02-02 02:55:03.527 +03:00 [WRN] No store type was specified for the decimal property 'HoursCount' on entity type 'ShiftType'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-02-02 02:55:03.531 +03:00 [WRN] No store type was specified for the decimal property 'MaxSalary' on entity type 'JobGrade'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-02-02 02:55:03.533 +03:00 [WRN] No store type was specified for the decimal property 'MinSalary' on entity type 'JobGrade'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-02-02 02:55:05.650 +03:00 [INF] Executed DbCommand (90ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [HR_LEAVES].[LEAVE_REQUESTS] AS [l]
WHERE [l].[STATUS] = N'PENDING' AND [l].[IS_DELETED] = CAST(0 AS tinyint)
2026-02-02 02:55:05.860 +03:00 [ERR] Failed executing DbCommand (59ms) [Parameters=[@__today_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [HR_LEAVES].[LEAVE_APPROVAL_HISTORY] AS [l]
WHERE [l].[ACTION_TYPE] = N'APPROVE' AND [l].[ACTION_DATE] >= @__today_0
2026-02-02 02:55:05.919 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'HRMS.Infrastructure.Data.HRMSDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'HR_LEAVES.LEAVE_APPROVAL_HISTORY'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:eb96f02b-6631-4435-9240-2a573b3041a7
Error Number:208,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'HR_LEAVES.LEAVE_APPROVAL_HISTORY'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:eb96f02b-6631-4435-9240-2a573b3041a7
Error Number:208,State:1,Class:16
2026-02-02 02:55:53.551 +03:00 [INF] Executed action HRMS.API.Controllers.Leaves.ApprovalsController.GetStats (HRMS.API) in 53949.9655ms
2026-02-02 02:55:53.656 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Leaves.ApprovalsController.GetStats (HRMS.API)'
2026-02-02 02:55:54.135 +03:00 [ERR] CRITICAL ERROR CAUGHT: Invalid object name 'HR_LEAVES.LEAVE_APPROVAL_HISTORY'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'HR_LEAVES.LEAVE_APPROVAL_HISTORY'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at HRMS.Application.Features.Leaves.Dashboard.Queries.GetApprovalStats.GetApprovalStatsQueryHandler.Handle(GetApprovalStatsQuery request, CancellationToken cancellationToken) in D:\HRMS_Hospital\Backend\HRMS\HRMS.Application\Features\Leaves\Dashboard\Queries\GetApprovalStats\GetApprovalStatsQuery.cs:line 37
   at HRMS.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\HRMS_Hospital\Backend\HRMS\HRMS.Application\Behaviors\ValidationBehavior.cs:line 36
   at HRMS.API.Controllers.Leaves.ApprovalsController.GetStats() in D:\HRMS_Hospital\Backend\HRMS\HRMS.API\Controllers\Leaves\ApprovalsController.cs:line 60
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at HRMS.API.Middleware.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\HRMS_Hospital\Backend\HRMS\HRMS.API\Middleware\GlobalExceptionMiddleware.cs:line 31
ClientConnectionId:eb96f02b-6631-4435-9240-2a573b3041a7
Error Number:208,State:1,Class:16
2026-02-02 02:55:54.426 +03:00 [ERR] HTTP GET /api/Leaves/Approvals/stats responded 500 in 54959.9094 ms
2026-02-02 02:55:54.479 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Leaves/Approvals/stats - 500 null application/json 55068.2914ms
2026-02-02 03:05:21.106 +03:00 [INF] üöÄ Starting HRMS Hospital API...
2026-02-02 03:05:22.551 +03:00 [INF] ‚úÖ HRMS Hospital API started successfully
2026-02-02 03:05:22.611 +03:00 [INF] User profile is available. Using 'C:\Users\MT\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-02-02 03:05:23.187 +03:00 [INF] Now listening on: https://localhost:5001
2026-02-02 03:05:23.189 +03:00 [INF] Now listening on: http://localhost:5000
2026-02-02 03:05:23.384 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-02 03:05:23.632 +03:00 [INF] Hosting environment: Development
2026-02-02 03:05:23.633 +03:00 [INF] Content root path: D:\HRMS_Hospital\Backend\HRMS\HRMS.API
2026-02-02 03:05:24.340 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - null null
2026-02-02 03:05:25.145 +03:00 [INF] HTTP GET /swagger/index.html responded 200 in 299.5587 ms
2026-02-02 03:05:26.034 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - null null
2026-02-02 03:05:26.036 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_vs/browserLink - null null
2026-02-02 03:05:26.190 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - 200 null text/html;charset=utf-8 1859.6499ms
2026-02-02 03:05:26.205 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 171.9759ms
2026-02-02 03:05:26.284 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_vs/browserLink - 200 null text/javascript; charset=UTF-8 247.9362ms
2026-02-02 03:05:29.481 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - null null
2026-02-02 03:05:29.788 +03:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 303.5257 ms
2026-02-02 03:05:29.793 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 312.5521ms
2026-02-02 03:07:35.192 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Leaves/Approvals/stats - null null
2026-02-02 03:07:35.223 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Leaves.ApprovalsController.GetStats (HRMS.API)'
2026-02-02 03:07:35.282 +03:00 [INF] Route matched with {action = "GetStats", controller = "Approvals"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[HRMS.Application.Features.Leaves.Dashboard.Queries.GetApprovalStats.ApprovalStatsDto]]] GetStats() on controller HRMS.API.Controllers.Leaves.ApprovalsController (HRMS.API).
2026-02-02 03:07:38.065 +03:00 [WRN] No store type was specified for the decimal property 'HoursCount' on entity type 'ShiftType'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-02-02 03:07:38.068 +03:00 [WRN] No store type was specified for the decimal property 'MaxSalary' on entity type 'JobGrade'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-02-02 03:07:38.071 +03:00 [WRN] No store type was specified for the decimal property 'MinSalary' on entity type 'JobGrade'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-02-02 03:07:39.516 +03:00 [INF] Executed DbCommand (68ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [HR_LEAVES].[LEAVE_REQUESTS] AS [l]
WHERE [l].[STATUS] = N'PENDING' AND [l].[IS_DELETED] = CAST(0 AS tinyint)
2026-02-02 03:07:39.649 +03:00 [INF] Executed DbCommand (42ms) [Parameters=[@__today_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [HR_CORE].[WORKFLOW_APPROVALS] AS [w]
WHERE [w].[REQUEST_TYPE] = N'LEAVE' AND [w].[STATUS] = N'APPROVED' AND [w].[APPROVAL_DATE] >= @__today_0 AND [w].[IS_DELETED] = CAST(0 AS tinyint)
2026-02-02 03:07:39.662 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__startOfMonth_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [HR_CORE].[WORKFLOW_APPROVALS] AS [w]
WHERE [w].[REQUEST_TYPE] = N'LEAVE' AND [w].[STATUS] = N'REJECTED' AND [w].[APPROVAL_DATE] >= @__startOfMonth_0 AND [w].[IS_DELETED] = CAST(0 AS tinyint)
2026-02-02 03:07:39.677 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[HRMS.Application.Features.Leaves.Dashboard.Queries.GetApprovalStats.ApprovalStatsDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-02 03:07:39.699 +03:00 [INF] Executed action HRMS.API.Controllers.Leaves.ApprovalsController.GetStats (HRMS.API) in 4408.6531ms
2026-02-02 03:07:39.702 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Leaves.ApprovalsController.GetStats (HRMS.API)'
2026-02-02 03:07:39.704 +03:00 [INF] HTTP GET /api/Leaves/Approvals/stats responded 200 in 4499.2574 ms
2026-02-02 03:07:39.725 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Leaves/Approvals/stats - 200 null application/json; charset=utf-8 4533.2017ms
2026-02-02 03:09:29.705 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Leaves/Approvals/reports/payroll?month=1&year=2026 - null null
2026-02-02 03:09:29.716 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Leaves.ApprovalsController.GetPayrollReport (HRMS.API)'
2026-02-02 03:09:29.750 +03:00 [INF] Route matched with {action = "GetPayrollReport", controller = "Approvals"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[System.Collections.Generic.List`1[HRMS.Application.Features.Leaves.Reports.Queries.GetPayrollIntegrationReport.PayrollLeaveDto]]]] GetPayrollReport(Int32, Int32) on controller HRMS.API.Controllers.Leaves.ApprovalsController (HRMS.API).
2026-02-02 03:09:30.064 +03:00 [INF] Executed DbCommand (26ms) [Parameters=[@__endDate_0='?' (DbType = DateTime2), @__startDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[REQUEST_ID], [l].[ATTACHMENT_PATH], [l].[CREATED_AT], [l].[CREATED_BY], [l].[DAYS_COUNT], [l].[EMPLOYEE_ID], [l].[END_DATE], [l].[IS_DELETED], [l].[IS_POSTED_TO_BALANCE], [l].[LEAVE_TYPE_ID], [l].[REASON], [l].[REJECTION_REASON], [l].[START_DATE], [l].[STATUS], [l].[UPDATED_AT], [l].[UPDATED_BY], [l].[VERSION_NO], [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO], [l0].[LEAVE_TYPE_ID], [l0].[CREATED_AT], [l0].[CREATED_BY], [l0].[DEFAULT_DAYS], [l0].[IS_CARRY_FORWARD], [l0].[IS_DEDUCTIBLE], [l0].[IS_DELETED], [l0].[IS_PAID], [l0].[LEAVE_NAME_AR], [l0].[LEAVE_NAME_EN], [l0].[MAX_DAYS_PER_YEAR], [l0].[REQUIRES_ATTACHMENT], [l0].[UPDATED_AT], [l0].[UPDATED_BY], [l0].[VERSION_NO]
FROM [HR_LEAVES].[LEAVE_REQUESTS] AS [l]
INNER JOIN [HR_PERSONNEL].[EMPLOYEES] AS [e] ON [l].[EMPLOYEE_ID] = [e].[EMPLOYEE_ID]
INNER JOIN [HR_LEAVES].[LEAVE_TYPES] AS [l0] ON [l].[LEAVE_TYPE_ID] = [l0].[LEAVE_TYPE_ID]
WHERE [l].[STATUS] IN (N'MANAGER_APPROVED', N'HR_APPROVED') AND [l].[IS_DELETED] = CAST(0 AS tinyint) AND [l].[START_DATE] <= @__endDate_0 AND [l].[END_DATE] >= @__startDate_1
2026-02-02 03:09:30.091 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[System.Collections.Generic.List`1[[HRMS.Application.Features.Leaves.Reports.Queries.GetPayrollIntegrationReport.PayrollLeaveDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-02 03:09:30.109 +03:00 [INF] Executed action HRMS.API.Controllers.Leaves.ApprovalsController.GetPayrollReport (HRMS.API) in 355.5785ms
2026-02-02 03:09:30.110 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Leaves.ApprovalsController.GetPayrollReport (HRMS.API)'
2026-02-02 03:09:30.112 +03:00 [INF] HTTP GET /api/Leaves/Approvals/reports/payroll responded 200 in 397.5555 ms
2026-02-02 03:09:30.115 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Leaves/Approvals/reports/payroll?month=1&year=2026 - 200 null application/json; charset=utf-8 410.6377ms
2026-02-02 03:09:48.798 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Leaves/Approvals/delayed - null null
2026-02-02 03:09:48.801 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Leaves.ApprovalsController.GetDelayed (HRMS.API)'
2026-02-02 03:09:48.817 +03:00 [INF] Route matched with {action = "GetDelayed", controller = "Approvals"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[System.Collections.Generic.List`1[HRMS.Application.DTOs.Leaves.LeaveRequestDto]]]] GetDelayed() on controller HRMS.API.Controllers.Leaves.ApprovalsController (HRMS.API).
2026-02-02 03:09:49.488 +03:00 [INF] Executed DbCommand (25ms) [Parameters=[@__thresholdDate_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[REQUEST_ID], [l].[ATTACHMENT_PATH], [l].[CREATED_AT], [l].[CREATED_BY], [l].[DAYS_COUNT], [l].[EMPLOYEE_ID], [l].[END_DATE], [l].[IS_DELETED], [l].[IS_POSTED_TO_BALANCE], [l].[LEAVE_TYPE_ID], [l].[REASON], [l].[REJECTION_REASON], [l].[START_DATE], [l].[STATUS], [l].[UPDATED_AT], [l].[UPDATED_BY], [l].[VERSION_NO], [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO], [l0].[LEAVE_TYPE_ID], [l0].[CREATED_AT], [l0].[CREATED_BY], [l0].[DEFAULT_DAYS], [l0].[IS_CARRY_FORWARD], [l0].[IS_DEDUCTIBLE], [l0].[IS_DELETED], [l0].[IS_PAID], [l0].[LEAVE_NAME_AR], [l0].[LEAVE_NAME_EN], [l0].[MAX_DAYS_PER_YEAR], [l0].[REQUIRES_ATTACHMENT], [l0].[UPDATED_AT], [l0].[UPDATED_BY], [l0].[VERSION_NO]
FROM [HR_LEAVES].[LEAVE_REQUESTS] AS [l]
INNER JOIN [HR_PERSONNEL].[EMPLOYEES] AS [e] ON [l].[EMPLOYEE_ID] = [e].[EMPLOYEE_ID]
INNER JOIN [HR_LEAVES].[LEAVE_TYPES] AS [l0] ON [l].[LEAVE_TYPE_ID] = [l0].[LEAVE_TYPE_ID]
WHERE [l].[STATUS] = N'PENDING' AND [l].[IS_DELETED] = CAST(0 AS tinyint) AND [l].[CREATED_AT] <= @__thresholdDate_0
ORDER BY [l].[CREATED_AT]
2026-02-02 03:09:49.569 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[System.Collections.Generic.List`1[[HRMS.Application.DTOs.Leaves.LeaveRequestDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-02 03:09:49.605 +03:00 [INF] Executed action HRMS.API.Controllers.Leaves.ApprovalsController.GetDelayed (HRMS.API) in 780.4245ms
2026-02-02 03:09:49.607 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Leaves.ApprovalsController.GetDelayed (HRMS.API)'
2026-02-02 03:09:49.608 +03:00 [INF] HTTP GET /api/Leaves/Approvals/delayed responded 200 in 807.0041 ms
2026-02-02 03:09:49.614 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Leaves/Approvals/delayed - 200 null application/json; charset=utf-8 816.3003ms
2026-02-02 14:59:41.328 +03:00 [INF] üöÄ Starting HRMS Hospital API...
2026-02-02 14:59:46.868 +03:00 [INF] ‚úÖ HRMS Hospital API started successfully
2026-02-02 14:59:46.954 +03:00 [INF] User profile is available. Using 'C:\Users\MT\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-02-02 14:59:47.772 +03:00 [INF] Now listening on: https://localhost:5001
2026-02-02 14:59:47.776 +03:00 [INF] Now listening on: http://localhost:5000
2026-02-02 14:59:47.971 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-02 14:59:48.079 +03:00 [INF] Hosting environment: Development
2026-02-02 14:59:48.081 +03:00 [INF] Content root path: D:\HRMS_Hospital\Backend\HRMS\HRMS.API
2026-02-02 14:59:49.387 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - null null
2026-02-02 14:59:54.209 +03:00 [INF] HTTP GET /swagger/index.html responded 200 in 4350.9642 ms
2026-02-02 14:59:54.242 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - 200 null text/html;charset=utf-8 4872.9838ms
2026-02-02 14:59:55.077 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - null null
2026-02-02 14:59:55.078 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_vs/browserLink - null null
2026-02-02 14:59:55.093 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 15.3487ms
2026-02-02 14:59:55.326 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_vs/browserLink - 200 null text/javascript; charset=UTF-8 247.6372ms
2026-02-02 14:59:56.598 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - null null
2026-02-02 14:59:57.267 +03:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 579.4758 ms
2026-02-02 14:59:57.308 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 710.3589ms
2026-02-02 15:02:51.995 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Leaves/Requests - application/json 262
2026-02-02 15:02:52.017 +03:00 [INF] CORS policy execution successful.
2026-02-02 15:02:52.056 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Leaves.LeaveRequestsController.CreateLeaveRequest (HRMS.API)'
2026-02-02 15:02:52.301 +03:00 [INF] Route matched with {action = "CreateLeaveRequest", controller = "LeaveRequests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[System.Int32]]] CreateLeaveRequest(HRMS.Application.Features.Leaves.Requests.Commands.CreateLeaveRequest.CreateLeaveRequestCommand) on controller HRMS.API.Controllers.Leaves.LeaveRequestsController (HRMS.API).
2026-02-02 15:02:56.264 +03:00 [WRN] No store type was specified for the decimal property 'HoursCount' on entity type 'ShiftType'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-02-02 15:02:56.268 +03:00 [WRN] No store type was specified for the decimal property 'MaxSalary' on entity type 'JobGrade'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-02-02 15:02:56.272 +03:00 [WRN] No store type was specified for the decimal property 'MinSalary' on entity type 'JobGrade'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-02-02 15:02:59.328 +03:00 [INF] Executed DbCommand (171ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0 AND [e].[IS_DELETED] = CAST(0 AS tinyint)
2026-02-02 15:02:59.661 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__request_LeaveTypeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [l].[LEAVE_TYPE_ID], [l].[CREATED_AT], [l].[CREATED_BY], [l].[DEFAULT_DAYS], [l].[IS_CARRY_FORWARD], [l].[IS_DEDUCTIBLE], [l].[IS_DELETED], [l].[IS_PAID], [l].[LEAVE_NAME_AR], [l].[LEAVE_NAME_EN], [l].[MAX_DAYS_PER_YEAR], [l].[REQUIRES_ATTACHMENT], [l].[UPDATED_AT], [l].[UPDATED_BY], [l].[VERSION_NO]
FROM [HR_LEAVES].[LEAVE_TYPES] AS [l]
WHERE [l].[LEAVE_TYPE_ID] = @__request_LeaveTypeId_0 AND [l].[IS_DELETED] = CAST(0 AS tinyint)
2026-02-02 15:02:59.747 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__8__locals1_request_EmployeeId_0='?' (DbType = Int32), @__8__locals1_request_LeaveTypeId_1='?' (DbType = Int32), @__year_2='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[BALANCE_ID], [e].[CREATED_AT], [e].[CREATED_BY], [e].[CURRENT_BALANCE], [e].[EMPLOYEE_ID], [e].[IS_DELETED], [e].[LEAVE_TYPE_ID], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO], [e].[YEAR]
FROM [HR_LEAVES].[EMPLOYEE_LEAVE_BALANCES] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__8__locals1_request_EmployeeId_0 AND [e].[LEAVE_TYPE_ID] = @__8__locals1_request_LeaveTypeId_1 AND [e].[YEAR] = @__year_2 AND [e].[IS_DELETED] = CAST(0 AS tinyint)
2026-02-02 15:02:59.861 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32), @__request_StartDate_1='?' (DbType = DateTime2), @__request_EndDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HR_LEAVES].[LEAVE_REQUESTS] AS [l]
        WHERE [l].[EMPLOYEE_ID] = @__request_EmployeeId_0 AND [l].[IS_DELETED] = CAST(0 AS tinyint) AND [l].[STATUS] IN (N'PENDING', N'MANAGER_APPROVED', N'HR_APPROVED') AND ((@__request_StartDate_1 >= [l].[START_DATE] AND @__request_StartDate_1 <= [l].[END_DATE]) OR (@__request_EndDate_2 >= [l].[START_DATE] AND @__request_EndDate_2 <= [l].[END_DATE]) OR (@__request_StartDate_1 <= [l].[START_DATE] AND @__request_EndDate_2 >= [l].[END_DATE]))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-02-02 15:03:00.244 +03:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2026-02-02 15:03:00.261 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (Size = 500), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2), @p6='?' (Size = 1) (DbType = Byte), @p7='?' (Size = 1) (DbType = Byte), @p8='?' (DbType = Int32), @p9='?' (Size = 200), @p10='?' (Size = 200), @p11='?' (DbType = DateTime2), @p12='?' (Size = 20), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_LEAVES].[LEAVE_REQUESTS] ([ATTACHMENT_PATH], [CREATED_AT], [CREATED_BY], [DAYS_COUNT], [EMPLOYEE_ID], [END_DATE], [IS_DELETED], [IS_POSTED_TO_BALANCE], [LEAVE_TYPE_ID], [REASON], [REJECTION_REASON], [START_DATE], [STATUS], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[REQUEST_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
2026-02-02 15:03:00.394 +03:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2026-02-02 15:03:00.402 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-02-02 15:03:00.458 +03:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2026-02-02 15:03:00.464 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (Size = 1) (DbType = Byte), @p3='?' (Size = 500), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (Size = 1) (DbType = Byte), @p7='?' (DbType = Int32), @p8='?' (Size = 50), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2), @p11='?' (Size = 50), @p12='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[WORKFLOW_APPROVALS] ([APPROVAL_DATE], [APPROVER_ID], [APPROVER_LEVEL], [COMMENTS], [CREATED_AT], [CREATED_BY], [IS_DELETED], [REQUEST_ID], [REQUEST_TYPE], [STATUS], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[APPROVAL_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2026-02-02 15:03:00.479 +03:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2026-02-02 15:03:00.486 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-02-02 15:03:00.526 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[System.Int32, System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-02 15:03:00.549 +03:00 [INF] Executed action HRMS.API.Controllers.Leaves.LeaveRequestsController.CreateLeaveRequest (HRMS.API) in 8236.2158ms
2026-02-02 15:03:00.554 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Leaves.LeaveRequestsController.CreateLeaveRequest (HRMS.API)'
2026-02-02 15:03:00.556 +03:00 [INF] HTTP POST /api/Leaves/Requests responded 200 in 8547.1353 ms
2026-02-02 15:03:00.580 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Leaves/Requests - 200 null application/json; charset=utf-8 8585.1027ms
2026-02-02 15:03:38.221 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Leaves/Requests/pending - null null
2026-02-02 15:03:38.271 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Leaves.LeaveRequestsController.GetPendingRequests (HRMS.API)'
2026-02-02 15:03:38.291 +03:00 [INF] Route matched with {action = "GetPendingRequests", controller = "LeaveRequests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[System.Collections.Generic.List`1[HRMS.Application.DTOs.Leaves.LeaveRequestDto]]]] GetPendingRequests() on controller HRMS.API.Controllers.Leaves.LeaveRequestsController (HRMS.API).
2026-02-02 15:03:38.902 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[System.Collections.Generic.List`1[[HRMS.Application.DTOs.Leaves.LeaveRequestDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-02 15:03:38.911 +03:00 [INF] Executed action HRMS.API.Controllers.Leaves.LeaveRequestsController.GetPendingRequests (HRMS.API) in 616.27ms
2026-02-02 15:03:38.915 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Leaves.LeaveRequestsController.GetPendingRequests (HRMS.API)'
2026-02-02 15:03:38.917 +03:00 [INF] HTTP GET /api/Leaves/Requests/pending responded 200 in 653.1564 ms
2026-02-02 15:03:38.921 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Leaves/Requests/pending - 200 null application/json; charset=utf-8 700.4364ms
2026-02-02 15:04:49.684 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - null null
2026-02-02 15:04:49.712 +03:00 [INF] HTTP GET /swagger/index.html responded 200 in 2.0025 ms
2026-02-02 15:04:49.715 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - 200 null text/html;charset=utf-8 31.1943ms
2026-02-02 15:04:49.772 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - null null
2026-02-02 15:04:49.789 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 16.8084ms
2026-02-02 15:04:49.772 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_vs/browserLink - null null
2026-02-02 15:04:49.812 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_vs/browserLink - 200 null text/javascript; charset=UTF-8 39.9744ms
2026-02-02 15:04:51.492 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - null null
2026-02-02 15:04:53.227 +03:00 [ERR] CRITICAL ERROR CAUGHT: Ambiguous HTTP method for action - HRMS.API.Controllers.Leaves.LeaveRequestsController.GetPendingRequests (HRMS.API). Actions require an explicit HttpMethod binding for Swagger/OpenAPI 3.0
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Ambiguous HTTP method for action - HRMS.API.Controllers.Leaves.LeaveRequestsController.GetPendingRequests (HRMS.API). Actions require an explicit HttpMethod binding for Swagger/OpenAPI 3.0
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerDocumentWithoutFilters(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at HRMS.API.Middleware.GlobalExceptionMiddleware.InvokeAsync(HttpContext context)
2026-02-02 15:04:53.267 +03:00 [ERR] HTTP GET /swagger/v1/swagger.json responded 500 in 428.6356 ms
2026-02-02 15:04:53.270 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - 500 null application/json 1777.5441ms
2026-02-02 15:05:02.431 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - null null
2026-02-02 15:05:02.451 +03:00 [INF] HTTP GET /swagger/index.html responded 200 in 2.0027 ms
2026-02-02 15:05:02.496 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_vs/browserLink - null null
2026-02-02 15:05:02.496 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - null null
2026-02-02 15:05:02.500 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - 200 null text/html;charset=utf-8 69.1823ms
2026-02-02 15:05:02.509 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 12.287ms
2026-02-02 15:05:02.541 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_vs/browserLink - 200 null text/javascript; charset=UTF-8 44.7319ms
2026-02-02 15:05:03.095 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - null null
2026-02-02 15:05:03.959 +03:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 280.0476 ms
2026-02-02 15:05:03.963 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 868.3579ms
2026-02-02 15:05:17.332 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Leaves/Requests/pending - null null
2026-02-02 15:05:17.342 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Leaves.LeaveRequestsController.GetPendingRequests (HRMS.API)'
2026-02-02 15:05:17.368 +03:00 [INF] Route matched with {action = "GetPendingRequests", controller = "LeaveRequests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[System.Collections.Generic.List`1[HRMS.Application.DTOs.Leaves.LeaveRequestDto]]]] GetPendingRequests() on controller HRMS.API.Controllers.Leaves.LeaveRequestsController (HRMS.API).
2026-02-02 15:05:17.377 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[System.Collections.Generic.List`1[[HRMS.Application.DTOs.Leaves.LeaveRequestDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-02 15:05:17.384 +03:00 [INF] Executed action HRMS.API.Controllers.Leaves.LeaveRequestsController.GetPendingRequests (HRMS.API) in 12.1948ms
2026-02-02 15:05:17.391 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Leaves.LeaveRequestsController.GetPendingRequests (HRMS.API)'
2026-02-02 15:05:17.392 +03:00 [INF] HTTP GET /api/Leaves/Requests/pending responded 200 in 51.0377 ms
2026-02-02 15:05:17.395 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Leaves/Requests/pending - 200 null application/json; charset=utf-8 63.1671ms
2026-02-02 15:12:40.477 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - null null
2026-02-02 15:12:40.487 +03:00 [INF] HTTP GET /swagger/index.html responded 200 in 1.5140 ms
2026-02-02 15:12:40.508 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - 200 null text/html;charset=utf-8 30.7959ms
2026-02-02 15:12:40.543 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_vs/browserLink - null null
2026-02-02 15:12:40.544 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - null null
2026-02-02 15:12:40.565 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 21.3942ms
2026-02-02 15:12:40.567 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_vs/browserLink - 200 null text/javascript; charset=UTF-8 24.0842ms
2026-02-02 15:12:41.362 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - null null
2026-02-02 15:12:41.971 +03:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 605.8044 ms
2026-02-02 15:12:43.146 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 1784.4601ms
2026-02-02 15:12:53.176 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Leaves/Requests/pending - null null
2026-02-02 15:12:53.185 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Leaves.LeaveRequestsController.GetPendingRequests (HRMS.API)'
2026-02-02 15:12:53.214 +03:00 [INF] Route matched with {action = "GetPendingRequests", controller = "LeaveRequests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[System.Collections.Generic.List`1[HRMS.Application.DTOs.Leaves.LeaveRequestDto]]]] GetPendingRequests() on controller HRMS.API.Controllers.Leaves.LeaveRequestsController (HRMS.API).
2026-02-02 15:12:53.430 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[@__employeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[REQUEST_ID], [l].[ATTACHMENT_PATH], [l].[CREATED_AT], [l].[CREATED_BY], [l].[DAYS_COUNT], [l].[EMPLOYEE_ID], [l].[END_DATE], [l].[IS_DELETED], [l].[IS_POSTED_TO_BALANCE], [l].[LEAVE_TYPE_ID], [l].[REASON], [l].[REJECTION_REASON], [l].[START_DATE], [l].[STATUS], [l].[UPDATED_AT], [l].[UPDATED_BY], [l].[VERSION_NO], [l0].[LEAVE_TYPE_ID], [l0].[CREATED_AT], [l0].[CREATED_BY], [l0].[DEFAULT_DAYS], [l0].[IS_CARRY_FORWARD], [l0].[IS_DEDUCTIBLE], [l0].[IS_DELETED], [l0].[IS_PAID], [l0].[LEAVE_NAME_AR], [l0].[LEAVE_NAME_EN], [l0].[MAX_DAYS_PER_YEAR], [l0].[REQUIRES_ATTACHMENT], [l0].[UPDATED_AT], [l0].[UPDATED_BY], [l0].[VERSION_NO], [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO]
FROM [HR_LEAVES].[LEAVE_REQUESTS] AS [l]
INNER JOIN [HR_CORE].[WORKFLOW_APPROVALS] AS [w] ON [l].[REQUEST_ID] = [w].[REQUEST_ID]
INNER JOIN [HR_LEAVES].[LEAVE_TYPES] AS [l0] ON [l].[LEAVE_TYPE_ID] = [l0].[LEAVE_TYPE_ID]
INNER JOIN [HR_PERSONNEL].[EMPLOYEES] AS [e] ON [l].[EMPLOYEE_ID] = [e].[EMPLOYEE_ID]
WHERE [w].[APPROVER_ID] = @__employeeId_0 AND [w].[STATUS] = N'PENDING' AND [w].[REQUEST_TYPE] = N'LEAVE' AND [l].[IS_DELETED] = CAST(0 AS tinyint)
ORDER BY [l].[START_DATE]
2026-02-02 15:12:53.478 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[System.Collections.Generic.List`1[[HRMS.Application.DTOs.Leaves.LeaveRequestDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-02 15:12:53.496 +03:00 [INF] Executed action HRMS.API.Controllers.Leaves.LeaveRequestsController.GetPendingRequests (HRMS.API) in 277.7248ms
2026-02-02 15:12:53.498 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Leaves.LeaveRequestsController.GetPendingRequests (HRMS.API)'
2026-02-02 15:12:53.500 +03:00 [INF] HTTP GET /api/Leaves/Requests/pending responded 200 in 315.6629 ms
2026-02-02 15:12:53.505 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Leaves/Requests/pending - 200 null application/json; charset=utf-8 328.762ms
2026-02-02 15:16:30.106 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:5001/api/Leaves/Requests/11/approve - application/json 115
2026-02-02 15:16:30.205 +03:00 [INF] CORS policy execution successful.
2026-02-02 15:16:30.208 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Leaves.LeaveRequestsController.ApproveRequest (HRMS.API)'
2026-02-02 15:16:30.223 +03:00 [INF] Route matched with {action = "ApproveRequest", controller = "LeaveRequests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[System.Boolean]]] ApproveRequest(Int32, HRMS.Application.Features.Leaves.Requests.Commands.ApproveLeaveRequest.ApproveLeaveRequestCommand) on controller HRMS.API.Controllers.Leaves.LeaveRequestsController (HRMS.API).
2026-02-02 15:16:30.496 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__request_RequestId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[APPROVAL_ID], [w].[APPROVAL_DATE], [w].[APPROVER_ID], [w].[APPROVER_LEVEL], [w].[COMMENTS], [w].[CREATED_AT], [w].[CREATED_BY], [w].[IS_DELETED], [w].[REQUEST_ID], [w].[REQUEST_TYPE], [w].[STATUS], [w].[UPDATED_AT], [w].[UPDATED_BY], [w].[VERSION_NO]
FROM [HR_CORE].[WORKFLOW_APPROVALS] AS [w]
WHERE [w].[REQUEST_ID] = @__request_RequestId_0 AND [w].[REQUEST_TYPE] = N'LEAVE' AND [w].[STATUS] = N'PENDING'
2026-02-02 15:16:30.527 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__request_RequestId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [l].[REQUEST_ID], [l].[ATTACHMENT_PATH], [l].[CREATED_AT], [l].[CREATED_BY], [l].[DAYS_COUNT], [l].[EMPLOYEE_ID], [l].[END_DATE], [l].[IS_DELETED], [l].[IS_POSTED_TO_BALANCE], [l].[LEAVE_TYPE_ID], [l].[REASON], [l].[REJECTION_REASON], [l].[START_DATE], [l].[STATUS], [l].[UPDATED_AT], [l].[UPDATED_BY], [l].[VERSION_NO], [l0].[LEAVE_TYPE_ID], [l0].[CREATED_AT], [l0].[CREATED_BY], [l0].[DEFAULT_DAYS], [l0].[IS_CARRY_FORWARD], [l0].[IS_DEDUCTIBLE], [l0].[IS_DELETED], [l0].[IS_PAID], [l0].[LEAVE_NAME_AR], [l0].[LEAVE_NAME_EN], [l0].[MAX_DAYS_PER_YEAR], [l0].[REQUIRES_ATTACHMENT], [l0].[UPDATED_AT], [l0].[UPDATED_BY], [l0].[VERSION_NO]
FROM [HR_LEAVES].[LEAVE_REQUESTS] AS [l]
INNER JOIN [HR_LEAVES].[LEAVE_TYPES] AS [l0] ON [l].[LEAVE_TYPE_ID] = [l0].[LEAVE_TYPE_ID]
WHERE [l].[REQUEST_ID] = @__request_RequestId_0 AND [l].[IS_DELETED] = CAST(0 AS tinyint)
2026-02-02 15:16:30.554 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__8__locals1_leaveRequest_EmployeeId_0='?' (DbType = Int32), @__8__locals1_leaveRequest_LeaveTypeId_1='?' (DbType = Int32), @__year_2='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[BALANCE_ID], [e].[CREATED_AT], [e].[CREATED_BY], [e].[CURRENT_BALANCE], [e].[EMPLOYEE_ID], [e].[IS_DELETED], [e].[LEAVE_TYPE_ID], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO], [e].[YEAR]
FROM [HR_LEAVES].[EMPLOYEE_LEAVE_BALANCES] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__8__locals1_leaveRequest_EmployeeId_0 AND [e].[LEAVE_TYPE_ID] = @__8__locals1_leaveRequest_LeaveTypeId_1 AND [e].[YEAR] = @__year_2 AND [e].[IS_DELETED] = CAST(0 AS tinyint)
2026-02-02 15:16:30.595 +03:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2026-02-02 15:16:30.626 +03:00 [INF] Executed DbCommand (25ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200), @p9='?' (Size = 20), @p10='?' (Size = 50), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (DbType = Int64), @p16='?' (Size = 100), @p17='?' (Size = 200), @p18='?' (Size = 20), @p19='?' (Size = 50), @p20='?' (Size = 4000), @p21='?' (Size = 4000), @p22='?' (DbType = DateTime2), @p23='?' (Size = 50), @p24='?' (DbType = Int64), @p25='?' (Size = 100), @p26='?' (Size = 200), @p28='?' (DbType = Int32), @p27='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p29='?' (DbType = Int32), @p32='?' (DbType = Int32), @p30='?' (Size = 200), @p31='?' (Size = 20), @p33='?' (DbType = Int32), @p37='?' (DbType = Int64), @p34='?' (DbType = DateTime2), @p35='?' (Size = 500), @p36='?' (Size = 20), @p38='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
MERGE [HR_CORE].[AUDIT_LOGS] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, 0),
(@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, 1),
(@p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, 2)) AS i ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
VALUES (i.[ACTION_TYPE], i.[IP_ADDRESS], i.[NEW_VALUE], i.[OLD_VALUE], i.[PERFORMED_AT], i.[PERFORMED_BY], i.[RECORD_ID], i.[TABLE_NAME], i.[USER_AGENT])
OUTPUT INSERTED.[LOG_ID], i._Position;
UPDATE [HR_LEAVES].[EMPLOYEE_LEAVE_BALANCES] SET [CURRENT_BALANCE] = @p27
OUTPUT 1
WHERE [BALANCE_ID] = @p28 AND [VERSION_NO] = @p29;
UPDATE [HR_LEAVES].[LEAVE_REQUESTS] SET [REJECTION_REASON] = @p30, [STATUS] = @p31
OUTPUT 1
WHERE [REQUEST_ID] = @p32 AND [VERSION_NO] = @p33;
UPDATE [HR_CORE].[WORKFLOW_APPROVALS] SET [APPROVAL_DATE] = @p34, [COMMENTS] = @p35, [STATUS] = @p36
OUTPUT 1
WHERE [APPROVAL_ID] = @p37 AND [VERSION_NO] = @p38;
2026-02-02 15:16:30.639 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[System.Boolean, System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-02 15:16:30.645 +03:00 [INF] Executed action HRMS.API.Controllers.Leaves.LeaveRequestsController.ApproveRequest (HRMS.API) in 416.4056ms
2026-02-02 15:16:30.648 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Leaves.LeaveRequestsController.ApproveRequest (HRMS.API)'
2026-02-02 15:16:30.650 +03:00 [INF] HTTP PUT /api/Leaves/Requests/11/approve responded 200 in 445.8124 ms
2026-02-02 15:16:30.653 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:5001/api/Leaves/Requests/11/approve - 200 null application/json; charset=utf-8 547.1004ms
2026-02-02 15:16:38.584 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Leaves/Requests/pending - null null
2026-02-02 15:16:38.589 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Leaves.LeaveRequestsController.GetPendingRequests (HRMS.API)'
2026-02-02 15:16:38.591 +03:00 [INF] Route matched with {action = "GetPendingRequests", controller = "LeaveRequests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[System.Collections.Generic.List`1[HRMS.Application.DTOs.Leaves.LeaveRequestDto]]]] GetPendingRequests() on controller HRMS.API.Controllers.Leaves.LeaveRequestsController (HRMS.API).
2026-02-02 15:16:38.612 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__employeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[REQUEST_ID], [l].[ATTACHMENT_PATH], [l].[CREATED_AT], [l].[CREATED_BY], [l].[DAYS_COUNT], [l].[EMPLOYEE_ID], [l].[END_DATE], [l].[IS_DELETED], [l].[IS_POSTED_TO_BALANCE], [l].[LEAVE_TYPE_ID], [l].[REASON], [l].[REJECTION_REASON], [l].[START_DATE], [l].[STATUS], [l].[UPDATED_AT], [l].[UPDATED_BY], [l].[VERSION_NO], [l0].[LEAVE_TYPE_ID], [l0].[CREATED_AT], [l0].[CREATED_BY], [l0].[DEFAULT_DAYS], [l0].[IS_CARRY_FORWARD], [l0].[IS_DEDUCTIBLE], [l0].[IS_DELETED], [l0].[IS_PAID], [l0].[LEAVE_NAME_AR], [l0].[LEAVE_NAME_EN], [l0].[MAX_DAYS_PER_YEAR], [l0].[REQUIRES_ATTACHMENT], [l0].[UPDATED_AT], [l0].[UPDATED_BY], [l0].[VERSION_NO], [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO]
FROM [HR_LEAVES].[LEAVE_REQUESTS] AS [l]
INNER JOIN [HR_CORE].[WORKFLOW_APPROVALS] AS [w] ON [l].[REQUEST_ID] = [w].[REQUEST_ID]
INNER JOIN [HR_LEAVES].[LEAVE_TYPES] AS [l0] ON [l].[LEAVE_TYPE_ID] = [l0].[LEAVE_TYPE_ID]
INNER JOIN [HR_PERSONNEL].[EMPLOYEES] AS [e] ON [l].[EMPLOYEE_ID] = [e].[EMPLOYEE_ID]
WHERE [w].[APPROVER_ID] = @__employeeId_0 AND [w].[STATUS] = N'PENDING' AND [w].[REQUEST_TYPE] = N'LEAVE' AND [l].[IS_DELETED] = CAST(0 AS tinyint)
ORDER BY [l].[START_DATE]
2026-02-02 15:16:38.628 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[System.Collections.Generic.List`1[[HRMS.Application.DTOs.Leaves.LeaveRequestDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-02 15:16:38.630 +03:00 [INF] Executed action HRMS.API.Controllers.Leaves.LeaveRequestsController.GetPendingRequests (HRMS.API) in 35.4299ms
2026-02-02 15:16:38.632 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Leaves.LeaveRequestsController.GetPendingRequests (HRMS.API)'
2026-02-02 15:16:38.635 +03:00 [INF] HTTP GET /api/Leaves/Requests/pending responded 200 in 46.3007 ms
2026-02-02 15:16:38.638 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Leaves/Requests/pending - 200 null application/json; charset=utf-8 54.2869ms
2026-02-02 15:21:17.472 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Attendance/punch - application/json 162
2026-02-02 15:21:17.555 +03:00 [INF] CORS policy execution successful.
2026-02-02 15:21:17.557 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceController.RegisterPunch (HRMS.API)'
2026-02-02 15:21:17.575 +03:00 [INF] Route matched with {action = "RegisterPunch", controller = "Attendance"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int64]] RegisterPunch(HRMS.Application.Features.Attendance.Punch.RegisterPunch.RegisterPunchCommand) on controller HRMS.API.Controllers.Attendance.AttendanceController (HRMS.API).
2026-02-02 15:21:17.687 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 50), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?' (Size = 1) (DbType = Byte), @p5='?' (Size = 1) (DbType = Byte), @p6='?' (DbType = DateTime2), @p7='?' (Size = 10), @p8='?' (DbType = DateTime2), @p9='?' (Size = 50), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_ATTENDANCE].[RAW_PUNCH_LOGS] ([CREATED_AT], [CREATED_BY], [DEVICE_ID], [EMPLOYEE_ID], [IS_DELETED], [IS_PROCESSED], [PUNCH_TIME], [PUNCH_TYPE], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2026-02-02 15:21:17.702 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-02-02 15:22:22.119 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceController.RegisterPunch (HRMS.API) in 64538.8074ms
2026-02-02 15:22:22.162 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceController.RegisterPunch (HRMS.API)'
2026-02-02 15:22:22.439 +03:00 [ERR] CRITICAL ERROR CAUGHT: Validation failed: 
 -- TargetDate: ŸÑÿß ŸäŸÖŸÉŸÜ ŸÖÿπÿßŸÑÿ¨ÿ© ÿ™Ÿàÿßÿ±ŸäÿÆ ŸÖÿ≥ÿ™ŸÇÿ®ŸÑŸäÿ© Severity: Error
FluentValidation.ValidationException: Validation failed: 
 -- TargetDate: ŸÑÿß ŸäŸÖŸÉŸÜ ŸÖÿπÿßŸÑÿ¨ÿ© ÿ™Ÿàÿßÿ±ŸäÿÆ ŸÖÿ≥ÿ™ŸÇÿ®ŸÑŸäÿ© Severity: Error
   at HRMS.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at HRMS.Application.Features.Attendance.Punch.RegisterPunch.RegisterPunchCommandHandler.Handle(RegisterPunchCommand request, CancellationToken cancellationToken)
   at HRMS.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at HRMS.API.Controllers.Attendance.AttendanceController.RegisterPunch(RegisterPunchCommand command)
   at lambda_method1413(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at HRMS.API.Middleware.GlobalExceptionMiddleware.InvokeAsync(HttpContext context)
2026-02-02 15:22:22.460 +03:00 [INF] HTTP POST /api/Attendance/punch responded 400 in 64904.8199 ms
2026-02-02 15:22:22.462 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Attendance/punch - 400 null application/json 64990.6876ms
2026-02-02 15:22:28.569 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Attendance/punch - application/json 163
2026-02-02 15:22:28.576 +03:00 [INF] CORS policy execution successful.
2026-02-02 15:22:28.578 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceController.RegisterPunch (HRMS.API)'
2026-02-02 15:22:28.579 +03:00 [INF] Route matched with {action = "RegisterPunch", controller = "Attendance"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int64]] RegisterPunch(HRMS.Application.Features.Attendance.Punch.RegisterPunch.RegisterPunchCommand) on controller HRMS.API.Controllers.Attendance.AttendanceController (HRMS.API).
2026-02-02 15:22:28.595 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 50), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?' (Size = 1) (DbType = Byte), @p5='?' (Size = 1) (DbType = Byte), @p6='?' (DbType = DateTime2), @p7='?' (Size = 10), @p8='?' (DbType = DateTime2), @p9='?' (Size = 50), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_ATTENDANCE].[RAW_PUNCH_LOGS] ([CREATED_AT], [CREATED_BY], [DEVICE_ID], [EMPLOYEE_ID], [IS_DELETED], [IS_PROCESSED], [PUNCH_TIME], [PUNCH_TYPE], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2026-02-02 15:22:28.607 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-02-02 15:22:28.816 +03:00 [INF] Executed DbCommand (62ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXEC [HR_ATTENDANCE].[SP_PROCESS_ATTENDANCE] @TARGET_DATE = @p0, @USER_ID = @p1
2026-02-02 15:22:28.827 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Int64'.
2026-02-02 15:22:28.832 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceController.RegisterPunch (HRMS.API) in 249.2809ms
2026-02-02 15:22:28.835 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceController.RegisterPunch (HRMS.API)'
2026-02-02 15:22:28.837 +03:00 [INF] HTTP POST /api/Attendance/punch responded 200 in 260.6756 ms
2026-02-02 15:22:28.841 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Attendance/punch - 200 null application/json; charset=utf-8 271.2064ms
2026-02-02 15:23:10.360 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Attendance/punch - application/json 164
2026-02-02 15:23:10.368 +03:00 [INF] CORS policy execution successful.
2026-02-02 15:23:10.371 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceController.RegisterPunch (HRMS.API)'
2026-02-02 15:23:10.372 +03:00 [INF] Route matched with {action = "RegisterPunch", controller = "Attendance"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int64]] RegisterPunch(HRMS.Application.Features.Attendance.Punch.RegisterPunch.RegisterPunchCommand) on controller HRMS.API.Controllers.Attendance.AttendanceController (HRMS.API).
2026-02-02 15:23:10.389 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 50), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?' (Size = 1) (DbType = Byte), @p5='?' (Size = 1) (DbType = Byte), @p6='?' (DbType = DateTime2), @p7='?' (Size = 10), @p8='?' (DbType = DateTime2), @p9='?' (Size = 50), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_ATTENDANCE].[RAW_PUNCH_LOGS] ([CREATED_AT], [CREATED_BY], [DEVICE_ID], [EMPLOYEE_ID], [IS_DELETED], [IS_PROCESSED], [PUNCH_TIME], [PUNCH_TYPE], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2026-02-02 15:23:10.563 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-02-02 15:23:10.581 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXEC [HR_ATTENDANCE].[SP_PROCESS_ATTENDANCE] @TARGET_DATE = @p0, @USER_ID = @p1
2026-02-02 15:23:10.584 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Int64'.
2026-02-02 15:23:10.586 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceController.RegisterPunch (HRMS.API) in 210.7276ms
2026-02-02 15:23:10.589 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceController.RegisterPunch (HRMS.API)'
2026-02-02 15:23:10.592 +03:00 [INF] HTTP POST /api/Attendance/punch responded 200 in 223.4166 ms
2026-02-02 15:23:10.594 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Attendance/punch - 200 null application/json; charset=utf-8 234.1063ms
2026-02-02 15:26:27.194 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/AttendanceSettings/process-attendance - application/json 32
2026-02-02 15:26:27.315 +03:00 [INF] CORS policy execution successful.
2026-02-02 15:26:27.324 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.ProcessAttendance (HRMS.API)'
2026-02-02 15:26:27.339 +03:00 [INF] Route matched with {action = "ProcessAttendance", controller = "AttendanceSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] ProcessAttendance(HRMS.Application.Features.Attendance.Process.Commands.ProcessAttendance.ProcessAttendanceCommand) on controller HRMS.API.Controllers.Attendance.AttendanceSettingsController (HRMS.API).
2026-02-02 15:26:27.362 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXEC [HR_ATTENDANCE].[SP_PROCESS_ATTENDANCE] @TARGET_DATE = @p0, @USER_ID = @p1
2026-02-02 15:26:27.366 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Int32'.
2026-02-02 15:26:27.368 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceSettingsController.ProcessAttendance (HRMS.API) in 25.0066ms
2026-02-02 15:26:27.378 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.ProcessAttendance (HRMS.API)'
2026-02-02 15:26:27.381 +03:00 [INF] HTTP POST /api/AttendanceSettings/process-attendance responded 200 in 66.2276 ms
2026-02-02 15:26:27.383 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/AttendanceSettings/process-attendance - 200 null application/json; charset=utf-8 189.1987ms
2026-02-02 16:10:44.051 +03:00 [INF] üöÄ Starting HRMS Hospital API...
2026-02-02 16:10:46.944 +03:00 [FTL] ‚ùå Application terminated unexpectedly
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at Program.<Main>$(String[] args) in D:\HRMS_Hospital\Backend\HRMS\HRMS.API\Program.cs:line 76
2026-02-02 16:12:20.767 +03:00 [INF] üöÄ Starting HRMS Hospital API...
2026-02-02 16:12:21.120 +03:00 [FTL] ‚ùå Application terminated unexpectedly
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at Program.<Main>$(String[] args) in D:\HRMS_Hospital\Backend\HRMS\HRMS.API\Program.cs:line 76
2026-02-02 16:12:47.197 +03:00 [INF] üöÄ Starting HRMS Hospital API...
2026-02-02 16:12:50.749 +03:00 [INF] ‚úÖ HRMS Hospital API started successfully
2026-02-02 16:12:50.836 +03:00 [INF] User profile is available. Using 'C:\Users\MT\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-02-02 16:12:52.310 +03:00 [INF] Now listening on: https://localhost:5001
2026-02-02 16:12:52.321 +03:00 [INF] Now listening on: http://localhost:5000
2026-02-02 16:12:52.600 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-02 16:12:52.603 +03:00 [INF] Hosting environment: Development
2026-02-02 16:12:52.605 +03:00 [INF] Content root path: D:\HRMS_Hospital\Backend\HRMS\HRMS.API
2026-02-02 16:12:53.748 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - null null
2026-02-02 16:12:58.257 +03:00 [INF] HTTP GET /swagger/index.html responded 200 in 3572.4743 ms
2026-02-02 16:12:58.273 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - 200 null text/html;charset=utf-8 4542.1073ms
2026-02-02 16:12:58.282 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - null null
2026-02-02 16:12:58.298 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 16.8112ms
2026-02-02 16:12:59.118 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_vs/browserLink - null null
2026-02-02 16:13:00.477 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_vs/browserLink - 200 null text/javascript; charset=UTF-8 1359.29ms
2026-02-02 16:13:00.984 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - null null
2026-02-02 16:13:01.659 +03:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 533.4966 ms
2026-02-02 16:13:01.667 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 679.9349ms
2026-02-02 16:13:10.964 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Attendance/stats - null null
2026-02-02 16:13:10.994 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceController.GetStats (HRMS.API)'
2026-02-02 16:13:11.106 +03:00 [INF] Route matched with {action = "GetStats", controller = "Attendance"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[HRMS.Application.Features.Attendance.Queries.GetAttendanceStats.AttendanceStatsDto]]] GetStats(Int32, Int32, Int32) on controller HRMS.API.Controllers.Attendance.AttendanceController (HRMS.API).
2026-02-02 16:13:26.889 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceController.GetStats (HRMS.API) in 15772.5805ms
2026-02-02 16:13:26.922 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceController.GetStats (HRMS.API)'
2026-02-02 16:13:26.974 +03:00 [ERR] CRITICAL ERROR CAUGHT: Year, Month, and Day parameters describe an un-representable DateTime.
System.ArgumentOutOfRangeException: Year, Month, and Day parameters describe an un-representable DateTime.
   at System.DateTime..ctor(Int32 year, Int32 month, Int32 day)
   at HRMS.Application.Features.Attendance.Queries.GetAttendanceStats.GetAttendanceStatsQueryHandler.Handle(GetAttendanceStatsQuery request, CancellationToken cancellationToken) in D:\HRMS_Hospital\Backend\HRMS\HRMS.Application\Features\Attendance\Queries\GetAttendanceStats\GetAttendanceStatsQueryHandler.cs:line 21
   at HRMS.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\HRMS_Hospital\Backend\HRMS\HRMS.Application\Behaviors\ValidationBehavior.cs:line 36
   at HRMS.API.Controllers.Attendance.AttendanceController.GetStats(Int32 employeeId, Int32 month, Int32 year) in D:\HRMS_Hospital\Backend\HRMS\HRMS.API\Controllers\Attendance\AttendanceController.cs:line 90
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at HRMS.API.Middleware.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\HRMS_Hospital\Backend\HRMS\HRMS.API\Middleware\GlobalExceptionMiddleware.cs:line 31
2026-02-02 16:13:27.054 +03:00 [ERR] HTTP GET /api/Attendance/stats responded 500 in 16077.9957 ms
2026-02-02 16:13:27.059 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Attendance/stats - 500 null application/json 16095.1293ms
2026-02-02 16:13:42.330 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Attendance/stats?employeeId=17&month=2&year=2026 - null null
2026-02-02 16:13:42.339 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceController.GetStats (HRMS.API)'
2026-02-02 16:13:42.343 +03:00 [INF] Route matched with {action = "GetStats", controller = "Attendance"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[HRMS.Application.Features.Attendance.Queries.GetAttendanceStats.AttendanceStatsDto]]] GetStats(Int32, Int32, Int32) on controller HRMS.API.Controllers.Attendance.AttendanceController (HRMS.API).
2026-02-02 16:13:44.155 +03:00 [WRN] No store type was specified for the decimal property 'HoursCount' on entity type 'ShiftType'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-02-02 16:13:44.159 +03:00 [WRN] No store type was specified for the decimal property 'MaxSalary' on entity type 'JobGrade'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-02-02 16:13:44.161 +03:00 [WRN] No store type was specified for the decimal property 'MinSalary' on entity type 'JobGrade'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-02-02 16:13:45.465 +03:00 [INF] Executed DbCommand (199ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[RECORD_ID], [d].[ACTUAL_IN_TIME], [d].[ACTUAL_OUT_TIME], [d].[ATTENDANCE_DATE], [d].[CREATED_AT], [d].[CREATED_BY], [d].[EARLY_LEAVE_MINUTES], [d].[EMPLOYEE_ID], [d].[IS_DELETED], [d].[LATE_MINUTES], [d].[OVERTIME_MINUTES], [d].[PLANNED_SHIFT_ID], [d].[STATUS], [d].[UPDATED_AT], [d].[UPDATED_BY], [d].[VERSION_NO]
FROM [HR_ATTENDANCE].[DAILY_ATTENDANCE] AS [d]
WHERE [d].[EMPLOYEE_ID] = @__request_EmployeeId_0 AND [d].[ATTENDANCE_DATE] >= @__startDate_1 AND [d].[ATTENDANCE_DATE] <= @__endDate_2 AND [d].[IS_DELETED] = CAST(0 AS tinyint)
2026-02-02 16:13:45.558 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[HRMS.Application.Features.Attendance.Queries.GetAttendanceStats.AttendanceStatsDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-02 16:13:45.577 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceController.GetStats (HRMS.API) in 3230.0798ms
2026-02-02 16:13:45.582 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceController.GetStats (HRMS.API)'
2026-02-02 16:13:45.585 +03:00 [INF] HTTP GET /api/Attendance/stats responded 200 in 3246.1871 ms
2026-02-02 16:13:45.602 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Attendance/stats?employeeId=17&month=2&year=2026 - 200 null application/json; charset=utf-8 3272.0685ms
2026-02-02 16:14:09.353 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Attendance/reports/payroll-summary - null null
2026-02-02 16:14:09.355 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceController.GetPayrollSummary (HRMS.API)'
2026-02-02 16:14:09.369 +03:00 [INF] Route matched with {action = "GetPayrollSummary", controller = "Attendance"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[System.Collections.Generic.List`1[HRMS.Application.Features.Attendance.Reports.Queries.GetMonthlyPayrollSummary.PayrollAttendanceSummaryDto]]]] GetPayrollSummary(Int32, Int32) on controller HRMS.API.Controllers.Attendance.AttendanceController (HRMS.API).
2026-02-02 16:14:13.231 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceController.GetPayrollSummary (HRMS.API) in 3856.8978ms
2026-02-02 16:14:13.254 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceController.GetPayrollSummary (HRMS.API)'
2026-02-02 16:14:13.303 +03:00 [ERR] CRITICAL ERROR CAUGHT: Year, Month, and Day parameters describe an un-representable DateTime.
System.ArgumentOutOfRangeException: Year, Month, and Day parameters describe an un-representable DateTime.
   at System.DateTime..ctor(Int32 year, Int32 month, Int32 day)
   at HRMS.Application.Features.Attendance.Reports.Queries.GetMonthlyPayrollSummary.GetMonthlyPayrollSummaryQueryHandler.Handle(GetMonthlyPayrollSummaryQuery request, CancellationToken cancellationToken) in D:\HRMS_Hospital\Backend\HRMS\HRMS.Application\Features\Attendance\Reports\Queries\GetMonthlyPayrollSummary\GetMonthlyPayrollSummaryQueryHandler.cs:line 21
   at HRMS.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\HRMS_Hospital\Backend\HRMS\HRMS.Application\Behaviors\ValidationBehavior.cs:line 36
   at HRMS.API.Controllers.Attendance.AttendanceController.GetPayrollSummary(Int32 month, Int32 year) in D:\HRMS_Hospital\Backend\HRMS\HRMS.API\Controllers\Attendance\AttendanceController.cs:line 133
   at lambda_method97(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at HRMS.API.Middleware.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\HRMS_Hospital\Backend\HRMS\HRMS.API\Middleware\GlobalExceptionMiddleware.cs:line 31
2026-02-02 16:14:13.322 +03:00 [ERR] HTTP GET /api/Attendance/reports/payroll-summary responded 500 in 3967.2566 ms
2026-02-02 16:14:13.324 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Attendance/reports/payroll-summary - 500 null application/json 3971.4819ms
2026-02-02 16:14:25.668 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Attendance/reports/payroll-summary?month=2&year=2026 - null null
2026-02-02 16:14:25.673 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceController.GetPayrollSummary (HRMS.API)'
2026-02-02 16:14:25.675 +03:00 [INF] Route matched with {action = "GetPayrollSummary", controller = "Attendance"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[System.Collections.Generic.List`1[HRMS.Application.Features.Attendance.Reports.Queries.GetMonthlyPayrollSummary.PayrollAttendanceSummaryDto]]]] GetPayrollSummary(Int32, Int32) on controller HRMS.API.Controllers.Attendance.AttendanceController (HRMS.API).
2026-02-02 16:14:25.878 +03:00 [INF] Executed DbCommand (60ms) [Parameters=[@__startDate_0='?' (DbType = DateTime2), @__endDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[RECORD_ID], [d].[ACTUAL_IN_TIME], [d].[ACTUAL_OUT_TIME], [d].[ATTENDANCE_DATE], [d].[CREATED_AT], [d].[CREATED_BY], [d].[EARLY_LEAVE_MINUTES], [d].[EMPLOYEE_ID], [d].[IS_DELETED], [d].[LATE_MINUTES], [d].[OVERTIME_MINUTES], [d].[PLANNED_SHIFT_ID], [d].[STATUS], [d].[UPDATED_AT], [d].[UPDATED_BY], [d].[VERSION_NO], [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO], [d0].[DEPT_ID], [d0].[BranchId], [d0].[COST_CENTER_CODE], [d0].[CREATED_AT], [d0].[CREATED_BY], [d0].[DEPT_NAME_AR], [d0].[DEPT_NAME_EN], [d0].[IS_ACTIVE], [d0].[IS_DELETED], [d0].[MANAGER_ID], [d0].[PARENT_DEPT_ID], [d0].[UPDATED_AT], [d0].[UPDATED_BY], [d0].[VERSION_NO]
FROM [HR_ATTENDANCE].[DAILY_ATTENDANCE] AS [d]
INNER JOIN [HR_PERSONNEL].[EMPLOYEES] AS [e] ON [d].[EMPLOYEE_ID] = [e].[EMPLOYEE_ID]
INNER JOIN [HR_CORE].[DEPARTMENTS] AS [d0] ON [e].[DEPARTMENT_ID] = [d0].[DEPT_ID]
WHERE [d].[ATTENDANCE_DATE] >= @__startDate_0 AND [d].[ATTENDANCE_DATE] <= @__endDate_1 AND [d].[IS_DELETED] = CAST(0 AS tinyint)
2026-02-02 16:14:25.921 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__endDate_0='?' (DbType = DateTime2), @__startDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[REQUEST_ID], [l].[ATTACHMENT_PATH], [l].[CREATED_AT], [l].[CREATED_BY], [l].[DAYS_COUNT], [l].[EMPLOYEE_ID], [l].[END_DATE], [l].[IS_DELETED], [l].[IS_POSTED_TO_BALANCE], [l].[LEAVE_TYPE_ID], [l].[REASON], [l].[REJECTION_REASON], [l].[START_DATE], [l].[STATUS], [l].[UPDATED_AT], [l].[UPDATED_BY], [l].[VERSION_NO], [l0].[LEAVE_TYPE_ID], [l0].[CREATED_AT], [l0].[CREATED_BY], [l0].[DEFAULT_DAYS], [l0].[IS_CARRY_FORWARD], [l0].[IS_DEDUCTIBLE], [l0].[IS_DELETED], [l0].[IS_PAID], [l0].[LEAVE_NAME_AR], [l0].[LEAVE_NAME_EN], [l0].[MAX_DAYS_PER_YEAR], [l0].[REQUIRES_ATTACHMENT], [l0].[UPDATED_AT], [l0].[UPDATED_BY], [l0].[VERSION_NO]
FROM [HR_LEAVES].[LEAVE_REQUESTS] AS [l]
INNER JOIN [HR_LEAVES].[LEAVE_TYPES] AS [l0] ON [l].[LEAVE_TYPE_ID] = [l0].[LEAVE_TYPE_ID]
WHERE [l].[STATUS] = N'APPROVED' AND [l].[IS_DELETED] = CAST(0 AS tinyint) AND [l].[START_DATE] <= @__endDate_0 AND [l].[END_DATE] >= @__startDate_1
2026-02-02 16:14:25.934 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[System.Collections.Generic.List`1[[HRMS.Application.Features.Attendance.Reports.Queries.GetMonthlyPayrollSummary.PayrollAttendanceSummaryDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-02 16:14:25.946 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceController.GetPayrollSummary (HRMS.API) in 266.6539ms
2026-02-02 16:14:25.948 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceController.GetPayrollSummary (HRMS.API)'
2026-02-02 16:14:25.950 +03:00 [INF] HTTP GET /api/Attendance/reports/payroll-summary responded 200 in 276.9217 ms
2026-02-02 16:14:25.952 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Attendance/reports/payroll-summary?month=2&year=2026 - 200 null application/json; charset=utf-8 284.6421ms
2026-02-02 16:15:42.671 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Attendance/reports/payroll-summary?month=1&year=2026 - null null
2026-02-02 16:15:42.677 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceController.GetPayrollSummary (HRMS.API)'
2026-02-02 16:15:42.678 +03:00 [INF] Route matched with {action = "GetPayrollSummary", controller = "Attendance"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[System.Collections.Generic.List`1[HRMS.Application.Features.Attendance.Reports.Queries.GetMonthlyPayrollSummary.PayrollAttendanceSummaryDto]]]] GetPayrollSummary(Int32, Int32) on controller HRMS.API.Controllers.Attendance.AttendanceController (HRMS.API).
2026-02-02 16:15:42.928 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__startDate_0='?' (DbType = DateTime2), @__endDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[RECORD_ID], [d].[ACTUAL_IN_TIME], [d].[ACTUAL_OUT_TIME], [d].[ATTENDANCE_DATE], [d].[CREATED_AT], [d].[CREATED_BY], [d].[EARLY_LEAVE_MINUTES], [d].[EMPLOYEE_ID], [d].[IS_DELETED], [d].[LATE_MINUTES], [d].[OVERTIME_MINUTES], [d].[PLANNED_SHIFT_ID], [d].[STATUS], [d].[UPDATED_AT], [d].[UPDATED_BY], [d].[VERSION_NO], [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO], [d0].[DEPT_ID], [d0].[BranchId], [d0].[COST_CENTER_CODE], [d0].[CREATED_AT], [d0].[CREATED_BY], [d0].[DEPT_NAME_AR], [d0].[DEPT_NAME_EN], [d0].[IS_ACTIVE], [d0].[IS_DELETED], [d0].[MANAGER_ID], [d0].[PARENT_DEPT_ID], [d0].[UPDATED_AT], [d0].[UPDATED_BY], [d0].[VERSION_NO]
FROM [HR_ATTENDANCE].[DAILY_ATTENDANCE] AS [d]
INNER JOIN [HR_PERSONNEL].[EMPLOYEES] AS [e] ON [d].[EMPLOYEE_ID] = [e].[EMPLOYEE_ID]
INNER JOIN [HR_CORE].[DEPARTMENTS] AS [d0] ON [e].[DEPARTMENT_ID] = [d0].[DEPT_ID]
WHERE [d].[ATTENDANCE_DATE] >= @__startDate_0 AND [d].[ATTENDANCE_DATE] <= @__endDate_1 AND [d].[IS_DELETED] = CAST(0 AS tinyint)
2026-02-02 16:15:42.939 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__endDate_0='?' (DbType = DateTime2), @__startDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[REQUEST_ID], [l].[ATTACHMENT_PATH], [l].[CREATED_AT], [l].[CREATED_BY], [l].[DAYS_COUNT], [l].[EMPLOYEE_ID], [l].[END_DATE], [l].[IS_DELETED], [l].[IS_POSTED_TO_BALANCE], [l].[LEAVE_TYPE_ID], [l].[REASON], [l].[REJECTION_REASON], [l].[START_DATE], [l].[STATUS], [l].[UPDATED_AT], [l].[UPDATED_BY], [l].[VERSION_NO], [l0].[LEAVE_TYPE_ID], [l0].[CREATED_AT], [l0].[CREATED_BY], [l0].[DEFAULT_DAYS], [l0].[IS_CARRY_FORWARD], [l0].[IS_DEDUCTIBLE], [l0].[IS_DELETED], [l0].[IS_PAID], [l0].[LEAVE_NAME_AR], [l0].[LEAVE_NAME_EN], [l0].[MAX_DAYS_PER_YEAR], [l0].[REQUIRES_ATTACHMENT], [l0].[UPDATED_AT], [l0].[UPDATED_BY], [l0].[VERSION_NO]
FROM [HR_LEAVES].[LEAVE_REQUESTS] AS [l]
INNER JOIN [HR_LEAVES].[LEAVE_TYPES] AS [l0] ON [l].[LEAVE_TYPE_ID] = [l0].[LEAVE_TYPE_ID]
WHERE [l].[STATUS] = N'APPROVED' AND [l].[IS_DELETED] = CAST(0 AS tinyint) AND [l].[START_DATE] <= @__endDate_0 AND [l].[END_DATE] >= @__startDate_1
2026-02-02 16:15:42.943 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[System.Collections.Generic.List`1[[HRMS.Application.Features.Attendance.Reports.Queries.GetMonthlyPayrollSummary.PayrollAttendanceSummaryDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-02 16:15:42.946 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceController.GetPayrollSummary (HRMS.API) in 263.389ms
2026-02-02 16:15:42.951 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceController.GetPayrollSummary (HRMS.API)'
2026-02-02 16:15:42.952 +03:00 [INF] HTTP GET /api/Attendance/reports/payroll-summary responded 200 in 276.0096 ms
2026-02-02 16:15:42.955 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Attendance/reports/payroll-summary?month=1&year=2026 - 200 null application/json; charset=utf-8 283.9449ms
2026-02-02 16:18:47.833 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Attendance/timesheet?employeeId=17&month=2&year=2026 - null null
2026-02-02 16:18:47.837 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceController.GetTimesheet (HRMS.API)'
2026-02-02 16:18:47.851 +03:00 [INF] Route matched with {action = "GetTimesheet", controller = "Attendance"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[System.Collections.Generic.List`1[HRMS.Application.Features.Attendance.Queries.GetDailyTimesheet.TimesheetDayDto]]]] GetTimesheet(Int32, Int32, Int32) on controller HRMS.API.Controllers.Attendance.AttendanceController (HRMS.API).
2026-02-02 16:18:47.998 +03:00 [INF] Executed DbCommand (50ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[RECORD_ID], [d].[ACTUAL_IN_TIME], [d].[ACTUAL_OUT_TIME], [d].[ATTENDANCE_DATE], [d].[CREATED_AT], [d].[CREATED_BY], [d].[EARLY_LEAVE_MINUTES], [d].[EMPLOYEE_ID], [d].[IS_DELETED], [d].[LATE_MINUTES], [d].[OVERTIME_MINUTES], [d].[PLANNED_SHIFT_ID], [d].[STATUS], [d].[UPDATED_AT], [d].[UPDATED_BY], [d].[VERSION_NO]
FROM [HR_ATTENDANCE].[DAILY_ATTENDANCE] AS [d]
WHERE [d].[EMPLOYEE_ID] = @__request_EmployeeId_0 AND [d].[ATTENDANCE_DATE] >= @__startDate_1 AND [d].[ATTENDANCE_DATE] <= @__endDate_2 AND [d].[IS_DELETED] = CAST(0 AS tinyint)
2026-02-02 16:18:48.041 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__endDate_0='?' (DbType = DateTime2), @__startDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[HOLIDAY_ID], [p].[CREATED_AT], [p].[CREATED_BY], [p].[END_DATE], [p].[HOLIDAY_NAME_AR], [p].[IS_DELETED], [p].[START_DATE], [p].[UPDATED_AT], [p].[UPDATED_BY], [p].[VERSION_NO], [p].[YEAR]
FROM [HR_LEAVES].[PUBLIC_HOLIDAYS] AS [p]
WHERE [p].[IS_DELETED] = CAST(0 AS tinyint) AND [p].[START_DATE] <= @__endDate_0 AND [p].[END_DATE] >= @__startDate_1
2026-02-02 16:18:48.061 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32), @__endDate_1='?' (DbType = DateTime2), @__startDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[REQUEST_ID], [l].[ATTACHMENT_PATH], [l].[CREATED_AT], [l].[CREATED_BY], [l].[DAYS_COUNT], [l].[EMPLOYEE_ID], [l].[END_DATE], [l].[IS_DELETED], [l].[IS_POSTED_TO_BALANCE], [l].[LEAVE_TYPE_ID], [l].[REASON], [l].[REJECTION_REASON], [l].[START_DATE], [l].[STATUS], [l].[UPDATED_AT], [l].[UPDATED_BY], [l].[VERSION_NO], [l0].[LEAVE_TYPE_ID], [l0].[CREATED_AT], [l0].[CREATED_BY], [l0].[DEFAULT_DAYS], [l0].[IS_CARRY_FORWARD], [l0].[IS_DEDUCTIBLE], [l0].[IS_DELETED], [l0].[IS_PAID], [l0].[LEAVE_NAME_AR], [l0].[LEAVE_NAME_EN], [l0].[MAX_DAYS_PER_YEAR], [l0].[REQUIRES_ATTACHMENT], [l0].[UPDATED_AT], [l0].[UPDATED_BY], [l0].[VERSION_NO]
FROM [HR_LEAVES].[LEAVE_REQUESTS] AS [l]
INNER JOIN [HR_LEAVES].[LEAVE_TYPES] AS [l0] ON [l].[LEAVE_TYPE_ID] = [l0].[LEAVE_TYPE_ID]
WHERE [l].[EMPLOYEE_ID] = @__request_EmployeeId_0 AND [l].[STATUS] = N'APPROVED' AND [l].[IS_DELETED] = CAST(0 AS tinyint) AND [l].[START_DATE] <= @__endDate_1 AND [l].[END_DATE] >= @__startDate_2
2026-02-02 16:18:48.067 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[System.Collections.Generic.List`1[[HRMS.Application.Features.Attendance.Queries.GetDailyTimesheet.TimesheetDayDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-02 16:18:48.091 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceController.GetTimesheet (HRMS.API) in 233.2516ms
2026-02-02 16:18:48.093 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceController.GetTimesheet (HRMS.API)'
2026-02-02 16:18:48.094 +03:00 [INF] HTTP GET /api/Attendance/timesheet responded 200 in 257.5502 ms
2026-02-02 16:18:48.097 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Attendance/timesheet?employeeId=17&month=2&year=2026 - 200 null application/json; charset=utf-8 263.9807ms
2026-02-02 16:48:23.191 +03:00 [INF] üöÄ Starting HRMS Hospital API...
2026-02-02 16:48:25.986 +03:00 [INF] ‚úÖ HRMS Hospital API started successfully
2026-02-02 16:48:26.105 +03:00 [INF] User profile is available. Using 'C:\Users\MT\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-02-02 16:48:27.520 +03:00 [INF] Now listening on: https://localhost:5001
2026-02-02 16:48:27.522 +03:00 [INF] Now listening on: http://localhost:5000
2026-02-02 16:48:27.675 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-02 16:48:27.678 +03:00 [INF] Hosting environment: Development
2026-02-02 16:48:27.681 +03:00 [INF] Content root path: D:\HRMS_Hospital\Backend\HRMS\HRMS.API
2026-02-02 16:48:28.902 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - null null
2026-02-02 16:48:29.704 +03:00 [INF] HTTP GET /swagger/index.html responded 200 in 411.8562 ms
2026-02-02 16:48:30.564 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - 200 null text/html;charset=utf-8 1678.5984ms
2026-02-02 16:48:30.646 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - null null
2026-02-02 16:48:30.669 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_vs/browserLink - null null
2026-02-02 16:48:31.793 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 1147.7443ms
2026-02-02 16:48:31.882 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_vs/browserLink - 200 null text/javascript; charset=UTF-8 1212.6519ms
2026-02-02 16:48:36.087 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - null null
2026-02-02 16:48:36.490 +03:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 398.5436 ms
2026-02-02 16:48:36.496 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 409.7011ms
2026-02-02 16:49:06.657 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Leaves/Approvals/reports/transactions - null null
2026-02-02 16:49:06.683 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Leaves.ApprovalsController.GetTransactionReport (HRMS.API)'
2026-02-02 16:49:06.943 +03:00 [INF] Route matched with {action = "GetTransactionReport", controller = "Approvals"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[System.Collections.Generic.List`1[HRMS.Application.Features.Leaves.Reports.Queries.GetLeaveTransactionReport.LeaveTransactionReportDto]]]] GetTransactionReport(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Int32], System.String) on controller HRMS.API.Controllers.Leaves.ApprovalsController (HRMS.API).
2026-02-02 16:49:09.698 +03:00 [WRN] No store type was specified for the decimal property 'HoursCount' on entity type 'ShiftType'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-02-02 16:49:09.705 +03:00 [WRN] No store type was specified for the decimal property 'MaxSalary' on entity type 'JobGrade'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-02-02 16:49:09.712 +03:00 [WRN] No store type was specified for the decimal property 'MinSalary' on entity type 'JobGrade'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-02-02 16:49:11.581 +03:00 [INF] Executed DbCommand (148ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[REQUEST_ID], [e].[FIRST_NAME_AR] + N' ' + [e].[FIRST_NAME_AR], [d].[DEPT_NAME_AR], [l0].[LEAVE_NAME_AR], [l].[START_DATE], [l].[END_DATE], [l].[DAYS_COUNT], COALESCE([l].[STATUS], N'Unknown'), [l].[CREATED_AT]
FROM [HR_LEAVES].[LEAVE_REQUESTS] AS [l]
INNER JOIN [HR_PERSONNEL].[EMPLOYEES] AS [e] ON [l].[EMPLOYEE_ID] = [e].[EMPLOYEE_ID]
INNER JOIN [HR_CORE].[DEPARTMENTS] AS [d] ON [e].[DEPARTMENT_ID] = [d].[DEPT_ID]
INNER JOIN [HR_LEAVES].[LEAVE_TYPES] AS [l0] ON [l].[LEAVE_TYPE_ID] = [l0].[LEAVE_TYPE_ID]
ORDER BY [l].[START_DATE] DESC
2026-02-02 16:49:11.731 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[System.Collections.Generic.List`1[[HRMS.Application.Features.Leaves.Reports.Queries.GetLeaveTransactionReport.LeaveTransactionReportDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-02 16:49:11.770 +03:00 [INF] Executed action HRMS.API.Controllers.Leaves.ApprovalsController.GetTransactionReport (HRMS.API) in 4815.7979ms
2026-02-02 16:49:11.773 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Leaves.ApprovalsController.GetTransactionReport (HRMS.API)'
2026-02-02 16:49:11.775 +03:00 [INF] HTTP GET /api/Leaves/Approvals/reports/transactions responded 200 in 5108.1882 ms
2026-02-02 16:49:11.809 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Leaves/Approvals/reports/transactions - 200 null application/json; charset=utf-8 5152.061ms
2026-02-02 16:49:55.985 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Leaves/Approvals/reports/payroll?month=2&year=2026 - null null
2026-02-02 16:49:56.022 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Leaves.ApprovalsController.GetPayrollReport (HRMS.API)'
2026-02-02 16:49:56.049 +03:00 [INF] Route matched with {action = "GetPayrollReport", controller = "Approvals"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[System.Collections.Generic.List`1[HRMS.Application.Features.Leaves.Reports.Queries.GetPayrollIntegrationReport.PayrollLeaveDto]]]] GetPayrollReport(Int32, Int32) on controller HRMS.API.Controllers.Leaves.ApprovalsController (HRMS.API).
2026-02-02 16:49:56.279 +03:00 [INF] Executed DbCommand (53ms) [Parameters=[@__endDate_0='?' (DbType = DateTime2), @__startDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[REQUEST_ID], [l].[ATTACHMENT_PATH], [l].[CREATED_AT], [l].[CREATED_BY], [l].[DAYS_COUNT], [l].[EMPLOYEE_ID], [l].[END_DATE], [l].[IS_DELETED], [l].[IS_POSTED_TO_BALANCE], [l].[LEAVE_TYPE_ID], [l].[REASON], [l].[REJECTION_REASON], [l].[START_DATE], [l].[STATUS], [l].[UPDATED_AT], [l].[UPDATED_BY], [l].[VERSION_NO], [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO], [l0].[LEAVE_TYPE_ID], [l0].[CREATED_AT], [l0].[CREATED_BY], [l0].[DEFAULT_DAYS], [l0].[IS_CARRY_FORWARD], [l0].[IS_DEDUCTIBLE], [l0].[IS_DELETED], [l0].[IS_PAID], [l0].[LEAVE_NAME_AR], [l0].[LEAVE_NAME_EN], [l0].[MAX_DAYS_PER_YEAR], [l0].[REQUIRES_ATTACHMENT], [l0].[UPDATED_AT], [l0].[UPDATED_BY], [l0].[VERSION_NO]
FROM [HR_LEAVES].[LEAVE_REQUESTS] AS [l]
INNER JOIN [HR_PERSONNEL].[EMPLOYEES] AS [e] ON [l].[EMPLOYEE_ID] = [e].[EMPLOYEE_ID]
INNER JOIN [HR_LEAVES].[LEAVE_TYPES] AS [l0] ON [l].[LEAVE_TYPE_ID] = [l0].[LEAVE_TYPE_ID]
WHERE [l].[STATUS] IN (N'MANAGER_APPROVED', N'HR_APPROVED') AND [l].[IS_DELETED] = CAST(0 AS tinyint) AND [l].[START_DATE] <= @__endDate_0 AND [l].[END_DATE] >= @__startDate_1
2026-02-02 16:49:56.317 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[System.Collections.Generic.List`1[[HRMS.Application.Features.Leaves.Reports.Queries.GetPayrollIntegrationReport.PayrollLeaveDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-02 16:49:56.334 +03:00 [INF] Executed action HRMS.API.Controllers.Leaves.ApprovalsController.GetPayrollReport (HRMS.API) in 280.6629ms
2026-02-02 16:49:56.376 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Leaves.ApprovalsController.GetPayrollReport (HRMS.API)'
2026-02-02 16:49:56.380 +03:00 [INF] HTTP GET /api/Leaves/Approvals/reports/payroll responded 200 in 359.6627 ms
2026-02-02 16:49:56.384 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Leaves/Approvals/reports/payroll?month=2&year=2026 - 200 null application/json; charset=utf-8 399.2257ms
2026-02-02 16:50:23.186 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Attendance/timesheet?employeeId=17&month=2&year=2026 - null null
2026-02-02 16:50:23.196 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceController.GetTimesheet (HRMS.API)'
2026-02-02 16:50:23.249 +03:00 [INF] Route matched with {action = "GetTimesheet", controller = "Attendance"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[System.Collections.Generic.List`1[HRMS.Application.Features.Attendance.Queries.GetDailyTimesheet.TimesheetDayDto]]]] GetTimesheet(Int32, Int32, Int32) on controller HRMS.API.Controllers.Attendance.AttendanceController (HRMS.API).
2026-02-02 16:50:23.534 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32), @__startDate_1='?' (DbType = DateTime2), @__endDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[RECORD_ID], [d].[ACTUAL_IN_TIME], [d].[ACTUAL_OUT_TIME], [d].[ATTENDANCE_DATE], [d].[CREATED_AT], [d].[CREATED_BY], [d].[EARLY_LEAVE_MINUTES], [d].[EMPLOYEE_ID], [d].[IS_DELETED], [d].[LATE_MINUTES], [d].[OVERTIME_MINUTES], [d].[PLANNED_SHIFT_ID], [d].[STATUS], [d].[UPDATED_AT], [d].[UPDATED_BY], [d].[VERSION_NO]
FROM [HR_ATTENDANCE].[DAILY_ATTENDANCE] AS [d]
WHERE [d].[EMPLOYEE_ID] = @__request_EmployeeId_0 AND [d].[ATTENDANCE_DATE] >= @__startDate_1 AND [d].[ATTENDANCE_DATE] <= @__endDate_2 AND [d].[IS_DELETED] = CAST(0 AS tinyint)
2026-02-02 16:50:23.590 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__endDate_0='?' (DbType = DateTime2), @__startDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[HOLIDAY_ID], [p].[CREATED_AT], [p].[CREATED_BY], [p].[END_DATE], [p].[HOLIDAY_NAME_AR], [p].[IS_DELETED], [p].[START_DATE], [p].[UPDATED_AT], [p].[UPDATED_BY], [p].[VERSION_NO], [p].[YEAR]
FROM [HR_LEAVES].[PUBLIC_HOLIDAYS] AS [p]
WHERE [p].[IS_DELETED] = CAST(0 AS tinyint) AND [p].[START_DATE] <= @__endDate_0 AND [p].[END_DATE] >= @__startDate_1
2026-02-02 16:50:23.619 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32), @__endDate_1='?' (DbType = DateTime2), @__startDate_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[REQUEST_ID], [l].[ATTACHMENT_PATH], [l].[CREATED_AT], [l].[CREATED_BY], [l].[DAYS_COUNT], [l].[EMPLOYEE_ID], [l].[END_DATE], [l].[IS_DELETED], [l].[IS_POSTED_TO_BALANCE], [l].[LEAVE_TYPE_ID], [l].[REASON], [l].[REJECTION_REASON], [l].[START_DATE], [l].[STATUS], [l].[UPDATED_AT], [l].[UPDATED_BY], [l].[VERSION_NO], [l0].[LEAVE_TYPE_ID], [l0].[CREATED_AT], [l0].[CREATED_BY], [l0].[DEFAULT_DAYS], [l0].[IS_CARRY_FORWARD], [l0].[IS_DEDUCTIBLE], [l0].[IS_DELETED], [l0].[IS_PAID], [l0].[LEAVE_NAME_AR], [l0].[LEAVE_NAME_EN], [l0].[MAX_DAYS_PER_YEAR], [l0].[REQUIRES_ATTACHMENT], [l0].[UPDATED_AT], [l0].[UPDATED_BY], [l0].[VERSION_NO]
FROM [HR_LEAVES].[LEAVE_REQUESTS] AS [l]
INNER JOIN [HR_LEAVES].[LEAVE_TYPES] AS [l0] ON [l].[LEAVE_TYPE_ID] = [l0].[LEAVE_TYPE_ID]
WHERE [l].[EMPLOYEE_ID] = @__request_EmployeeId_0 AND [l].[STATUS] = N'APPROVED' AND [l].[IS_DELETED] = CAST(0 AS tinyint) AND [l].[START_DATE] <= @__endDate_1 AND [l].[END_DATE] >= @__startDate_2
2026-02-02 16:50:23.628 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[System.Collections.Generic.List`1[[HRMS.Application.Features.Attendance.Queries.GetDailyTimesheet.TimesheetDayDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-02 16:50:23.643 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceController.GetTimesheet (HRMS.API) in 384.4682ms
2026-02-02 16:50:23.646 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceController.GetTimesheet (HRMS.API)'
2026-02-02 16:50:23.647 +03:00 [INF] HTTP GET /api/Attendance/timesheet responded 200 in 452.5023 ms
2026-02-02 16:50:23.648 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Attendance/timesheet?employeeId=17&month=2&year=2026 - 200 null application/json; charset=utf-8 462.8092ms
2026-02-02 16:51:13.861 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Attendance/dashboard/live - null null
2026-02-02 16:51:13.871 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceController.GetLiveStatus (HRMS.API)'
2026-02-02 16:51:13.904 +03:00 [INF] Route matched with {action = "GetLiveStatus", controller = "Attendance"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[HRMS.Application.Features.Attendance.Dashboard.Queries.GetLiveAttendanceStatus.LiveStatusDto]]] GetLiveStatus() on controller HRMS.API.Controllers.Attendance.AttendanceController (HRMS.API).
2026-02-02 16:51:13.986 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
WHERE [e].[IS_DELETED] = CAST(0 AS tinyint)
2026-02-02 16:51:14.003 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__today_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [HR_LEAVES].[LEAVE_REQUESTS] AS [l]
WHERE [l].[STATUS] = N'APPROVED' AND [l].[IS_DELETED] = CAST(0 AS tinyint) AND [l].[START_DATE] <= @__today_0 AND [l].[END_DATE] >= @__today_0
2026-02-02 16:51:14.028 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__today_0='?' (DbType = DateTime2), @__AddDays_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[EMPLOYEE_ID] AS [EmployeeId], [r].[PUNCH_TYPE] AS [PunchType], [r].[PUNCH_TIME] AS [PunchTime]
FROM [HR_ATTENDANCE].[RAW_PUNCH_LOGS] AS [r]
WHERE [r].[PUNCH_TIME] >= @__today_0 AND [r].[PUNCH_TIME] < @__AddDays_1
2026-02-02 16:51:14.037 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[HRMS.Application.Features.Attendance.Dashboard.Queries.GetLiveAttendanceStatus.LiveStatusDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-02 16:51:14.046 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceController.GetLiveStatus (HRMS.API) in 138.8139ms
2026-02-02 16:51:14.049 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceController.GetLiveStatus (HRMS.API)'
2026-02-02 16:51:14.050 +03:00 [INF] HTTP GET /api/Attendance/dashboard/live responded 200 in 178.6606 ms
2026-02-02 16:51:14.052 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Attendance/dashboard/live - 200 null application/json; charset=utf-8 191.1904ms
2026-02-02 16:51:38.818 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Attendance/dashboard/exceptions - null null
2026-02-02 16:51:38.884 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceController.GetExceptions (HRMS.API)'
2026-02-02 16:51:38.910 +03:00 [INF] Route matched with {action = "GetExceptions", controller = "Attendance"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[System.Collections.Generic.List`1[HRMS.Application.Features.Attendance.Dashboard.Queries.GetAttendanceExceptions.AttendanceExceptionDto]]]] GetExceptions() on controller HRMS.API.Controllers.Attendance.AttendanceController (HRMS.API).
2026-02-02 16:51:39.006 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__startDate_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[RECORD_ID], [d].[ACTUAL_IN_TIME], [d].[ACTUAL_OUT_TIME], [d].[ATTENDANCE_DATE], [d].[CREATED_AT], [d].[CREATED_BY], [d].[EARLY_LEAVE_MINUTES], [d].[EMPLOYEE_ID], [d].[IS_DELETED], [d].[LATE_MINUTES], [d].[OVERTIME_MINUTES], [d].[PLANNED_SHIFT_ID], [d].[STATUS], [d].[UPDATED_AT], [d].[UPDATED_BY], [d].[VERSION_NO], [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO]
FROM [HR_ATTENDANCE].[DAILY_ATTENDANCE] AS [d]
INNER JOIN [HR_PERSONNEL].[EMPLOYEES] AS [e] ON [d].[EMPLOYEE_ID] = [e].[EMPLOYEE_ID]
WHERE [d].[ATTENDANCE_DATE] >= @__startDate_0 AND [d].[IS_DELETED] = CAST(0 AS tinyint) AND (([d].[ACTUAL_IN_TIME] IS NOT NULL AND [d].[ACTUAL_OUT_TIME] IS NULL AND [d].[ATTENDANCE_DATE] < CONVERT(date, GETDATE())) OR ([d].[ACTUAL_IN_TIME] IS NOT NULL AND [d].[ACTUAL_OUT_TIME] IS NOT NULL AND DATEADD(minute, CAST(-60.0E0 AS int), [d].[ACTUAL_OUT_TIME]) < [d].[ACTUAL_IN_TIME]) OR [d].[STATUS] = N'MISSING_PUNCH')
ORDER BY [d].[ATTENDANCE_DATE] DESC
2026-02-02 16:51:39.014 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[System.Collections.Generic.List`1[[HRMS.Application.Features.Attendance.Dashboard.Queries.GetAttendanceExceptions.AttendanceExceptionDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-02 16:51:39.022 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceController.GetExceptions (HRMS.API) in 88.713ms
2026-02-02 16:51:39.026 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceController.GetExceptions (HRMS.API)'
2026-02-02 16:51:39.029 +03:00 [INF] HTTP GET /api/Attendance/dashboard/exceptions responded 200 in 145.5426 ms
2026-02-02 16:51:39.035 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Attendance/dashboard/exceptions - 200 null application/json; charset=utf-8 216.3349ms
2026-02-02 16:52:14.897 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Attendance/reports/payroll-summary?month=1&year=2026 - null null
2026-02-02 16:52:15.084 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceController.GetPayrollSummary (HRMS.API)'
2026-02-02 16:52:15.123 +03:00 [INF] Route matched with {action = "GetPayrollSummary", controller = "Attendance"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[System.Collections.Generic.List`1[HRMS.Application.Features.Attendance.Reports.Queries.GetMonthlyPayrollSummary.PayrollAttendanceSummaryDto]]]] GetPayrollSummary(Int32, Int32) on controller HRMS.API.Controllers.Attendance.AttendanceController (HRMS.API).
2026-02-02 16:52:15.200 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@__startDate_0='?' (DbType = DateTime2), @__endDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[RECORD_ID], [d].[ACTUAL_IN_TIME], [d].[ACTUAL_OUT_TIME], [d].[ATTENDANCE_DATE], [d].[CREATED_AT], [d].[CREATED_BY], [d].[EARLY_LEAVE_MINUTES], [d].[EMPLOYEE_ID], [d].[IS_DELETED], [d].[LATE_MINUTES], [d].[OVERTIME_MINUTES], [d].[PLANNED_SHIFT_ID], [d].[STATUS], [d].[UPDATED_AT], [d].[UPDATED_BY], [d].[VERSION_NO], [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO], [d0].[DEPT_ID], [d0].[BranchId], [d0].[COST_CENTER_CODE], [d0].[CREATED_AT], [d0].[CREATED_BY], [d0].[DEPT_NAME_AR], [d0].[DEPT_NAME_EN], [d0].[IS_ACTIVE], [d0].[IS_DELETED], [d0].[MANAGER_ID], [d0].[PARENT_DEPT_ID], [d0].[UPDATED_AT], [d0].[UPDATED_BY], [d0].[VERSION_NO]
FROM [HR_ATTENDANCE].[DAILY_ATTENDANCE] AS [d]
INNER JOIN [HR_PERSONNEL].[EMPLOYEES] AS [e] ON [d].[EMPLOYEE_ID] = [e].[EMPLOYEE_ID]
INNER JOIN [HR_CORE].[DEPARTMENTS] AS [d0] ON [e].[DEPARTMENT_ID] = [d0].[DEPT_ID]
WHERE [d].[ATTENDANCE_DATE] >= @__startDate_0 AND [d].[ATTENDANCE_DATE] <= @__endDate_1 AND [d].[IS_DELETED] = CAST(0 AS tinyint)
2026-02-02 16:52:15.238 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__endDate_0='?' (DbType = DateTime2), @__startDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[REQUEST_ID], [l].[ATTACHMENT_PATH], [l].[CREATED_AT], [l].[CREATED_BY], [l].[DAYS_COUNT], [l].[EMPLOYEE_ID], [l].[END_DATE], [l].[IS_DELETED], [l].[IS_POSTED_TO_BALANCE], [l].[LEAVE_TYPE_ID], [l].[REASON], [l].[REJECTION_REASON], [l].[START_DATE], [l].[STATUS], [l].[UPDATED_AT], [l].[UPDATED_BY], [l].[VERSION_NO], [l0].[LEAVE_TYPE_ID], [l0].[CREATED_AT], [l0].[CREATED_BY], [l0].[DEFAULT_DAYS], [l0].[IS_CARRY_FORWARD], [l0].[IS_DEDUCTIBLE], [l0].[IS_DELETED], [l0].[IS_PAID], [l0].[LEAVE_NAME_AR], [l0].[LEAVE_NAME_EN], [l0].[MAX_DAYS_PER_YEAR], [l0].[REQUIRES_ATTACHMENT], [l0].[UPDATED_AT], [l0].[UPDATED_BY], [l0].[VERSION_NO]
FROM [HR_LEAVES].[LEAVE_REQUESTS] AS [l]
INNER JOIN [HR_LEAVES].[LEAVE_TYPES] AS [l0] ON [l].[LEAVE_TYPE_ID] = [l0].[LEAVE_TYPE_ID]
WHERE [l].[STATUS] = N'APPROVED' AND [l].[IS_DELETED] = CAST(0 AS tinyint) AND [l].[START_DATE] <= @__endDate_0 AND [l].[END_DATE] >= @__startDate_1
2026-02-02 16:52:15.245 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[System.Collections.Generic.List`1[[HRMS.Application.Features.Attendance.Reports.Queries.GetMonthlyPayrollSummary.PayrollAttendanceSummaryDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-02 16:52:15.254 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceController.GetPayrollSummary (HRMS.API) in 122.6007ms
2026-02-02 16:52:15.260 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceController.GetPayrollSummary (HRMS.API)'
2026-02-02 16:52:15.261 +03:00 [INF] HTTP GET /api/Attendance/reports/payroll-summary responded 200 in 177.5027 ms
2026-02-02 16:52:15.263 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Attendance/reports/payroll-summary?month=1&year=2026 - 200 null application/json; charset=utf-8 366.3237ms
2026-02-02 16:52:21.214 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Attendance/reports/payroll-summary?month=2&year=2026 - null null
2026-02-02 16:52:21.221 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceController.GetPayrollSummary (HRMS.API)'
2026-02-02 16:52:21.223 +03:00 [INF] Route matched with {action = "GetPayrollSummary", controller = "Attendance"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[System.Collections.Generic.List`1[HRMS.Application.Features.Attendance.Reports.Queries.GetMonthlyPayrollSummary.PayrollAttendanceSummaryDto]]]] GetPayrollSummary(Int32, Int32) on controller HRMS.API.Controllers.Attendance.AttendanceController (HRMS.API).
2026-02-02 16:52:21.264 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[@__startDate_0='?' (DbType = DateTime2), @__endDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[RECORD_ID], [d].[ACTUAL_IN_TIME], [d].[ACTUAL_OUT_TIME], [d].[ATTENDANCE_DATE], [d].[CREATED_AT], [d].[CREATED_BY], [d].[EARLY_LEAVE_MINUTES], [d].[EMPLOYEE_ID], [d].[IS_DELETED], [d].[LATE_MINUTES], [d].[OVERTIME_MINUTES], [d].[PLANNED_SHIFT_ID], [d].[STATUS], [d].[UPDATED_AT], [d].[UPDATED_BY], [d].[VERSION_NO], [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO], [d0].[DEPT_ID], [d0].[BranchId], [d0].[COST_CENTER_CODE], [d0].[CREATED_AT], [d0].[CREATED_BY], [d0].[DEPT_NAME_AR], [d0].[DEPT_NAME_EN], [d0].[IS_ACTIVE], [d0].[IS_DELETED], [d0].[MANAGER_ID], [d0].[PARENT_DEPT_ID], [d0].[UPDATED_AT], [d0].[UPDATED_BY], [d0].[VERSION_NO]
FROM [HR_ATTENDANCE].[DAILY_ATTENDANCE] AS [d]
INNER JOIN [HR_PERSONNEL].[EMPLOYEES] AS [e] ON [d].[EMPLOYEE_ID] = [e].[EMPLOYEE_ID]
INNER JOIN [HR_CORE].[DEPARTMENTS] AS [d0] ON [e].[DEPARTMENT_ID] = [d0].[DEPT_ID]
WHERE [d].[ATTENDANCE_DATE] >= @__startDate_0 AND [d].[ATTENDANCE_DATE] <= @__endDate_1 AND [d].[IS_DELETED] = CAST(0 AS tinyint)
2026-02-02 16:52:21.272 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__endDate_0='?' (DbType = DateTime2), @__startDate_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[REQUEST_ID], [l].[ATTACHMENT_PATH], [l].[CREATED_AT], [l].[CREATED_BY], [l].[DAYS_COUNT], [l].[EMPLOYEE_ID], [l].[END_DATE], [l].[IS_DELETED], [l].[IS_POSTED_TO_BALANCE], [l].[LEAVE_TYPE_ID], [l].[REASON], [l].[REJECTION_REASON], [l].[START_DATE], [l].[STATUS], [l].[UPDATED_AT], [l].[UPDATED_BY], [l].[VERSION_NO], [l0].[LEAVE_TYPE_ID], [l0].[CREATED_AT], [l0].[CREATED_BY], [l0].[DEFAULT_DAYS], [l0].[IS_CARRY_FORWARD], [l0].[IS_DEDUCTIBLE], [l0].[IS_DELETED], [l0].[IS_PAID], [l0].[LEAVE_NAME_AR], [l0].[LEAVE_NAME_EN], [l0].[MAX_DAYS_PER_YEAR], [l0].[REQUIRES_ATTACHMENT], [l0].[UPDATED_AT], [l0].[UPDATED_BY], [l0].[VERSION_NO]
FROM [HR_LEAVES].[LEAVE_REQUESTS] AS [l]
INNER JOIN [HR_LEAVES].[LEAVE_TYPES] AS [l0] ON [l].[LEAVE_TYPE_ID] = [l0].[LEAVE_TYPE_ID]
WHERE [l].[STATUS] = N'APPROVED' AND [l].[IS_DELETED] = CAST(0 AS tinyint) AND [l].[START_DATE] <= @__endDate_0 AND [l].[END_DATE] >= @__startDate_1
2026-02-02 16:52:21.286 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[System.Collections.Generic.List`1[[HRMS.Application.Features.Attendance.Reports.Queries.GetMonthlyPayrollSummary.PayrollAttendanceSummaryDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-02 16:52:21.292 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceController.GetPayrollSummary (HRMS.API) in 64.8472ms
2026-02-02 16:52:21.307 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceController.GetPayrollSummary (HRMS.API)'
2026-02-02 16:52:21.309 +03:00 [INF] HTTP GET /api/Attendance/reports/payroll-summary responded 200 in 88.5910 ms
2026-02-02 16:52:21.311 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Attendance/reports/payroll-summary?month=2&year=2026 - 200 null application/json; charset=utf-8 97.7037ms
2026-02-02 17:42:52.281 +03:00 [INF] üöÄ Starting HRMS Hospital API...
2026-02-02 17:42:55.362 +03:00 [FTL] ‚ùå Application terminated unexpectedly
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at Program.<Main>$(String[] args) in D:\HRMS_Hospital\Backend\HRMS\HRMS.API\Program.cs:line 76
2026-02-02 17:43:50.491 +03:00 [INF] üöÄ Starting HRMS Hospital API...
2026-02-02 17:43:50.993 +03:00 [FTL] ‚ùå Application terminated unexpectedly
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at Program.<Main>$(String[] args) in D:\HRMS_Hospital\Backend\HRMS\HRMS.API\Program.cs:line 76
2026-02-02 17:43:55.555 +03:00 [INF] üöÄ Starting HRMS Hospital API...
2026-02-02 17:43:57.879 +03:00 [INF] ‚úÖ HRMS Hospital API started successfully
2026-02-02 17:43:58.051 +03:00 [INF] User profile is available. Using 'C:\Users\MT\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-02-02 17:43:59.191 +03:00 [INF] Now listening on: https://localhost:5001
2026-02-02 17:43:59.194 +03:00 [INF] Now listening on: http://localhost:5000
2026-02-02 17:43:59.378 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-02 17:43:59.382 +03:00 [INF] Hosting environment: Development
2026-02-02 17:43:59.409 +03:00 [INF] Content root path: D:\HRMS_Hospital\Backend\HRMS\HRMS.API
2026-02-02 17:44:01.985 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - null null
2026-02-02 17:44:08.765 +03:00 [INF] HTTP GET /swagger/index.html responded 200 in 5063.1744 ms
2026-02-02 17:44:08.889 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - null null
2026-02-02 17:44:09.801 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_vs/browserLink - null null
2026-02-02 17:44:10.094 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 1204.8964ms
2026-02-02 17:44:10.022 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - 200 null text/html;charset=utf-8 8044.8055ms
2026-02-02 17:44:11.021 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_vs/browserLink - 200 null text/javascript; charset=UTF-8 1219.4724ms
2026-02-02 17:44:11.730 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - null null
2026-02-02 17:44:12.667 +03:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 660.7565 ms
2026-02-02 17:44:12.671 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 941.0465ms
2026-02-02 17:52:00.155 +03:00 [INF] üöÄ Starting HRMS Hospital API...
2026-02-02 17:52:00.723 +03:00 [FTL] ‚ùå Application terminated unexpectedly
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at Program.<Main>$(String[] args) in D:\HRMS_Hospital\Backend\HRMS\HRMS.API\Program.cs:line 76
2026-02-02 17:52:27.265 +03:00 [INF] üöÄ Starting HRMS Hospital API...
2026-02-02 17:52:27.688 +03:00 [FTL] ‚ùå Application terminated unexpectedly
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at Program.<Main>$(String[] args) in D:\HRMS_Hospital\Backend\HRMS\HRMS.API\Program.cs:line 76
2026-02-02 17:53:24.416 +03:00 [INF] üöÄ Starting HRMS Hospital API...
2026-02-02 17:53:28.935 +03:00 [INF] ‚úÖ HRMS Hospital API started successfully
2026-02-02 17:53:29.067 +03:00 [INF] User profile is available. Using 'C:\Users\MT\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-02-02 17:53:29.708 +03:00 [INF] Now listening on: https://localhost:5001
2026-02-02 17:53:29.715 +03:00 [INF] Now listening on: http://localhost:5000
2026-02-02 17:53:29.894 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-02 17:53:29.896 +03:00 [INF] Hosting environment: Development
2026-02-02 17:53:29.897 +03:00 [INF] Content root path: D:\HRMS_Hospital\Backend\HRMS\HRMS.API
2026-02-02 17:53:31.172 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - null null
2026-02-02 17:53:32.740 +03:00 [INF] HTTP GET /swagger/index.html responded 200 in 967.9455 ms
2026-02-02 17:53:33.547 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - null null
2026-02-02 17:53:33.550 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_vs/browserLink - null null
2026-02-02 17:53:33.714 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - 200 null text/html;charset=utf-8 2555.4913ms
2026-02-02 17:53:33.722 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 175.7779ms
2026-02-02 17:53:35.379 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_vs/browserLink - 200 null text/javascript; charset=UTF-8 1828.3318ms
2026-02-02 17:53:36.013 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - null null
2026-02-02 17:53:36.937 +03:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 682.4308 ms
2026-02-02 17:53:37.032 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 1018.6483ms
2026-02-02 17:54:49.245 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/PayrollSettings/elements - null null
2026-02-02 17:54:49.300 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Payroll.PayrollSettingsController.GetElements (HRMS.API)'
2026-02-02 17:54:49.464 +03:00 [INF] Route matched with {action = "GetElements", controller = "PayrollSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[System.Collections.Generic.List`1[HRMS.Application.DTOs.Payroll.Configuration.SalaryElementDto]]]] GetElements() on controller HRMS.API.Controllers.Payroll.PayrollSettingsController (HRMS.API).
2026-02-02 17:54:56.771 +03:00 [WRN] No store type was specified for the decimal property 'HoursCount' on entity type 'ShiftType'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-02-02 17:54:56.778 +03:00 [WRN] No store type was specified for the decimal property 'MaxSalary' on entity type 'JobGrade'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-02-02 17:54:56.783 +03:00 [WRN] No store type was specified for the decimal property 'MinSalary' on entity type 'JobGrade'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-02-02 17:54:58.705 +03:00 [INF] Executed DbCommand (63ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ElementId], [s].[CREATED_AT], [s].[CREATED_BY], [s].[DefaultPercentage], [s].[ElementNameAr], [s].[ElementType], [s].[IsBasic], [s].[IS_DELETED], [s].[IsGosiBase], [s].[IsRecurring], [s].[IsTaxable], [s].[UPDATED_AT], [s].[UPDATED_BY], [s].[VERSION_NO]
FROM [HR_PAYROLL].[SALARY_ELEMENTS] AS [s]
2026-02-02 17:54:58.768 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[System.Collections.Generic.List`1[[HRMS.Application.DTOs.Payroll.Configuration.SalaryElementDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-02 17:54:58.796 +03:00 [INF] Executed action HRMS.API.Controllers.Payroll.PayrollSettingsController.GetElements (HRMS.API) in 8276.0755ms
2026-02-02 17:54:58.807 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Payroll.PayrollSettingsController.GetElements (HRMS.API)'
2026-02-02 17:54:58.811 +03:00 [INF] HTTP GET /api/PayrollSettings/elements responded 200 in 9525.6973 ms
2026-02-02 17:54:58.826 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/PayrollSettings/elements - 200 null application/json; charset=utf-8 9580.901ms
2026-02-02 17:55:56.662 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/PayrollSettings/initialize-from-grade/17 - null 0
2026-02-02 17:55:56.699 +03:00 [INF] CORS policy execution successful.
2026-02-02 17:55:56.702 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Payroll.PayrollSettingsController.InitializeFromGrade (HRMS.API)'
2026-02-02 17:55:56.731 +03:00 [INF] Route matched with {action = "InitializeFromGrade", controller = "PayrollSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[System.Boolean]]] InitializeFromGrade(Int32) on controller HRMS.API.Controllers.Payroll.PayrollSettingsController (HRMS.API).
2026-02-02 17:55:57.363 +03:00 [INF] Executed DbCommand (194ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO], [j].[JOB_ID], [j].[CREATED_AT], [j].[CREATED_BY], [j].[DEFAULT_GRADE_ID], [j].[DepartmentDeptId], [j].[IS_DELETED], [j].[IS_MEDICAL], [j].[JOB_TITLE_AR], [j].[JOB_TITLE_EN], [j].[UPDATED_AT], [j].[UPDATED_BY], [j].[VERSION_NO], [j0].[JOB_GRADE_ID], [j0].[BENEFITS_CONFIG], [j0].[CREATED_AT], [j0].[CREATED_BY], [j0].[DESCRIPTION], [j0].[GRADE_CODE], [j0].[GRADE_LEVEL], [j0].[GRADE_NAME_AR], [j0].[GRADE_NAME_EN], [j0].[IS_DELETED], [j0].[MAX_SALARY], [j0].[MIN_SALARY], [j0].[UPDATED_AT], [j0].[UPDATED_BY], [j0].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
INNER JOIN [HR_CORE].[JOBS] AS [j] ON [e].[JOB_ID] = [j].[JOB_ID]
LEFT JOIN [HR_CORE].[JOB_GRADES] AS [j0] ON [j].[DEFAULT_GRADE_ID] = [j0].[JOB_GRADE_ID]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0
2026-02-02 17:55:57.454 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ElementId], [s].[CREATED_AT], [s].[CREATED_BY], [s].[DefaultPercentage], [s].[ElementNameAr], [s].[ElementType], [s].[IsBasic], [s].[IS_DELETED], [s].[IsGosiBase], [s].[IsRecurring], [s].[IsTaxable], [s].[UPDATED_AT], [s].[UPDATED_BY], [s].[VERSION_NO]
FROM [HR_PAYROLL].[SALARY_ELEMENTS] AS [s]
WHERE [s].[IsBasic] = CAST(1 AS tinyint)
2026-02-02 17:55:57.475 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[System.Boolean, System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-02 17:55:57.483 +03:00 [INF] Executed action HRMS.API.Controllers.Payroll.PayrollSettingsController.InitializeFromGrade (HRMS.API) in 748.6508ms
2026-02-02 17:55:57.486 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Payroll.PayrollSettingsController.InitializeFromGrade (HRMS.API)'
2026-02-02 17:55:57.487 +03:00 [INF] HTTP POST /api/PayrollSettings/initialize-from-grade/17 responded 400 in 793.2962 ms
2026-02-02 17:55:57.490 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/PayrollSettings/initialize-from-grade/17 - 400 null application/json; charset=utf-8 827.591ms
2026-02-02 17:56:58.637 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/PayrollSettings/elements - application/json 191
2026-02-02 17:56:58.645 +03:00 [INF] CORS policy execution successful.
2026-02-02 17:56:58.647 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Payroll.PayrollSettingsController.CreateElement (HRMS.API)'
2026-02-02 17:56:58.667 +03:00 [INF] Route matched with {action = "CreateElement", controller = "PayrollSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[System.Int32]]] CreateElement(HRMS.Application.Features.Payroll.Configuration.Elements.Commands.CreateSalaryElement.CreateSalaryElementCommand) on controller HRMS.API.Controllers.Payroll.PayrollSettingsController (HRMS.API).
2026-02-02 17:56:59.126 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HR_PAYROLL].[SALARY_ELEMENTS] AS [s]
        WHERE [s].[IsBasic] = CAST(1 AS tinyint)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-02-02 17:56:59.511 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 50), @p2='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p3='?' (Size = 100), @p4='?' (Size = 10), @p5='?' (Size = 1) (DbType = Byte), @p6='?' (Size = 1) (DbType = Byte), @p7='?' (Size = 1) (DbType = Byte), @p8='?' (Size = 1) (DbType = Byte), @p9='?' (Size = 1) (DbType = Byte), @p10='?' (DbType = DateTime2), @p11='?' (Size = 50), @p12='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_PAYROLL].[SALARY_ELEMENTS] ([CREATED_AT], [CREATED_BY], [DefaultPercentage], [ElementNameAr], [ElementType], [IsBasic], [IS_DELETED], [IsGosiBase], [IsRecurring], [IsTaxable], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[ElementId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2026-02-02 17:56:59.649 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-02-02 17:56:59.661 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[System.Int32, System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-02 17:56:59.665 +03:00 [INF] Executed action HRMS.API.Controllers.Payroll.PayrollSettingsController.CreateElement (HRMS.API) in 794.8191ms
2026-02-02 17:56:59.668 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Payroll.PayrollSettingsController.CreateElement (HRMS.API)'
2026-02-02 17:56:59.670 +03:00 [INF] HTTP POST /api/PayrollSettings/elements responded 200 in 1025.5173 ms
2026-02-02 17:56:59.672 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/PayrollSettings/elements - 200 null application/json; charset=utf-8 1036.4371ms
2026-02-02 17:57:22.369 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/PayrollSettings/elements - application/json 180
2026-02-02 17:57:22.481 +03:00 [INF] CORS policy execution successful.
2026-02-02 17:57:22.483 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Payroll.PayrollSettingsController.CreateElement (HRMS.API)'
2026-02-02 17:57:22.484 +03:00 [INF] Route matched with {action = "CreateElement", controller = "PayrollSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[System.Int32]]] CreateElement(HRMS.Application.Features.Payroll.Configuration.Elements.Commands.CreateSalaryElement.CreateSalaryElementCommand) on controller HRMS.API.Controllers.Payroll.PayrollSettingsController (HRMS.API).
2026-02-02 17:57:22.502 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 50), @p2='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p3='?' (Size = 100), @p4='?' (Size = 10), @p5='?' (Size = 1) (DbType = Byte), @p6='?' (Size = 1) (DbType = Byte), @p7='?' (Size = 1) (DbType = Byte), @p8='?' (Size = 1) (DbType = Byte), @p9='?' (Size = 1) (DbType = Byte), @p10='?' (DbType = DateTime2), @p11='?' (Size = 50), @p12='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_PAYROLL].[SALARY_ELEMENTS] ([CREATED_AT], [CREATED_BY], [DefaultPercentage], [ElementNameAr], [ElementType], [IsBasic], [IS_DELETED], [IsGosiBase], [IsRecurring], [IsTaxable], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[ElementId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2026-02-02 17:57:22.518 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-02-02 17:57:22.523 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[System.Int32, System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-02 17:57:22.526 +03:00 [INF] Executed action HRMS.API.Controllers.Payroll.PayrollSettingsController.CreateElement (HRMS.API) in 38.7008ms
2026-02-02 17:57:22.532 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Payroll.PayrollSettingsController.CreateElement (HRMS.API)'
2026-02-02 17:57:22.534 +03:00 [INF] HTTP POST /api/PayrollSettings/elements responded 200 in 52.9110 ms
2026-02-02 17:57:22.536 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/PayrollSettings/elements - 200 null application/json; charset=utf-8 168.295ms
2026-02-02 17:57:37.265 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/PayrollSettings/elements - application/json 188
2026-02-02 17:57:37.268 +03:00 [INF] CORS policy execution successful.
2026-02-02 17:57:37.269 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Payroll.PayrollSettingsController.CreateElement (HRMS.API)'
2026-02-02 17:57:37.271 +03:00 [INF] Route matched with {action = "CreateElement", controller = "PayrollSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[System.Int32]]] CreateElement(HRMS.Application.Features.Payroll.Configuration.Elements.Commands.CreateSalaryElement.CreateSalaryElementCommand) on controller HRMS.API.Controllers.Payroll.PayrollSettingsController (HRMS.API).
2026-02-02 17:57:37.284 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 50), @p2='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p3='?' (Size = 100), @p4='?' (Size = 10), @p5='?' (Size = 1) (DbType = Byte), @p6='?' (Size = 1) (DbType = Byte), @p7='?' (Size = 1) (DbType = Byte), @p8='?' (Size = 1) (DbType = Byte), @p9='?' (Size = 1) (DbType = Byte), @p10='?' (DbType = DateTime2), @p11='?' (Size = 50), @p12='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_PAYROLL].[SALARY_ELEMENTS] ([CREATED_AT], [CREATED_BY], [DefaultPercentage], [ElementNameAr], [ElementType], [IsBasic], [IS_DELETED], [IsGosiBase], [IsRecurring], [IsTaxable], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[ElementId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2026-02-02 17:57:37.343 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-02-02 17:57:37.349 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[System.Int32, System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-02 17:57:37.351 +03:00 [INF] Executed action HRMS.API.Controllers.Payroll.PayrollSettingsController.CreateElement (HRMS.API) in 78.4058ms
2026-02-02 17:57:37.355 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Payroll.PayrollSettingsController.CreateElement (HRMS.API)'
2026-02-02 17:57:37.357 +03:00 [INF] HTTP POST /api/PayrollSettings/elements responded 200 in 88.3181 ms
2026-02-02 17:57:37.359 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/PayrollSettings/elements - 200 null application/json; charset=utf-8 94.2187ms
2026-02-02 17:57:49.571 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/PayrollSettings/elements - application/json 185
2026-02-02 17:57:49.576 +03:00 [INF] CORS policy execution successful.
2026-02-02 17:57:49.579 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Payroll.PayrollSettingsController.CreateElement (HRMS.API)'
2026-02-02 17:57:49.581 +03:00 [INF] Route matched with {action = "CreateElement", controller = "PayrollSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[System.Int32]]] CreateElement(HRMS.Application.Features.Payroll.Configuration.Elements.Commands.CreateSalaryElement.CreateSalaryElementCommand) on controller HRMS.API.Controllers.Payroll.PayrollSettingsController (HRMS.API).
2026-02-02 17:57:49.590 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 50), @p2='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p3='?' (Size = 100), @p4='?' (Size = 10), @p5='?' (Size = 1) (DbType = Byte), @p6='?' (Size = 1) (DbType = Byte), @p7='?' (Size = 1) (DbType = Byte), @p8='?' (Size = 1) (DbType = Byte), @p9='?' (Size = 1) (DbType = Byte), @p10='?' (DbType = DateTime2), @p11='?' (Size = 50), @p12='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_PAYROLL].[SALARY_ELEMENTS] ([CREATED_AT], [CREATED_BY], [DefaultPercentage], [ElementNameAr], [ElementType], [IsBasic], [IS_DELETED], [IsGosiBase], [IsRecurring], [IsTaxable], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[ElementId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2026-02-02 17:57:49.638 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-02-02 17:57:49.641 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[System.Int32, System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-02 17:57:49.643 +03:00 [INF] Executed action HRMS.API.Controllers.Payroll.PayrollSettingsController.CreateElement (HRMS.API) in 58.4629ms
2026-02-02 17:57:49.645 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Payroll.PayrollSettingsController.CreateElement (HRMS.API)'
2026-02-02 17:57:49.647 +03:00 [INF] HTTP POST /api/PayrollSettings/elements responded 200 in 70.1236 ms
2026-02-02 17:57:49.648 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/PayrollSettings/elements - 200 null application/json; charset=utf-8 77.7042ms
2026-02-02 17:58:40.757 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/PayrollSettings/initialize-from-grade/17 - null 0
2026-02-02 17:58:41.030 +03:00 [INF] CORS policy execution successful.
2026-02-02 17:58:41.032 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Payroll.PayrollSettingsController.InitializeFromGrade (HRMS.API)'
2026-02-02 17:58:41.034 +03:00 [INF] Route matched with {action = "InitializeFromGrade", controller = "PayrollSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[System.Boolean]]] InitializeFromGrade(Int32) on controller HRMS.API.Controllers.Payroll.PayrollSettingsController (HRMS.API).
2026-02-02 17:58:41.069 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO], [j].[JOB_ID], [j].[CREATED_AT], [j].[CREATED_BY], [j].[DEFAULT_GRADE_ID], [j].[DepartmentDeptId], [j].[IS_DELETED], [j].[IS_MEDICAL], [j].[JOB_TITLE_AR], [j].[JOB_TITLE_EN], [j].[UPDATED_AT], [j].[UPDATED_BY], [j].[VERSION_NO], [j0].[JOB_GRADE_ID], [j0].[BENEFITS_CONFIG], [j0].[CREATED_AT], [j0].[CREATED_BY], [j0].[DESCRIPTION], [j0].[GRADE_CODE], [j0].[GRADE_LEVEL], [j0].[GRADE_NAME_AR], [j0].[GRADE_NAME_EN], [j0].[IS_DELETED], [j0].[MAX_SALARY], [j0].[MIN_SALARY], [j0].[UPDATED_AT], [j0].[UPDATED_BY], [j0].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
INNER JOIN [HR_CORE].[JOBS] AS [j] ON [e].[JOB_ID] = [j].[JOB_ID]
LEFT JOIN [HR_CORE].[JOB_GRADES] AS [j0] ON [j].[DEFAULT_GRADE_ID] = [j0].[JOB_GRADE_ID]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0
2026-02-02 17:58:41.091 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ElementId], [s].[CREATED_AT], [s].[CREATED_BY], [s].[DefaultPercentage], [s].[ElementNameAr], [s].[ElementType], [s].[IsBasic], [s].[IS_DELETED], [s].[IsGosiBase], [s].[IsRecurring], [s].[IsTaxable], [s].[UPDATED_AT], [s].[UPDATED_BY], [s].[VERSION_NO]
FROM [HR_PAYROLL].[SALARY_ELEMENTS] AS [s]
WHERE [s].[IsBasic] = CAST(1 AS tinyint)
2026-02-02 17:58:41.236 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[StructureId], [e].[Amount], [e].[CREATED_AT], [e].[CREATED_BY], [e].[ELEMENT_ID], [e].[EMPLOYEE_ID], [e].[IsActive], [e].[IS_DELETED], [e].[Percentage], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO]
FROM [HR_PAYROLL].[EMPLOYEE_SALARY_STRUCTURE] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0
2026-02-02 17:58:41.395 +03:00 [INF] Executed DbCommand (23ms) [Parameters=[@__elementIds_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ElementId], [s].[CREATED_AT], [s].[CREATED_BY], [s].[DefaultPercentage], [s].[ElementNameAr], [s].[ElementType], [s].[IsBasic], [s].[IS_DELETED], [s].[IsGosiBase], [s].[IsRecurring], [s].[IsTaxable], [s].[UPDATED_AT], [s].[UPDATED_BY], [s].[VERSION_NO]
FROM [HR_PAYROLL].[SALARY_ELEMENTS] AS [s]
WHERE [s].[ElementId] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__elementIds_0) WITH ([value] int '$') AS [e]
)
2026-02-02 17:58:41.406 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO], [j].[JOB_ID], [j].[CREATED_AT], [j].[CREATED_BY], [j].[DEFAULT_GRADE_ID], [j].[DepartmentDeptId], [j].[IS_DELETED], [j].[IS_MEDICAL], [j].[JOB_TITLE_AR], [j].[JOB_TITLE_EN], [j].[UPDATED_AT], [j].[UPDATED_BY], [j].[VERSION_NO], [j0].[JOB_GRADE_ID], [j0].[BENEFITS_CONFIG], [j0].[CREATED_AT], [j0].[CREATED_BY], [j0].[DESCRIPTION], [j0].[GRADE_CODE], [j0].[GRADE_LEVEL], [j0].[GRADE_NAME_AR], [j0].[GRADE_NAME_EN], [j0].[IS_DELETED], [j0].[MAX_SALARY], [j0].[MIN_SALARY], [j0].[UPDATED_AT], [j0].[UPDATED_BY], [j0].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
INNER JOIN [HR_CORE].[JOBS] AS [j] ON [e].[JOB_ID] = [j].[JOB_ID]
LEFT JOIN [HR_CORE].[JOB_GRADES] AS [j0] ON [j].[DEFAULT_GRADE_ID] = [j0].[JOB_GRADE_ID]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0
2026-02-02 17:58:41.504 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (Size = 1) (DbType = Byte), @p6='?' (Size = 1) (DbType = Byte), @p7='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p8='?' (DbType = DateTime2), @p9='?' (Size = 50), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_PAYROLL].[EMPLOYEE_SALARY_STRUCTURE] ([Amount], [CREATED_AT], [CREATED_BY], [ELEMENT_ID], [EMPLOYEE_ID], [IsActive], [IS_DELETED], [Percentage], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[StructureId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2026-02-02 17:58:41.514 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-02-02 17:58:41.518 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[System.Boolean, System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-02 17:58:41.520 +03:00 [INF] Executed action HRMS.API.Controllers.Payroll.PayrollSettingsController.InitializeFromGrade (HRMS.API) in 482.913ms
2026-02-02 17:58:41.523 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Payroll.PayrollSettingsController.InitializeFromGrade (HRMS.API)'
2026-02-02 17:58:41.527 +03:00 [INF] HTTP POST /api/PayrollSettings/initialize-from-grade/17 responded 200 in 497.8875 ms
2026-02-02 17:58:41.530 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/PayrollSettings/initialize-from-grade/17 - 200 null application/json; charset=utf-8 772.6615ms
2026-02-02 17:59:08.986 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/PayrollSettings/initialize-from-grade/23 - null 0
2026-02-02 17:59:09.000 +03:00 [INF] CORS policy execution successful.
2026-02-02 17:59:09.022 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Payroll.PayrollSettingsController.InitializeFromGrade (HRMS.API)'
2026-02-02 17:59:09.201 +03:00 [INF] Route matched with {action = "InitializeFromGrade", controller = "PayrollSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[System.Boolean]]] InitializeFromGrade(Int32) on controller HRMS.API.Controllers.Payroll.PayrollSettingsController (HRMS.API).
2026-02-02 17:59:09.216 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO], [j].[JOB_ID], [j].[CREATED_AT], [j].[CREATED_BY], [j].[DEFAULT_GRADE_ID], [j].[DepartmentDeptId], [j].[IS_DELETED], [j].[IS_MEDICAL], [j].[JOB_TITLE_AR], [j].[JOB_TITLE_EN], [j].[UPDATED_AT], [j].[UPDATED_BY], [j].[VERSION_NO], [j0].[JOB_GRADE_ID], [j0].[BENEFITS_CONFIG], [j0].[CREATED_AT], [j0].[CREATED_BY], [j0].[DESCRIPTION], [j0].[GRADE_CODE], [j0].[GRADE_LEVEL], [j0].[GRADE_NAME_AR], [j0].[GRADE_NAME_EN], [j0].[IS_DELETED], [j0].[MAX_SALARY], [j0].[MIN_SALARY], [j0].[UPDATED_AT], [j0].[UPDATED_BY], [j0].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
INNER JOIN [HR_CORE].[JOBS] AS [j] ON [e].[JOB_ID] = [j].[JOB_ID]
LEFT JOIN [HR_CORE].[JOB_GRADES] AS [j0] ON [j].[DEFAULT_GRADE_ID] = [j0].[JOB_GRADE_ID]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0
2026-02-02 17:59:09.224 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ElementId], [s].[CREATED_AT], [s].[CREATED_BY], [s].[DefaultPercentage], [s].[ElementNameAr], [s].[ElementType], [s].[IsBasic], [s].[IS_DELETED], [s].[IsGosiBase], [s].[IsRecurring], [s].[IsTaxable], [s].[UPDATED_AT], [s].[UPDATED_BY], [s].[VERSION_NO]
FROM [HR_PAYROLL].[SALARY_ELEMENTS] AS [s]
WHERE [s].[IsBasic] = CAST(1 AS tinyint)
2026-02-02 17:59:09.378 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[StructureId], [e].[Amount], [e].[CREATED_AT], [e].[CREATED_BY], [e].[ELEMENT_ID], [e].[EMPLOYEE_ID], [e].[IsActive], [e].[IS_DELETED], [e].[Percentage], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO]
FROM [HR_PAYROLL].[EMPLOYEE_SALARY_STRUCTURE] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0
2026-02-02 17:59:09.388 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__elementIds_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ElementId], [s].[CREATED_AT], [s].[CREATED_BY], [s].[DefaultPercentage], [s].[ElementNameAr], [s].[ElementType], [s].[IsBasic], [s].[IS_DELETED], [s].[IsGosiBase], [s].[IsRecurring], [s].[IsTaxable], [s].[UPDATED_AT], [s].[UPDATED_BY], [s].[VERSION_NO]
FROM [HR_PAYROLL].[SALARY_ELEMENTS] AS [s]
WHERE [s].[ElementId] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__elementIds_0) WITH ([value] int '$') AS [e]
)
2026-02-02 17:59:09.393 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO], [j].[JOB_ID], [j].[CREATED_AT], [j].[CREATED_BY], [j].[DEFAULT_GRADE_ID], [j].[DepartmentDeptId], [j].[IS_DELETED], [j].[IS_MEDICAL], [j].[JOB_TITLE_AR], [j].[JOB_TITLE_EN], [j].[UPDATED_AT], [j].[UPDATED_BY], [j].[VERSION_NO], [j0].[JOB_GRADE_ID], [j0].[BENEFITS_CONFIG], [j0].[CREATED_AT], [j0].[CREATED_BY], [j0].[DESCRIPTION], [j0].[GRADE_CODE], [j0].[GRADE_LEVEL], [j0].[GRADE_NAME_AR], [j0].[GRADE_NAME_EN], [j0].[IS_DELETED], [j0].[MAX_SALARY], [j0].[MIN_SALARY], [j0].[UPDATED_AT], [j0].[UPDATED_BY], [j0].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
INNER JOIN [HR_CORE].[JOBS] AS [j] ON [e].[JOB_ID] = [j].[JOB_ID]
LEFT JOIN [HR_CORE].[JOB_GRADES] AS [j0] ON [j].[DEFAULT_GRADE_ID] = [j0].[JOB_GRADE_ID]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0
2026-02-02 17:59:09.400 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (Size = 1) (DbType = Byte), @p6='?' (Size = 1) (DbType = Byte), @p7='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p8='?' (DbType = DateTime2), @p9='?' (Size = 50), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_PAYROLL].[EMPLOYEE_SALARY_STRUCTURE] ([Amount], [CREATED_AT], [CREATED_BY], [ELEMENT_ID], [EMPLOYEE_ID], [IsActive], [IS_DELETED], [Percentage], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[StructureId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2026-02-02 17:59:09.406 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-02-02 17:59:09.410 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[System.Boolean, System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-02 17:59:09.411 +03:00 [INF] Executed action HRMS.API.Controllers.Payroll.PayrollSettingsController.InitializeFromGrade (HRMS.API) in 201.694ms
2026-02-02 17:59:09.413 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Payroll.PayrollSettingsController.InitializeFromGrade (HRMS.API)'
2026-02-02 17:59:09.416 +03:00 [INF] HTTP POST /api/PayrollSettings/initialize-from-grade/23 responded 200 in 416.5214 ms
2026-02-02 17:59:09.418 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/PayrollSettings/initialize-from-grade/23 - 200 null application/json; charset=utf-8 432.2763ms
2026-02-02 18:00:40.542 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/PayrollSettings/employee-structure/23 - null null
2026-02-02 18:00:40.560 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Payroll.PayrollSettingsController.GetEmployeeStructure (HRMS.API)'
2026-02-02 18:00:40.606 +03:00 [INF] Route matched with {action = "GetEmployeeStructure", controller = "PayrollSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[HRMS.Application.DTOs.Payroll.Configuration.EmployeeSalaryStructureDto]]] GetEmployeeStructure(Int32) on controller HRMS.API.Controllers.Payroll.PayrollSettingsController (HRMS.API).
2026-02-02 18:00:40.641 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO], [j].[JOB_ID], [j].[CREATED_AT], [j].[CREATED_BY], [j].[DEFAULT_GRADE_ID], [j].[DepartmentDeptId], [j].[IS_DELETED], [j].[IS_MEDICAL], [j].[JOB_TITLE_AR], [j].[JOB_TITLE_EN], [j].[UPDATED_AT], [j].[UPDATED_BY], [j].[VERSION_NO], [j0].[JOB_GRADE_ID], [j0].[BENEFITS_CONFIG], [j0].[CREATED_AT], [j0].[CREATED_BY], [j0].[DESCRIPTION], [j0].[GRADE_CODE], [j0].[GRADE_LEVEL], [j0].[GRADE_NAME_AR], [j0].[GRADE_NAME_EN], [j0].[IS_DELETED], [j0].[MAX_SALARY], [j0].[MIN_SALARY], [j0].[UPDATED_AT], [j0].[UPDATED_BY], [j0].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
INNER JOIN [HR_CORE].[JOBS] AS [j] ON [e].[JOB_ID] = [j].[JOB_ID]
LEFT JOIN [HR_CORE].[JOB_GRADES] AS [j0] ON [j].[DEFAULT_GRADE_ID] = [j0].[JOB_GRADE_ID]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0
2026-02-02 18:00:40.683 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[StructureId], [e].[Amount], [e].[CREATED_AT], [e].[CREATED_BY], [e].[ELEMENT_ID], [e].[EMPLOYEE_ID], [e].[IsActive], [e].[IS_DELETED], [e].[Percentage], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO], [s].[ElementId], [s].[CREATED_AT], [s].[CREATED_BY], [s].[DefaultPercentage], [s].[ElementNameAr], [s].[ElementType], [s].[IsBasic], [s].[IS_DELETED], [s].[IsGosiBase], [s].[IsRecurring], [s].[IsTaxable], [s].[UPDATED_AT], [s].[UPDATED_BY], [s].[VERSION_NO]
FROM [HR_PAYROLL].[EMPLOYEE_SALARY_STRUCTURE] AS [e]
INNER JOIN [HR_PAYROLL].[SALARY_ELEMENTS] AS [s] ON [e].[ELEMENT_ID] = [s].[ElementId]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0 AND [e].[IsActive] = CAST(1 AS tinyint)
2026-02-02 18:00:40.691 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[HRMS.Application.DTOs.Payroll.Configuration.EmployeeSalaryStructureDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-02 18:00:40.706 +03:00 [INF] Executed action HRMS.API.Controllers.Payroll.PayrollSettingsController.GetEmployeeStructure (HRMS.API) in 95.5732ms
2026-02-02 18:00:40.708 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Payroll.PayrollSettingsController.GetEmployeeStructure (HRMS.API)'
2026-02-02 18:00:40.710 +03:00 [INF] HTTP GET /api/PayrollSettings/employee-structure/23 responded 200 in 149.8996 ms
2026-02-02 18:00:40.712 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/PayrollSettings/employee-structure/23 - 200 null application/json; charset=utf-8 169.244ms
2026-02-02 18:00:52.583 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/PayrollSettings/employee-structure/17 - null null
2026-02-02 18:00:52.592 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Payroll.PayrollSettingsController.GetEmployeeStructure (HRMS.API)'
2026-02-02 18:00:52.594 +03:00 [INF] Route matched with {action = "GetEmployeeStructure", controller = "PayrollSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[HRMS.Application.DTOs.Payroll.Configuration.EmployeeSalaryStructureDto]]] GetEmployeeStructure(Int32) on controller HRMS.API.Controllers.Payroll.PayrollSettingsController (HRMS.API).
2026-02-02 18:00:52.608 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO], [j].[JOB_ID], [j].[CREATED_AT], [j].[CREATED_BY], [j].[DEFAULT_GRADE_ID], [j].[DepartmentDeptId], [j].[IS_DELETED], [j].[IS_MEDICAL], [j].[JOB_TITLE_AR], [j].[JOB_TITLE_EN], [j].[UPDATED_AT], [j].[UPDATED_BY], [j].[VERSION_NO], [j0].[JOB_GRADE_ID], [j0].[BENEFITS_CONFIG], [j0].[CREATED_AT], [j0].[CREATED_BY], [j0].[DESCRIPTION], [j0].[GRADE_CODE], [j0].[GRADE_LEVEL], [j0].[GRADE_NAME_AR], [j0].[GRADE_NAME_EN], [j0].[IS_DELETED], [j0].[MAX_SALARY], [j0].[MIN_SALARY], [j0].[UPDATED_AT], [j0].[UPDATED_BY], [j0].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
INNER JOIN [HR_CORE].[JOBS] AS [j] ON [e].[JOB_ID] = [j].[JOB_ID]
LEFT JOIN [HR_CORE].[JOB_GRADES] AS [j0] ON [j].[DEFAULT_GRADE_ID] = [j0].[JOB_GRADE_ID]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0
2026-02-02 18:00:52.822 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[StructureId], [e].[Amount], [e].[CREATED_AT], [e].[CREATED_BY], [e].[ELEMENT_ID], [e].[EMPLOYEE_ID], [e].[IsActive], [e].[IS_DELETED], [e].[Percentage], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO], [s].[ElementId], [s].[CREATED_AT], [s].[CREATED_BY], [s].[DefaultPercentage], [s].[ElementNameAr], [s].[ElementType], [s].[IsBasic], [s].[IS_DELETED], [s].[IsGosiBase], [s].[IsRecurring], [s].[IsTaxable], [s].[UPDATED_AT], [s].[UPDATED_BY], [s].[VERSION_NO]
FROM [HR_PAYROLL].[EMPLOYEE_SALARY_STRUCTURE] AS [e]
INNER JOIN [HR_PAYROLL].[SALARY_ELEMENTS] AS [s] ON [e].[ELEMENT_ID] = [s].[ElementId]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0 AND [e].[IsActive] = CAST(1 AS tinyint)
2026-02-02 18:00:52.828 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[HRMS.Application.DTOs.Payroll.Configuration.EmployeeSalaryStructureDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-02 18:00:52.830 +03:00 [INF] Executed action HRMS.API.Controllers.Payroll.PayrollSettingsController.GetEmployeeStructure (HRMS.API) in 232.5716ms
2026-02-02 18:00:52.834 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Payroll.PayrollSettingsController.GetEmployeeStructure (HRMS.API)'
2026-02-02 18:00:52.837 +03:00 [INF] HTTP GET /api/PayrollSettings/employee-structure/17 responded 200 in 245.4849 ms
2026-02-02 18:00:52.841 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/PayrollSettings/employee-structure/17 - 200 null application/json; charset=utf-8 258.5404ms
2026-02-02 18:01:04.854 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/PayrollSettings/employee-structure/23 - null null
2026-02-02 18:01:04.865 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Payroll.PayrollSettingsController.GetEmployeeStructure (HRMS.API)'
2026-02-02 18:01:04.868 +03:00 [INF] Route matched with {action = "GetEmployeeStructure", controller = "PayrollSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[HRMS.Application.DTOs.Payroll.Configuration.EmployeeSalaryStructureDto]]] GetEmployeeStructure(Int32) on controller HRMS.API.Controllers.Payroll.PayrollSettingsController (HRMS.API).
2026-02-02 18:01:05.123 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO], [j].[JOB_ID], [j].[CREATED_AT], [j].[CREATED_BY], [j].[DEFAULT_GRADE_ID], [j].[DepartmentDeptId], [j].[IS_DELETED], [j].[IS_MEDICAL], [j].[JOB_TITLE_AR], [j].[JOB_TITLE_EN], [j].[UPDATED_AT], [j].[UPDATED_BY], [j].[VERSION_NO], [j0].[JOB_GRADE_ID], [j0].[BENEFITS_CONFIG], [j0].[CREATED_AT], [j0].[CREATED_BY], [j0].[DESCRIPTION], [j0].[GRADE_CODE], [j0].[GRADE_LEVEL], [j0].[GRADE_NAME_AR], [j0].[GRADE_NAME_EN], [j0].[IS_DELETED], [j0].[MAX_SALARY], [j0].[MIN_SALARY], [j0].[UPDATED_AT], [j0].[UPDATED_BY], [j0].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
INNER JOIN [HR_CORE].[JOBS] AS [j] ON [e].[JOB_ID] = [j].[JOB_ID]
LEFT JOIN [HR_CORE].[JOB_GRADES] AS [j0] ON [j].[DEFAULT_GRADE_ID] = [j0].[JOB_GRADE_ID]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0
2026-02-02 18:01:05.163 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[StructureId], [e].[Amount], [e].[CREATED_AT], [e].[CREATED_BY], [e].[ELEMENT_ID], [e].[EMPLOYEE_ID], [e].[IsActive], [e].[IS_DELETED], [e].[Percentage], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO], [s].[ElementId], [s].[CREATED_AT], [s].[CREATED_BY], [s].[DefaultPercentage], [s].[ElementNameAr], [s].[ElementType], [s].[IsBasic], [s].[IS_DELETED], [s].[IsGosiBase], [s].[IsRecurring], [s].[IsTaxable], [s].[UPDATED_AT], [s].[UPDATED_BY], [s].[VERSION_NO]
FROM [HR_PAYROLL].[EMPLOYEE_SALARY_STRUCTURE] AS [e]
INNER JOIN [HR_PAYROLL].[SALARY_ELEMENTS] AS [s] ON [e].[ELEMENT_ID] = [s].[ElementId]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0 AND [e].[IsActive] = CAST(1 AS tinyint)
2026-02-02 18:01:05.170 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[HRMS.Application.DTOs.Payroll.Configuration.EmployeeSalaryStructureDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-02 18:01:05.181 +03:00 [INF] Executed action HRMS.API.Controllers.Payroll.PayrollSettingsController.GetEmployeeStructure (HRMS.API) in 67.0198ms
2026-02-02 18:01:05.184 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Payroll.PayrollSettingsController.GetEmployeeStructure (HRMS.API)'
2026-02-02 18:01:05.186 +03:00 [INF] HTTP GET /api/PayrollSettings/employee-structure/23 responded 200 in 320.4656 ms
2026-02-02 18:01:05.188 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/PayrollSettings/employee-structure/23 - 200 null application/json; charset=utf-8 334.2836ms
2026-02-02 18:10:53.692 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/PayrollSettings/employee-structure/23 - null null
2026-02-02 18:10:53.724 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Payroll.PayrollSettingsController.GetEmployeeStructure (HRMS.API)'
2026-02-02 18:10:53.727 +03:00 [INF] Route matched with {action = "GetEmployeeStructure", controller = "PayrollSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[HRMS.Application.DTOs.Payroll.Configuration.EmployeeSalaryStructureDto]]] GetEmployeeStructure(Int32) on controller HRMS.API.Controllers.Payroll.PayrollSettingsController (HRMS.API).
2026-02-02 18:10:53.823 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO], [j].[JOB_ID], [j].[CREATED_AT], [j].[CREATED_BY], [j].[DEFAULT_GRADE_ID], [j].[DepartmentDeptId], [j].[IS_DELETED], [j].[IS_MEDICAL], [j].[JOB_TITLE_AR], [j].[JOB_TITLE_EN], [j].[UPDATED_AT], [j].[UPDATED_BY], [j].[VERSION_NO], [j0].[JOB_GRADE_ID], [j0].[BENEFITS_CONFIG], [j0].[CREATED_AT], [j0].[CREATED_BY], [j0].[DESCRIPTION], [j0].[GRADE_CODE], [j0].[GRADE_LEVEL], [j0].[GRADE_NAME_AR], [j0].[GRADE_NAME_EN], [j0].[IS_DELETED], [j0].[MAX_SALARY], [j0].[MIN_SALARY], [j0].[UPDATED_AT], [j0].[UPDATED_BY], [j0].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
INNER JOIN [HR_CORE].[JOBS] AS [j] ON [e].[JOB_ID] = [j].[JOB_ID]
LEFT JOIN [HR_CORE].[JOB_GRADES] AS [j0] ON [j].[DEFAULT_GRADE_ID] = [j0].[JOB_GRADE_ID]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0
2026-02-02 18:10:53.841 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[StructureId], [e].[Amount], [e].[CREATED_AT], [e].[CREATED_BY], [e].[ELEMENT_ID], [e].[EMPLOYEE_ID], [e].[IsActive], [e].[IS_DELETED], [e].[Percentage], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO], [s].[ElementId], [s].[CREATED_AT], [s].[CREATED_BY], [s].[DefaultPercentage], [s].[ElementNameAr], [s].[ElementType], [s].[IsBasic], [s].[IS_DELETED], [s].[IsGosiBase], [s].[IsRecurring], [s].[IsTaxable], [s].[UPDATED_AT], [s].[UPDATED_BY], [s].[VERSION_NO]
FROM [HR_PAYROLL].[EMPLOYEE_SALARY_STRUCTURE] AS [e]
INNER JOIN [HR_PAYROLL].[SALARY_ELEMENTS] AS [s] ON [e].[ELEMENT_ID] = [s].[ElementId]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0 AND [e].[IsActive] = CAST(1 AS tinyint)
2026-02-02 18:10:53.846 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[HRMS.Application.DTOs.Payroll.Configuration.EmployeeSalaryStructureDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-02 18:10:53.848 +03:00 [INF] Executed action HRMS.API.Controllers.Payroll.PayrollSettingsController.GetEmployeeStructure (HRMS.API) in 94.7165ms
2026-02-02 18:10:53.855 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Payroll.PayrollSettingsController.GetEmployeeStructure (HRMS.API)'
2026-02-02 18:10:53.857 +03:00 [INF] HTTP GET /api/PayrollSettings/employee-structure/23 responded 200 in 134.1109 ms
2026-02-02 18:10:53.860 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/PayrollSettings/employee-structure/23 - 200 null application/json; charset=utf-8 167.3687ms
2026-02-02 18:14:10.920 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/PayrollSettings/initialize-from-grade/23 - null 0
2026-02-02 18:14:11.127 +03:00 [INF] CORS policy execution successful.
2026-02-02 18:14:11.130 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Payroll.PayrollSettingsController.InitializeFromGrade (HRMS.API)'
2026-02-02 18:14:11.132 +03:00 [INF] Route matched with {action = "InitializeFromGrade", controller = "PayrollSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[System.Boolean]]] InitializeFromGrade(Int32) on controller HRMS.API.Controllers.Payroll.PayrollSettingsController (HRMS.API).
2026-02-02 18:14:11.151 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO], [j].[JOB_ID], [j].[CREATED_AT], [j].[CREATED_BY], [j].[DEFAULT_GRADE_ID], [j].[DepartmentDeptId], [j].[IS_DELETED], [j].[IS_MEDICAL], [j].[JOB_TITLE_AR], [j].[JOB_TITLE_EN], [j].[UPDATED_AT], [j].[UPDATED_BY], [j].[VERSION_NO], [j0].[JOB_GRADE_ID], [j0].[BENEFITS_CONFIG], [j0].[CREATED_AT], [j0].[CREATED_BY], [j0].[DESCRIPTION], [j0].[GRADE_CODE], [j0].[GRADE_LEVEL], [j0].[GRADE_NAME_AR], [j0].[GRADE_NAME_EN], [j0].[IS_DELETED], [j0].[MAX_SALARY], [j0].[MIN_SALARY], [j0].[UPDATED_AT], [j0].[UPDATED_BY], [j0].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
INNER JOIN [HR_CORE].[JOBS] AS [j] ON [e].[JOB_ID] = [j].[JOB_ID]
LEFT JOIN [HR_CORE].[JOB_GRADES] AS [j0] ON [j].[DEFAULT_GRADE_ID] = [j0].[JOB_GRADE_ID]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0
2026-02-02 18:14:11.161 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ElementId], [s].[CREATED_AT], [s].[CREATED_BY], [s].[DefaultPercentage], [s].[ElementNameAr], [s].[ElementType], [s].[IsBasic], [s].[IS_DELETED], [s].[IsGosiBase], [s].[IsRecurring], [s].[IsTaxable], [s].[UPDATED_AT], [s].[UPDATED_BY], [s].[VERSION_NO]
FROM [HR_PAYROLL].[SALARY_ELEMENTS] AS [s]
WHERE [s].[IsBasic] = CAST(1 AS tinyint)
2026-02-02 18:14:11.176 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[StructureId], [e].[Amount], [e].[CREATED_AT], [e].[CREATED_BY], [e].[ELEMENT_ID], [e].[EMPLOYEE_ID], [e].[IsActive], [e].[IS_DELETED], [e].[Percentage], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO]
FROM [HR_PAYROLL].[EMPLOYEE_SALARY_STRUCTURE] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0
2026-02-02 18:14:11.191 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__elementIds_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ElementId], [s].[CREATED_AT], [s].[CREATED_BY], [s].[DefaultPercentage], [s].[ElementNameAr], [s].[ElementType], [s].[IsBasic], [s].[IS_DELETED], [s].[IsGosiBase], [s].[IsRecurring], [s].[IsTaxable], [s].[UPDATED_AT], [s].[UPDATED_BY], [s].[VERSION_NO]
FROM [HR_PAYROLL].[SALARY_ELEMENTS] AS [s]
WHERE [s].[ElementId] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__elementIds_0) WITH ([value] int '$') AS [e]
)
2026-02-02 18:14:11.196 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO], [j].[JOB_ID], [j].[CREATED_AT], [j].[CREATED_BY], [j].[DEFAULT_GRADE_ID], [j].[DepartmentDeptId], [j].[IS_DELETED], [j].[IS_MEDICAL], [j].[JOB_TITLE_AR], [j].[JOB_TITLE_EN], [j].[UPDATED_AT], [j].[UPDATED_BY], [j].[VERSION_NO], [j0].[JOB_GRADE_ID], [j0].[BENEFITS_CONFIG], [j0].[CREATED_AT], [j0].[CREATED_BY], [j0].[DESCRIPTION], [j0].[GRADE_CODE], [j0].[GRADE_LEVEL], [j0].[GRADE_NAME_AR], [j0].[GRADE_NAME_EN], [j0].[IS_DELETED], [j0].[MAX_SALARY], [j0].[MIN_SALARY], [j0].[UPDATED_AT], [j0].[UPDATED_BY], [j0].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
INNER JOIN [HR_CORE].[JOBS] AS [j] ON [e].[JOB_ID] = [j].[JOB_ID]
LEFT JOIN [HR_CORE].[JOB_GRADES] AS [j0] ON [j].[DEFAULT_GRADE_ID] = [j0].[JOB_GRADE_ID]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0
2026-02-02 18:14:11.296 +03:00 [INF] Executed DbCommand (35ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p12='?' (DbType = DateTime2), @p13='?' (Size = 50), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (Size = 1) (DbType = Byte), @p17='?' (Size = 1) (DbType = Byte), @p18='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p19='?' (DbType = DateTime2), @p20='?' (Size = 50), @p21='?' (DbType = Int32), @p22='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p23='?' (DbType = DateTime2), @p24='?' (Size = 50), @p25='?' (DbType = Int32), @p26='?' (DbType = Int32), @p27='?' (Size = 1) (DbType = Byte), @p28='?' (Size = 1) (DbType = Byte), @p29='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p30='?' (DbType = DateTime2), @p31='?' (Size = 50), @p32='?' (DbType = Int32), @p33='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p34='?' (DbType = DateTime2), @p35='?' (Size = 50), @p36='?' (DbType = Int32), @p37='?' (DbType = Int32), @p38='?' (Size = 1) (DbType = Byte), @p39='?' (Size = 1) (DbType = Byte), @p40='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p41='?' (DbType = DateTime2), @p42='?' (Size = 50), @p43='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
DELETE FROM [HR_PAYROLL].[EMPLOYEE_SALARY_STRUCTURE]
OUTPUT 1
WHERE [StructureId] = @p9 AND [VERSION_NO] = @p10;
MERGE [HR_PAYROLL].[EMPLOYEE_SALARY_STRUCTURE] USING (
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, 0),
(@p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, 1),
(@p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, 2)) AS i ([Amount], [CREATED_AT], [CREATED_BY], [ELEMENT_ID], [EMPLOYEE_ID], [IsActive], [IS_DELETED], [Percentage], [UPDATED_AT], [UPDATED_BY], [VERSION_NO], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([Amount], [CREATED_AT], [CREATED_BY], [ELEMENT_ID], [EMPLOYEE_ID], [IsActive], [IS_DELETED], [Percentage], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
VALUES (i.[Amount], i.[CREATED_AT], i.[CREATED_BY], i.[ELEMENT_ID], i.[EMPLOYEE_ID], i.[IsActive], i.[IS_DELETED], i.[Percentage], i.[UPDATED_AT], i.[UPDATED_BY], i.[VERSION_NO])
OUTPUT INSERTED.[StructureId], i._Position;
2026-02-02 18:14:11.355 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200), @p9='?' (Size = 20), @p10='?' (Size = 50), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (DbType = Int64), @p16='?' (Size = 100), @p17='?' (Size = 200), @p18='?' (Size = 20), @p19='?' (Size = 50), @p20='?' (Size = 4000), @p21='?' (Size = 4000), @p22='?' (DbType = DateTime2), @p23='?' (Size = 50), @p24='?' (DbType = Int64), @p25='?' (Size = 100), @p26='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [HR_CORE].[AUDIT_LOGS] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, 0),
(@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, 1),
(@p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, 2)) AS i ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
VALUES (i.[ACTION_TYPE], i.[IP_ADDRESS], i.[NEW_VALUE], i.[OLD_VALUE], i.[PERFORMED_AT], i.[PERFORMED_BY], i.[RECORD_ID], i.[TABLE_NAME], i.[USER_AGENT])
OUTPUT INSERTED.[LOG_ID], i._Position;
2026-02-02 18:14:11.362 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[System.Boolean, System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-02 18:14:11.364 +03:00 [INF] Executed action HRMS.API.Controllers.Payroll.PayrollSettingsController.InitializeFromGrade (HRMS.API) in 227.8492ms
2026-02-02 18:14:11.371 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Payroll.PayrollSettingsController.InitializeFromGrade (HRMS.API)'
2026-02-02 18:14:11.373 +03:00 [INF] HTTP POST /api/PayrollSettings/initialize-from-grade/23 responded 200 in 246.2357 ms
2026-02-02 18:14:11.375 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/PayrollSettings/initialize-from-grade/23 - 200 null application/json; charset=utf-8 455.278ms
2026-02-02 18:14:18.763 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/PayrollSettings/employee-structure/23 - null null
2026-02-02 18:14:18.768 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Payroll.PayrollSettingsController.GetEmployeeStructure (HRMS.API)'
2026-02-02 18:14:18.772 +03:00 [INF] Route matched with {action = "GetEmployeeStructure", controller = "PayrollSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[HRMS.Application.DTOs.Payroll.Configuration.EmployeeSalaryStructureDto]]] GetEmployeeStructure(Int32) on controller HRMS.API.Controllers.Payroll.PayrollSettingsController (HRMS.API).
2026-02-02 18:14:18.816 +03:00 [INF] Executed DbCommand (38ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO], [j].[JOB_ID], [j].[CREATED_AT], [j].[CREATED_BY], [j].[DEFAULT_GRADE_ID], [j].[DepartmentDeptId], [j].[IS_DELETED], [j].[IS_MEDICAL], [j].[JOB_TITLE_AR], [j].[JOB_TITLE_EN], [j].[UPDATED_AT], [j].[UPDATED_BY], [j].[VERSION_NO], [j0].[JOB_GRADE_ID], [j0].[BENEFITS_CONFIG], [j0].[CREATED_AT], [j0].[CREATED_BY], [j0].[DESCRIPTION], [j0].[GRADE_CODE], [j0].[GRADE_LEVEL], [j0].[GRADE_NAME_AR], [j0].[GRADE_NAME_EN], [j0].[IS_DELETED], [j0].[MAX_SALARY], [j0].[MIN_SALARY], [j0].[UPDATED_AT], [j0].[UPDATED_BY], [j0].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
INNER JOIN [HR_CORE].[JOBS] AS [j] ON [e].[JOB_ID] = [j].[JOB_ID]
LEFT JOIN [HR_CORE].[JOB_GRADES] AS [j0] ON [j].[DEFAULT_GRADE_ID] = [j0].[JOB_GRADE_ID]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0
2026-02-02 18:14:18.835 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[StructureId], [e].[Amount], [e].[CREATED_AT], [e].[CREATED_BY], [e].[ELEMENT_ID], [e].[EMPLOYEE_ID], [e].[IsActive], [e].[IS_DELETED], [e].[Percentage], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO], [s].[ElementId], [s].[CREATED_AT], [s].[CREATED_BY], [s].[DefaultPercentage], [s].[ElementNameAr], [s].[ElementType], [s].[IsBasic], [s].[IS_DELETED], [s].[IsGosiBase], [s].[IsRecurring], [s].[IsTaxable], [s].[UPDATED_AT], [s].[UPDATED_BY], [s].[VERSION_NO]
FROM [HR_PAYROLL].[EMPLOYEE_SALARY_STRUCTURE] AS [e]
INNER JOIN [HR_PAYROLL].[SALARY_ELEMENTS] AS [s] ON [e].[ELEMENT_ID] = [s].[ElementId]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0 AND [e].[IsActive] = CAST(1 AS tinyint)
2026-02-02 18:14:18.840 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[HRMS.Application.DTOs.Payroll.Configuration.EmployeeSalaryStructureDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-02 18:14:18.843 +03:00 [INF] Executed action HRMS.API.Controllers.Payroll.PayrollSettingsController.GetEmployeeStructure (HRMS.API) in 66.1886ms
2026-02-02 18:14:18.845 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Payroll.PayrollSettingsController.GetEmployeeStructure (HRMS.API)'
2026-02-02 18:14:18.847 +03:00 [INF] HTTP GET /api/PayrollSettings/employee-structure/23 responded 200 in 79.8783 ms
2026-02-02 18:14:18.853 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/PayrollSettings/employee-structure/23 - 200 null application/json; charset=utf-8 90.5745ms
2026-02-02 18:14:29.902 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/PayrollSettings/employee-structure/17 - null null
2026-02-02 18:14:29.914 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Payroll.PayrollSettingsController.GetEmployeeStructure (HRMS.API)'
2026-02-02 18:14:29.922 +03:00 [INF] Route matched with {action = "GetEmployeeStructure", controller = "PayrollSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[HRMS.Application.DTOs.Payroll.Configuration.EmployeeSalaryStructureDto]]] GetEmployeeStructure(Int32) on controller HRMS.API.Controllers.Payroll.PayrollSettingsController (HRMS.API).
2026-02-02 18:14:29.982 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO], [j].[JOB_ID], [j].[CREATED_AT], [j].[CREATED_BY], [j].[DEFAULT_GRADE_ID], [j].[DepartmentDeptId], [j].[IS_DELETED], [j].[IS_MEDICAL], [j].[JOB_TITLE_AR], [j].[JOB_TITLE_EN], [j].[UPDATED_AT], [j].[UPDATED_BY], [j].[VERSION_NO], [j0].[JOB_GRADE_ID], [j0].[BENEFITS_CONFIG], [j0].[CREATED_AT], [j0].[CREATED_BY], [j0].[DESCRIPTION], [j0].[GRADE_CODE], [j0].[GRADE_LEVEL], [j0].[GRADE_NAME_AR], [j0].[GRADE_NAME_EN], [j0].[IS_DELETED], [j0].[MAX_SALARY], [j0].[MIN_SALARY], [j0].[UPDATED_AT], [j0].[UPDATED_BY], [j0].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
INNER JOIN [HR_CORE].[JOBS] AS [j] ON [e].[JOB_ID] = [j].[JOB_ID]
LEFT JOIN [HR_CORE].[JOB_GRADES] AS [j0] ON [j].[DEFAULT_GRADE_ID] = [j0].[JOB_GRADE_ID]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0
2026-02-02 18:14:30.028 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[StructureId], [e].[Amount], [e].[CREATED_AT], [e].[CREATED_BY], [e].[ELEMENT_ID], [e].[EMPLOYEE_ID], [e].[IsActive], [e].[IS_DELETED], [e].[Percentage], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO], [s].[ElementId], [s].[CREATED_AT], [s].[CREATED_BY], [s].[DefaultPercentage], [s].[ElementNameAr], [s].[ElementType], [s].[IsBasic], [s].[IS_DELETED], [s].[IsGosiBase], [s].[IsRecurring], [s].[IsTaxable], [s].[UPDATED_AT], [s].[UPDATED_BY], [s].[VERSION_NO]
FROM [HR_PAYROLL].[EMPLOYEE_SALARY_STRUCTURE] AS [e]
INNER JOIN [HR_PAYROLL].[SALARY_ELEMENTS] AS [s] ON [e].[ELEMENT_ID] = [s].[ElementId]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0 AND [e].[IsActive] = CAST(1 AS tinyint)
2026-02-02 18:14:30.060 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[HRMS.Application.DTOs.Payroll.Configuration.EmployeeSalaryStructureDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-02 18:14:30.063 +03:00 [INF] Executed action HRMS.API.Controllers.Payroll.PayrollSettingsController.GetEmployeeStructure (HRMS.API) in 83.934ms
2026-02-02 18:14:30.068 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Payroll.PayrollSettingsController.GetEmployeeStructure (HRMS.API)'
2026-02-02 18:14:30.071 +03:00 [INF] HTTP GET /api/PayrollSettings/employee-structure/17 responded 200 in 156.6642 ms
2026-02-02 18:14:30.074 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/PayrollSettings/employee-structure/17 - 200 null application/json; charset=utf-8 171.9368ms
2026-02-02 18:14:40.322 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/PayrollSettings/initialize-from-grade/17 - null 0
2026-02-02 18:14:40.333 +03:00 [INF] CORS policy execution successful.
2026-02-02 18:14:40.345 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Payroll.PayrollSettingsController.InitializeFromGrade (HRMS.API)'
2026-02-02 18:14:40.371 +03:00 [INF] Route matched with {action = "InitializeFromGrade", controller = "PayrollSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[System.Boolean]]] InitializeFromGrade(Int32) on controller HRMS.API.Controllers.Payroll.PayrollSettingsController (HRMS.API).
2026-02-02 18:14:40.407 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO], [j].[JOB_ID], [j].[CREATED_AT], [j].[CREATED_BY], [j].[DEFAULT_GRADE_ID], [j].[DepartmentDeptId], [j].[IS_DELETED], [j].[IS_MEDICAL], [j].[JOB_TITLE_AR], [j].[JOB_TITLE_EN], [j].[UPDATED_AT], [j].[UPDATED_BY], [j].[VERSION_NO], [j0].[JOB_GRADE_ID], [j0].[BENEFITS_CONFIG], [j0].[CREATED_AT], [j0].[CREATED_BY], [j0].[DESCRIPTION], [j0].[GRADE_CODE], [j0].[GRADE_LEVEL], [j0].[GRADE_NAME_AR], [j0].[GRADE_NAME_EN], [j0].[IS_DELETED], [j0].[MAX_SALARY], [j0].[MIN_SALARY], [j0].[UPDATED_AT], [j0].[UPDATED_BY], [j0].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
INNER JOIN [HR_CORE].[JOBS] AS [j] ON [e].[JOB_ID] = [j].[JOB_ID]
LEFT JOIN [HR_CORE].[JOB_GRADES] AS [j0] ON [j].[DEFAULT_GRADE_ID] = [j0].[JOB_GRADE_ID]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0
2026-02-02 18:14:40.439 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ElementId], [s].[CREATED_AT], [s].[CREATED_BY], [s].[DefaultPercentage], [s].[ElementNameAr], [s].[ElementType], [s].[IsBasic], [s].[IS_DELETED], [s].[IsGosiBase], [s].[IsRecurring], [s].[IsTaxable], [s].[UPDATED_AT], [s].[UPDATED_BY], [s].[VERSION_NO]
FROM [HR_PAYROLL].[SALARY_ELEMENTS] AS [s]
WHERE [s].[IsBasic] = CAST(1 AS tinyint)
2026-02-02 18:14:40.448 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[StructureId], [e].[Amount], [e].[CREATED_AT], [e].[CREATED_BY], [e].[ELEMENT_ID], [e].[EMPLOYEE_ID], [e].[IsActive], [e].[IS_DELETED], [e].[Percentage], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO]
FROM [HR_PAYROLL].[EMPLOYEE_SALARY_STRUCTURE] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0
2026-02-02 18:14:40.461 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__elementIds_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ElementId], [s].[CREATED_AT], [s].[CREATED_BY], [s].[DefaultPercentage], [s].[ElementNameAr], [s].[ElementType], [s].[IsBasic], [s].[IS_DELETED], [s].[IsGosiBase], [s].[IsRecurring], [s].[IsTaxable], [s].[UPDATED_AT], [s].[UPDATED_BY], [s].[VERSION_NO]
FROM [HR_PAYROLL].[SALARY_ELEMENTS] AS [s]
WHERE [s].[ElementId] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__elementIds_0) WITH ([value] int '$') AS [e]
)
2026-02-02 18:14:40.466 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO], [j].[JOB_ID], [j].[CREATED_AT], [j].[CREATED_BY], [j].[DEFAULT_GRADE_ID], [j].[DepartmentDeptId], [j].[IS_DELETED], [j].[IS_MEDICAL], [j].[JOB_TITLE_AR], [j].[JOB_TITLE_EN], [j].[UPDATED_AT], [j].[UPDATED_BY], [j].[VERSION_NO], [j0].[JOB_GRADE_ID], [j0].[BENEFITS_CONFIG], [j0].[CREATED_AT], [j0].[CREATED_BY], [j0].[DESCRIPTION], [j0].[GRADE_CODE], [j0].[GRADE_LEVEL], [j0].[GRADE_NAME_AR], [j0].[GRADE_NAME_EN], [j0].[IS_DELETED], [j0].[MAX_SALARY], [j0].[MIN_SALARY], [j0].[UPDATED_AT], [j0].[UPDATED_BY], [j0].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
INNER JOIN [HR_CORE].[JOBS] AS [j] ON [e].[JOB_ID] = [j].[JOB_ID]
LEFT JOIN [HR_CORE].[JOB_GRADES] AS [j0] ON [j].[DEFAULT_GRADE_ID] = [j0].[JOB_GRADE_ID]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0
2026-02-02 18:14:40.498 +03:00 [INF] Executed DbCommand (22ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p12='?' (DbType = DateTime2), @p13='?' (Size = 50), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (Size = 1) (DbType = Byte), @p17='?' (Size = 1) (DbType = Byte), @p18='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p19='?' (DbType = DateTime2), @p20='?' (Size = 50), @p21='?' (DbType = Int32), @p22='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p23='?' (DbType = DateTime2), @p24='?' (Size = 50), @p25='?' (DbType = Int32), @p26='?' (DbType = Int32), @p27='?' (Size = 1) (DbType = Byte), @p28='?' (Size = 1) (DbType = Byte), @p29='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p30='?' (DbType = DateTime2), @p31='?' (Size = 50), @p32='?' (DbType = Int32), @p33='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p34='?' (DbType = DateTime2), @p35='?' (Size = 50), @p36='?' (DbType = Int32), @p37='?' (DbType = Int32), @p38='?' (Size = 1) (DbType = Byte), @p39='?' (Size = 1) (DbType = Byte), @p40='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p41='?' (DbType = DateTime2), @p42='?' (Size = 50), @p43='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
DELETE FROM [HR_PAYROLL].[EMPLOYEE_SALARY_STRUCTURE]
OUTPUT 1
WHERE [StructureId] = @p9 AND [VERSION_NO] = @p10;
MERGE [HR_PAYROLL].[EMPLOYEE_SALARY_STRUCTURE] USING (
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, 0),
(@p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, 1),
(@p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, 2)) AS i ([Amount], [CREATED_AT], [CREATED_BY], [ELEMENT_ID], [EMPLOYEE_ID], [IsActive], [IS_DELETED], [Percentage], [UPDATED_AT], [UPDATED_BY], [VERSION_NO], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([Amount], [CREATED_AT], [CREATED_BY], [ELEMENT_ID], [EMPLOYEE_ID], [IsActive], [IS_DELETED], [Percentage], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
VALUES (i.[Amount], i.[CREATED_AT], i.[CREATED_BY], i.[ELEMENT_ID], i.[EMPLOYEE_ID], i.[IsActive], i.[IS_DELETED], i.[Percentage], i.[UPDATED_AT], i.[UPDATED_BY], i.[VERSION_NO])
OUTPUT INSERTED.[StructureId], i._Position;
2026-02-02 18:14:40.526 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200), @p9='?' (Size = 20), @p10='?' (Size = 50), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (DbType = Int64), @p16='?' (Size = 100), @p17='?' (Size = 200), @p18='?' (Size = 20), @p19='?' (Size = 50), @p20='?' (Size = 4000), @p21='?' (Size = 4000), @p22='?' (DbType = DateTime2), @p23='?' (Size = 50), @p24='?' (DbType = Int64), @p25='?' (Size = 100), @p26='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [HR_CORE].[AUDIT_LOGS] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, 0),
(@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, 1),
(@p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, 2)) AS i ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
VALUES (i.[ACTION_TYPE], i.[IP_ADDRESS], i.[NEW_VALUE], i.[OLD_VALUE], i.[PERFORMED_AT], i.[PERFORMED_BY], i.[RECORD_ID], i.[TABLE_NAME], i.[USER_AGENT])
OUTPUT INSERTED.[LOG_ID], i._Position;
2026-02-02 18:14:40.533 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[System.Boolean, System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-02 18:14:40.536 +03:00 [INF] Executed action HRMS.API.Controllers.Payroll.PayrollSettingsController.InitializeFromGrade (HRMS.API) in 149.4007ms
2026-02-02 18:14:40.539 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Payroll.PayrollSettingsController.InitializeFromGrade (HRMS.API)'
2026-02-02 18:14:40.541 +03:00 [INF] HTTP POST /api/PayrollSettings/initialize-from-grade/17 responded 200 in 207.5308 ms
2026-02-02 18:14:40.547 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/PayrollSettings/initialize-from-grade/17 - 200 null application/json; charset=utf-8 224.702ms
2026-02-02 18:14:45.428 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/PayrollSettings/employee-structure/17 - null null
2026-02-02 18:14:45.435 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Payroll.PayrollSettingsController.GetEmployeeStructure (HRMS.API)'
2026-02-02 18:14:45.438 +03:00 [INF] Route matched with {action = "GetEmployeeStructure", controller = "PayrollSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[HRMS.Application.DTOs.Payroll.Configuration.EmployeeSalaryStructureDto]]] GetEmployeeStructure(Int32) on controller HRMS.API.Controllers.Payroll.PayrollSettingsController (HRMS.API).
2026-02-02 18:14:45.481 +03:00 [INF] Executed DbCommand (36ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO], [j].[JOB_ID], [j].[CREATED_AT], [j].[CREATED_BY], [j].[DEFAULT_GRADE_ID], [j].[DepartmentDeptId], [j].[IS_DELETED], [j].[IS_MEDICAL], [j].[JOB_TITLE_AR], [j].[JOB_TITLE_EN], [j].[UPDATED_AT], [j].[UPDATED_BY], [j].[VERSION_NO], [j0].[JOB_GRADE_ID], [j0].[BENEFITS_CONFIG], [j0].[CREATED_AT], [j0].[CREATED_BY], [j0].[DESCRIPTION], [j0].[GRADE_CODE], [j0].[GRADE_LEVEL], [j0].[GRADE_NAME_AR], [j0].[GRADE_NAME_EN], [j0].[IS_DELETED], [j0].[MAX_SALARY], [j0].[MIN_SALARY], [j0].[UPDATED_AT], [j0].[UPDATED_BY], [j0].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
INNER JOIN [HR_CORE].[JOBS] AS [j] ON [e].[JOB_ID] = [j].[JOB_ID]
LEFT JOIN [HR_CORE].[JOB_GRADES] AS [j0] ON [j].[DEFAULT_GRADE_ID] = [j0].[JOB_GRADE_ID]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0
2026-02-02 18:14:45.496 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[StructureId], [e].[Amount], [e].[CREATED_AT], [e].[CREATED_BY], [e].[ELEMENT_ID], [e].[EMPLOYEE_ID], [e].[IsActive], [e].[IS_DELETED], [e].[Percentage], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO], [s].[ElementId], [s].[CREATED_AT], [s].[CREATED_BY], [s].[DefaultPercentage], [s].[ElementNameAr], [s].[ElementType], [s].[IsBasic], [s].[IS_DELETED], [s].[IsGosiBase], [s].[IsRecurring], [s].[IsTaxable], [s].[UPDATED_AT], [s].[UPDATED_BY], [s].[VERSION_NO]
FROM [HR_PAYROLL].[EMPLOYEE_SALARY_STRUCTURE] AS [e]
INNER JOIN [HR_PAYROLL].[SALARY_ELEMENTS] AS [s] ON [e].[ELEMENT_ID] = [s].[ElementId]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0 AND [e].[IsActive] = CAST(1 AS tinyint)
2026-02-02 18:14:45.501 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[HRMS.Application.DTOs.Payroll.Configuration.EmployeeSalaryStructureDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-02 18:14:45.503 +03:00 [INF] Executed action HRMS.API.Controllers.Payroll.PayrollSettingsController.GetEmployeeStructure (HRMS.API) in 60.603ms
2026-02-02 18:14:45.505 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Payroll.PayrollSettingsController.GetEmployeeStructure (HRMS.API)'
2026-02-02 18:14:45.507 +03:00 [INF] HTTP GET /api/PayrollSettings/employee-structure/17 responded 200 in 72.2355 ms
2026-02-02 18:14:45.513 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/PayrollSettings/employee-structure/17 - 200 null application/json; charset=utf-8 84.5014ms
2026-02-02 18:14:54.974 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/PayrollSettings/employee-structure/23 - null null
2026-02-02 18:14:54.981 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Payroll.PayrollSettingsController.GetEmployeeStructure (HRMS.API)'
2026-02-02 18:14:54.984 +03:00 [INF] Route matched with {action = "GetEmployeeStructure", controller = "PayrollSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[HRMS.Application.DTOs.Payroll.Configuration.EmployeeSalaryStructureDto]]] GetEmployeeStructure(Int32) on controller HRMS.API.Controllers.Payroll.PayrollSettingsController (HRMS.API).
2026-02-02 18:14:55.028 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO], [j].[JOB_ID], [j].[CREATED_AT], [j].[CREATED_BY], [j].[DEFAULT_GRADE_ID], [j].[DepartmentDeptId], [j].[IS_DELETED], [j].[IS_MEDICAL], [j].[JOB_TITLE_AR], [j].[JOB_TITLE_EN], [j].[UPDATED_AT], [j].[UPDATED_BY], [j].[VERSION_NO], [j0].[JOB_GRADE_ID], [j0].[BENEFITS_CONFIG], [j0].[CREATED_AT], [j0].[CREATED_BY], [j0].[DESCRIPTION], [j0].[GRADE_CODE], [j0].[GRADE_LEVEL], [j0].[GRADE_NAME_AR], [j0].[GRADE_NAME_EN], [j0].[IS_DELETED], [j0].[MAX_SALARY], [j0].[MIN_SALARY], [j0].[UPDATED_AT], [j0].[UPDATED_BY], [j0].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
INNER JOIN [HR_CORE].[JOBS] AS [j] ON [e].[JOB_ID] = [j].[JOB_ID]
LEFT JOIN [HR_CORE].[JOB_GRADES] AS [j0] ON [j].[DEFAULT_GRADE_ID] = [j0].[JOB_GRADE_ID]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0
2026-02-02 18:14:55.040 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[StructureId], [e].[Amount], [e].[CREATED_AT], [e].[CREATED_BY], [e].[ELEMENT_ID], [e].[EMPLOYEE_ID], [e].[IsActive], [e].[IS_DELETED], [e].[Percentage], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO], [s].[ElementId], [s].[CREATED_AT], [s].[CREATED_BY], [s].[DefaultPercentage], [s].[ElementNameAr], [s].[ElementType], [s].[IsBasic], [s].[IS_DELETED], [s].[IsGosiBase], [s].[IsRecurring], [s].[IsTaxable], [s].[UPDATED_AT], [s].[UPDATED_BY], [s].[VERSION_NO]
FROM [HR_PAYROLL].[EMPLOYEE_SALARY_STRUCTURE] AS [e]
INNER JOIN [HR_PAYROLL].[SALARY_ELEMENTS] AS [s] ON [e].[ELEMENT_ID] = [s].[ElementId]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0 AND [e].[IsActive] = CAST(1 AS tinyint)
2026-02-02 18:14:55.045 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[HRMS.Application.DTOs.Payroll.Configuration.EmployeeSalaryStructureDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-02 18:14:55.047 +03:00 [INF] Executed action HRMS.API.Controllers.Payroll.PayrollSettingsController.GetEmployeeStructure (HRMS.API) in 21.6008ms
2026-02-02 18:14:55.051 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Payroll.PayrollSettingsController.GetEmployeeStructure (HRMS.API)'
2026-02-02 18:14:55.059 +03:00 [INF] HTTP GET /api/PayrollSettings/employee-structure/23 responded 200 in 78.7967 ms
2026-02-02 18:14:55.062 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/PayrollSettings/employee-structure/23 - 200 null application/json; charset=utf-8 88.5459ms
2026-02-02 22:08:46.254 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Countries - null null
2026-02-02 22:08:46.288 +03:00 [INF] CORS policy execution successful.
2026-02-02 22:08:46.311 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Core.CountriesController.GetAll (HRMS.API)'
2026-02-02 22:08:46.394 +03:00 [INF] Route matched with {action = "GetAll", controller = "Countries"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(HRMS.Application.Features.Core.Countries.Queries.GetAllCountries.GetAllCountriesQuery) on controller HRMS.API.Controllers.Core.CountriesController (HRMS.API).
2026-02-02 22:08:46.933 +03:00 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [HR_CORE].[COUNTRIES] AS [c]
2026-02-02 22:08:47.271 +03:00 [INF] Executed DbCommand (130ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[COUNTRY_ID], [c].[CITIZENSHIP_NAME_AR], [c].[CITIZENSHIP_NAME_EN], [c].[COUNTRY_NAME_AR], [c].[COUNTRY_NAME_EN], [c].[ISO_CODE], [c].[CREATED_AT], [c].[CREATED_BY], [c].[IS_DELETED], [c].[UPDATED_AT], [c].[UPDATED_BY], [c].[VERSION_NO], (
    SELECT COUNT(*)
    FROM [HR_CORE].[CITIES] AS [c0]
    WHERE [c].[COUNTRY_ID] = [c0].[COUNTRY_ID])
FROM [HR_CORE].[COUNTRIES] AS [c]
ORDER BY [c].[COUNTRY_NAME_AR]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2026-02-02 22:08:47.422 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[HRMS.Application.DTOs.Core.PagedResult`1[[HRMS.Application.DTOs.Core.CountryListDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-02 22:08:47.459 +03:00 [INF] Executed action HRMS.API.Controllers.Core.CountriesController.GetAll (HRMS.API) in 1033.6829ms
2026-02-02 22:08:47.462 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Core.CountriesController.GetAll (HRMS.API)'
2026-02-02 22:08:47.464 +03:00 [INF] HTTP GET /api/Countries responded 200 in 1178.9263 ms
2026-02-02 22:08:47.469 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Countries - 200 null application/json; charset=utf-8 1216.5737ms
2026-02-02 22:14:43.436 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:5001/api/Auth/login - null null
2026-02-02 22:14:43.503 +03:00 [INF] CORS policy execution successful.
2026-02-02 22:14:43.517 +03:00 [INF] HTTP OPTIONS /api/Auth/login responded 204 in 16.1944 ms
2026-02-02 22:14:43.521 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:5001/api/Auth/login - 204 null null 85.982ms
2026-02-02 22:14:43.526 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Auth/login - application/json 74
2026-02-02 22:14:43.536 +03:00 [INF] CORS policy execution successful.
2026-02-02 22:14:43.538 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.AuthController.Login (HRMS.API)'
2026-02-02 22:14:43.565 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(HRMS.Application.DTOs.Auth.LoginRequest) on controller HRMS.API.Controllers.AuthController (HRMS.API).
2026-02-02 22:14:43.880 +03:00 [INF] Executed DbCommand (26ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[EmployeeId], [a].[FullNameAr], [a].[FullNameEn], [a].[IsActive], [a].[LastLoginAt], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2026-02-02 22:14:44.563 +03:00 [INF] Executed DbCommand (27ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[EmployeeId], [a].[FullNameAr], [a].[FullNameEn], [a].[IsActive], [a].[LastLoginAt], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2026-02-02 22:14:44.937 +03:00 [INF] Executed DbCommand (199ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[EmployeeId], [a].[FullNameAr], [a].[FullNameEn], [a].[IsActive], [a].[LastLoginAt], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2026-02-02 22:14:45.938 +03:00 [INF] Executed DbCommand (737ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200), @p31='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (Size = 4000), @p32='?' (Size = 4000), @p11='?' (DbType = DateTime2), @p12='?' (Size = 256), @p13='?' (DbType = Boolean), @p14='?' (DbType = Int32), @p15='?' (Size = 4000), @p16='?' (Size = 4000), @p17='?' (DbType = Boolean), @p18='?' (DbType = DateTime2), @p19='?' (DbType = Boolean), @p20='?' (DbType = DateTimeOffset), @p21='?' (Size = 256), @p22='?' (Size = 256), @p23='?' (Size = 4000), @p24='?' (Size = 4000), @p25='?' (DbType = Boolean), @p26='?' (Size = 4000), @p27='?' (DbType = DateTime2), @p28='?' (Size = 4000), @p29='?' (DbType = Boolean), @p30='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p9, [ConcurrencyStamp] = @p10, [CreatedAt] = @p11, [Email] = @p12, [EmailConfirmed] = @p13, [EmployeeId] = @p14, [FullNameAr] = @p15, [FullNameEn] = @p16, [IsActive] = @p17, [LastLoginAt] = @p18, [LockoutEnabled] = @p19, [LockoutEnd] = @p20, [NormalizedEmail] = @p21, [NormalizedUserName] = @p22, [PasswordHash] = @p23, [PhoneNumber] = @p24, [PhoneNumberConfirmed] = @p25, [RefreshToken] = @p26, [RefreshTokenExpiryTime] = @p27, [SecurityStamp] = @p28, [TwoFactorEnabled] = @p29, [UserName] = @p30
OUTPUT 1
WHERE [Id] = @p31 AND [ConcurrencyStamp] = @p32;
2026-02-02 22:14:46.916 +03:00 [INF] Executed DbCommand (794ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2026-02-02 22:14:48.462 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[EmployeeId], [a].[FullNameAr], [a].[FullNameEn], [a].[IsActive], [a].[LastLoginAt], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2026-02-02 22:14:48.500 +03:00 [INF] Executed DbCommand (30ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[EmployeeId], [a].[FullNameAr], [a].[FullNameEn], [a].[IsActive], [a].[LastLoginAt], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2026-02-02 22:14:48.565 +03:00 [INF] Executed DbCommand (32ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200), @p31='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (Size = 4000), @p32='?' (Size = 4000), @p11='?' (DbType = DateTime2), @p12='?' (Size = 256), @p13='?' (DbType = Boolean), @p14='?' (DbType = Int32), @p15='?' (Size = 4000), @p16='?' (Size = 4000), @p17='?' (DbType = Boolean), @p18='?' (DbType = DateTime2), @p19='?' (DbType = Boolean), @p20='?' (DbType = DateTimeOffset), @p21='?' (Size = 256), @p22='?' (Size = 256), @p23='?' (Size = 4000), @p24='?' (Size = 4000), @p25='?' (DbType = Boolean), @p26='?' (Size = 4000), @p27='?' (DbType = DateTime2), @p28='?' (Size = 4000), @p29='?' (DbType = Boolean), @p30='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p9, [ConcurrencyStamp] = @p10, [CreatedAt] = @p11, [Email] = @p12, [EmailConfirmed] = @p13, [EmployeeId] = @p14, [FullNameAr] = @p15, [FullNameEn] = @p16, [IsActive] = @p17, [LastLoginAt] = @p18, [LockoutEnabled] = @p19, [LockoutEnd] = @p20, [NormalizedEmail] = @p21, [NormalizedUserName] = @p22, [PasswordHash] = @p23, [PhoneNumber] = @p24, [PhoneNumberConfirmed] = @p25, [RefreshToken] = @p26, [RefreshTokenExpiryTime] = @p27, [SecurityStamp] = @p28, [TwoFactorEnabled] = @p29, [UserName] = @p30
OUTPUT 1
WHERE [Id] = @p31 AND [ConcurrencyStamp] = @p32;
2026-02-02 22:14:48.740 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[HRMS.Application.DTOs.Auth.AuthResponse, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-02 22:14:48.768 +03:00 [INF] Executed action HRMS.API.Controllers.AuthController.Login (HRMS.API) in 5191.2343ms
2026-02-02 22:14:48.783 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.AuthController.Login (HRMS.API)'
2026-02-02 22:14:48.785 +03:00 [INF] HTTP POST /api/Auth/login responded 200 in 5249.4594 ms
2026-02-02 22:14:48.790 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Auth/login - 200 null application/json; charset=utf-8 5264.152ms
2026-02-02 22:14:58.494 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Countries - null null
2026-02-02 22:14:59.083 +03:00 [INF] CORS policy execution successful.
2026-02-02 22:14:59.459 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Cities - null null
2026-02-02 22:14:59.501 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Core.CountriesController.GetAll (HRMS.API)'
2026-02-02 22:14:59.647 +03:00 [INF] CORS policy execution successful.
2026-02-02 22:14:59.648 +03:00 [INF] Route matched with {action = "GetAll", controller = "Countries"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(HRMS.Application.Features.Core.Countries.Queries.GetAllCountries.GetAllCountriesQuery) on controller HRMS.API.Controllers.Core.CountriesController (HRMS.API).
2026-02-02 22:14:59.650 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Core.CitiesController.GetAll (HRMS.API)'
2026-02-02 22:14:59.685 +03:00 [INF] Route matched with {action = "GetAll", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(HRMS.Application.Features.Core.Cities.Queries.GetAllCities.GetAllCitiesQuery) on controller HRMS.API.Controllers.Core.CitiesController (HRMS.API).
2026-02-02 22:14:59.729 +03:00 [INF] Executed DbCommand (66ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [HR_CORE].[COUNTRIES] AS [c]
2026-02-02 22:14:59.872 +03:00 [INF] Executed DbCommand (97ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[COUNTRY_ID], [c].[CITIZENSHIP_NAME_AR], [c].[CITIZENSHIP_NAME_EN], [c].[COUNTRY_NAME_AR], [c].[COUNTRY_NAME_EN], [c].[ISO_CODE], [c].[CREATED_AT], [c].[CREATED_BY], [c].[IS_DELETED], [c].[UPDATED_AT], [c].[UPDATED_BY], [c].[VERSION_NO], (
    SELECT COUNT(*)
    FROM [HR_CORE].[CITIES] AS [c0]
    WHERE [c].[COUNTRY_ID] = [c0].[COUNTRY_ID])
FROM [HR_CORE].[COUNTRIES] AS [c]
ORDER BY [c].[COUNTRY_NAME_AR]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2026-02-02 22:14:59.887 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[HRMS.Application.DTOs.Core.PagedResult`1[[HRMS.Application.DTOs.Core.CountryListDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-02 22:14:59.890 +03:00 [INF] Executed action HRMS.API.Controllers.Core.CountriesController.GetAll (HRMS.API) in 229.6985ms
2026-02-02 22:14:59.892 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Core.CountriesController.GetAll (HRMS.API)'
2026-02-02 22:14:59.894 +03:00 [INF] HTTP GET /api/Countries responded 200 in 810.1023 ms
2026-02-02 22:14:59.896 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Countries - 200 null application/json; charset=utf-8 1401.4225ms
2026-02-02 22:14:59.898 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [HR_CORE].[CITIES] AS [c]
2026-02-02 22:15:00.189 +03:00 [INF] Executed DbCommand (209ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[CITY_ID], [c1].[CITY_NAME_AR], [c1].[CITY_NAME_EN], [c0].[COUNTRY_NAME_AR], [c1].[COUNTRY_ID], [c1].[CREATED_AT], [c1].[CREATED_BY], [c1].[IS_DELETED], [c1].[UPDATED_AT], [c1].[UPDATED_BY], [c1].[VERSION_NO]
FROM (
    SELECT [c].[CITY_ID], [c].[CITY_NAME_AR], [c].[CITY_NAME_EN], [c].[COUNTRY_ID], [c].[CREATED_AT], [c].[CREATED_BY], [c].[IS_DELETED], [c].[UPDATED_AT], [c].[UPDATED_BY], [c].[VERSION_NO]
    FROM [HR_CORE].[CITIES] AS [c]
    ORDER BY [c].[CITY_NAME_AR]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [c1]
INNER JOIN [HR_CORE].[COUNTRIES] AS [c0] ON [c1].[COUNTRY_ID] = [c0].[COUNTRY_ID]
ORDER BY [c1].[CITY_NAME_AR]
2026-02-02 22:15:00.771 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[HRMS.Application.DTOs.Core.PagedResult`1[[HRMS.Application.DTOs.Core.CityListDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-02 22:15:00.785 +03:00 [INF] Executed action HRMS.API.Controllers.Core.CitiesController.GetAll (HRMS.API) in 1073.0619ms
2026-02-02 22:15:00.787 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Core.CitiesController.GetAll (HRMS.API)'
2026-02-02 22:15:00.788 +03:00 [INF] HTTP GET /api/Cities responded 200 in 1141.8705 ms
2026-02-02 22:15:00.791 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Cities - 200 null application/json; charset=utf-8 1331.7675ms
2026-02-02 22:15:04.497 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/JobGrades - null null
2026-02-02 22:15:04.562 +03:00 [INF] CORS policy execution successful.
2026-02-02 22:15:04.563 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Core.JobGradesController.GetAll (HRMS.API)'
2026-02-02 22:15:04.584 +03:00 [INF] Route matched with {action = "GetAll", controller = "JobGrades"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(HRMS.Application.Features.Core.JobGrades.Queries.GetAllJobGrades.GetAllJobGradesQuery) on controller HRMS.API.Controllers.Core.JobGradesController (HRMS.API).
2026-02-02 22:15:04.649 +03:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [HR_CORE].[JOB_GRADES] AS [j]
WHERE [j].[IS_DELETED] = CAST(0 AS tinyint)
2026-02-02 22:15:05.127 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [j].[JOB_GRADE_ID] AS [JobGradeId], [j].[GRADE_CODE] AS [GradeCode], [j].[GRADE_NAME_AR] AS [GradeNameAr], [j].[GRADE_NAME_EN] AS [GradeNameEn], [j].[GRADE_LEVEL] AS [GradeLevel], [j].[MIN_SALARY] AS [MinSalary], [j].[MAX_SALARY] AS [MaxSalary]
FROM [HR_CORE].[JOB_GRADES] AS [j]
WHERE [j].[IS_DELETED] = CAST(0 AS tinyint)
ORDER BY [j].[GRADE_LEVEL]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2026-02-02 22:15:05.140 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[HRMS.Application.DTOs.Core.PagedResult`1[[HRMS.Application.DTOs.Core.JobGradeListDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-02 22:15:05.156 +03:00 [INF] Executed action HRMS.API.Controllers.Core.JobGradesController.GetAll (HRMS.API) in 569.3292ms
2026-02-02 22:15:05.158 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Core.JobGradesController.GetAll (HRMS.API)'
2026-02-02 22:15:05.160 +03:00 [INF] HTTP GET /api/JobGrades responded 200 in 598.4354 ms
2026-02-02 22:15:05.164 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/JobGrades - 200 null application/json; charset=utf-8 666.9586ms
2026-02-02 22:17:30.409 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Jobs - null null
2026-02-02 22:17:30.517 +03:00 [INF] CORS policy execution successful.
2026-02-02 22:17:30.519 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Core.JobsController.GetAll (HRMS.API)'
2026-02-02 22:17:30.541 +03:00 [INF] Route matched with {action = "GetAll", controller = "Jobs"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(HRMS.Application.Features.Core.Jobs.Queries.GetAllJobs.GetAllJobsQuery) on controller HRMS.API.Controllers.Core.JobsController (HRMS.API).
2026-02-02 22:17:30.598 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [HR_CORE].[JOBS] AS [j]
WHERE [j].[IS_DELETED] = CAST(0 AS tinyint)
2026-02-02 22:17:30.643 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [j1].[JOB_ID] AS [JobId], [j1].[JOB_TITLE_AR] AS [JobTitleAr], [j1].[JOB_TITLE_EN] AS [JobTitleEn], [j1].[DEFAULT_GRADE_ID] AS [DefaultGradeId], [j1].[IS_MEDICAL] AS [IsMedical], [j0].[GRADE_NAME_AR] AS [GradeNameAr]
FROM (
    SELECT [j].[JOB_ID], [j].[DEFAULT_GRADE_ID], [j].[IS_MEDICAL], [j].[JOB_TITLE_AR], [j].[JOB_TITLE_EN]
    FROM [HR_CORE].[JOBS] AS [j]
    WHERE [j].[IS_DELETED] = CAST(0 AS tinyint)
    ORDER BY [j].[JOB_TITLE_AR]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [j1]
LEFT JOIN [HR_CORE].[JOB_GRADES] AS [j0] ON [j1].[DEFAULT_GRADE_ID] = [j0].[JOB_GRADE_ID]
ORDER BY [j1].[JOB_TITLE_AR]
2026-02-02 22:17:30.651 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[HRMS.Application.DTOs.Core.PagedResult`1[[HRMS.Application.DTOs.Core.JobDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-02 22:17:30.685 +03:00 [INF] Executed action HRMS.API.Controllers.Core.JobsController.GetAll (HRMS.API) in 137.7733ms
2026-02-02 22:17:30.705 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Core.JobsController.GetAll (HRMS.API)'
2026-02-02 22:17:30.727 +03:00 [INF] HTTP GET /api/Jobs responded 200 in 210.3531 ms
2026-02-02 22:17:30.730 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Jobs - 200 null application/json; charset=utf-8 320.7674ms
2026-02-02 22:17:38.293 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/JobGrades - null null
2026-02-02 22:17:38.325 +03:00 [INF] CORS policy execution successful.
2026-02-02 22:17:38.333 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Core.JobGradesController.GetAll (HRMS.API)'
2026-02-02 22:17:38.334 +03:00 [INF] Route matched with {action = "GetAll", controller = "JobGrades"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(HRMS.Application.Features.Core.JobGrades.Queries.GetAllJobGrades.GetAllJobGradesQuery) on controller HRMS.API.Controllers.Core.JobGradesController (HRMS.API).
2026-02-02 22:17:38.358 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [HR_CORE].[JOB_GRADES] AS [j]
WHERE [j].[IS_DELETED] = CAST(0 AS tinyint)
2026-02-02 22:17:38.397 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [j].[JOB_GRADE_ID] AS [JobGradeId], [j].[GRADE_CODE] AS [GradeCode], [j].[GRADE_NAME_AR] AS [GradeNameAr], [j].[GRADE_NAME_EN] AS [GradeNameEn], [j].[GRADE_LEVEL] AS [GradeLevel], [j].[MIN_SALARY] AS [MinSalary], [j].[MAX_SALARY] AS [MaxSalary]
FROM [HR_CORE].[JOB_GRADES] AS [j]
WHERE [j].[IS_DELETED] = CAST(0 AS tinyint)
ORDER BY [j].[GRADE_LEVEL]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2026-02-02 22:17:38.418 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[HRMS.Application.DTOs.Core.PagedResult`1[[HRMS.Application.DTOs.Core.JobGradeListDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-02 22:17:38.440 +03:00 [INF] Executed action HRMS.API.Controllers.Core.JobGradesController.GetAll (HRMS.API) in 103.4082ms
2026-02-02 22:17:38.445 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Core.JobGradesController.GetAll (HRMS.API)'
2026-02-02 22:17:38.456 +03:00 [INF] HTTP GET /api/JobGrades responded 200 in 131.7242 ms
2026-02-02 22:17:38.460 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/JobGrades - 200 null application/json; charset=utf-8 166.2244ms
2026-02-02 22:27:49.935 +03:00 [INF] üöÄ Starting HRMS Hospital API...
2026-02-02 22:27:58.458 +03:00 [INF] ‚úÖ HRMS Hospital API started successfully
2026-02-02 22:27:58.558 +03:00 [INF] User profile is available. Using 'C:\Users\MT\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-02-02 22:28:00.443 +03:00 [INF] Now listening on: https://localhost:5001
2026-02-02 22:28:03.067 +03:00 [INF] Now listening on: http://localhost:5000
2026-02-02 22:28:04.380 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-02 22:28:04.407 +03:00 [INF] Hosting environment: Development
2026-02-02 22:28:04.411 +03:00 [INF] Content root path: D:\HRMS_Hospital\Backend\HRMS\HRMS.API
2026-02-02 22:28:04.519 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - null null
2026-02-02 22:28:10.277 +03:00 [INF] HTTP GET /swagger/index.html responded 200 in 4140.3148 ms
2026-02-02 22:28:10.494 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - null null
2026-02-02 22:28:11.037 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_vs/browserLink - null null
2026-02-02 22:28:11.167 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - 200 null text/html;charset=utf-8 6699.9362ms
2026-02-02 22:28:11.171 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 676.3104ms
2026-02-02 22:28:11.443 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_vs/browserLink - 200 null text/javascript; charset=UTF-8 406.1882ms
2026-02-02 22:28:12.677 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - null null
2026-02-02 22:28:14.179 +03:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 397.2997 ms
2026-02-02 22:28:14.193 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 1515.7255ms
2026-02-02 22:52:17.928 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - null null
2026-02-02 22:52:18.007 +03:00 [INF] HTTP GET /swagger/index.html responded 200 in 17.8489 ms
2026-02-02 22:52:18.010 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - 200 null text/html;charset=utf-8 81.814ms
2026-02-02 22:52:18.063 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - null null
2026-02-02 22:52:18.063 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_vs/browserLink - null null
2026-02-02 22:52:18.331 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 267.7567ms
2026-02-02 22:52:18.384 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_vs/browserLink - 200 null text/javascript; charset=UTF-8 320.5049ms
2026-02-02 22:52:20.275 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - null null
2026-02-02 22:52:22.871 +03:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 525.2478 ms
2026-02-02 22:52:22.895 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 2620.4014ms
2026-02-02 22:53:38.843 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/JobGrades - application/json 200
2026-02-02 22:53:39.065 +03:00 [INF] CORS policy execution successful.
2026-02-02 22:53:39.074 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Core.JobGradesController.Create (HRMS.API)'
2026-02-02 22:53:39.149 +03:00 [INF] Route matched with {action = "Create", controller = "JobGrades"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(HRMS.Application.Features.Core.JobGrades.Commands.CreateJobGrade.CreateJobGradeCommand) on controller HRMS.API.Controllers.Core.JobGradesController (HRMS.API).
2026-02-02 22:53:43.576 +03:00 [WRN] No store type was specified for the decimal property 'HoursCount' on entity type 'ShiftType'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-02-02 22:53:43.606 +03:00 [WRN] No store type was specified for the decimal property 'MaxSalary' on entity type 'JobGrade'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-02-02 22:53:43.612 +03:00 [WRN] No store type was specified for the decimal property 'MinSalary' on entity type 'JobGrade'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-02-02 22:53:47.931 +03:00 [INF] Executed DbCommand (269ms) [Parameters=[@__code_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HR_CORE].[JOB_GRADES] AS [j]
        WHERE [j].[GRADE_CODE] = @__code_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-02-02 22:53:48.065 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@__level_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HR_CORE].[JOB_GRADES] AS [j]
        WHERE [j].[GRADE_LEVEL] = @__level_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-02-02 22:53:56.498 +03:00 [INF] Executed action HRMS.API.Controllers.Core.JobGradesController.Create (HRMS.API) in 17307.9081ms
2026-02-02 22:53:56.504 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Core.JobGradesController.Create (HRMS.API)'
2026-02-02 22:53:56.734 +03:00 [ERR] CRITICAL ERROR CAUGHT: Validation failed: 
 -- GradeLevel: ŸÖÿ≥ÿ™ŸàŸâ ÿßŸÑÿØÿ±ÿ¨ÿ© ŸÖŸàÿ¨ŸàÿØ ŸÖÿ≥ÿ®ŸÇÿßŸã Severity: Error
FluentValidation.ValidationException: Validation failed: 
 -- GradeLevel: ŸÖÿ≥ÿ™ŸàŸâ ÿßŸÑÿØÿ±ÿ¨ÿ© ŸÖŸàÿ¨ŸàÿØ ŸÖÿ≥ÿ®ŸÇÿßŸã Severity: Error
   at HRMS.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at HRMS.API.Controllers.Core.JobGradesController.Create(CreateJobGradeCommand command)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at HRMS.API.Middleware.GlobalExceptionMiddleware.InvokeAsync(HttpContext context)
2026-02-02 22:53:56.834 +03:00 [INF] HTTP POST /api/JobGrades responded 400 in 17773.4301 ms
2026-02-02 22:53:56.847 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/JobGrades - 400 null application/json 18004.6277ms
2026-02-02 22:54:21.814 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/JobGrades - application/json 200
2026-02-02 22:54:21.835 +03:00 [INF] CORS policy execution successful.
2026-02-02 22:54:22.021 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Core.JobGradesController.Create (HRMS.API)'
2026-02-02 22:54:22.027 +03:00 [INF] Route matched with {action = "Create", controller = "JobGrades"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(HRMS.Application.Features.Core.JobGrades.Commands.CreateJobGrade.CreateJobGradeCommand) on controller HRMS.API.Controllers.Core.JobGradesController (HRMS.API).
2026-02-02 22:54:22.057 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__code_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HR_CORE].[JOB_GRADES] AS [j]
        WHERE [j].[GRADE_CODE] = @__code_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-02-02 22:54:22.067 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__level_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HR_CORE].[JOB_GRADES] AS [j]
        WHERE [j].[GRADE_LEVEL] = @__level_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-02-02 22:54:22.570 +03:00 [INF] Executed DbCommand (61ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (Size = 500), @p4='?' (Size = 20), @p5='?' (DbType = Int32), @p6='?' (Size = 100), @p7='?' (Size = 100), @p8='?' (Size = 1) (DbType = Byte), @p9='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p10='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p11='?' (DbType = DateTime2), @p12='?' (Size = 50), @p13='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[JOB_GRADES] ([BENEFITS_CONFIG], [CREATED_AT], [CREATED_BY], [DESCRIPTION], [GRADE_CODE], [GRADE_LEVEL], [GRADE_NAME_AR], [GRADE_NAME_EN], [IS_DELETED], [MAX_SALARY], [MIN_SALARY], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[JOB_GRADE_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2026-02-02 22:54:22.769 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-02-02 22:54:22.802 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'HRMS.Core.Utilities.Result`1[[System.Int32, System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-02 22:54:22.855 +03:00 [INF] Executed action HRMS.API.Controllers.Core.JobGradesController.Create (HRMS.API) in 824.4014ms
2026-02-02 22:54:22.861 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Core.JobGradesController.Create (HRMS.API)'
2026-02-02 22:54:22.862 +03:00 [INF] HTTP POST /api/JobGrades responded 201 in 1028.2780 ms
2026-02-02 22:54:22.866 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/JobGrades - 201 null application/json; charset=utf-8 1051.8997ms
2026-02-02 22:54:41.392 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/JobGrades - application/json 196
2026-02-02 22:54:41.464 +03:00 [INF] CORS policy execution successful.
2026-02-02 22:54:41.473 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Core.JobGradesController.Create (HRMS.API)'
2026-02-02 22:54:41.475 +03:00 [INF] Route matched with {action = "Create", controller = "JobGrades"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(HRMS.Application.Features.Core.JobGrades.Commands.CreateJobGrade.CreateJobGradeCommand) on controller HRMS.API.Controllers.Core.JobGradesController (HRMS.API).
2026-02-02 22:54:41.672 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__code_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HR_CORE].[JOB_GRADES] AS [j]
        WHERE [j].[GRADE_CODE] = @__code_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-02-02 22:54:41.683 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__level_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HR_CORE].[JOB_GRADES] AS [j]
        WHERE [j].[GRADE_LEVEL] = @__level_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-02-02 22:54:41.697 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (Size = 500), @p4='?' (Size = 20), @p5='?' (DbType = Int32), @p6='?' (Size = 100), @p7='?' (Size = 100), @p8='?' (Size = 1) (DbType = Byte), @p9='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p10='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p11='?' (DbType = DateTime2), @p12='?' (Size = 50), @p13='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[JOB_GRADES] ([BENEFITS_CONFIG], [CREATED_AT], [CREATED_BY], [DESCRIPTION], [GRADE_CODE], [GRADE_LEVEL], [GRADE_NAME_AR], [GRADE_NAME_EN], [IS_DELETED], [MAX_SALARY], [MIN_SALARY], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[JOB_GRADE_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2026-02-02 22:54:41.708 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-02-02 22:54:41.722 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'HRMS.Core.Utilities.Result`1[[System.Int32, System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-02 22:54:41.726 +03:00 [INF] Executed action HRMS.API.Controllers.Core.JobGradesController.Create (HRMS.API) in 244.1753ms
2026-02-02 22:54:41.731 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Core.JobGradesController.Create (HRMS.API)'
2026-02-02 22:54:41.780 +03:00 [INF] HTTP POST /api/JobGrades responded 201 in 315.9883 ms
2026-02-02 22:54:41.783 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/JobGrades - 201 null application/json; charset=utf-8 391.2463ms
2026-02-02 22:58:14.180 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Departments - null null
2026-02-02 22:58:14.304 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Core.DepartmentsController.GetAll (HRMS.API)'
2026-02-02 22:58:14.338 +03:00 [INF] Route matched with {action = "GetAll", controller = "Departments"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(HRMS.Application.Features.Core.Departments.Queries.GetAllDepartments.GetAllDepartmentsQuery) on controller HRMS.API.Controllers.Core.DepartmentsController (HRMS.API).
2026-02-02 22:58:15.099 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [HR_CORE].[DEPARTMENTS] AS [d]
WHERE [d].[IS_DELETED] = CAST(0 AS tinyint)
2026-02-02 22:58:15.319 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d1].[DEPT_ID] AS [DeptId], [d1].[DEPT_NAME_AR] AS [DeptNameAr], [d1].[DEPT_NAME_EN] AS [DeptNameEn], [d1].[PARENT_DEPT_ID] AS [ParentDeptId], [d1].[COST_CENTER_CODE] AS [CostCenterCode], [d1].[MANAGER_ID] AS [ManagerId], [d1].[IS_ACTIVE] AS [IsActive], [d0].[DEPT_NAME_AR] AS [ParentDeptNameAr]
FROM (
    SELECT [d].[DEPT_ID], [d].[COST_CENTER_CODE], [d].[DEPT_NAME_AR], [d].[DEPT_NAME_EN], [d].[IS_ACTIVE], [d].[MANAGER_ID], [d].[PARENT_DEPT_ID]
    FROM [HR_CORE].[DEPARTMENTS] AS [d]
    WHERE [d].[IS_DELETED] = CAST(0 AS tinyint)
    ORDER BY [d].[DEPT_NAME_AR]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d1]
LEFT JOIN [HR_CORE].[DEPARTMENTS] AS [d0] ON [d1].[PARENT_DEPT_ID] = [d0].[DEPT_ID]
ORDER BY [d1].[DEPT_NAME_AR]
2026-02-02 22:58:15.344 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[HRMS.Application.DTOs.Core.PagedResult`1[[HRMS.Application.DTOs.Core.DepartmentDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-02 22:58:15.385 +03:00 [INF] Executed action HRMS.API.Controllers.Core.DepartmentsController.GetAll (HRMS.API) in 1028.2398ms
2026-02-02 22:58:15.391 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Core.DepartmentsController.GetAll (HRMS.API)'
2026-02-02 22:58:15.394 +03:00 [INF] HTTP GET /api/Departments responded 200 in 1091.9934 ms
2026-02-02 22:58:15.398 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Departments - 200 null application/json; charset=utf-8 1217.2412ms
2026-02-02 22:58:36.258 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Jobs - null null
2026-02-02 22:58:36.261 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Core.JobsController.GetAll (HRMS.API)'
2026-02-02 22:58:36.286 +03:00 [INF] Route matched with {action = "GetAll", controller = "Jobs"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(HRMS.Application.Features.Core.Jobs.Queries.GetAllJobs.GetAllJobsQuery) on controller HRMS.API.Controllers.Core.JobsController (HRMS.API).
2026-02-02 22:58:36.352 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [HR_CORE].[JOBS] AS [j]
WHERE [j].[IS_DELETED] = CAST(0 AS tinyint)
2026-02-02 22:58:36.384 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [j1].[JOB_ID] AS [JobId], [j1].[JOB_TITLE_AR] AS [JobTitleAr], [j1].[JOB_TITLE_EN] AS [JobTitleEn], [j1].[DEFAULT_GRADE_ID] AS [DefaultGradeId], [j1].[IS_MEDICAL] AS [IsMedical], [j0].[GRADE_NAME_AR] AS [GradeNameAr]
FROM (
    SELECT [j].[JOB_ID], [j].[DEFAULT_GRADE_ID], [j].[IS_MEDICAL], [j].[JOB_TITLE_AR], [j].[JOB_TITLE_EN]
    FROM [HR_CORE].[JOBS] AS [j]
    WHERE [j].[IS_DELETED] = CAST(0 AS tinyint)
    ORDER BY [j].[JOB_TITLE_AR]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [j1]
LEFT JOIN [HR_CORE].[JOB_GRADES] AS [j0] ON [j1].[DEFAULT_GRADE_ID] = [j0].[JOB_GRADE_ID]
ORDER BY [j1].[JOB_TITLE_AR]
2026-02-02 22:58:36.399 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[HRMS.Application.DTOs.Core.PagedResult`1[[HRMS.Application.DTOs.Core.JobDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-02 22:58:36.427 +03:00 [INF] Executed action HRMS.API.Controllers.Core.JobsController.GetAll (HRMS.API) in 120.2043ms
2026-02-02 22:58:36.430 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Core.JobsController.GetAll (HRMS.API)'
2026-02-02 22:58:36.432 +03:00 [INF] HTTP GET /api/Jobs responded 200 in 171.2222 ms
2026-02-02 22:58:36.437 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Jobs - 200 null application/json; charset=utf-8 179.2182ms
2026-02-02 22:59:19.599 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Employees/basic - application/json 393
2026-02-02 22:59:19.645 +03:00 [INF] CORS policy execution successful.
2026-02-02 22:59:19.647 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.CreateBasic (HRMS.API)'
2026-02-02 22:59:19.668 +03:00 [INF] Route matched with {action = "CreateBasic", controller = "Employees"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] CreateBasic(HRMS.Application.DTOs.Personnel.CreateBasicEmployeeDto) on controller HRMS.API.Controllers.Personnel.EmployeesController (HRMS.API).
2026-02-02 22:59:19.969 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeesController.CreateBasic (HRMS.API) in 298.3238ms
2026-02-02 22:59:19.972 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.CreateBasic (HRMS.API)'
2026-02-02 22:59:20.013 +03:00 [ERR] CRITICAL ERROR CAUGHT: No service for type 'MediatR.IRequestHandler`2[HRMS.Application.Features.Personnel.Employees.Commands.CreateBasicEmployee.CreateBasicEmployeeCommand,System.Int32]' has been registered.
System.InvalidOperationException: No service for type 'MediatR.IRequestHandler`2[HRMS.Application.Features.Personnel.Employees.Commands.CreateBasicEmployee.CreateBasicEmployeeCommand,System.Int32]' has been registered.
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at MediatR.Wrappers.RequestHandlerWrapperImpl`2.<>c__DisplayClass1_0.<Handle>g__Handler|0()
   at HRMS.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at HRMS.API.Controllers.Personnel.EmployeesController.CreateBasic(CreateBasicEmployeeDto dto)
   at lambda_method403(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at HRMS.API.Middleware.GlobalExceptionMiddleware.InvokeAsync(HttpContext context)
2026-02-02 22:59:20.050 +03:00 [ERR] HTTP POST /api/Employees/basic responded 500 in 405.7255 ms
2026-02-02 22:59:20.056 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Employees/basic - 500 null application/json 457.5724ms
2026-02-02 23:07:43.269 +03:00 [INF] üöÄ Starting HRMS Hospital API...
2026-02-02 23:07:50.252 +03:00 [INF] ‚úÖ HRMS Hospital API started successfully
2026-02-02 23:07:50.371 +03:00 [INF] User profile is available. Using 'C:\Users\MT\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-02-02 23:07:51.332 +03:00 [INF] Now listening on: https://localhost:5001
2026-02-02 23:07:51.523 +03:00 [INF] Now listening on: http://localhost:5000
2026-02-02 23:07:51.716 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-02 23:07:53.169 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - null null
2026-02-02 23:07:53.410 +03:00 [INF] Hosting environment: Development
2026-02-02 23:07:54.050 +03:00 [INF] Content root path: D:\HRMS_Hospital\Backend\HRMS\HRMS.API
2026-02-02 23:07:59.078 +03:00 [INF] HTTP GET /swagger/index.html responded 200 in 4413.3595 ms
2026-02-02 23:08:00.079 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - null null
2026-02-02 23:08:00.082 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_vs/browserLink - null null
2026-02-02 23:08:00.183 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - 200 null text/html;charset=utf-8 7025.8897ms
2026-02-02 23:08:00.194 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 115.926ms
2026-02-02 23:08:00.376 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_vs/browserLink - 200 null text/javascript; charset=UTF-8 294.5533ms
2026-02-02 23:08:01.993 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - null null
2026-02-02 23:08:03.985 +03:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 589.3355 ms
2026-02-02 23:08:04.005 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 2012.0387ms
2026-02-02 23:08:29.388 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Employees/basic - application/json 393
2026-02-02 23:08:29.456 +03:00 [INF] CORS policy execution successful.
2026-02-02 23:08:29.474 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.CreateBasic (HRMS.API)'
2026-02-02 23:08:29.541 +03:00 [INF] Route matched with {action = "CreateBasic", controller = "Employees"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] CreateBasic(HRMS.Application.DTOs.Personnel.CreateBasicEmployeeDto) on controller HRMS.API.Controllers.Personnel.EmployeesController (HRMS.API).
2026-02-02 23:08:34.608 +03:00 [WRN] No store type was specified for the decimal property 'HoursCount' on entity type 'ShiftType'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-02-02 23:08:34.613 +03:00 [WRN] No store type was specified for the decimal property 'MaxSalary' on entity type 'JobGrade'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-02-02 23:08:34.616 +03:00 [WRN] No store type was specified for the decimal property 'MinSalary' on entity type 'JobGrade'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-02-02 23:08:38.638 +03:00 [INF] Executed DbCommand (293ms) [Parameters=[@__ToString_0_startswith='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
WHERE [e].[EMPLOYEE_NUMBER] LIKE @__ToString_0_startswith ESCAPE N'\'
ORDER BY [e].[EMPLOYEE_NUMBER] DESC
2026-02-02 23:08:39.677 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?' (Size = 100), @p5='?' (Size = 20), @p6='?' (Size = 50), @p7='?' (Size = 200), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2), @p10='?' (Size = 1) (DbType = Byte), @p11='?' (DbType = Int32), @p12='?' (Size = 50), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (DbType = Int32), @p16='?' (Size = 20), @p17='?' (Size = 20), @p18='?' (Size = 20), @p19='?' (DbType = Int32), @p20='?' (Size = 50), @p21='?' (Size = 100), @p22='?' (Size = 50), @p23='?' (DbType = DateTime2), @p24='?' (Size = 50), @p25='?' (Size = 450), @p26='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_PERSONNEL].[EMPLOYEES] ([BIRTH_DATE], [CREATED_AT], [CREATED_BY], [DEPARTMENT_ID], [EMAIL], [EMPLOYEE_NUMBER], [FIRST_NAME_AR], [FULL_NAME_EN], [GENDER], [HIRE_DATE], [IS_DELETED], [JOB_ID], [LAST_NAME_AR], [LICENSE_EXPIRY_DATE], [LICENSE_NUMBER], [MANAGER_ID], [MARITAL_STATUS], [MOBILE], [NATIONAL_ID], [NATIONALITY_ID], [SECOND_NAME_AR], [SPECIALTY], [THIRD_NAME_AR], [UPDATED_AT], [UPDATED_BY], [USER_ID], [VERSION_NO])
OUTPUT INSERTED.[EMPLOYEE_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26);
2026-02-02 23:08:39.768 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'HRMS.Infrastructure.Data.HRMSDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): String or binary data would be truncated in table 'HRMS_Hospital.HR_PERSONNEL.EMPLOYEES', column 'GENDER'. Truncated value: 'M'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:b1873e23-aac6-4b75-96ca-bef0ffd31e47
Error Number:2628,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): String or binary data would be truncated in table 'HRMS_Hospital.HR_PERSONNEL.EMPLOYEES', column 'GENDER'. Truncated value: 'M'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:b1873e23-aac6-4b75-96ca-bef0ffd31e47
Error Number:2628,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2026-02-02 23:08:52.029 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeesController.CreateBasic (HRMS.API) in 22473.3623ms
2026-02-02 23:08:52.037 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.CreateBasic (HRMS.API)'
2026-02-02 23:08:52.343 +03:00 [ERR] CRITICAL ERROR CAUGHT: An error occurred while saving the entity changes. See the inner exception for details.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): String or binary data would be truncated in table 'HRMS_Hospital.HR_PERSONNEL.EMPLOYEES', column 'GENDER'. Truncated value: 'M'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:b1873e23-aac6-4b75-96ca-bef0ffd31e47
Error Number:2628,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at HRMS.Infrastructure.Data.HRMSDbContext.SaveChangesAsync(CancellationToken cancellationToken) in D:\HRMS_Hospital\Backend\HRMS\HRMS.Infrastructure\Data\HRMSDbContext.cs:line 37
   at HRMS.Application.Features.Personnel.Employees.Commands.CreateBasicEmployee.CreateBasicEmployeeCommandHandler.Handle(CreateBasicEmployeeCommand request, CancellationToken cancellationToken) in D:\HRMS_Hospital\Backend\HRMS\HRMS.Application\Features\Personnel\Employees\Commands\CreateBasicEmployee\CreateBasicEmployeeCommand.cs:line 57
   at HRMS.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\HRMS_Hospital\Backend\HRMS\HRMS.Application\Behaviors\ValidationBehavior.cs:line 36
   at HRMS.API.Controllers.Personnel.EmployeesController.CreateBasic(CreateBasicEmployeeDto dto) in D:\HRMS_Hospital\Backend\HRMS\HRMS.API\Controllers\Personnel\EmployeesController.cs:line 46
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at HRMS.API.Middleware.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in D:\HRMS_Hospital\Backend\HRMS\HRMS.API\Middleware\GlobalExceptionMiddleware.cs:line 31
2026-02-02 23:08:52.489 +03:00 [ERR] HTTP POST /api/Employees/basic responded 500 in 23036.6592 ms
2026-02-02 23:08:52.509 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Employees/basic - 500 null application/json 23121.2631ms
2026-02-02 23:09:14.942 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/JobGrades - null null
2026-02-02 23:09:14.958 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Core.JobGradesController.GetAll (HRMS.API)'
2026-02-02 23:09:14.989 +03:00 [INF] Route matched with {action = "GetAll", controller = "JobGrades"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(HRMS.Application.Features.Core.JobGrades.Queries.GetAllJobGrades.GetAllJobGradesQuery) on controller HRMS.API.Controllers.Core.JobGradesController (HRMS.API).
2026-02-02 23:09:15.196 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [HR_CORE].[JOB_GRADES] AS [j]
WHERE [j].[IS_DELETED] = CAST(0 AS tinyint)
2026-02-02 23:09:15.416 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [j].[JOB_GRADE_ID] AS [JobGradeId], [j].[GRADE_CODE] AS [GradeCode], [j].[GRADE_NAME_AR] AS [GradeNameAr], [j].[GRADE_NAME_EN] AS [GradeNameEn], [j].[GRADE_LEVEL] AS [GradeLevel], [j].[MIN_SALARY] AS [MinSalary], [j].[MAX_SALARY] AS [MaxSalary]
FROM [HR_CORE].[JOB_GRADES] AS [j]
WHERE [j].[IS_DELETED] = CAST(0 AS tinyint)
ORDER BY [j].[GRADE_LEVEL]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2026-02-02 23:09:15.449 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[HRMS.Application.DTOs.Core.PagedResult`1[[HRMS.Application.DTOs.Core.JobGradeListDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-02 23:09:15.476 +03:00 [INF] Executed action HRMS.API.Controllers.Core.JobGradesController.GetAll (HRMS.API) in 481.7865ms
2026-02-02 23:09:15.486 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Core.JobGradesController.GetAll (HRMS.API)'
2026-02-02 23:09:15.488 +03:00 [INF] HTTP GET /api/JobGrades responded 200 in 532.0437 ms
2026-02-02 23:09:15.492 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/JobGrades - 200 null application/json; charset=utf-8 550.0521ms
2026-02-02 23:09:47.598 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Jobs - null null
2026-02-02 23:09:47.827 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Core.JobsController.GetAll (HRMS.API)'
2026-02-02 23:09:47.857 +03:00 [INF] Route matched with {action = "GetAll", controller = "Jobs"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(HRMS.Application.Features.Core.Jobs.Queries.GetAllJobs.GetAllJobsQuery) on controller HRMS.API.Controllers.Core.JobsController (HRMS.API).
2026-02-02 23:09:48.065 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [HR_CORE].[JOBS] AS [j]
WHERE [j].[IS_DELETED] = CAST(0 AS tinyint)
2026-02-02 23:09:48.230 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [j1].[JOB_ID] AS [JobId], [j1].[JOB_TITLE_AR] AS [JobTitleAr], [j1].[JOB_TITLE_EN] AS [JobTitleEn], [j1].[DEFAULT_GRADE_ID] AS [DefaultGradeId], [j1].[IS_MEDICAL] AS [IsMedical], [j0].[GRADE_NAME_AR] AS [GradeNameAr]
FROM (
    SELECT [j].[JOB_ID], [j].[DEFAULT_GRADE_ID], [j].[IS_MEDICAL], [j].[JOB_TITLE_AR], [j].[JOB_TITLE_EN]
    FROM [HR_CORE].[JOBS] AS [j]
    WHERE [j].[IS_DELETED] = CAST(0 AS tinyint)
    ORDER BY [j].[JOB_TITLE_AR]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [j1]
LEFT JOIN [HR_CORE].[JOB_GRADES] AS [j0] ON [j1].[DEFAULT_GRADE_ID] = [j0].[JOB_GRADE_ID]
ORDER BY [j1].[JOB_TITLE_AR]
2026-02-02 23:09:48.255 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[HRMS.Application.DTOs.Core.PagedResult`1[[HRMS.Application.DTOs.Core.JobDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-02 23:09:48.280 +03:00 [INF] Executed action HRMS.API.Controllers.Core.JobsController.GetAll (HRMS.API) in 414.5495ms
2026-02-02 23:09:48.284 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Core.JobsController.GetAll (HRMS.API)'
2026-02-02 23:09:48.285 +03:00 [INF] HTTP GET /api/Jobs responded 200 in 458.6655 ms
2026-02-02 23:09:48.288 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Jobs - 200 null application/json; charset=utf-8 690.262ms
2026-02-02 23:10:18.175 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Employees/basic - application/json 390
2026-02-02 23:10:18.430 +03:00 [INF] CORS policy execution successful.
2026-02-02 23:10:18.434 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.CreateBasic (HRMS.API)'
2026-02-02 23:10:18.437 +03:00 [INF] Route matched with {action = "CreateBasic", controller = "Employees"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] CreateBasic(HRMS.Application.DTOs.Personnel.CreateBasicEmployeeDto) on controller HRMS.API.Controllers.Personnel.EmployeesController (HRMS.API).
2026-02-02 23:10:18.461 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__ToString_0_startswith='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
WHERE [e].[EMPLOYEE_NUMBER] LIKE @__ToString_0_startswith ESCAPE N'\'
ORDER BY [e].[EMPLOYEE_NUMBER] DESC
2026-02-02 23:10:18.489 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?' (Size = 100), @p5='?' (Size = 20), @p6='?' (Size = 50), @p7='?' (Size = 200), @p8='?' (Size = 1), @p9='?' (DbType = DateTime2), @p10='?' (Size = 1) (DbType = Byte), @p11='?' (DbType = Int32), @p12='?' (Size = 50), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (DbType = Int32), @p16='?' (Size = 20), @p17='?' (Size = 20), @p18='?' (Size = 20), @p19='?' (DbType = Int32), @p20='?' (Size = 50), @p21='?' (Size = 100), @p22='?' (Size = 50), @p23='?' (DbType = DateTime2), @p24='?' (Size = 50), @p25='?' (Size = 450), @p26='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_PERSONNEL].[EMPLOYEES] ([BIRTH_DATE], [CREATED_AT], [CREATED_BY], [DEPARTMENT_ID], [EMAIL], [EMPLOYEE_NUMBER], [FIRST_NAME_AR], [FULL_NAME_EN], [GENDER], [HIRE_DATE], [IS_DELETED], [JOB_ID], [LAST_NAME_AR], [LICENSE_EXPIRY_DATE], [LICENSE_NUMBER], [MANAGER_ID], [MARITAL_STATUS], [MOBILE], [NATIONAL_ID], [NATIONALITY_ID], [SECOND_NAME_AR], [SPECIALTY], [THIRD_NAME_AR], [UPDATED_AT], [UPDATED_BY], [USER_ID], [VERSION_NO])
OUTPUT INSERTED.[EMPLOYEE_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26);
2026-02-02 23:10:18.640 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-02-02 23:10:18.658 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'System.Int32'.
2026-02-02 23:10:18.711 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeesController.CreateBasic (HRMS.API) in 270.19ms
2026-02-02 23:10:18.717 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.CreateBasic (HRMS.API)'
2026-02-02 23:10:18.719 +03:00 [INF] HTTP POST /api/Employees/basic responded 201 in 289.3886 ms
2026-02-02 23:10:18.721 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Employees/basic - 201 null application/json; charset=utf-8 546.1556ms
2026-02-02 23:10:32.846 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Employees - null null
2026-02-02 23:10:32.893 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.GetAll (HRMS.API)'
2026-02-02 23:10:32.916 +03:00 [INF] Route matched with {action = "GetAll", controller = "Employees"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Application.DTOs.Core.PagedResult`1[HRMS.Application.DTOs.Personnel.EmployeeListDto]]] GetAll(HRMS.Application.Features.Personnel.Employees.Queries.GetAllEmployees.GetAllEmployeesQuery) on controller HRMS.API.Controllers.Personnel.EmployeesController (HRMS.API).
2026-02-02 23:10:32.955 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
WHERE [e].[IS_DELETED] = CAST(0 AS tinyint)
2026-02-02 23:10:33.036 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [e0].[EMPLOYEE_ID], [e0].[BIRTH_DATE], [e0].[CREATED_AT], [e0].[CREATED_BY], [e0].[DEPARTMENT_ID], [e0].[EMAIL], [e0].[EMPLOYEE_NUMBER], [e0].[FIRST_NAME_AR], [e0].[FULL_NAME_EN], [e0].[GENDER], [e0].[HIRE_DATE], [e0].[IS_DELETED], [e0].[JOB_ID], [e0].[LAST_NAME_AR], [e0].[LICENSE_EXPIRY_DATE], [e0].[LICENSE_NUMBER], [e0].[MANAGER_ID], [e0].[MARITAL_STATUS], [e0].[MOBILE], [e0].[NATIONAL_ID], [e0].[NATIONALITY_ID], [e0].[SECOND_NAME_AR], [e0].[SPECIALTY], [e0].[THIRD_NAME_AR], [e0].[UPDATED_AT], [e0].[UPDATED_BY], [e0].[USER_ID], [e0].[VERSION_NO], [d].[DEPT_ID], [d].[BranchId], [d].[COST_CENTER_CODE], [d].[CREATED_AT], [d].[CREATED_BY], [d].[DEPT_NAME_AR], [d].[DEPT_NAME_EN], [d].[IS_ACTIVE], [d].[IS_DELETED], [d].[MANAGER_ID], [d].[PARENT_DEPT_ID], [d].[UPDATED_AT], [d].[UPDATED_BY], [d].[VERSION_NO], [j].[JOB_ID], [j].[CREATED_AT], [j].[CREATED_BY], [j].[DEFAULT_GRADE_ID], [j].[DepartmentDeptId], [j].[IS_DELETED], [j].[IS_MEDICAL], [j].[JOB_TITLE_AR], [j].[JOB_TITLE_EN], [j].[UPDATED_AT], [j].[UPDATED_BY], [j].[VERSION_NO]
FROM (
    SELECT [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO]
    FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
    WHERE [e].[IS_DELETED] = CAST(0 AS tinyint)
    ORDER BY [e].[CREATED_AT] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [e0]
INNER JOIN [HR_CORE].[DEPARTMENTS] AS [d] ON [e0].[DEPARTMENT_ID] = [d].[DEPT_ID]
INNER JOIN [HR_CORE].[JOBS] AS [j] ON [e0].[JOB_ID] = [j].[JOB_ID]
ORDER BY [e0].[CREATED_AT] DESC
2026-02-02 23:10:33.059 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Application.DTOs.Core.PagedResult`1[[HRMS.Application.DTOs.Personnel.EmployeeListDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-02 23:10:33.067 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeesController.GetAll (HRMS.API) in 147.0143ms
2026-02-02 23:10:33.078 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.GetAll (HRMS.API)'
2026-02-02 23:10:33.080 +03:00 [INF] HTTP GET /api/Employees responded 200 in 187.3331 ms
2026-02-02 23:10:33.083 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Employees - 200 null application/json; charset=utf-8 237.1985ms
2026-02-02 23:12:03.638 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Employees/25 - null null
2026-02-02 23:12:03.644 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.GetProfile (HRMS.API)'
2026-02-02 23:12:03.671 +03:00 [INF] Route matched with {action = "GetProfile", controller = "Employees"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Application.DTOs.Personnel.EmployeeProfileDto]] GetProfile(Int32) on controller HRMS.API.Controllers.Personnel.EmployeesController (HRMS.API).
2026-02-02 23:12:04.143 +03:00 [INF] Executed DbCommand (243ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[EMPLOYEE_ID], [s].[BIRTH_DATE], [s].[CREATED_AT], [s].[CREATED_BY], [s].[DEPARTMENT_ID], [s].[EMAIL], [s].[EMPLOYEE_NUMBER], [s].[FIRST_NAME_AR], [s].[FULL_NAME_EN], [s].[GENDER], [s].[HIRE_DATE], [s].[IS_DELETED], [s].[JOB_ID], [s].[LAST_NAME_AR], [s].[LICENSE_EXPIRY_DATE], [s].[LICENSE_NUMBER], [s].[MANAGER_ID], [s].[MARITAL_STATUS], [s].[MOBILE], [s].[NATIONAL_ID], [s].[NATIONALITY_ID], [s].[SECOND_NAME_AR], [s].[SPECIALTY], [s].[THIRD_NAME_AR], [s].[UPDATED_AT], [s].[UPDATED_BY], [s].[USER_ID], [s].[VERSION_NO], [s].[DEPT_ID], [s].[BranchId], [s].[COST_CENTER_CODE], [s].[CREATED_AT0], [s].[CREATED_BY0], [s].[DEPT_NAME_AR], [s].[DEPT_NAME_EN], [s].[IS_ACTIVE], [s].[IS_DELETED0], [s].[MANAGER_ID0], [s].[PARENT_DEPT_ID], [s].[UPDATED_AT0], [s].[UPDATED_BY0], [s].[VERSION_NO0], [s].[JOB_ID0], [s].[CREATED_AT1], [s].[CREATED_BY1], [s].[DEFAULT_GRADE_ID], [s].[DepartmentDeptId], [s].[IS_DELETED1], [s].[IS_MEDICAL], [s].[JOB_TITLE_AR], [s].[JOB_TITLE_EN], [s].[UPDATED_AT1], [s].[UPDATED_BY1], [s].[VERSION_NO1], [s].[COMPENSATION_ID], [s].[BANK_ID], [s].[BASIC_SALARY], [s].[CREATED_AT2], [s].[CREATED_BY2], [s].[EMPLOYEE_ID0], [s].[HOUSING_ALLOWANCE], [s].[IBAN_NUMBER], [s].[IS_DELETED2], [s].[MEDICAL_ALLOWANCE], [s].[OTHER_ALLOWANCES], [s].[TRANSPORT_ALLOWANCE], [s].[UPDATED_AT2], [s].[UPDATED_BY2], [s].[VERSION_NO2], [s0].[DOCUMENT_ID], [s0].[CONTENT_TYPE], [s0].[CREATED_AT], [s0].[CREATED_BY], [s0].[DOCUMENT_NUMBER], [s0].[DOCUMENT_TYPE_ID], [s0].[EMPLOYEE_ID], [s0].[EXPIRY_DATE], [s0].[FILE_NAME], [s0].[FILE_PATH], [s0].[FILE_SIZE], [s0].[IS_DELETED], [s0].[ISSUE_DATE], [s0].[UPDATED_AT], [s0].[UPDATED_BY], [s0].[VERSION_NO], [s0].[DOCUMENT_TYPE_ID0], [s0].[ALLOWED_EXTENSIONS], [s0].[CREATED_AT0], [s0].[CREATED_BY0], [s0].[DEFAULT_EXPIRY_DAYS], [s0].[DESCRIPTION], [s0].[DOCUMENT_TYPE_NAME_AR], [s0].[DOCUMENT_TYPE_NAME_EN], [s0].[HAS_EXPIRY], [s0].[IS_DELETED0], [s0].[IS_REQUIRED], [s0].[MAX_FILE_SIZE_MB], [s0].[UPDATED_AT0], [s0].[UPDATED_BY0], [s0].[VERSION_NO0]
FROM (
    SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO], [d].[DEPT_ID], [d].[BranchId], [d].[COST_CENTER_CODE], [d].[CREATED_AT] AS [CREATED_AT0], [d].[CREATED_BY] AS [CREATED_BY0], [d].[DEPT_NAME_AR], [d].[DEPT_NAME_EN], [d].[IS_ACTIVE], [d].[IS_DELETED] AS [IS_DELETED0], [d].[MANAGER_ID] AS [MANAGER_ID0], [d].[PARENT_DEPT_ID], [d].[UPDATED_AT] AS [UPDATED_AT0], [d].[UPDATED_BY] AS [UPDATED_BY0], [d].[VERSION_NO] AS [VERSION_NO0], [j].[JOB_ID] AS [JOB_ID0], [j].[CREATED_AT] AS [CREATED_AT1], [j].[CREATED_BY] AS [CREATED_BY1], [j].[DEFAULT_GRADE_ID], [j].[DepartmentDeptId], [j].[IS_DELETED] AS [IS_DELETED1], [j].[IS_MEDICAL], [j].[JOB_TITLE_AR], [j].[JOB_TITLE_EN], [j].[UPDATED_AT] AS [UPDATED_AT1], [j].[UPDATED_BY] AS [UPDATED_BY1], [j].[VERSION_NO] AS [VERSION_NO1], [e0].[COMPENSATION_ID], [e0].[BANK_ID], [e0].[BASIC_SALARY], [e0].[CREATED_AT] AS [CREATED_AT2], [e0].[CREATED_BY] AS [CREATED_BY2], [e0].[EMPLOYEE_ID] AS [EMPLOYEE_ID0], [e0].[HOUSING_ALLOWANCE], [e0].[IBAN_NUMBER], [e0].[IS_DELETED] AS [IS_DELETED2], [e0].[MEDICAL_ALLOWANCE], [e0].[OTHER_ALLOWANCES], [e0].[TRANSPORT_ALLOWANCE], [e0].[UPDATED_AT] AS [UPDATED_AT2], [e0].[UPDATED_BY] AS [UPDATED_BY2], [e0].[VERSION_NO] AS [VERSION_NO2]
    FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
    INNER JOIN [HR_CORE].[DEPARTMENTS] AS [d] ON [e].[DEPARTMENT_ID] = [d].[DEPT_ID]
    INNER JOIN [HR_CORE].[JOBS] AS [j] ON [e].[JOB_ID] = [j].[JOB_ID]
    LEFT JOIN [HR_PERSONNEL].[EMPLOYEE_COMPENSATIONS] AS [e0] ON [e].[EMPLOYEE_ID] = [e0].[EMPLOYEE_ID]
    WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0 AND [e].[IS_DELETED] = CAST(0 AS tinyint)
) AS [s]
LEFT JOIN (
    SELECT [e1].[DOCUMENT_ID], [e1].[CONTENT_TYPE], [e1].[CREATED_AT], [e1].[CREATED_BY], [e1].[DOCUMENT_NUMBER], [e1].[DOCUMENT_TYPE_ID], [e1].[EMPLOYEE_ID], [e1].[EXPIRY_DATE], [e1].[FILE_NAME], [e1].[FILE_PATH], [e1].[FILE_SIZE], [e1].[IS_DELETED], [e1].[ISSUE_DATE], [e1].[UPDATED_AT], [e1].[UPDATED_BY], [e1].[VERSION_NO], [d0].[DOCUMENT_TYPE_ID] AS [DOCUMENT_TYPE_ID0], [d0].[ALLOWED_EXTENSIONS], [d0].[CREATED_AT] AS [CREATED_AT0], [d0].[CREATED_BY] AS [CREATED_BY0], [d0].[DEFAULT_EXPIRY_DAYS], [d0].[DESCRIPTION], [d0].[DOCUMENT_TYPE_NAME_AR], [d0].[DOCUMENT_TYPE_NAME_EN], [d0].[HAS_EXPIRY], [d0].[IS_DELETED] AS [IS_DELETED0], [d0].[IS_REQUIRED], [d0].[MAX_FILE_SIZE_MB], [d0].[UPDATED_AT] AS [UPDATED_AT0], [d0].[UPDATED_BY] AS [UPDATED_BY0], [d0].[VERSION_NO] AS [VERSION_NO0]
    FROM [HR_PERSONNEL].[EMPLOYEE_DOCUMENTS] AS [e1]
    INNER JOIN [HR_CORE].[DOCUMENT_TYPES] AS [d0] ON [e1].[DOCUMENT_TYPE_ID] = [d0].[DOCUMENT_TYPE_ID]
) AS [s0] ON [s].[EMPLOYEE_ID] = [s0].[EMPLOYEE_ID]
ORDER BY [s].[EMPLOYEE_ID], [s].[DEPT_ID], [s].[JOB_ID0], [s].[COMPENSATION_ID], [s0].[DOCUMENT_ID]
2026-02-02 23:12:04.416 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Application.DTOs.Personnel.EmployeeProfileDto'.
2026-02-02 23:12:04.447 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeesController.GetProfile (HRMS.API) in 743.9434ms
2026-02-02 23:12:04.455 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.GetProfile (HRMS.API)'
2026-02-02 23:12:04.457 +03:00 [INF] HTTP GET /api/Employees/25 responded 200 in 813.7492 ms
2026-02-02 23:12:04.460 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Employees/25 - 200 null application/json; charset=utf-8 821.9105ms
2026-02-02 23:15:07.187 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Jobs - null null
2026-02-02 23:15:07.467 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Core.JobsController.GetAll (HRMS.API)'
2026-02-02 23:15:07.469 +03:00 [INF] Route matched with {action = "GetAll", controller = "Jobs"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(HRMS.Application.Features.Core.Jobs.Queries.GetAllJobs.GetAllJobsQuery) on controller HRMS.API.Controllers.Core.JobsController (HRMS.API).
2026-02-02 23:15:07.486 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [HR_CORE].[JOBS] AS [j]
WHERE [j].[IS_DELETED] = CAST(0 AS tinyint)
2026-02-02 23:15:07.519 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [j1].[JOB_ID] AS [JobId], [j1].[JOB_TITLE_AR] AS [JobTitleAr], [j1].[JOB_TITLE_EN] AS [JobTitleEn], [j1].[DEFAULT_GRADE_ID] AS [DefaultGradeId], [j1].[IS_MEDICAL] AS [IsMedical], [j0].[GRADE_NAME_AR] AS [GradeNameAr]
FROM (
    SELECT [j].[JOB_ID], [j].[DEFAULT_GRADE_ID], [j].[IS_MEDICAL], [j].[JOB_TITLE_AR], [j].[JOB_TITLE_EN]
    FROM [HR_CORE].[JOBS] AS [j]
    WHERE [j].[IS_DELETED] = CAST(0 AS tinyint)
    ORDER BY [j].[JOB_TITLE_AR]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [j1]
LEFT JOIN [HR_CORE].[JOB_GRADES] AS [j0] ON [j1].[DEFAULT_GRADE_ID] = [j0].[JOB_GRADE_ID]
ORDER BY [j1].[JOB_TITLE_AR]
2026-02-02 23:15:07.559 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[HRMS.Application.DTOs.Core.PagedResult`1[[HRMS.Application.DTOs.Core.JobDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-02 23:15:07.565 +03:00 [INF] Executed action HRMS.API.Controllers.Core.JobsController.GetAll (HRMS.API) in 92.076ms
2026-02-02 23:15:07.578 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Core.JobsController.GetAll (HRMS.API)'
2026-02-02 23:15:07.580 +03:00 [INF] HTTP GET /api/Jobs responded 200 in 113.0070 ms
2026-02-02 23:15:07.592 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Jobs - 200 null application/json; charset=utf-8 405.8651ms
2026-02-02 23:19:49.707 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:5001/api/Jobs/2 - application/json 147
2026-02-02 23:19:49.710 +03:00 [INF] CORS policy execution successful.
2026-02-02 23:19:49.712 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Core.JobsController.Update (HRMS.API)'
2026-02-02 23:19:49.730 +03:00 [INF] Route matched with {action = "Update", controller = "Jobs"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Update(Int32, HRMS.Application.Features.Core.Jobs.Commands.UpdateJob.UpdateJobCommand) on controller HRMS.API.Controllers.Core.JobsController (HRMS.API).
2026-02-02 23:19:49.914 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@__titleAr_0='?' (Size = 100), @__command_JobId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HR_CORE].[JOBS] AS [j]
        WHERE [j].[JOB_TITLE_AR] = @__titleAr_0 AND [j].[JOB_ID] <> @__command_JobId_1 AND [j].[IS_DELETED] = CAST(0 AS tinyint)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-02-02 23:19:49.946 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__gradeId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HR_CORE].[JOB_GRADES] AS [j]
        WHERE [j].[JOB_GRADE_ID] = @__gradeId_Value_0 AND [j].[IS_DELETED] = CAST(0 AS tinyint)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-02-02 23:19:49.979 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__request_JobId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [j].[JOB_ID], [j].[CREATED_AT], [j].[CREATED_BY], [j].[DEFAULT_GRADE_ID], [j].[DepartmentDeptId], [j].[IS_DELETED], [j].[IS_MEDICAL], [j].[JOB_TITLE_AR], [j].[JOB_TITLE_EN], [j].[UPDATED_AT], [j].[UPDATED_BY], [j].[VERSION_NO]
FROM [HR_CORE].[JOBS] AS [j]
WHERE [j].[JOB_ID] = @__request_JobId_0 AND [j].[IS_DELETED] = CAST(0 AS tinyint)
2026-02-02 23:19:50.058 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200), @p13='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (Size = 100), @p11='?' (Size = 100), @p12='?' (DbType = DateTime2), @p14='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
UPDATE [HR_CORE].[JOBS] SET [DEFAULT_GRADE_ID] = @p9, [JOB_TITLE_AR] = @p10, [JOB_TITLE_EN] = @p11, [UPDATED_AT] = @p12
OUTPUT 1
WHERE [JOB_ID] = @p13 AND [VERSION_NO] = @p14;
2026-02-02 23:19:50.082 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[System.Int32, System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-02 23:19:50.086 +03:00 [INF] Executed action HRMS.API.Controllers.Core.JobsController.Update (HRMS.API) in 338.4288ms
2026-02-02 23:19:50.091 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Core.JobsController.Update (HRMS.API)'
2026-02-02 23:19:50.092 +03:00 [INF] HTTP PUT /api/Jobs/2 responded 200 in 381.8105 ms
2026-02-02 23:19:50.095 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:5001/api/Jobs/2 - 200 null application/json; charset=utf-8 388.1748ms
2026-02-02 23:19:59.598 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Jobs - null null
2026-02-02 23:19:59.602 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Core.JobsController.GetAll (HRMS.API)'
2026-02-02 23:19:59.604 +03:00 [INF] Route matched with {action = "GetAll", controller = "Jobs"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(HRMS.Application.Features.Core.Jobs.Queries.GetAllJobs.GetAllJobsQuery) on controller HRMS.API.Controllers.Core.JobsController (HRMS.API).
2026-02-02 23:19:59.661 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [HR_CORE].[JOBS] AS [j]
WHERE [j].[IS_DELETED] = CAST(0 AS tinyint)
2026-02-02 23:19:59.681 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [j1].[JOB_ID] AS [JobId], [j1].[JOB_TITLE_AR] AS [JobTitleAr], [j1].[JOB_TITLE_EN] AS [JobTitleEn], [j1].[DEFAULT_GRADE_ID] AS [DefaultGradeId], [j1].[IS_MEDICAL] AS [IsMedical], [j0].[GRADE_NAME_AR] AS [GradeNameAr]
FROM (
    SELECT [j].[JOB_ID], [j].[DEFAULT_GRADE_ID], [j].[IS_MEDICAL], [j].[JOB_TITLE_AR], [j].[JOB_TITLE_EN]
    FROM [HR_CORE].[JOBS] AS [j]
    WHERE [j].[IS_DELETED] = CAST(0 AS tinyint)
    ORDER BY [j].[JOB_TITLE_AR]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [j1]
LEFT JOIN [HR_CORE].[JOB_GRADES] AS [j0] ON [j1].[DEFAULT_GRADE_ID] = [j0].[JOB_GRADE_ID]
ORDER BY [j1].[JOB_TITLE_AR]
2026-02-02 23:19:59.690 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[HRMS.Application.DTOs.Core.PagedResult`1[[HRMS.Application.DTOs.Core.JobDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-02 23:19:59.692 +03:00 [INF] Executed action HRMS.API.Controllers.Core.JobsController.GetAll (HRMS.API) in 45.6578ms
2026-02-02 23:19:59.695 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Core.JobsController.GetAll (HRMS.API)'
2026-02-02 23:19:59.703 +03:00 [INF] HTTP GET /api/Jobs responded 200 in 101.3962 ms
2026-02-02 23:19:59.706 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Jobs - 200 null application/json; charset=utf-8 107.4661ms
2026-02-02 23:20:49.904 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Employees/25 - null null
2026-02-02 23:20:49.911 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.GetProfile (HRMS.API)'
2026-02-02 23:20:49.912 +03:00 [INF] Route matched with {action = "GetProfile", controller = "Employees"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Application.DTOs.Personnel.EmployeeProfileDto]] GetProfile(Int32) on controller HRMS.API.Controllers.Personnel.EmployeesController (HRMS.API).
2026-02-02 23:20:49.986 +03:00 [INF] Executed DbCommand (68ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[EMPLOYEE_ID], [s].[BIRTH_DATE], [s].[CREATED_AT], [s].[CREATED_BY], [s].[DEPARTMENT_ID], [s].[EMAIL], [s].[EMPLOYEE_NUMBER], [s].[FIRST_NAME_AR], [s].[FULL_NAME_EN], [s].[GENDER], [s].[HIRE_DATE], [s].[IS_DELETED], [s].[JOB_ID], [s].[LAST_NAME_AR], [s].[LICENSE_EXPIRY_DATE], [s].[LICENSE_NUMBER], [s].[MANAGER_ID], [s].[MARITAL_STATUS], [s].[MOBILE], [s].[NATIONAL_ID], [s].[NATIONALITY_ID], [s].[SECOND_NAME_AR], [s].[SPECIALTY], [s].[THIRD_NAME_AR], [s].[UPDATED_AT], [s].[UPDATED_BY], [s].[USER_ID], [s].[VERSION_NO], [s].[DEPT_ID], [s].[BranchId], [s].[COST_CENTER_CODE], [s].[CREATED_AT0], [s].[CREATED_BY0], [s].[DEPT_NAME_AR], [s].[DEPT_NAME_EN], [s].[IS_ACTIVE], [s].[IS_DELETED0], [s].[MANAGER_ID0], [s].[PARENT_DEPT_ID], [s].[UPDATED_AT0], [s].[UPDATED_BY0], [s].[VERSION_NO0], [s].[JOB_ID0], [s].[CREATED_AT1], [s].[CREATED_BY1], [s].[DEFAULT_GRADE_ID], [s].[DepartmentDeptId], [s].[IS_DELETED1], [s].[IS_MEDICAL], [s].[JOB_TITLE_AR], [s].[JOB_TITLE_EN], [s].[UPDATED_AT1], [s].[UPDATED_BY1], [s].[VERSION_NO1], [s].[COMPENSATION_ID], [s].[BANK_ID], [s].[BASIC_SALARY], [s].[CREATED_AT2], [s].[CREATED_BY2], [s].[EMPLOYEE_ID0], [s].[HOUSING_ALLOWANCE], [s].[IBAN_NUMBER], [s].[IS_DELETED2], [s].[MEDICAL_ALLOWANCE], [s].[OTHER_ALLOWANCES], [s].[TRANSPORT_ALLOWANCE], [s].[UPDATED_AT2], [s].[UPDATED_BY2], [s].[VERSION_NO2], [s0].[DOCUMENT_ID], [s0].[CONTENT_TYPE], [s0].[CREATED_AT], [s0].[CREATED_BY], [s0].[DOCUMENT_NUMBER], [s0].[DOCUMENT_TYPE_ID], [s0].[EMPLOYEE_ID], [s0].[EXPIRY_DATE], [s0].[FILE_NAME], [s0].[FILE_PATH], [s0].[FILE_SIZE], [s0].[IS_DELETED], [s0].[ISSUE_DATE], [s0].[UPDATED_AT], [s0].[UPDATED_BY], [s0].[VERSION_NO], [s0].[DOCUMENT_TYPE_ID0], [s0].[ALLOWED_EXTENSIONS], [s0].[CREATED_AT0], [s0].[CREATED_BY0], [s0].[DEFAULT_EXPIRY_DAYS], [s0].[DESCRIPTION], [s0].[DOCUMENT_TYPE_NAME_AR], [s0].[DOCUMENT_TYPE_NAME_EN], [s0].[HAS_EXPIRY], [s0].[IS_DELETED0], [s0].[IS_REQUIRED], [s0].[MAX_FILE_SIZE_MB], [s0].[UPDATED_AT0], [s0].[UPDATED_BY0], [s0].[VERSION_NO0]
FROM (
    SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO], [d].[DEPT_ID], [d].[BranchId], [d].[COST_CENTER_CODE], [d].[CREATED_AT] AS [CREATED_AT0], [d].[CREATED_BY] AS [CREATED_BY0], [d].[DEPT_NAME_AR], [d].[DEPT_NAME_EN], [d].[IS_ACTIVE], [d].[IS_DELETED] AS [IS_DELETED0], [d].[MANAGER_ID] AS [MANAGER_ID0], [d].[PARENT_DEPT_ID], [d].[UPDATED_AT] AS [UPDATED_AT0], [d].[UPDATED_BY] AS [UPDATED_BY0], [d].[VERSION_NO] AS [VERSION_NO0], [j].[JOB_ID] AS [JOB_ID0], [j].[CREATED_AT] AS [CREATED_AT1], [j].[CREATED_BY] AS [CREATED_BY1], [j].[DEFAULT_GRADE_ID], [j].[DepartmentDeptId], [j].[IS_DELETED] AS [IS_DELETED1], [j].[IS_MEDICAL], [j].[JOB_TITLE_AR], [j].[JOB_TITLE_EN], [j].[UPDATED_AT] AS [UPDATED_AT1], [j].[UPDATED_BY] AS [UPDATED_BY1], [j].[VERSION_NO] AS [VERSION_NO1], [e0].[COMPENSATION_ID], [e0].[BANK_ID], [e0].[BASIC_SALARY], [e0].[CREATED_AT] AS [CREATED_AT2], [e0].[CREATED_BY] AS [CREATED_BY2], [e0].[EMPLOYEE_ID] AS [EMPLOYEE_ID0], [e0].[HOUSING_ALLOWANCE], [e0].[IBAN_NUMBER], [e0].[IS_DELETED] AS [IS_DELETED2], [e0].[MEDICAL_ALLOWANCE], [e0].[OTHER_ALLOWANCES], [e0].[TRANSPORT_ALLOWANCE], [e0].[UPDATED_AT] AS [UPDATED_AT2], [e0].[UPDATED_BY] AS [UPDATED_BY2], [e0].[VERSION_NO] AS [VERSION_NO2]
    FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
    INNER JOIN [HR_CORE].[DEPARTMENTS] AS [d] ON [e].[DEPARTMENT_ID] = [d].[DEPT_ID]
    INNER JOIN [HR_CORE].[JOBS] AS [j] ON [e].[JOB_ID] = [j].[JOB_ID]
    LEFT JOIN [HR_PERSONNEL].[EMPLOYEE_COMPENSATIONS] AS [e0] ON [e].[EMPLOYEE_ID] = [e0].[EMPLOYEE_ID]
    WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0 AND [e].[IS_DELETED] = CAST(0 AS tinyint)
) AS [s]
LEFT JOIN (
    SELECT [e1].[DOCUMENT_ID], [e1].[CONTENT_TYPE], [e1].[CREATED_AT], [e1].[CREATED_BY], [e1].[DOCUMENT_NUMBER], [e1].[DOCUMENT_TYPE_ID], [e1].[EMPLOYEE_ID], [e1].[EXPIRY_DATE], [e1].[FILE_NAME], [e1].[FILE_PATH], [e1].[FILE_SIZE], [e1].[IS_DELETED], [e1].[ISSUE_DATE], [e1].[UPDATED_AT], [e1].[UPDATED_BY], [e1].[VERSION_NO], [d0].[DOCUMENT_TYPE_ID] AS [DOCUMENT_TYPE_ID0], [d0].[ALLOWED_EXTENSIONS], [d0].[CREATED_AT] AS [CREATED_AT0], [d0].[CREATED_BY] AS [CREATED_BY0], [d0].[DEFAULT_EXPIRY_DAYS], [d0].[DESCRIPTION], [d0].[DOCUMENT_TYPE_NAME_AR], [d0].[DOCUMENT_TYPE_NAME_EN], [d0].[HAS_EXPIRY], [d0].[IS_DELETED] AS [IS_DELETED0], [d0].[IS_REQUIRED], [d0].[MAX_FILE_SIZE_MB], [d0].[UPDATED_AT] AS [UPDATED_AT0], [d0].[UPDATED_BY] AS [UPDATED_BY0], [d0].[VERSION_NO] AS [VERSION_NO0]
    FROM [HR_PERSONNEL].[EMPLOYEE_DOCUMENTS] AS [e1]
    INNER JOIN [HR_CORE].[DOCUMENT_TYPES] AS [d0] ON [e1].[DOCUMENT_TYPE_ID] = [d0].[DOCUMENT_TYPE_ID]
) AS [s0] ON [s].[EMPLOYEE_ID] = [s0].[EMPLOYEE_ID]
ORDER BY [s].[EMPLOYEE_ID], [s].[DEPT_ID], [s].[JOB_ID0], [s].[COMPENSATION_ID], [s0].[DOCUMENT_ID]
2026-02-02 23:20:49.999 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Application.DTOs.Personnel.EmployeeProfileDto'.
2026-02-02 23:20:50.002 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeesController.GetProfile (HRMS.API) in 85.8243ms
2026-02-02 23:20:50.014 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.GetProfile (HRMS.API)'
2026-02-02 23:20:50.016 +03:00 [INF] HTTP GET /api/Employees/25 responded 200 in 105.3554 ms
2026-02-02 23:20:50.018 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Employees/25 - 200 null application/json; charset=utf-8 114.0896ms
2026-02-02 23:25:57.739 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/PayrollSettings/initialize-from-grade/25 - null 0
2026-02-02 23:25:57.939 +03:00 [INF] CORS policy execution successful.
2026-02-02 23:25:57.940 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Payroll.PayrollSettingsController.InitializeFromGrade (HRMS.API)'
2026-02-02 23:25:57.956 +03:00 [INF] Route matched with {action = "InitializeFromGrade", controller = "PayrollSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[System.Boolean]]] InitializeFromGrade(Int32) on controller HRMS.API.Controllers.Payroll.PayrollSettingsController (HRMS.API).
2026-02-02 23:25:58.064 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO], [j].[JOB_ID], [j].[CREATED_AT], [j].[CREATED_BY], [j].[DEFAULT_GRADE_ID], [j].[DepartmentDeptId], [j].[IS_DELETED], [j].[IS_MEDICAL], [j].[JOB_TITLE_AR], [j].[JOB_TITLE_EN], [j].[UPDATED_AT], [j].[UPDATED_BY], [j].[VERSION_NO], [j0].[JOB_GRADE_ID], [j0].[BENEFITS_CONFIG], [j0].[CREATED_AT], [j0].[CREATED_BY], [j0].[DESCRIPTION], [j0].[GRADE_CODE], [j0].[GRADE_LEVEL], [j0].[GRADE_NAME_AR], [j0].[GRADE_NAME_EN], [j0].[IS_DELETED], [j0].[MAX_SALARY], [j0].[MIN_SALARY], [j0].[UPDATED_AT], [j0].[UPDATED_BY], [j0].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
INNER JOIN [HR_CORE].[JOBS] AS [j] ON [e].[JOB_ID] = [j].[JOB_ID]
LEFT JOIN [HR_CORE].[JOB_GRADES] AS [j0] ON [j].[DEFAULT_GRADE_ID] = [j0].[JOB_GRADE_ID]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0
2026-02-02 23:25:58.094 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ElementId], [s].[CREATED_AT], [s].[CREATED_BY], [s].[DefaultPercentage], [s].[ElementNameAr], [s].[ElementType], [s].[IsBasic], [s].[IS_DELETED], [s].[IsGosiBase], [s].[IsRecurring], [s].[IsTaxable], [s].[UPDATED_AT], [s].[UPDATED_BY], [s].[VERSION_NO]
FROM [HR_PAYROLL].[SALARY_ELEMENTS] AS [s]
WHERE [s].[IsBasic] = CAST(1 AS tinyint)
2026-02-02 23:25:58.206 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[StructureId], [e].[Amount], [e].[CREATED_AT], [e].[CREATED_BY], [e].[ELEMENT_ID], [e].[EMPLOYEE_ID], [e].[IsActive], [e].[IS_DELETED], [e].[Percentage], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO]
FROM [HR_PAYROLL].[EMPLOYEE_SALARY_STRUCTURE] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0
2026-02-02 23:25:58.324 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__elementIds_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ElementId], [s].[CREATED_AT], [s].[CREATED_BY], [s].[DefaultPercentage], [s].[ElementNameAr], [s].[ElementType], [s].[IsBasic], [s].[IS_DELETED], [s].[IsGosiBase], [s].[IsRecurring], [s].[IsTaxable], [s].[UPDATED_AT], [s].[UPDATED_BY], [s].[VERSION_NO]
FROM [HR_PAYROLL].[SALARY_ELEMENTS] AS [s]
WHERE [s].[ElementId] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__elementIds_0) WITH ([value] int '$') AS [e]
)
2026-02-02 23:25:58.331 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO], [j].[JOB_ID], [j].[CREATED_AT], [j].[CREATED_BY], [j].[DEFAULT_GRADE_ID], [j].[DepartmentDeptId], [j].[IS_DELETED], [j].[IS_MEDICAL], [j].[JOB_TITLE_AR], [j].[JOB_TITLE_EN], [j].[UPDATED_AT], [j].[UPDATED_BY], [j].[VERSION_NO], [j0].[JOB_GRADE_ID], [j0].[BENEFITS_CONFIG], [j0].[CREATED_AT], [j0].[CREATED_BY], [j0].[DESCRIPTION], [j0].[GRADE_CODE], [j0].[GRADE_LEVEL], [j0].[GRADE_NAME_AR], [j0].[GRADE_NAME_EN], [j0].[IS_DELETED], [j0].[MAX_SALARY], [j0].[MIN_SALARY], [j0].[UPDATED_AT], [j0].[UPDATED_BY], [j0].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
INNER JOIN [HR_CORE].[JOBS] AS [j] ON [e].[JOB_ID] = [j].[JOB_ID]
LEFT JOIN [HR_CORE].[JOB_GRADES] AS [j0] ON [j].[DEFAULT_GRADE_ID] = [j0].[JOB_GRADE_ID]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0
2026-02-02 23:25:58.464 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@p0='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (Size = 1) (DbType = Byte), @p6='?' (Size = 1) (DbType = Byte), @p7='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p8='?' (DbType = DateTime2), @p9='?' (Size = 50), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_PAYROLL].[EMPLOYEE_SALARY_STRUCTURE] ([Amount], [CREATED_AT], [CREATED_BY], [ELEMENT_ID], [EMPLOYEE_ID], [IsActive], [IS_DELETED], [Percentage], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[StructureId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2026-02-02 23:25:58.483 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-02-02 23:25:58.490 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[System.Boolean, System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-02 23:25:58.494 +03:00 [INF] Executed action HRMS.API.Controllers.Payroll.PayrollSettingsController.InitializeFromGrade (HRMS.API) in 534.5008ms
2026-02-02 23:25:58.496 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Payroll.PayrollSettingsController.InitializeFromGrade (HRMS.API)'
2026-02-02 23:25:58.498 +03:00 [INF] HTTP POST /api/PayrollSettings/initialize-from-grade/25 responded 200 in 559.0371 ms
2026-02-02 23:25:58.500 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/PayrollSettings/initialize-from-grade/25 - 200 null application/json; charset=utf-8 761.6353ms
2026-02-02 23:26:28.594 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Employees/25 - null null
2026-02-02 23:26:28.606 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.GetProfile (HRMS.API)'
2026-02-02 23:26:28.850 +03:00 [INF] Route matched with {action = "GetProfile", controller = "Employees"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Application.DTOs.Personnel.EmployeeProfileDto]] GetProfile(Int32) on controller HRMS.API.Controllers.Personnel.EmployeesController (HRMS.API).
2026-02-02 23:26:28.933 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[EMPLOYEE_ID], [s].[BIRTH_DATE], [s].[CREATED_AT], [s].[CREATED_BY], [s].[DEPARTMENT_ID], [s].[EMAIL], [s].[EMPLOYEE_NUMBER], [s].[FIRST_NAME_AR], [s].[FULL_NAME_EN], [s].[GENDER], [s].[HIRE_DATE], [s].[IS_DELETED], [s].[JOB_ID], [s].[LAST_NAME_AR], [s].[LICENSE_EXPIRY_DATE], [s].[LICENSE_NUMBER], [s].[MANAGER_ID], [s].[MARITAL_STATUS], [s].[MOBILE], [s].[NATIONAL_ID], [s].[NATIONALITY_ID], [s].[SECOND_NAME_AR], [s].[SPECIALTY], [s].[THIRD_NAME_AR], [s].[UPDATED_AT], [s].[UPDATED_BY], [s].[USER_ID], [s].[VERSION_NO], [s].[DEPT_ID], [s].[BranchId], [s].[COST_CENTER_CODE], [s].[CREATED_AT0], [s].[CREATED_BY0], [s].[DEPT_NAME_AR], [s].[DEPT_NAME_EN], [s].[IS_ACTIVE], [s].[IS_DELETED0], [s].[MANAGER_ID0], [s].[PARENT_DEPT_ID], [s].[UPDATED_AT0], [s].[UPDATED_BY0], [s].[VERSION_NO0], [s].[JOB_ID0], [s].[CREATED_AT1], [s].[CREATED_BY1], [s].[DEFAULT_GRADE_ID], [s].[DepartmentDeptId], [s].[IS_DELETED1], [s].[IS_MEDICAL], [s].[JOB_TITLE_AR], [s].[JOB_TITLE_EN], [s].[UPDATED_AT1], [s].[UPDATED_BY1], [s].[VERSION_NO1], [s].[COMPENSATION_ID], [s].[BANK_ID], [s].[BASIC_SALARY], [s].[CREATED_AT2], [s].[CREATED_BY2], [s].[EMPLOYEE_ID0], [s].[HOUSING_ALLOWANCE], [s].[IBAN_NUMBER], [s].[IS_DELETED2], [s].[MEDICAL_ALLOWANCE], [s].[OTHER_ALLOWANCES], [s].[TRANSPORT_ALLOWANCE], [s].[UPDATED_AT2], [s].[UPDATED_BY2], [s].[VERSION_NO2], [s0].[DOCUMENT_ID], [s0].[CONTENT_TYPE], [s0].[CREATED_AT], [s0].[CREATED_BY], [s0].[DOCUMENT_NUMBER], [s0].[DOCUMENT_TYPE_ID], [s0].[EMPLOYEE_ID], [s0].[EXPIRY_DATE], [s0].[FILE_NAME], [s0].[FILE_PATH], [s0].[FILE_SIZE], [s0].[IS_DELETED], [s0].[ISSUE_DATE], [s0].[UPDATED_AT], [s0].[UPDATED_BY], [s0].[VERSION_NO], [s0].[DOCUMENT_TYPE_ID0], [s0].[ALLOWED_EXTENSIONS], [s0].[CREATED_AT0], [s0].[CREATED_BY0], [s0].[DEFAULT_EXPIRY_DAYS], [s0].[DESCRIPTION], [s0].[DOCUMENT_TYPE_NAME_AR], [s0].[DOCUMENT_TYPE_NAME_EN], [s0].[HAS_EXPIRY], [s0].[IS_DELETED0], [s0].[IS_REQUIRED], [s0].[MAX_FILE_SIZE_MB], [s0].[UPDATED_AT0], [s0].[UPDATED_BY0], [s0].[VERSION_NO0]
FROM (
    SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO], [d].[DEPT_ID], [d].[BranchId], [d].[COST_CENTER_CODE], [d].[CREATED_AT] AS [CREATED_AT0], [d].[CREATED_BY] AS [CREATED_BY0], [d].[DEPT_NAME_AR], [d].[DEPT_NAME_EN], [d].[IS_ACTIVE], [d].[IS_DELETED] AS [IS_DELETED0], [d].[MANAGER_ID] AS [MANAGER_ID0], [d].[PARENT_DEPT_ID], [d].[UPDATED_AT] AS [UPDATED_AT0], [d].[UPDATED_BY] AS [UPDATED_BY0], [d].[VERSION_NO] AS [VERSION_NO0], [j].[JOB_ID] AS [JOB_ID0], [j].[CREATED_AT] AS [CREATED_AT1], [j].[CREATED_BY] AS [CREATED_BY1], [j].[DEFAULT_GRADE_ID], [j].[DepartmentDeptId], [j].[IS_DELETED] AS [IS_DELETED1], [j].[IS_MEDICAL], [j].[JOB_TITLE_AR], [j].[JOB_TITLE_EN], [j].[UPDATED_AT] AS [UPDATED_AT1], [j].[UPDATED_BY] AS [UPDATED_BY1], [j].[VERSION_NO] AS [VERSION_NO1], [e0].[COMPENSATION_ID], [e0].[BANK_ID], [e0].[BASIC_SALARY], [e0].[CREATED_AT] AS [CREATED_AT2], [e0].[CREATED_BY] AS [CREATED_BY2], [e0].[EMPLOYEE_ID] AS [EMPLOYEE_ID0], [e0].[HOUSING_ALLOWANCE], [e0].[IBAN_NUMBER], [e0].[IS_DELETED] AS [IS_DELETED2], [e0].[MEDICAL_ALLOWANCE], [e0].[OTHER_ALLOWANCES], [e0].[TRANSPORT_ALLOWANCE], [e0].[UPDATED_AT] AS [UPDATED_AT2], [e0].[UPDATED_BY] AS [UPDATED_BY2], [e0].[VERSION_NO] AS [VERSION_NO2]
    FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
    INNER JOIN [HR_CORE].[DEPARTMENTS] AS [d] ON [e].[DEPARTMENT_ID] = [d].[DEPT_ID]
    INNER JOIN [HR_CORE].[JOBS] AS [j] ON [e].[JOB_ID] = [j].[JOB_ID]
    LEFT JOIN [HR_PERSONNEL].[EMPLOYEE_COMPENSATIONS] AS [e0] ON [e].[EMPLOYEE_ID] = [e0].[EMPLOYEE_ID]
    WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0 AND [e].[IS_DELETED] = CAST(0 AS tinyint)
) AS [s]
LEFT JOIN (
    SELECT [e1].[DOCUMENT_ID], [e1].[CONTENT_TYPE], [e1].[CREATED_AT], [e1].[CREATED_BY], [e1].[DOCUMENT_NUMBER], [e1].[DOCUMENT_TYPE_ID], [e1].[EMPLOYEE_ID], [e1].[EXPIRY_DATE], [e1].[FILE_NAME], [e1].[FILE_PATH], [e1].[FILE_SIZE], [e1].[IS_DELETED], [e1].[ISSUE_DATE], [e1].[UPDATED_AT], [e1].[UPDATED_BY], [e1].[VERSION_NO], [d0].[DOCUMENT_TYPE_ID] AS [DOCUMENT_TYPE_ID0], [d0].[ALLOWED_EXTENSIONS], [d0].[CREATED_AT] AS [CREATED_AT0], [d0].[CREATED_BY] AS [CREATED_BY0], [d0].[DEFAULT_EXPIRY_DAYS], [d0].[DESCRIPTION], [d0].[DOCUMENT_TYPE_NAME_AR], [d0].[DOCUMENT_TYPE_NAME_EN], [d0].[HAS_EXPIRY], [d0].[IS_DELETED] AS [IS_DELETED0], [d0].[IS_REQUIRED], [d0].[MAX_FILE_SIZE_MB], [d0].[UPDATED_AT] AS [UPDATED_AT0], [d0].[UPDATED_BY] AS [UPDATED_BY0], [d0].[VERSION_NO] AS [VERSION_NO0]
    FROM [HR_PERSONNEL].[EMPLOYEE_DOCUMENTS] AS [e1]
    INNER JOIN [HR_CORE].[DOCUMENT_TYPES] AS [d0] ON [e1].[DOCUMENT_TYPE_ID] = [d0].[DOCUMENT_TYPE_ID]
) AS [s0] ON [s].[EMPLOYEE_ID] = [s0].[EMPLOYEE_ID]
ORDER BY [s].[EMPLOYEE_ID], [s].[DEPT_ID], [s].[JOB_ID0], [s].[COMPENSATION_ID], [s0].[DOCUMENT_ID]
2026-02-02 23:26:29.007 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Application.DTOs.Personnel.EmployeeProfileDto'.
2026-02-02 23:26:29.097 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeesController.GetProfile (HRMS.API) in 240.9503ms
2026-02-02 23:26:29.121 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.GetProfile (HRMS.API)'
2026-02-02 23:26:29.122 +03:00 [INF] HTTP GET /api/Employees/25 responded 200 in 516.9221 ms
2026-02-02 23:26:29.125 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Employees/25 - 200 null application/json; charset=utf-8 531.47ms
2026-02-02 23:27:01.369 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Employees/25 - null null
2026-02-02 23:27:01.605 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.GetProfile (HRMS.API)'
2026-02-02 23:27:01.614 +03:00 [INF] Route matched with {action = "GetProfile", controller = "Employees"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Application.DTOs.Personnel.EmployeeProfileDto]] GetProfile(Int32) on controller HRMS.API.Controllers.Personnel.EmployeesController (HRMS.API).
2026-02-02 23:27:01.678 +03:00 [INF] Executed DbCommand (49ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[EMPLOYEE_ID], [s].[BIRTH_DATE], [s].[CREATED_AT], [s].[CREATED_BY], [s].[DEPARTMENT_ID], [s].[EMAIL], [s].[EMPLOYEE_NUMBER], [s].[FIRST_NAME_AR], [s].[FULL_NAME_EN], [s].[GENDER], [s].[HIRE_DATE], [s].[IS_DELETED], [s].[JOB_ID], [s].[LAST_NAME_AR], [s].[LICENSE_EXPIRY_DATE], [s].[LICENSE_NUMBER], [s].[MANAGER_ID], [s].[MARITAL_STATUS], [s].[MOBILE], [s].[NATIONAL_ID], [s].[NATIONALITY_ID], [s].[SECOND_NAME_AR], [s].[SPECIALTY], [s].[THIRD_NAME_AR], [s].[UPDATED_AT], [s].[UPDATED_BY], [s].[USER_ID], [s].[VERSION_NO], [s].[DEPT_ID], [s].[BranchId], [s].[COST_CENTER_CODE], [s].[CREATED_AT0], [s].[CREATED_BY0], [s].[DEPT_NAME_AR], [s].[DEPT_NAME_EN], [s].[IS_ACTIVE], [s].[IS_DELETED0], [s].[MANAGER_ID0], [s].[PARENT_DEPT_ID], [s].[UPDATED_AT0], [s].[UPDATED_BY0], [s].[VERSION_NO0], [s].[JOB_ID0], [s].[CREATED_AT1], [s].[CREATED_BY1], [s].[DEFAULT_GRADE_ID], [s].[DepartmentDeptId], [s].[IS_DELETED1], [s].[IS_MEDICAL], [s].[JOB_TITLE_AR], [s].[JOB_TITLE_EN], [s].[UPDATED_AT1], [s].[UPDATED_BY1], [s].[VERSION_NO1], [s].[COMPENSATION_ID], [s].[BANK_ID], [s].[BASIC_SALARY], [s].[CREATED_AT2], [s].[CREATED_BY2], [s].[EMPLOYEE_ID0], [s].[HOUSING_ALLOWANCE], [s].[IBAN_NUMBER], [s].[IS_DELETED2], [s].[MEDICAL_ALLOWANCE], [s].[OTHER_ALLOWANCES], [s].[TRANSPORT_ALLOWANCE], [s].[UPDATED_AT2], [s].[UPDATED_BY2], [s].[VERSION_NO2], [s0].[DOCUMENT_ID], [s0].[CONTENT_TYPE], [s0].[CREATED_AT], [s0].[CREATED_BY], [s0].[DOCUMENT_NUMBER], [s0].[DOCUMENT_TYPE_ID], [s0].[EMPLOYEE_ID], [s0].[EXPIRY_DATE], [s0].[FILE_NAME], [s0].[FILE_PATH], [s0].[FILE_SIZE], [s0].[IS_DELETED], [s0].[ISSUE_DATE], [s0].[UPDATED_AT], [s0].[UPDATED_BY], [s0].[VERSION_NO], [s0].[DOCUMENT_TYPE_ID0], [s0].[ALLOWED_EXTENSIONS], [s0].[CREATED_AT0], [s0].[CREATED_BY0], [s0].[DEFAULT_EXPIRY_DAYS], [s0].[DESCRIPTION], [s0].[DOCUMENT_TYPE_NAME_AR], [s0].[DOCUMENT_TYPE_NAME_EN], [s0].[HAS_EXPIRY], [s0].[IS_DELETED0], [s0].[IS_REQUIRED], [s0].[MAX_FILE_SIZE_MB], [s0].[UPDATED_AT0], [s0].[UPDATED_BY0], [s0].[VERSION_NO0]
FROM (
    SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO], [d].[DEPT_ID], [d].[BranchId], [d].[COST_CENTER_CODE], [d].[CREATED_AT] AS [CREATED_AT0], [d].[CREATED_BY] AS [CREATED_BY0], [d].[DEPT_NAME_AR], [d].[DEPT_NAME_EN], [d].[IS_ACTIVE], [d].[IS_DELETED] AS [IS_DELETED0], [d].[MANAGER_ID] AS [MANAGER_ID0], [d].[PARENT_DEPT_ID], [d].[UPDATED_AT] AS [UPDATED_AT0], [d].[UPDATED_BY] AS [UPDATED_BY0], [d].[VERSION_NO] AS [VERSION_NO0], [j].[JOB_ID] AS [JOB_ID0], [j].[CREATED_AT] AS [CREATED_AT1], [j].[CREATED_BY] AS [CREATED_BY1], [j].[DEFAULT_GRADE_ID], [j].[DepartmentDeptId], [j].[IS_DELETED] AS [IS_DELETED1], [j].[IS_MEDICAL], [j].[JOB_TITLE_AR], [j].[JOB_TITLE_EN], [j].[UPDATED_AT] AS [UPDATED_AT1], [j].[UPDATED_BY] AS [UPDATED_BY1], [j].[VERSION_NO] AS [VERSION_NO1], [e0].[COMPENSATION_ID], [e0].[BANK_ID], [e0].[BASIC_SALARY], [e0].[CREATED_AT] AS [CREATED_AT2], [e0].[CREATED_BY] AS [CREATED_BY2], [e0].[EMPLOYEE_ID] AS [EMPLOYEE_ID0], [e0].[HOUSING_ALLOWANCE], [e0].[IBAN_NUMBER], [e0].[IS_DELETED] AS [IS_DELETED2], [e0].[MEDICAL_ALLOWANCE], [e0].[OTHER_ALLOWANCES], [e0].[TRANSPORT_ALLOWANCE], [e0].[UPDATED_AT] AS [UPDATED_AT2], [e0].[UPDATED_BY] AS [UPDATED_BY2], [e0].[VERSION_NO] AS [VERSION_NO2]
    FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
    INNER JOIN [HR_CORE].[DEPARTMENTS] AS [d] ON [e].[DEPARTMENT_ID] = [d].[DEPT_ID]
    INNER JOIN [HR_CORE].[JOBS] AS [j] ON [e].[JOB_ID] = [j].[JOB_ID]
    LEFT JOIN [HR_PERSONNEL].[EMPLOYEE_COMPENSATIONS] AS [e0] ON [e].[EMPLOYEE_ID] = [e0].[EMPLOYEE_ID]
    WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0 AND [e].[IS_DELETED] = CAST(0 AS tinyint)
) AS [s]
LEFT JOIN (
    SELECT [e1].[DOCUMENT_ID], [e1].[CONTENT_TYPE], [e1].[CREATED_AT], [e1].[CREATED_BY], [e1].[DOCUMENT_NUMBER], [e1].[DOCUMENT_TYPE_ID], [e1].[EMPLOYEE_ID], [e1].[EXPIRY_DATE], [e1].[FILE_NAME], [e1].[FILE_PATH], [e1].[FILE_SIZE], [e1].[IS_DELETED], [e1].[ISSUE_DATE], [e1].[UPDATED_AT], [e1].[UPDATED_BY], [e1].[VERSION_NO], [d0].[DOCUMENT_TYPE_ID] AS [DOCUMENT_TYPE_ID0], [d0].[ALLOWED_EXTENSIONS], [d0].[CREATED_AT] AS [CREATED_AT0], [d0].[CREATED_BY] AS [CREATED_BY0], [d0].[DEFAULT_EXPIRY_DAYS], [d0].[DESCRIPTION], [d0].[DOCUMENT_TYPE_NAME_AR], [d0].[DOCUMENT_TYPE_NAME_EN], [d0].[HAS_EXPIRY], [d0].[IS_DELETED] AS [IS_DELETED0], [d0].[IS_REQUIRED], [d0].[MAX_FILE_SIZE_MB], [d0].[UPDATED_AT] AS [UPDATED_AT0], [d0].[UPDATED_BY] AS [UPDATED_BY0], [d0].[VERSION_NO] AS [VERSION_NO0]
    FROM [HR_PERSONNEL].[EMPLOYEE_DOCUMENTS] AS [e1]
    INNER JOIN [HR_CORE].[DOCUMENT_TYPES] AS [d0] ON [e1].[DOCUMENT_TYPE_ID] = [d0].[DOCUMENT_TYPE_ID]
) AS [s0] ON [s].[EMPLOYEE_ID] = [s0].[EMPLOYEE_ID]
ORDER BY [s].[EMPLOYEE_ID], [s].[DEPT_ID], [s].[JOB_ID0], [s].[COMPENSATION_ID], [s0].[DOCUMENT_ID]
2026-02-02 23:27:01.728 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Application.DTOs.Personnel.EmployeeProfileDto'.
2026-02-02 23:27:01.734 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeesController.GetProfile (HRMS.API) in 107.865ms
2026-02-02 23:27:01.748 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.GetProfile (HRMS.API)'
2026-02-02 23:27:01.753 +03:00 [INF] HTTP GET /api/Employees/25 responded 200 in 147.6063 ms
2026-02-02 23:27:01.758 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Employees/25 - 200 null application/json; charset=utf-8 389.5546ms
2026-02-02 23:27:41.306 +03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/PayrollSettings/initialize-from-grade/25 - null 0
2026-02-02 23:27:41.493 +03:00 [INF] CORS policy execution successful.
2026-02-02 23:27:41.495 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Payroll.PayrollSettingsController.InitializeFromGrade (HRMS.API)'
2026-02-02 23:27:41.502 +03:00 [INF] Route matched with {action = "InitializeFromGrade", controller = "PayrollSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[System.Boolean]]] InitializeFromGrade(Int32) on controller HRMS.API.Controllers.Payroll.PayrollSettingsController (HRMS.API).
2026-02-02 23:27:41.525 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO], [j].[JOB_ID], [j].[CREATED_AT], [j].[CREATED_BY], [j].[DEFAULT_GRADE_ID], [j].[DepartmentDeptId], [j].[IS_DELETED], [j].[IS_MEDICAL], [j].[JOB_TITLE_AR], [j].[JOB_TITLE_EN], [j].[UPDATED_AT], [j].[UPDATED_BY], [j].[VERSION_NO], [j0].[JOB_GRADE_ID], [j0].[BENEFITS_CONFIG], [j0].[CREATED_AT], [j0].[CREATED_BY], [j0].[DESCRIPTION], [j0].[GRADE_CODE], [j0].[GRADE_LEVEL], [j0].[GRADE_NAME_AR], [j0].[GRADE_NAME_EN], [j0].[IS_DELETED], [j0].[MAX_SALARY], [j0].[MIN_SALARY], [j0].[UPDATED_AT], [j0].[UPDATED_BY], [j0].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
INNER JOIN [HR_CORE].[JOBS] AS [j] ON [e].[JOB_ID] = [j].[JOB_ID]
LEFT JOIN [HR_CORE].[JOB_GRADES] AS [j0] ON [j].[DEFAULT_GRADE_ID] = [j0].[JOB_GRADE_ID]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0
2026-02-02 23:27:41.539 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ElementId], [s].[CREATED_AT], [s].[CREATED_BY], [s].[DefaultPercentage], [s].[ElementNameAr], [s].[ElementType], [s].[IsBasic], [s].[IS_DELETED], [s].[IsGosiBase], [s].[IsRecurring], [s].[IsTaxable], [s].[UPDATED_AT], [s].[UPDATED_BY], [s].[VERSION_NO]
FROM [HR_PAYROLL].[SALARY_ELEMENTS] AS [s]
WHERE [s].[IsBasic] = CAST(1 AS tinyint)
2026-02-02 23:27:41.551 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[StructureId], [e].[Amount], [e].[CREATED_AT], [e].[CREATED_BY], [e].[ELEMENT_ID], [e].[EMPLOYEE_ID], [e].[IsActive], [e].[IS_DELETED], [e].[Percentage], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO]
FROM [HR_PAYROLL].[EMPLOYEE_SALARY_STRUCTURE] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0
2026-02-02 23:27:41.570 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__elementIds_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ElementId], [s].[CREATED_AT], [s].[CREATED_BY], [s].[DefaultPercentage], [s].[ElementNameAr], [s].[ElementType], [s].[IsBasic], [s].[IS_DELETED], [s].[IsGosiBase], [s].[IsRecurring], [s].[IsTaxable], [s].[UPDATED_AT], [s].[UPDATED_BY], [s].[VERSION_NO]
FROM [HR_PAYROLL].[SALARY_ELEMENTS] AS [s]
WHERE [s].[ElementId] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__elementIds_0) WITH ([value] int '$') AS [e]
)
2026-02-02 23:27:41.576 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO], [j].[JOB_ID], [j].[CREATED_AT], [j].[CREATED_BY], [j].[DEFAULT_GRADE_ID], [j].[DepartmentDeptId], [j].[IS_DELETED], [j].[IS_MEDICAL], [j].[JOB_TITLE_AR], [j].[JOB_TITLE_EN], [j].[UPDATED_AT], [j].[UPDATED_BY], [j].[VERSION_NO], [j0].[JOB_GRADE_ID], [j0].[BENEFITS_CONFIG], [j0].[CREATED_AT], [j0].[CREATED_BY], [j0].[DESCRIPTION], [j0].[GRADE_CODE], [j0].[GRADE_LEVEL], [j0].[GRADE_NAME_AR], [j0].[GRADE_NAME_EN], [j0].[IS_DELETED], [j0].[MAX_SALARY], [j0].[MIN_SALARY], [j0].[UPDATED_AT], [j0].[UPDATED_BY], [j0].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
INNER JOIN [HR_CORE].[JOBS] AS [j] ON [e].[JOB_ID] = [j].[JOB_ID]
LEFT JOIN [HR_CORE].[JOB_GRADES] AS [j0] ON [j].[DEFAULT_GRADE_ID] = [j0].[JOB_GRADE_ID]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0
2026-02-02 23:27:41.614 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p12='?' (DbType = DateTime2), @p13='?' (Size = 50), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (Size = 1) (DbType = Byte), @p17='?' (Size = 1) (DbType = Byte), @p18='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p19='?' (DbType = DateTime2), @p20='?' (Size = 50), @p21='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
DELETE FROM [HR_PAYROLL].[EMPLOYEE_SALARY_STRUCTURE]
OUTPUT 1
WHERE [StructureId] = @p9 AND [VERSION_NO] = @p10;
INSERT INTO [HR_PAYROLL].[EMPLOYEE_SALARY_STRUCTURE] ([Amount], [CREATED_AT], [CREATED_BY], [ELEMENT_ID], [EMPLOYEE_ID], [IsActive], [IS_DELETED], [Percentage], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[StructureId]
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
2026-02-02 23:27:41.631 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-02-02 23:27:41.637 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[System.Boolean, System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-02 23:27:41.647 +03:00 [INF] Executed action HRMS.API.Controllers.Payroll.PayrollSettingsController.InitializeFromGrade (HRMS.API) in 139.6679ms
2026-02-02 23:27:41.656 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Payroll.PayrollSettingsController.InitializeFromGrade (HRMS.API)'
2026-02-02 23:27:41.658 +03:00 [INF] HTTP POST /api/PayrollSettings/initialize-from-grade/25 responded 200 in 165.4514 ms
2026-02-02 23:27:41.662 +03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/PayrollSettings/initialize-from-grade/25 - 200 null application/json; charset=utf-8 355.1589ms
2026-02-02 23:27:55.408 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Employees/25 - null null
2026-02-02 23:27:55.415 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.GetProfile (HRMS.API)'
2026-02-02 23:27:55.417 +03:00 [INF] Route matched with {action = "GetProfile", controller = "Employees"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Application.DTOs.Personnel.EmployeeProfileDto]] GetProfile(Int32) on controller HRMS.API.Controllers.Personnel.EmployeesController (HRMS.API).
2026-02-02 23:27:55.521 +03:00 [INF] Executed DbCommand (98ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[EMPLOYEE_ID], [s].[BIRTH_DATE], [s].[CREATED_AT], [s].[CREATED_BY], [s].[DEPARTMENT_ID], [s].[EMAIL], [s].[EMPLOYEE_NUMBER], [s].[FIRST_NAME_AR], [s].[FULL_NAME_EN], [s].[GENDER], [s].[HIRE_DATE], [s].[IS_DELETED], [s].[JOB_ID], [s].[LAST_NAME_AR], [s].[LICENSE_EXPIRY_DATE], [s].[LICENSE_NUMBER], [s].[MANAGER_ID], [s].[MARITAL_STATUS], [s].[MOBILE], [s].[NATIONAL_ID], [s].[NATIONALITY_ID], [s].[SECOND_NAME_AR], [s].[SPECIALTY], [s].[THIRD_NAME_AR], [s].[UPDATED_AT], [s].[UPDATED_BY], [s].[USER_ID], [s].[VERSION_NO], [s].[DEPT_ID], [s].[BranchId], [s].[COST_CENTER_CODE], [s].[CREATED_AT0], [s].[CREATED_BY0], [s].[DEPT_NAME_AR], [s].[DEPT_NAME_EN], [s].[IS_ACTIVE], [s].[IS_DELETED0], [s].[MANAGER_ID0], [s].[PARENT_DEPT_ID], [s].[UPDATED_AT0], [s].[UPDATED_BY0], [s].[VERSION_NO0], [s].[JOB_ID0], [s].[CREATED_AT1], [s].[CREATED_BY1], [s].[DEFAULT_GRADE_ID], [s].[DepartmentDeptId], [s].[IS_DELETED1], [s].[IS_MEDICAL], [s].[JOB_TITLE_AR], [s].[JOB_TITLE_EN], [s].[UPDATED_AT1], [s].[UPDATED_BY1], [s].[VERSION_NO1], [s].[COMPENSATION_ID], [s].[BANK_ID], [s].[BASIC_SALARY], [s].[CREATED_AT2], [s].[CREATED_BY2], [s].[EMPLOYEE_ID0], [s].[HOUSING_ALLOWANCE], [s].[IBAN_NUMBER], [s].[IS_DELETED2], [s].[MEDICAL_ALLOWANCE], [s].[OTHER_ALLOWANCES], [s].[TRANSPORT_ALLOWANCE], [s].[UPDATED_AT2], [s].[UPDATED_BY2], [s].[VERSION_NO2], [s0].[DOCUMENT_ID], [s0].[CONTENT_TYPE], [s0].[CREATED_AT], [s0].[CREATED_BY], [s0].[DOCUMENT_NUMBER], [s0].[DOCUMENT_TYPE_ID], [s0].[EMPLOYEE_ID], [s0].[EXPIRY_DATE], [s0].[FILE_NAME], [s0].[FILE_PATH], [s0].[FILE_SIZE], [s0].[IS_DELETED], [s0].[ISSUE_DATE], [s0].[UPDATED_AT], [s0].[UPDATED_BY], [s0].[VERSION_NO], [s0].[DOCUMENT_TYPE_ID0], [s0].[ALLOWED_EXTENSIONS], [s0].[CREATED_AT0], [s0].[CREATED_BY0], [s0].[DEFAULT_EXPIRY_DAYS], [s0].[DESCRIPTION], [s0].[DOCUMENT_TYPE_NAME_AR], [s0].[DOCUMENT_TYPE_NAME_EN], [s0].[HAS_EXPIRY], [s0].[IS_DELETED0], [s0].[IS_REQUIRED], [s0].[MAX_FILE_SIZE_MB], [s0].[UPDATED_AT0], [s0].[UPDATED_BY0], [s0].[VERSION_NO0]
FROM (
    SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO], [d].[DEPT_ID], [d].[BranchId], [d].[COST_CENTER_CODE], [d].[CREATED_AT] AS [CREATED_AT0], [d].[CREATED_BY] AS [CREATED_BY0], [d].[DEPT_NAME_AR], [d].[DEPT_NAME_EN], [d].[IS_ACTIVE], [d].[IS_DELETED] AS [IS_DELETED0], [d].[MANAGER_ID] AS [MANAGER_ID0], [d].[PARENT_DEPT_ID], [d].[UPDATED_AT] AS [UPDATED_AT0], [d].[UPDATED_BY] AS [UPDATED_BY0], [d].[VERSION_NO] AS [VERSION_NO0], [j].[JOB_ID] AS [JOB_ID0], [j].[CREATED_AT] AS [CREATED_AT1], [j].[CREATED_BY] AS [CREATED_BY1], [j].[DEFAULT_GRADE_ID], [j].[DepartmentDeptId], [j].[IS_DELETED] AS [IS_DELETED1], [j].[IS_MEDICAL], [j].[JOB_TITLE_AR], [j].[JOB_TITLE_EN], [j].[UPDATED_AT] AS [UPDATED_AT1], [j].[UPDATED_BY] AS [UPDATED_BY1], [j].[VERSION_NO] AS [VERSION_NO1], [e0].[COMPENSATION_ID], [e0].[BANK_ID], [e0].[BASIC_SALARY], [e0].[CREATED_AT] AS [CREATED_AT2], [e0].[CREATED_BY] AS [CREATED_BY2], [e0].[EMPLOYEE_ID] AS [EMPLOYEE_ID0], [e0].[HOUSING_ALLOWANCE], [e0].[IBAN_NUMBER], [e0].[IS_DELETED] AS [IS_DELETED2], [e0].[MEDICAL_ALLOWANCE], [e0].[OTHER_ALLOWANCES], [e0].[TRANSPORT_ALLOWANCE], [e0].[UPDATED_AT] AS [UPDATED_AT2], [e0].[UPDATED_BY] AS [UPDATED_BY2], [e0].[VERSION_NO] AS [VERSION_NO2]
    FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
    INNER JOIN [HR_CORE].[DEPARTMENTS] AS [d] ON [e].[DEPARTMENT_ID] = [d].[DEPT_ID]
    INNER JOIN [HR_CORE].[JOBS] AS [j] ON [e].[JOB_ID] = [j].[JOB_ID]
    LEFT JOIN [HR_PERSONNEL].[EMPLOYEE_COMPENSATIONS] AS [e0] ON [e].[EMPLOYEE_ID] = [e0].[EMPLOYEE_ID]
    WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0 AND [e].[IS_DELETED] = CAST(0 AS tinyint)
) AS [s]
LEFT JOIN (
    SELECT [e1].[DOCUMENT_ID], [e1].[CONTENT_TYPE], [e1].[CREATED_AT], [e1].[CREATED_BY], [e1].[DOCUMENT_NUMBER], [e1].[DOCUMENT_TYPE_ID], [e1].[EMPLOYEE_ID], [e1].[EXPIRY_DATE], [e1].[FILE_NAME], [e1].[FILE_PATH], [e1].[FILE_SIZE], [e1].[IS_DELETED], [e1].[ISSUE_DATE], [e1].[UPDATED_AT], [e1].[UPDATED_BY], [e1].[VERSION_NO], [d0].[DOCUMENT_TYPE_ID] AS [DOCUMENT_TYPE_ID0], [d0].[ALLOWED_EXTENSIONS], [d0].[CREATED_AT] AS [CREATED_AT0], [d0].[CREATED_BY] AS [CREATED_BY0], [d0].[DEFAULT_EXPIRY_DAYS], [d0].[DESCRIPTION], [d0].[DOCUMENT_TYPE_NAME_AR], [d0].[DOCUMENT_TYPE_NAME_EN], [d0].[HAS_EXPIRY], [d0].[IS_DELETED] AS [IS_DELETED0], [d0].[IS_REQUIRED], [d0].[MAX_FILE_SIZE_MB], [d0].[UPDATED_AT] AS [UPDATED_AT0], [d0].[UPDATED_BY] AS [UPDATED_BY0], [d0].[VERSION_NO] AS [VERSION_NO0]
    FROM [HR_PERSONNEL].[EMPLOYEE_DOCUMENTS] AS [e1]
    INNER JOIN [HR_CORE].[DOCUMENT_TYPES] AS [d0] ON [e1].[DOCUMENT_TYPE_ID] = [d0].[DOCUMENT_TYPE_ID]
) AS [s0] ON [s].[EMPLOYEE_ID] = [s0].[EMPLOYEE_ID]
ORDER BY [s].[EMPLOYEE_ID], [s].[DEPT_ID], [s].[JOB_ID0], [s].[COMPENSATION_ID], [s0].[DOCUMENT_ID]
2026-02-02 23:27:55.542 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Application.DTOs.Personnel.EmployeeProfileDto'.
2026-02-02 23:27:55.543 +03:00 [INF] Executed action HRMS.API.Controllers.Personnel.EmployeesController.GetProfile (HRMS.API) in 123.2351ms
2026-02-02 23:27:55.544 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Personnel.EmployeesController.GetProfile (HRMS.API)'
2026-02-02 23:27:55.546 +03:00 [INF] HTTP GET /api/Employees/25 responded 200 in 131.6706 ms
2026-02-02 23:27:55.548 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Employees/25 - 200 null application/json; charset=utf-8 139.9918ms
2026-02-02 23:29:45.900 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/PayrollSettings/employee-structure/25 - null null
2026-02-02 23:29:46.448 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Payroll.PayrollSettingsController.GetEmployeeStructure (HRMS.API)'
2026-02-02 23:29:46.473 +03:00 [INF] Route matched with {action = "GetEmployeeStructure", controller = "PayrollSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[HRMS.Application.DTOs.Payroll.Configuration.EmployeeSalaryStructureDto]]] GetEmployeeStructure(Int32) on controller HRMS.API.Controllers.Payroll.PayrollSettingsController (HRMS.API).
2026-02-02 23:29:46.505 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO], [j].[JOB_ID], [j].[CREATED_AT], [j].[CREATED_BY], [j].[DEFAULT_GRADE_ID], [j].[DepartmentDeptId], [j].[IS_DELETED], [j].[IS_MEDICAL], [j].[JOB_TITLE_AR], [j].[JOB_TITLE_EN], [j].[UPDATED_AT], [j].[UPDATED_BY], [j].[VERSION_NO], [j0].[JOB_GRADE_ID], [j0].[BENEFITS_CONFIG], [j0].[CREATED_AT], [j0].[CREATED_BY], [j0].[DESCRIPTION], [j0].[GRADE_CODE], [j0].[GRADE_LEVEL], [j0].[GRADE_NAME_AR], [j0].[GRADE_NAME_EN], [j0].[IS_DELETED], [j0].[MAX_SALARY], [j0].[MIN_SALARY], [j0].[UPDATED_AT], [j0].[UPDATED_BY], [j0].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
INNER JOIN [HR_CORE].[JOBS] AS [j] ON [e].[JOB_ID] = [j].[JOB_ID]
LEFT JOIN [HR_CORE].[JOB_GRADES] AS [j0] ON [j].[DEFAULT_GRADE_ID] = [j0].[JOB_GRADE_ID]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0
2026-02-02 23:29:46.540 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[StructureId], [e].[Amount], [e].[CREATED_AT], [e].[CREATED_BY], [e].[ELEMENT_ID], [e].[EMPLOYEE_ID], [e].[IsActive], [e].[IS_DELETED], [e].[Percentage], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO], [s].[ElementId], [s].[CREATED_AT], [s].[CREATED_BY], [s].[DefaultPercentage], [s].[ElementNameAr], [s].[ElementType], [s].[IsBasic], [s].[IS_DELETED], [s].[IsGosiBase], [s].[IsRecurring], [s].[IsTaxable], [s].[UPDATED_AT], [s].[UPDATED_BY], [s].[VERSION_NO]
FROM [HR_PAYROLL].[EMPLOYEE_SALARY_STRUCTURE] AS [e]
INNER JOIN [HR_PAYROLL].[SALARY_ELEMENTS] AS [s] ON [e].[ELEMENT_ID] = [s].[ElementId]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0 AND [e].[IsActive] = CAST(1 AS tinyint)
2026-02-02 23:29:46.554 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[HRMS.Application.DTOs.Payroll.Configuration.EmployeeSalaryStructureDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-02 23:29:46.579 +03:00 [INF] Executed action HRMS.API.Controllers.Payroll.PayrollSettingsController.GetEmployeeStructure (HRMS.API) in 95.974ms
2026-02-02 23:29:46.581 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Payroll.PayrollSettingsController.GetEmployeeStructure (HRMS.API)'
2026-02-02 23:29:46.583 +03:00 [INF] HTTP GET /api/PayrollSettings/employee-structure/25 responded 200 in 135.8063 ms
2026-02-02 23:29:46.592 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/PayrollSettings/employee-structure/25 - 200 null application/json; charset=utf-8 692.4242ms
2026-02-02 23:32:41.944 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:5001/api/PayrollSettings/update-structure - application/json 115
2026-02-02 23:32:41.951 +03:00 [INF] CORS policy execution successful.
2026-02-02 23:32:41.953 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Payroll.PayrollSettingsController.UpdateStructure (HRMS.API)'
2026-02-02 23:32:41.985 +03:00 [INF] Route matched with {action = "UpdateStructure", controller = "PayrollSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[System.Boolean]]] UpdateStructure(HRMS.Application.Features.Payroll.Configuration.Structure.Commands.SetEmployeeSalaryStructure.SetEmployeeSalaryStructureCommand) on controller HRMS.API.Controllers.Payroll.PayrollSettingsController (HRMS.API).
2026-02-02 23:32:42.022 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[StructureId], [e].[Amount], [e].[CREATED_AT], [e].[CREATED_BY], [e].[ELEMENT_ID], [e].[EMPLOYEE_ID], [e].[IsActive], [e].[IS_DELETED], [e].[Percentage], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO]
FROM [HR_PAYROLL].[EMPLOYEE_SALARY_STRUCTURE] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0
2026-02-02 23:32:42.037 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__elementIds_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ElementId], [s].[CREATED_AT], [s].[CREATED_BY], [s].[DefaultPercentage], [s].[ElementNameAr], [s].[ElementType], [s].[IsBasic], [s].[IS_DELETED], [s].[IsGosiBase], [s].[IsRecurring], [s].[IsTaxable], [s].[UPDATED_AT], [s].[UPDATED_BY], [s].[VERSION_NO]
FROM [HR_PAYROLL].[SALARY_ELEMENTS] AS [s]
WHERE [s].[ElementId] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__elementIds_0) WITH ([value] int '$') AS [e]
)
2026-02-02 23:32:42.051 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO], [j].[JOB_ID], [j].[CREATED_AT], [j].[CREATED_BY], [j].[DEFAULT_GRADE_ID], [j].[DepartmentDeptId], [j].[IS_DELETED], [j].[IS_MEDICAL], [j].[JOB_TITLE_AR], [j].[JOB_TITLE_EN], [j].[UPDATED_AT], [j].[UPDATED_BY], [j].[VERSION_NO], [j0].[JOB_GRADE_ID], [j0].[BENEFITS_CONFIG], [j0].[CREATED_AT], [j0].[CREATED_BY], [j0].[DESCRIPTION], [j0].[GRADE_CODE], [j0].[GRADE_LEVEL], [j0].[GRADE_NAME_AR], [j0].[GRADE_NAME_EN], [j0].[IS_DELETED], [j0].[MAX_SALARY], [j0].[MIN_SALARY], [j0].[UPDATED_AT], [j0].[UPDATED_BY], [j0].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
INNER JOIN [HR_CORE].[JOBS] AS [j] ON [e].[JOB_ID] = [j].[JOB_ID]
LEFT JOIN [HR_CORE].[JOB_GRADES] AS [j0] ON [j].[DEFAULT_GRADE_ID] = [j0].[JOB_GRADE_ID]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0
2026-02-02 23:32:42.077 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p12='?' (DbType = DateTime2), @p13='?' (Size = 50), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (Size = 1) (DbType = Byte), @p17='?' (Size = 1) (DbType = Byte), @p18='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p19='?' (DbType = DateTime2), @p20='?' (Size = 50), @p21='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
DELETE FROM [HR_PAYROLL].[EMPLOYEE_SALARY_STRUCTURE]
OUTPUT 1
WHERE [StructureId] = @p9 AND [VERSION_NO] = @p10;
INSERT INTO [HR_PAYROLL].[EMPLOYEE_SALARY_STRUCTURE] ([Amount], [CREATED_AT], [CREATED_BY], [ELEMENT_ID], [EMPLOYEE_ID], [IsActive], [IS_DELETED], [Percentage], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
OUTPUT INSERTED.[StructureId]
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
2026-02-02 23:32:42.088 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-02-02 23:32:42.092 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[System.Boolean, System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-02 23:32:42.094 +03:00 [INF] Executed action HRMS.API.Controllers.Payroll.PayrollSettingsController.UpdateStructure (HRMS.API) in 98.6476ms
2026-02-02 23:32:42.101 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Payroll.PayrollSettingsController.UpdateStructure (HRMS.API)'
2026-02-02 23:32:42.103 +03:00 [INF] HTTP PUT /api/PayrollSettings/update-structure responded 200 in 151.1634 ms
2026-02-02 23:32:42.105 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:5001/api/PayrollSettings/update-structure - 200 null application/json; charset=utf-8 161.021ms
2026-02-02 23:39:28.713 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/AttendancePolicy - null null
2026-02-02 23:39:30.326 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendancePolicyController.GetAll (HRMS.API)'
2026-02-02 23:39:30.437 +03:00 [INF] Route matched with {action = "GetAll", controller = "AttendancePolicy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[System.Collections.Generic.List`1[HRMS.Application.DTOs.Attendance.AttendancePolicyDto]]]] GetAll() on controller HRMS.API.Controllers.Attendance.AttendancePolicyController (HRMS.API).
2026-02-02 23:39:31.054 +03:00 [INF] Executed DbCommand (90ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[POLICY_ID] AS [PolicyId], [a].[POLICY_NAME_AR] AS [PolicyNameAr], [a].[DEPT_ID] AS [DeptId], [a].[JOB_ID] AS [JobId], [a].[LATE_GRACE_MINS] AS [LateGraceMins], [a].[OVERTIME_MULTIPLIER] AS [OvertimeMultiplier], [a].[WEEKEND_OT_MULTIPLIER] AS [WeekendOtMultiplier]
FROM [HR_ATTENDANCE].[ATTENDANCE_POLICIES] AS [a]
WHERE [a].[IS_DELETED] = CAST(0 AS tinyint)
ORDER BY [a].[POLICY_ID]
2026-02-02 23:39:31.078 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[System.Collections.Generic.List`1[[HRMS.Application.DTOs.Attendance.AttendancePolicyDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-02 23:39:31.097 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendancePolicyController.GetAll (HRMS.API) in 626.5172ms
2026-02-02 23:39:31.109 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendancePolicyController.GetAll (HRMS.API)'
2026-02-02 23:39:31.112 +03:00 [INF] HTTP GET /api/AttendancePolicy responded 200 in 786.4559 ms
2026-02-02 23:39:31.115 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/AttendancePolicy - 200 null application/json; charset=utf-8 2402.4814ms
2026-02-02 23:40:59.844 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/AttendanceSettings/shifts - null null
2026-02-02 23:40:59.933 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.GetAllShifts (HRMS.API)'
2026-02-02 23:40:59.961 +03:00 [INF] Route matched with {action = "GetAllShifts", controller = "AttendanceSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[HRMS.Application.DTOs.Attendance.ShiftTypeDto]]] GetAllShifts() on controller HRMS.API.Controllers.Attendance.AttendanceSettingsController (HRMS.API).
2026-02-02 23:41:00.055 +03:00 [INF] Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[SHIFT_ID] AS [ShiftId], [s].[SHIFT_NAME_AR] AS [ShiftNameAr], [s].[START_TIME] AS [StartTime], [s].[END_TIME] AS [EndTime], [s].[HOURS_COUNT] AS [HoursCount], [s].[IS_CROSS_DAY] AS [IsCrossDay], [s].[GRACE_PERIOD_MINS] AS [GracePeriodMins]
FROM [HR_ATTENDANCE].[SHIFT_TYPES] AS [s]
WHERE [s].[IS_DELETED] = CAST(0 AS tinyint)
ORDER BY [s].[SHIFT_ID]
2026-02-02 23:41:00.064 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HRMS.Application.DTOs.Attendance.ShiftTypeDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-02 23:41:00.074 +03:00 [INF] Executed action HRMS.API.Controllers.Attendance.AttendanceSettingsController.GetAllShifts (HRMS.API) in 89.5285ms
2026-02-02 23:41:00.079 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Attendance.AttendanceSettingsController.GetAllShifts (HRMS.API)'
2026-02-02 23:41:00.082 +03:00 [INF] HTTP GET /api/AttendanceSettings/shifts responded 200 in 148.4062 ms
2026-02-02 23:41:00.085 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/AttendanceSettings/shifts - 200 null application/json; charset=utf-8 241.1653ms
2026-02-02 23:43:00.754 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/DocumentTypes - null null
2026-02-02 23:43:00.762 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Core.DocumentTypesController.GetAll (HRMS.API)'
2026-02-02 23:43:00.862 +03:00 [INF] Route matched with {action = "GetAll", controller = "DocumentTypes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(HRMS.Application.Features.Core.DocumentTypes.Queries.GetAllDocumentTypes.GetAllDocumentTypesQuery) on controller HRMS.API.Controllers.Core.DocumentTypesController (HRMS.API).
2026-02-02 23:43:01.155 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [HR_CORE].[DOCUMENT_TYPES] AS [d]
WHERE [d].[IS_DELETED] = CAST(0 AS tinyint)
2026-02-02 23:43:01.178 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DOCUMENT_TYPE_ID] AS [DocumentTypeId], [d].[DOCUMENT_TYPE_NAME_AR] AS [DocumentTypeNameAr], [d].[DOCUMENT_TYPE_NAME_EN] AS [DocumentTypeNameEn], [d].[IS_REQUIRED] AS [IsRequired], [d].[HAS_EXPIRY] AS [HasExpiry]
FROM [HR_CORE].[DOCUMENT_TYPES] AS [d]
WHERE [d].[IS_DELETED] = CAST(0 AS tinyint)
ORDER BY [d].[DOCUMENT_TYPE_NAME_AR]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2026-02-02 23:43:01.192 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[HRMS.Application.DTOs.Core.PagedResult`1[[HRMS.Application.DTOs.Core.DocumentTypeListDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-02 23:43:01.203 +03:00 [INF] Executed action HRMS.API.Controllers.Core.DocumentTypesController.GetAll (HRMS.API) in 79.2563ms
2026-02-02 23:43:01.205 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Core.DocumentTypesController.GetAll (HRMS.API)'
2026-02-02 23:43:01.207 +03:00 [INF] HTTP GET /api/DocumentTypes responded 200 in 444.5228 ms
2026-02-02 23:43:01.209 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/DocumentTypes - 200 null application/json; charset=utf-8 455.4063ms
2026-02-02 23:45:37.199 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/LeaveConfiguration/leave-types - null null
2026-02-02 23:45:37.280 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Leaves.LeaveConfigurationController.GetAllLeaveTypes (HRMS.API)'
2026-02-02 23:45:37.299 +03:00 [INF] Route matched with {action = "GetAllLeaveTypes", controller = "LeaveConfiguration"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[System.Collections.Generic.List`1[HRMS.Application.DTOs.Leaves.LeaveTypeDto]]]] GetAllLeaveTypes() on controller HRMS.API.Controllers.Leaves.LeaveConfigurationController (HRMS.API).
2026-02-02 23:45:37.374 +03:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[LEAVE_TYPE_ID] AS [LeaveTypeId], [l].[LEAVE_NAME_AR] AS [LeaveTypeNameAr], [l].[DEFAULT_DAYS] AS [DefaultDays], [l].[IS_DEDUCTIBLE] AS [IsDeductible], [l].[REQUIRES_ATTACHMENT] AS [RequiresAttachment]
FROM [HR_LEAVES].[LEAVE_TYPES] AS [l]
WHERE [l].[IS_DELETED] = CAST(0 AS tinyint)
ORDER BY [l].[LEAVE_NAME_AR]
2026-02-02 23:45:37.384 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[System.Collections.Generic.List`1[[HRMS.Application.DTOs.Leaves.LeaveTypeDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-02 23:45:37.393 +03:00 [INF] Executed action HRMS.API.Controllers.Leaves.LeaveConfigurationController.GetAllLeaveTypes (HRMS.API) in 89.0384ms
2026-02-02 23:45:37.397 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Leaves.LeaveConfigurationController.GetAllLeaveTypes (HRMS.API)'
2026-02-02 23:45:37.399 +03:00 [INF] HTTP GET /api/LeaveConfiguration/leave-types responded 200 in 118.6458 ms
2026-02-02 23:45:37.402 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/LeaveConfiguration/leave-types - 200 null application/json; charset=utf-8 203.246ms
2026-02-02 23:46:51.141 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/LeaveConfiguration/settings - null null
2026-02-02 23:46:51.177 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Leaves.LeaveConfigurationController.GetSystemSettings (HRMS.API)'
2026-02-02 23:46:51.192 +03:00 [INF] Route matched with {action = "GetSystemSettings", controller = "LeaveConfiguration"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[System.Collections.Generic.List`1[HRMS.Application.DTOs.Core.SystemSettingDto]]]] GetSystemSettings() on controller HRMS.API.Controllers.Leaves.LeaveConfigurationController (HRMS.API).
2026-02-02 23:46:51.237 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[SETTING_ID], [s].[CREATED_AT], [s].[CREATED_BY], [s].[DESCRIPTION_AR], [s].[IS_DELETED], [s].[IS_EDITABLE], [s].[SETTING_KEY], [s].[SETTING_TYPE], [s].[SETTING_VALUE], [s].[UPDATED_AT], [s].[UPDATED_BY], [s].[VERSION_NO]
FROM [HR_CORE].[SYSTEM_SETTINGS] AS [s]
WHERE [s].[IS_DELETED] = CAST(0 AS tinyint)
2026-02-02 23:46:51.271 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[System.Collections.Generic.List`1[[HRMS.Application.DTOs.Core.SystemSettingDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-02 23:46:51.282 +03:00 [INF] Executed action HRMS.API.Controllers.Leaves.LeaveConfigurationController.GetSystemSettings (HRMS.API) in 87.2653ms
2026-02-02 23:46:51.287 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Leaves.LeaveConfigurationController.GetSystemSettings (HRMS.API)'
2026-02-02 23:46:51.291 +03:00 [INF] HTTP GET /api/LeaveConfiguration/settings responded 200 in 116.0634 ms
2026-02-02 23:46:51.295 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/LeaveConfiguration/settings - 200 null application/json; charset=utf-8 153.7073ms
2026-02-02 23:47:59.303 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/LeaveConfiguration/public-holidays?year=2026 - null null
2026-02-02 23:47:59.348 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Leaves.LeaveConfigurationController.GetAllPublicHolidays (HRMS.API)'
2026-02-02 23:47:59.387 +03:00 [INF] Route matched with {action = "GetAllPublicHolidays", controller = "LeaveConfiguration"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[System.Collections.Generic.List`1[HRMS.Application.DTOs.Leaves.PublicHolidayDto]]]] GetAllPublicHolidays(System.Nullable`1[System.Int16]) on controller HRMS.API.Controllers.Leaves.LeaveConfigurationController (HRMS.API).
2026-02-02 23:47:59.435 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__request_Year_Value_0='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[HOLIDAY_ID] AS [HolidayId], [p].[HOLIDAY_NAME_AR] AS [HolidayNameAr], [p].[START_DATE] AS [StartDate], [p].[END_DATE] AS [EndDate], [p].[YEAR] AS [Year]
FROM [HR_LEAVES].[PUBLIC_HOLIDAYS] AS [p]
WHERE [p].[IS_DELETED] = CAST(0 AS tinyint) AND [p].[YEAR] = @__request_Year_Value_0
ORDER BY [p].[START_DATE]
2026-02-02 23:47:59.443 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[System.Collections.Generic.List`1[[HRMS.Application.DTOs.Leaves.PublicHolidayDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-02 23:47:59.451 +03:00 [INF] Executed action HRMS.API.Controllers.Leaves.LeaveConfigurationController.GetAllPublicHolidays (HRMS.API) in 61.864ms
2026-02-02 23:47:59.454 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Leaves.LeaveConfigurationController.GetAllPublicHolidays (HRMS.API)'
2026-02-02 23:47:59.456 +03:00 [INF] HTTP GET /api/LeaveConfiguration/public-holidays responded 200 in 108.2859 ms
2026-02-02 23:47:59.460 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/LeaveConfiguration/public-holidays?year=2026 - 200 null application/json; charset=utf-8 157.553ms
2026-02-02 23:50:47.822 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/PayrollSettings/elements - null null
2026-02-02 23:50:47.829 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Payroll.PayrollSettingsController.GetElements (HRMS.API)'
2026-02-02 23:50:47.856 +03:00 [INF] Route matched with {action = "GetElements", controller = "PayrollSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[System.Collections.Generic.List`1[HRMS.Application.DTOs.Payroll.Configuration.SalaryElementDto]]]] GetElements() on controller HRMS.API.Controllers.Payroll.PayrollSettingsController (HRMS.API).
2026-02-02 23:50:47.905 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ElementId], [s].[CREATED_AT], [s].[CREATED_BY], [s].[DefaultPercentage], [s].[ElementNameAr], [s].[ElementType], [s].[IsBasic], [s].[IS_DELETED], [s].[IsGosiBase], [s].[IsRecurring], [s].[IsTaxable], [s].[UPDATED_AT], [s].[UPDATED_BY], [s].[VERSION_NO]
FROM [HR_PAYROLL].[SALARY_ELEMENTS] AS [s]
2026-02-02 23:50:47.935 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[System.Collections.Generic.List`1[[HRMS.Application.DTOs.Payroll.Configuration.SalaryElementDto, HRMS.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-02 23:50:47.950 +03:00 [INF] Executed action HRMS.API.Controllers.Payroll.PayrollSettingsController.GetElements (HRMS.API) in 82.0531ms
2026-02-02 23:50:47.955 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Payroll.PayrollSettingsController.GetElements (HRMS.API)'
2026-02-02 23:50:47.956 +03:00 [INF] HTTP GET /api/PayrollSettings/elements responded 200 in 128.0681 ms
2026-02-02 23:50:47.962 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/PayrollSettings/elements - 200 null application/json; charset=utf-8 139.694ms
2026-02-02 23:57:39.945 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - null null
2026-02-02 23:57:41.957 +03:00 [INF] HTTP GET /swagger/index.html responded 200 in 1.6128 ms
2026-02-02 23:57:42.114 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - null null
2026-02-02 23:57:42.115 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_vs/browserLink - null null
2026-02-02 23:57:44.440 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - 200 null text/html;charset=utf-8 4495.5977ms
2026-02-02 23:57:44.491 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 2376.8574ms
2026-02-02 23:57:45.528 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_vs/browserLink - 200 null text/javascript; charset=UTF-8 3413.4033ms
2026-02-02 23:57:45.987 +03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - null null
2026-02-02 23:57:47.204 +03:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 380.2121 ms
2026-02-02 23:57:47.209 +03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 1222.2932ms
2026-02-02 23:58:01.614 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:5001/api/PayrollSettings/update-structure - application/json 122
2026-02-02 23:58:01.945 +03:00 [INF] CORS policy execution successful.
2026-02-02 23:58:02.464 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Payroll.PayrollSettingsController.UpdateStructure (HRMS.API)'
2026-02-02 23:58:03.186 +03:00 [INF] Route matched with {action = "UpdateStructure", controller = "PayrollSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[System.Boolean]]] UpdateStructure(HRMS.Application.Features.Payroll.Configuration.Structure.Commands.SetEmployeeSalaryStructure.SetEmployeeSalaryStructureCommand) on controller HRMS.API.Controllers.Payroll.PayrollSettingsController (HRMS.API).
2026-02-02 23:58:03.999 +03:00 [INF] Executed DbCommand (30ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[StructureId], [e].[Amount], [e].[CREATED_AT], [e].[CREATED_BY], [e].[ELEMENT_ID], [e].[EMPLOYEE_ID], [e].[IsActive], [e].[IS_DELETED], [e].[Percentage], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO]
FROM [HR_PAYROLL].[EMPLOYEE_SALARY_STRUCTURE] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0
2026-02-02 23:58:04.859 +03:00 [INF] Executed DbCommand (30ms) [Parameters=[@__elementIds_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ElementId], [s].[CREATED_AT], [s].[CREATED_BY], [s].[DefaultPercentage], [s].[ElementNameAr], [s].[ElementType], [s].[IsBasic], [s].[IS_DELETED], [s].[IsGosiBase], [s].[IsRecurring], [s].[IsTaxable], [s].[UPDATED_AT], [s].[UPDATED_BY], [s].[VERSION_NO]
FROM [HR_PAYROLL].[SALARY_ELEMENTS] AS [s]
WHERE [s].[ElementId] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__elementIds_0) WITH ([value] int '$') AS [e]
)
2026-02-02 23:58:05.258 +03:00 [INF] Executed DbCommand (40ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO], [j].[JOB_ID], [j].[CREATED_AT], [j].[CREATED_BY], [j].[DEFAULT_GRADE_ID], [j].[DepartmentDeptId], [j].[IS_DELETED], [j].[IS_MEDICAL], [j].[JOB_TITLE_AR], [j].[JOB_TITLE_EN], [j].[UPDATED_AT], [j].[UPDATED_BY], [j].[VERSION_NO], [j0].[JOB_GRADE_ID], [j0].[BENEFITS_CONFIG], [j0].[CREATED_AT], [j0].[CREATED_BY], [j0].[DESCRIPTION], [j0].[GRADE_CODE], [j0].[GRADE_LEVEL], [j0].[GRADE_NAME_AR], [j0].[GRADE_NAME_EN], [j0].[IS_DELETED], [j0].[MAX_SALARY], [j0].[MIN_SALARY], [j0].[UPDATED_AT], [j0].[UPDATED_BY], [j0].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
INNER JOIN [HR_CORE].[JOBS] AS [j] ON [e].[JOB_ID] = [j].[JOB_ID]
LEFT JOIN [HR_CORE].[JOB_GRADES] AS [j0] ON [j].[DEFAULT_GRADE_ID] = [j0].[JOB_GRADE_ID]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0
2026-02-02 23:58:05.278 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[System.Boolean, System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-02 23:58:05.283 +03:00 [INF] Executed action HRMS.API.Controllers.Payroll.PayrollSettingsController.UpdateStructure (HRMS.API) in 1666.6028ms
2026-02-02 23:58:05.287 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Payroll.PayrollSettingsController.UpdateStructure (HRMS.API)'
2026-02-02 23:58:05.289 +03:00 [INF] HTTP PUT /api/PayrollSettings/update-structure responded 400 in 3343.7432 ms
2026-02-02 23:58:05.291 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:5001/api/PayrollSettings/update-structure - 400 null application/json; charset=utf-8 3676.4098ms
2026-02-02 23:59:52.828 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:5001/api/PayrollSettings/update-structure - application/json 220
2026-02-02 23:59:52.901 +03:00 [INF] CORS policy execution successful.
2026-02-02 23:59:52.906 +03:00 [INF] Executing endpoint 'HRMS.API.Controllers.Payroll.PayrollSettingsController.UpdateStructure (HRMS.API)'
2026-02-02 23:59:52.912 +03:00 [INF] Route matched with {action = "UpdateStructure", controller = "PayrollSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HRMS.Core.Utilities.Result`1[System.Boolean]]] UpdateStructure(HRMS.Application.Features.Payroll.Configuration.Structure.Commands.SetEmployeeSalaryStructure.SetEmployeeSalaryStructureCommand) on controller HRMS.API.Controllers.Payroll.PayrollSettingsController (HRMS.API).
2026-02-02 23:59:52.924 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[StructureId], [e].[Amount], [e].[CREATED_AT], [e].[CREATED_BY], [e].[ELEMENT_ID], [e].[EMPLOYEE_ID], [e].[IsActive], [e].[IS_DELETED], [e].[Percentage], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[VERSION_NO]
FROM [HR_PAYROLL].[EMPLOYEE_SALARY_STRUCTURE] AS [e]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0
2026-02-02 23:59:52.952 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__elementIds_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ElementId], [s].[CREATED_AT], [s].[CREATED_BY], [s].[DefaultPercentage], [s].[ElementNameAr], [s].[ElementType], [s].[IsBasic], [s].[IS_DELETED], [s].[IsGosiBase], [s].[IsRecurring], [s].[IsTaxable], [s].[UPDATED_AT], [s].[UPDATED_BY], [s].[VERSION_NO]
FROM [HR_PAYROLL].[SALARY_ELEMENTS] AS [s]
WHERE [s].[ElementId] IN (
    SELECT [e].[value]
    FROM OPENJSON(@__elementIds_0) WITH ([value] int '$') AS [e]
)
2026-02-02 23:59:52.969 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__request_EmployeeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EMPLOYEE_ID], [e].[BIRTH_DATE], [e].[CREATED_AT], [e].[CREATED_BY], [e].[DEPARTMENT_ID], [e].[EMAIL], [e].[EMPLOYEE_NUMBER], [e].[FIRST_NAME_AR], [e].[FULL_NAME_EN], [e].[GENDER], [e].[HIRE_DATE], [e].[IS_DELETED], [e].[JOB_ID], [e].[LAST_NAME_AR], [e].[LICENSE_EXPIRY_DATE], [e].[LICENSE_NUMBER], [e].[MANAGER_ID], [e].[MARITAL_STATUS], [e].[MOBILE], [e].[NATIONAL_ID], [e].[NATIONALITY_ID], [e].[SECOND_NAME_AR], [e].[SPECIALTY], [e].[THIRD_NAME_AR], [e].[UPDATED_AT], [e].[UPDATED_BY], [e].[USER_ID], [e].[VERSION_NO], [j].[JOB_ID], [j].[CREATED_AT], [j].[CREATED_BY], [j].[DEFAULT_GRADE_ID], [j].[DepartmentDeptId], [j].[IS_DELETED], [j].[IS_MEDICAL], [j].[JOB_TITLE_AR], [j].[JOB_TITLE_EN], [j].[UPDATED_AT], [j].[UPDATED_BY], [j].[VERSION_NO], [j0].[JOB_GRADE_ID], [j0].[BENEFITS_CONFIG], [j0].[CREATED_AT], [j0].[CREATED_BY], [j0].[DESCRIPTION], [j0].[GRADE_CODE], [j0].[GRADE_LEVEL], [j0].[GRADE_NAME_AR], [j0].[GRADE_NAME_EN], [j0].[IS_DELETED], [j0].[MAX_SALARY], [j0].[MIN_SALARY], [j0].[UPDATED_AT], [j0].[UPDATED_BY], [j0].[VERSION_NO]
FROM [HR_PERSONNEL].[EMPLOYEES] AS [e]
INNER JOIN [HR_CORE].[JOBS] AS [j] ON [e].[JOB_ID] = [j].[JOB_ID]
LEFT JOIN [HR_CORE].[JOB_GRADES] AS [j0] ON [j].[DEFAULT_GRADE_ID] = [j0].[JOB_GRADE_ID]
WHERE [e].[EMPLOYEE_ID] = @__request_EmployeeId_0
2026-02-02 23:59:53.046 +03:00 [INF] Executed DbCommand (33ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p12='?' (DbType = DateTime2), @p13='?' (Size = 50), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (Size = 1) (DbType = Byte), @p17='?' (Size = 1) (DbType = Byte), @p18='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p19='?' (DbType = DateTime2), @p20='?' (Size = 50), @p21='?' (DbType = Int32), @p22='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p23='?' (DbType = DateTime2), @p24='?' (Size = 50), @p25='?' (DbType = Int32), @p26='?' (DbType = Int32), @p27='?' (Size = 1) (DbType = Byte), @p28='?' (Size = 1) (DbType = Byte), @p29='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p30='?' (DbType = DateTime2), @p31='?' (Size = 50), @p32='?' (DbType = Int32), @p33='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p34='?' (DbType = DateTime2), @p35='?' (Size = 50), @p36='?' (DbType = Int32), @p37='?' (DbType = Int32), @p38='?' (Size = 1) (DbType = Byte), @p39='?' (Size = 1) (DbType = Byte), @p40='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p41='?' (DbType = DateTime2), @p42='?' (Size = 50), @p43='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [HR_CORE].[AUDIT_LOGS] ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
OUTPUT INSERTED.[LOG_ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
DELETE FROM [HR_PAYROLL].[EMPLOYEE_SALARY_STRUCTURE]
OUTPUT 1
WHERE [StructureId] = @p9 AND [VERSION_NO] = @p10;
MERGE [HR_PAYROLL].[EMPLOYEE_SALARY_STRUCTURE] USING (
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, 0),
(@p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, 1),
(@p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, 2)) AS i ([Amount], [CREATED_AT], [CREATED_BY], [ELEMENT_ID], [EMPLOYEE_ID], [IsActive], [IS_DELETED], [Percentage], [UPDATED_AT], [UPDATED_BY], [VERSION_NO], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([Amount], [CREATED_AT], [CREATED_BY], [ELEMENT_ID], [EMPLOYEE_ID], [IsActive], [IS_DELETED], [Percentage], [UPDATED_AT], [UPDATED_BY], [VERSION_NO])
VALUES (i.[Amount], i.[CREATED_AT], i.[CREATED_BY], i.[ELEMENT_ID], i.[EMPLOYEE_ID], i.[IsActive], i.[IS_DELETED], i.[Percentage], i.[UPDATED_AT], i.[UPDATED_BY], i.[VERSION_NO])
OUTPUT INSERTED.[StructureId], i._Position;
2026-02-02 23:59:53.078 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@p0='?' (Size = 20), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (DbType = Int64), @p7='?' (Size = 100), @p8='?' (Size = 200), @p9='?' (Size = 20), @p10='?' (Size = 50), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (DbType = Int64), @p16='?' (Size = 100), @p17='?' (Size = 200), @p18='?' (Size = 20), @p19='?' (Size = 50), @p20='?' (Size = 4000), @p21='?' (Size = 4000), @p22='?' (DbType = DateTime2), @p23='?' (Size = 50), @p24='?' (DbType = Int64), @p25='?' (Size = 100), @p26='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [HR_CORE].[AUDIT_LOGS] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, 0),
(@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, 1),
(@p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, 2)) AS i ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([ACTION_TYPE], [IP_ADDRESS], [NEW_VALUE], [OLD_VALUE], [PERFORMED_AT], [PERFORMED_BY], [RECORD_ID], [TABLE_NAME], [USER_AGENT])
VALUES (i.[ACTION_TYPE], i.[IP_ADDRESS], i.[NEW_VALUE], i.[OLD_VALUE], i.[PERFORMED_AT], i.[PERFORMED_BY], i.[RECORD_ID], i.[TABLE_NAME], i.[USER_AGENT])
OUTPUT INSERTED.[LOG_ID], i._Position;
2026-02-02 23:59:53.089 +03:00 [INF] Executing OkObjectResult, writing value of type 'HRMS.Core.Utilities.Result`1[[System.Boolean, System.Private.CoreLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-02 23:59:53.098 +03:00 [INF] Executed action HRMS.API.Controllers.Payroll.PayrollSettingsController.UpdateStructure (HRMS.API) in 182.2059ms
2026-02-02 23:59:53.100 +03:00 [INF] Executed endpoint 'HRMS.API.Controllers.Payroll.PayrollSettingsController.UpdateStructure (HRMS.API)'
2026-02-02 23:59:53.102 +03:00 [INF] HTTP PUT /api/PayrollSettings/update-structure responded 200 in 200.3838 ms
2026-02-02 23:59:53.106 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:5001/api/PayrollSettings/update-structure - 200 null application/json; charset=utf-8 278.0662ms
