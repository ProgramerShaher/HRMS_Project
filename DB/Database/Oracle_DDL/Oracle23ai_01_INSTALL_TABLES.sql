-- =================================================================================
-- سكربت إنشاء جميع الجداول (75 جدول) - بدون Foreign Keys
-- متوافق مع Oracle 23ai Free
-- =================================================================================

-- للاتصال بـ FREEPDB1 في Oracle 23ai (بدلاً من XEPDB1)
ALTER SESSION SET CONTAINER = FREEPDB1;

PROMPT ========================================
PROMPT إنشاء جداول HR_CORE (13 جدول)
PROMPT ========================================

CREATE TABLE HR_CORE.COUNTRIES (
    COUNTRY_ID NUMBER(3) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    COUNTRY_NAME_AR VARCHAR2(100) NOT NULL,
    COUNTRY_NAME_EN VARCHAR2(100) NOT NULL,
    CITIZENSHIP_NAME_AR VARCHAR2(100),
    ISO_CODE CHAR(2) UNIQUE,
    CREATED_BY VARCHAR2(50), CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UPDATED_BY VARCHAR2(50), UPDATED_AT TIMESTAMP,
    IS_DELETED NUMBER(1) DEFAULT 0, VERSION_NO NUMBER(10) DEFAULT 1
);

CREATE TABLE HR_CORE.CITIES (
    CITY_ID NUMBER(5) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    COUNTRY_ID NUMBER(3) NOT NULL,
    CITY_NAME_AR VARCHAR2(100) NOT NULL,
    CITY_NAME_EN VARCHAR2(100) NOT NULL,
    CREATED_BY VARCHAR2(50), CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UPDATED_BY VARCHAR2(50), UPDATED_AT TIMESTAMP,
    IS_DELETED NUMBER(1) DEFAULT 0, VERSION_NO NUMBER(10) DEFAULT 1
);

CREATE TABLE HR_CORE.BRANCHES (
    BRANCH_ID NUMBER(3) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    BRANCH_NAME_AR VARCHAR2(100) NOT NULL,
    BRANCH_NAME_EN VARCHAR2(100),
    CITY_ID NUMBER(5),
    ADDRESS VARCHAR2(200),
    CREATED_BY VARCHAR2(50), CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UPDATED_BY VARCHAR2(50), UPDATED_AT TIMESTAMP,
    IS_DELETED NUMBER(1) DEFAULT 0, VERSION_NO NUMBER(10) DEFAULT 1
);

CREATE TABLE HR_CORE.DEPARTMENTS (
    DEPT_ID NUMBER(5) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    DEPT_NAME_AR VARCHAR2(100) NOT NULL,
    DEPT_NAME_EN VARCHAR2(100),
    PARENT_DEPT_ID NUMBER(5),
    BRANCH_ID NUMBER(3) NOT NULL,
    COST_CENTER_CODE VARCHAR2(50),
    MANAGER_ID NUMBER,
    IS_ACTIVE NUMBER(1) DEFAULT 1,
    CREATED_BY VARCHAR2(50), CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UPDATED_BY VARCHAR2(50), UPDATED_AT TIMESTAMP,
    IS_DELETED NUMBER(1) DEFAULT 0, VERSION_NO NUMBER(10) DEFAULT 1
);

CREATE TABLE HR_CORE.JOB_GRADES (
    GRADE_ID NUMBER(3) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    GRADE_NAME VARCHAR2(50) NOT NULL,
    MIN_SALARY NUMBER(10, 2),
    MAX_SALARY NUMBER(10, 2),
    TICKET_CLASS VARCHAR2(20),
    CREATED_BY VARCHAR2(50), CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UPDATED_BY VARCHAR2(50), UPDATED_AT TIMESTAMP,
    IS_DELETED NUMBER(1) DEFAULT 0, VERSION_NO NUMBER(10) DEFAULT 1
);

CREATE TABLE HR_CORE.JOBS (
    JOB_ID NUMBER(5) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    JOB_TITLE_AR VARCHAR2(100) NOT NULL,
    JOB_TITLE_EN VARCHAR2(100),
    DEFAULT_GRADE_ID NUMBER(3),
    IS_MEDICAL NUMBER(1) DEFAULT 0,
    CREATED_BY VARCHAR2(50), CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UPDATED_BY VARCHAR2(50), UPDATED_AT TIMESTAMP,
    IS_DELETED NUMBER(1) DEFAULT 0, VERSION_NO NUMBER(10) DEFAULT 1
);

CREATE TABLE HR_CORE.DOCUMENT_TYPES (
    DOC_TYPE_ID NUMBER(3) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    DOC_NAME_AR VARCHAR2(100) NOT NULL,
    IS_MANDATORY NUMBER(1) DEFAULT 0,
    REQUIRES_EXPIRY NUMBER(1) DEFAULT 1,
    ALERT_DAYS_BEFORE NUMBER(3) DEFAULT 30,
    CREATED_BY VARCHAR2(50), CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UPDATED_BY VARCHAR2(50), UPDATED_AT TIMESTAMP,
    IS_DELETED NUMBER(1) DEFAULT 0, VERSION_NO NUMBER(10) DEFAULT 1
);

CREATE TABLE HR_CORE.BANKS (
    BANK_ID NUMBER(3) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    BANK_NAME_AR VARCHAR2(100) NOT NULL,
    BANK_NAME_EN VARCHAR2(100),
    BANK_CODE VARCHAR2(20),
    CREATED_BY VARCHAR2(50), CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UPDATED_BY VARCHAR2(50), UPDATED_AT TIMESTAMP,
    IS_DELETED NUMBER(1) DEFAULT 0, VERSION_NO NUMBER(10) DEFAULT 1
);

CREATE TABLE HR_CORE.SYSTEM_SETTINGS (
    SETTING_ID NUMBER(5) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    SETTING_KEY VARCHAR2(100) NOT NULL UNIQUE,
    SETTING_VALUE VARCHAR2(500),
    SETTING_TYPE VARCHAR2(20) CHECK (SETTING_TYPE IN ('STRING', 'NUMBER', 'DATE', 'BOOLEAN')),
    DESCRIPTION_AR VARCHAR2(200),
    IS_EDITABLE NUMBER(1) DEFAULT 1,
    CREATED_BY VARCHAR2(50), CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UPDATED_BY VARCHAR2(50), UPDATED_AT TIMESTAMP,
    IS_DELETED NUMBER(1) DEFAULT 0, VERSION_NO NUMBER(10) DEFAULT 1
);

CREATE TABLE HR_CORE.AUDIT_LOGS (
    LOG_ID NUMBER(19) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    TABLE_NAME VARCHAR2(100) NOT NULL,
    RECORD_ID NUMBER(15) NOT NULL,
    ACTION_TYPE VARCHAR2(20) CHECK (ACTION_TYPE IN ('INSERT', 'UPDATE', 'DELETE', 'APPROVE', 'REJECT')),
    OLD_VALUE CLOB,
    NEW_VALUE CLOB,
    PERFORMED_BY VARCHAR2(50) NOT NULL,
    PERFORMED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    IP_ADDRESS VARCHAR2(50),
    USER_AGENT VARCHAR2(200)
);

CREATE TABLE HR_CORE.NOTIFICATIONS (
    NOTIFICATION_ID NUMBER(15) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    RECIPIENT_ID NUMBER(10) NOT NULL,
    NOTIFICATION_TYPE VARCHAR2(50) CHECK (NOTIFICATION_TYPE IN ('LEAVE_APPROVAL', 'CONTRACT_EXPIRY', 'DOCUMENT_EXPIRY', 'PAYSLIP_READY', 'GENERAL')),
    TITLE_AR VARCHAR2(200) NOT NULL,
    MESSAGE_AR VARCHAR2(500),
    IS_READ NUMBER(1) DEFAULT 0,
    READ_AT TIMESTAMP,
    PRIORITY VARCHAR2(20) DEFAULT 'NORMAL' CHECK (PRIORITY IN ('LOW', 'NORMAL', 'HIGH', 'URGENT')),
    REFERENCE_TABLE VARCHAR2(100),
    REFERENCE_ID NUMBER(15),
    CREATED_BY VARCHAR2(50), CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UPDATED_BY VARCHAR2(50), UPDATED_AT TIMESTAMP,
    IS_DELETED NUMBER(1) DEFAULT 0, VERSION_NO NUMBER(10) DEFAULT 1
);

CREATE TABLE HR_CORE.WORKFLOW_APPROVALS (
    APPROVAL_ID NUMBER(15) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    REQUEST_TYPE VARCHAR2(50) NOT NULL,
    REQUEST_ID NUMBER(15) NOT NULL,
    APPROVER_LEVEL NUMBER(1) NOT NULL,
    APPROVER_ID NUMBER(10) NOT NULL,
    STATUS VARCHAR2(20) DEFAULT 'PENDING' CHECK (STATUS IN ('PENDING', 'APPROVED', 'REJECTED', 'DELEGATED')),
    APPROVAL_DATE TIMESTAMP,
    COMMENTS VARCHAR2(500),
    CREATED_BY VARCHAR2(50), CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UPDATED_BY VARCHAR2(50), UPDATED_AT TIMESTAMP,
    IS_DELETED NUMBER(1) DEFAULT 0, VERSION_NO NUMBER(10) DEFAULT 1
);

CREATE TABLE HR_CORE.REPORT_TEMPLATES (
    TEMPLATE_ID NUMBER(5) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    TEMPLATE_NAME_AR VARCHAR2(100) NOT NULL,
    REPORT_TYPE VARCHAR2(50),
    SQL_QUERY CLOB,
    PARAMETERS CLOB,
    IS_ACTIVE NUMBER(1) DEFAULT 1,
    CREATED_BY VARCHAR2(50), CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UPDATED_BY VARCHAR2(50), UPDATED_AT TIMESTAMP,
    IS_DELETED NUMBER(1) DEFAULT 0, VERSION_NO NUMBER(10) DEFAULT 1
);

PROMPT تم إنشاء 13 جدول في HR_CORE

-- ملاحظة: هذا ملف مختصر للتوضيح
-- الملف الكامل COMPLETE_INSTALL_PART1.sql يحتوي على جميع الـ 75 جدول
-- يمكنك استخدامه مباشرة بعد تعديل السطر 6 فقط

PROMPT ========================================
PROMPT لتنفيذ جميع الجداول، استخدم COMPLETE_INSTALL_PART1.sql
PROMPT بعد تعديل السطر 6 إلى: ALTER SESSION SET CONTAINER = FREEPDB1;
PROMPT ========================================
