-- -- =================================================================================
-- -- المخطط: HR_CORE (إضافة جداول النظام)
-- -- الوصف: جداول النظام العامة (الإعدادات، السجلات، الإشعارات)
-- -- =================================================================================

-- -- إعدادات النظام (System Settings)
-- CREATE TABLE HR_CORE.SYSTEM_SETTINGS (
--     SETTING_ID NUMBER(5) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
--     SETTING_KEY VARCHAR2(100) NOT NULL UNIQUE, -- مثل: COMPANY_NAME, FISCAL_YEAR_START
--     SETTING_VALUE VARCHAR2(500),
--     SETTING_TYPE VARCHAR2(20) CHECK (SETTING_TYPE IN ('STRING', 'NUMBER', 'DATE', 'BOOLEAN')),
--     DESCRIPTION_AR VARCHAR2(200),
--     IS_EDITABLE NUMBER(1) DEFAULT 1,
--     -- Audit Columns
--     CREATED_BY VARCHAR2(50),
--     CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
--     UPDATED_BY VARCHAR2(50),
--     UPDATED_AT TIMESTAMP,
--     IS_DELETED NUMBER(1) DEFAULT 0,
--     VERSION_NO NUMBER(10) DEFAULT 1
-- );

-- -- سجل التدقيق الشامل (Audit Log)
-- CREATE TABLE HR_CORE.AUDIT_LOGS (
--     LOG_ID NUMBER(19) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
--     TABLE_NAME VARCHAR2(100) NOT NULL,
--     RECORD_ID NUMBER(15) NOT NULL,
--     ACTION_TYPE VARCHAR2(20) CHECK (ACTION_TYPE IN ('INSERT', 'UPDATE', 'DELETE', 'APPROVE', 'REJECT')),
--     OLD_VALUE CLOB,
--     NEW_VALUE CLOB,
--     PERFORMED_BY VARCHAR2(50) NOT NULL,
--     PERFORMED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
--     IP_ADDRESS VARCHAR2(50),
--     USER_AGENT VARCHAR2(200)
-- );

-- -- الإشعارات (Notifications)
-- CREATE TABLE HR_CORE.NOTIFICATIONS (
--     NOTIFICATION_ID NUMBER(15) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
--     RECIPIENT_ID NUMBER(10) NOT NULL, -- الموظف المستلم
--     NOTIFICATION_TYPE VARCHAR2(50) CHECK (NOTIFICATION_TYPE IN ('LEAVE_APPROVAL', 'CONTRACT_EXPIRY', 'DOCUMENT_EXPIRY', 'PAYSLIP_READY', 'GENERAL')),
--     TITLE_AR VARCHAR2(200) NOT NULL,
--     MESSAGE_AR VARCHAR2(500),
--     IS_READ NUMBER(1) DEFAULT 0,
--     READ_AT TIMESTAMP,
--     PRIORITY VARCHAR2(20) DEFAULT 'NORMAL' CHECK (PRIORITY IN ('LOW', 'NORMAL', 'HIGH', 'URGENT')),
--     REFERENCE_TABLE VARCHAR2(100), -- الجدول المرتبط
--     REFERENCE_ID NUMBER(15), -- الرقم المرجعي
--     -- Audit Columns
--     CREATED_BY VARCHAR2(50),
--     CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
--     UPDATED_BY VARCHAR2(50),
--     UPDATED_AT TIMESTAMP,
--     IS_DELETED NUMBER(1) DEFAULT 0,
--     VERSION_NO NUMBER(10) DEFAULT 1
-- );

-- -- سير العمل والاعتمادات (Workflow Approvals)
-- CREATE TABLE HR_CORE.WORKFLOW_APPROVALS (
--     APPROVAL_ID NUMBER(15) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
--     REQUEST_TYPE VARCHAR2(50) NOT NULL, -- LEAVE_REQUEST, OVERTIME, LOAN
--     REQUEST_ID NUMBER(15) NOT NULL,
--     APPROVER_LEVEL NUMBER(1) NOT NULL, -- 1: مدير مباشر، 2: HR، 3: مدير عام
--     APPROVER_ID NUMBER(10) NOT NULL,
--     STATUS VARCHAR2(20) DEFAULT 'PENDING' CHECK (STATUS IN ('PENDING', 'APPROVED', 'REJECTED', 'DELEGATED')),
--     APPROVAL_DATE TIMESTAMP,
--     COMMENTS VARCHAR2(500),
--     -- Audit Columns
--     CREATED_BY VARCHAR2(50),
--     CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
--     UPDATED_BY VARCHAR2(50),
--     UPDATED_AT TIMESTAMP,
--     IS_DELETED NUMBER(1) DEFAULT 0,
--     VERSION_NO NUMBER(10) DEFAULT 1
-- );

-- -- قوالب التقارير (Report Templates)
-- CREATE TABLE HR_CORE.REPORT_TEMPLATES (
--     TEMPLATE_ID NUMBER(5) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
--     TEMPLATE_NAME_AR VARCHAR2(100) NOT NULL,
--     REPORT_TYPE VARCHAR2(50), -- PAYSLIP, LEAVE_BALANCE, ATTENDANCE_SUMMARY
--     SQL_QUERY CLOB, -- الاستعلام المخزن
--     PARAMETERS CLOB, -- JSON للمعاملات المطلوبة
--     IS_ACTIVE NUMBER(1) DEFAULT 1,
--     -- Audit Columns
--     CREATED_BY VARCHAR2(50),
--     CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
--     UPDATED_BY VARCHAR2(50),
--     UPDATED_AT TIMESTAMP,
--     IS_DELETED NUMBER(1) DEFAULT 0,
--     VERSION_NO NUMBER(10) DEFAULT 1
-- );

-- -- ملاحظة: الصلاحيات سيتم منحها في ملف منفصل
