-- =================================================================================
-- سكربت إنشاء جميع الجداول - الجزء 2
-- الوحدات: HR_ATTENDANCE, HR_LEAVES, HR_PAYROLL, HR_RECRUITMENT, HR_PERFORMANCE
-- =================================================================================

-- للاتصال بـ Oracle 23ai Free (استخدم FREEPDB1)
-- للاتصال بـ Oracle XE (استخدم XEPDB1)
ALTER SESSION SET CONTAINER = FREEPDB1;

PROMPT ========================================
PROMPT إنشاء جداول HR_ATTENDANCE (8 جداول)
PROMPT ========================================

CREATE TABLE HR_ATTENDANCE.SHIFT_TYPES (
    SHIFT_ID NUMBER(3) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    SHIFT_NAME_AR VARCHAR2(100) NOT NULL,
    START_TIME CHAR(5) NOT NULL,
    END_TIME CHAR(5) NOT NULL,
    HOURS_COUNT NUMBER(4, 2) NOT NULL,
    IS_CROSS_DAY NUMBER(1) DEFAULT 0,
    GRACE_PERIOD_MINS NUMBER(3) DEFAULT 15,
    CREATED_BY VARCHAR2(50), CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UPDATED_BY VARCHAR2(50), UPDATED_AT TIMESTAMP,
    IS_DELETED NUMBER(1) DEFAULT 0, VERSION_NO NUMBER(10) DEFAULT 1
);

CREATE TABLE HR_ATTENDANCE.ROSTER_PERIODS (
    PERIOD_ID NUMBER(10) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    YEAR NUMBER(4) NOT NULL,
    MONTH NUMBER(2) NOT NULL,
    START_DATE DATE NOT NULL,
    END_DATE DATE NOT NULL,
    IS_LOCKED NUMBER(1) DEFAULT 0,
    LOCKED_BY NUMBER(10),
    NOTES VARCHAR2(200),
    CREATED_BY VARCHAR2(50), CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UPDATED_BY VARCHAR2(50), UPDATED_AT TIMESTAMP,
    IS_DELETED NUMBER(1) DEFAULT 0, VERSION_NO NUMBER(10) DEFAULT 1
);

CREATE TABLE HR_ATTENDANCE.EMPLOYEE_ROSTERS (
    ROSTER_ID NUMBER(15) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    EMPLOYEE_ID NUMBER(10) NOT NULL,
    ROSTER_DATE DATE NOT NULL,
    SHIFT_ID NUMBER(3),
    IS_OFF_DAY NUMBER(1) DEFAULT 0,
    CREATED_BY VARCHAR2(50), CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UPDATED_BY VARCHAR2(50), UPDATED_AT TIMESTAMP,
    IS_DELETED NUMBER(1) DEFAULT 0, VERSION_NO NUMBER(10) DEFAULT 1
);

CREATE TABLE HR_ATTENDANCE.RAW_PUNCH_LOGS (
    LOG_ID NUMBER(19) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    EMPLOYEE_ID NUMBER(10) NOT NULL,
    DEVICE_ID VARCHAR2(50),
    PUNCH_TIME TIMESTAMP NOT NULL,
    PUNCH_TYPE VARCHAR2(10) CHECK (PUNCH_TYPE IN ('IN', 'OUT', 'BREAK_IN', 'BREAK_OUT')),
    IS_PROCESSED NUMBER(1) DEFAULT 0,
    CREATED_BY VARCHAR2(50), CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UPDATED_BY VARCHAR2(50), UPDATED_AT TIMESTAMP,
    IS_DELETED NUMBER(1) DEFAULT 0, VERSION_NO NUMBER(10) DEFAULT 1
);

CREATE TABLE HR_ATTENDANCE.DAILY_ATTENDANCE (
    RECORD_ID NUMBER(15) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    EMPLOYEE_ID NUMBER(10) NOT NULL,
    ATTENDANCE_DATE DATE NOT NULL,
    PLANNED_SHIFT_ID NUMBER(3),
    ACTUAL_IN_TIME TIMESTAMP,
    ACTUAL_OUT_TIME TIMESTAMP,
    LATE_MINUTES NUMBER(4) DEFAULT 0,
    EARLY_LEAVE_MINUTES NUMBER(4) DEFAULT 0,
    OVERTIME_MINUTES NUMBER(4) DEFAULT 0,
    STATUS VARCHAR2(20) CHECK (STATUS IN ('PRESENT', 'ABSENT', 'LEAVE', 'HOLIDAY', 'MISSING_PUNCH')),
    CREATED_BY VARCHAR2(50), CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UPDATED_BY VARCHAR2(50), UPDATED_AT TIMESTAMP,
    IS_DELETED NUMBER(1) DEFAULT 0, VERSION_NO NUMBER(10) DEFAULT 1
);

CREATE TABLE HR_ATTENDANCE.SHIFT_SWAP_REQUESTS (
    REQUEST_ID NUMBER(10) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    REQUESTER_ID NUMBER(10) NOT NULL,
    TARGET_EMPLOYEE_ID NUMBER(10) NOT NULL,
    ROSTER_DATE DATE NOT NULL,
    STATUS VARCHAR2(20) DEFAULT 'PENDING' CHECK (STATUS IN ('PENDING', 'APPROVED', 'REJECTED')),
    MANAGER_COMMENT VARCHAR2(200),
    CREATED_BY VARCHAR2(50), CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UPDATED_BY VARCHAR2(50), UPDATED_AT TIMESTAMP,
    IS_DELETED NUMBER(1) DEFAULT 0, VERSION_NO NUMBER(10) DEFAULT 1
);

CREATE TABLE HR_ATTENDANCE.OVERTIME_REQUESTS (
    OT_REQUEST_ID NUMBER(10) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    EMPLOYEE_ID NUMBER(10) NOT NULL,
    REQUEST_DATE DATE DEFAULT SYSDATE,
    WORK_DATE DATE NOT NULL,
    HOURS_REQUESTED NUMBER(4, 2) NOT NULL,
    REASON VARCHAR2(200),
    STATUS VARCHAR2(20) DEFAULT 'PENDING' CHECK (STATUS IN ('PENDING', 'APPROVED', 'REJECTED')),
    APPROVED_BY NUMBER(10),
    APPROVED_HOURS NUMBER(4, 2),
    CREATED_BY VARCHAR2(50), CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UPDATED_BY VARCHAR2(50), UPDATED_AT TIMESTAMP,
    IS_DELETED NUMBER(1) DEFAULT 0, VERSION_NO NUMBER(10) DEFAULT 1
);

CREATE TABLE HR_ATTENDANCE.ATTENDANCE_POLICIES (
    POLICY_ID NUMBER(5) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    POLICY_NAME_AR VARCHAR2(100) NOT NULL,
    DEPT_ID NUMBER(5),
    JOB_ID NUMBER(5),
    LATE_GRACE_MINS NUMBER(3) DEFAULT 15,
    OVERTIME_MULTIPLIER NUMBER(3, 2) DEFAULT 1.5,
    WEEKEND_OT_MULTIPLIER NUMBER(3, 2) DEFAULT 2.0,
    CREATED_BY VARCHAR2(50), CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UPDATED_BY VARCHAR2(50), UPDATED_AT TIMESTAMP,
    IS_DELETED NUMBER(1) DEFAULT 0, VERSION_NO NUMBER(10) DEFAULT 1
);

PROMPT تم إنشاء 8 جداول في HR_ATTENDANCE

PROMPT ========================================
PROMPT إنشاء جداول HR_LEAVES (7 جداول)
PROMPT ========================================

CREATE TABLE HR_LEAVES.LEAVE_TYPES (
    LEAVE_TYPE_ID NUMBER(3) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    LEAVE_NAME_AR VARCHAR2(100) NOT NULL,
    IS_PAID NUMBER(1) DEFAULT 1,
    MAX_DAYS_PER_YEAR NUMBER(3),
    REQUIRES_ATTACHMENT NUMBER(1) DEFAULT 0,
    IS_CARRY_FORWARD NUMBER(1) DEFAULT 0,
    CREATED_BY VARCHAR2(50), CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UPDATED_BY VARCHAR2(50), UPDATED_AT TIMESTAMP,
    IS_DELETED NUMBER(1) DEFAULT 0, VERSION_NO NUMBER(10) DEFAULT 1
);

CREATE TABLE HR_LEAVES.EMPLOYEE_LEAVE_BALANCES (
    BALANCE_ID NUMBER(10) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    EMPLOYEE_ID NUMBER(10) NOT NULL,
    LEAVE_TYPE_ID NUMBER(3) NOT NULL,
    CURRENT_BALANCE NUMBER(5, 2) DEFAULT 0,
    YEAR NUMBER(4) NOT NULL,
    CREATED_BY VARCHAR2(50), CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UPDATED_BY VARCHAR2(50), UPDATED_AT TIMESTAMP,
    IS_DELETED NUMBER(1) DEFAULT 0, VERSION_NO NUMBER(10) DEFAULT 1
);

CREATE TABLE HR_LEAVES.LEAVE_REQUESTS (
    REQUEST_ID NUMBER(10) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    EMPLOYEE_ID NUMBER(10) NOT NULL,
    LEAVE_TYPE_ID NUMBER(3) NOT NULL,
    START_DATE DATE NOT NULL,
    END_DATE DATE NOT NULL,
    DAYS_COUNT NUMBER(3) NOT NULL,
    REASON VARCHAR2(200),
    ATTACHMENT_PATH VARCHAR2(500),
    STATUS VARCHAR2(20) DEFAULT 'PENDING' CHECK (STATUS IN ('PENDING', 'MANAGER_APPROVED', 'HR_APPROVED', 'REJECTED')),
    REJECTION_REASON VARCHAR2(200),
    IS_POSTED_TO_BALANCE NUMBER(1) DEFAULT 0,
    CREATED_BY VARCHAR2(50), CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UPDATED_BY VARCHAR2(50), UPDATED_AT TIMESTAMP,
    IS_DELETED NUMBER(1) DEFAULT 0, VERSION_NO NUMBER(10) DEFAULT 1
);

CREATE TABLE HR_LEAVES.PUBLIC_HOLIDAYS (
    HOLIDAY_ID NUMBER(5) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    HOLIDAY_NAME_AR VARCHAR2(100) NOT NULL,
    START_DATE DATE NOT NULL,
    END_DATE DATE NOT NULL,
    YEAR NUMBER(4) NOT NULL,
    CREATED_BY VARCHAR2(50), CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UPDATED_BY VARCHAR2(50), UPDATED_AT TIMESTAMP,
    IS_DELETED NUMBER(1) DEFAULT 0, VERSION_NO NUMBER(10) DEFAULT 1
);

CREATE TABLE HR_LEAVES.LEAVE_ACCRUAL_RULES (
    RULE_ID NUMBER(5) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    LEAVE_TYPE_ID NUMBER(3) NOT NULL,
    ACCRUAL_FREQUENCY VARCHAR2(20) CHECK (ACCRUAL_FREQUENCY IN ('MONTHLY', 'YEARLY', 'JOINING_DATE')),
    DAYS_PER_PERIOD NUMBER(5, 2) NOT NULL,
    MAX_ACCUMULATION NUMBER(3),
    IS_PRORATED NUMBER(1) DEFAULT 1,
    CREATED_BY VARCHAR2(50), CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UPDATED_BY VARCHAR2(50), UPDATED_AT TIMESTAMP,
    IS_DELETED NUMBER(1) DEFAULT 0, VERSION_NO NUMBER(10) DEFAULT 1
);

CREATE TABLE HR_LEAVES.LEAVE_ENCASHMENT (
    ENCASH_ID NUMBER(10) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    EMPLOYEE_ID NUMBER(10) NOT NULL,
    LEAVE_TYPE_ID NUMBER(3) NOT NULL,
    DAYS_ENCASHED NUMBER(5, 2) NOT NULL,
    AMOUNT NUMBER(10, 2) NOT NULL,
    ENCASH_DATE DATE DEFAULT SYSDATE,
    PAYROLL_RUN_ID NUMBER(10),
    CREATED_BY VARCHAR2(50), CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UPDATED_BY VARCHAR2(50), UPDATED_AT TIMESTAMP,
    IS_DELETED NUMBER(1) DEFAULT 0, VERSION_NO NUMBER(10) DEFAULT 1
);

CREATE TABLE HR_LEAVES.LEAVE_TRANSACTIONS (
    TRANSACTION_ID NUMBER(15) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    EMPLOYEE_ID NUMBER(10) NOT NULL,
    LEAVE_TYPE_ID NUMBER(3) NOT NULL,
    TRANSACTION_TYPE VARCHAR2(20) CHECK (TRANSACTION_TYPE IN ('ACCRUAL', 'DEDUCTION', 'ADJUSTMENT', 'CARRY_FORWARD')),
    DAYS NUMBER(5, 2) NOT NULL,
    TRANSACTION_DATE DATE DEFAULT SYSDATE,
    REFERENCE_ID NUMBER(10),
    NOTES VARCHAR2(200),
    CREATED_BY VARCHAR2(50), CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UPDATED_BY VARCHAR2(50), UPDATED_AT TIMESTAMP,
    IS_DELETED NUMBER(1) DEFAULT 0, VERSION_NO NUMBER(10) DEFAULT 1
);

PROMPT تم إنشاء 7 جداول في HR_LEAVES

PROMPT ========================================
PROMPT إنشاء جداول HR_PAYROLL (10 جداول)
PROMPT ========================================

CREATE TABLE HR_PAYROLL.SALARY_ELEMENTS (
    ELEMENT_ID NUMBER(3) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    ELEMENT_NAME_AR VARCHAR2(100) NOT NULL,
    ELEMENT_TYPE VARCHAR2(10) CHECK (ELEMENT_TYPE IN ('EARNING', 'DEDUCTION')),
    IS_TAXABLE NUMBER(1) DEFAULT 0,
    IS_GOSI_BASE NUMBER(1) DEFAULT 0,
    DEFAULT_PERCENTAGE NUMBER(5, 2),
    IS_RECURRING NUMBER(1) DEFAULT 1,
    CREATED_BY VARCHAR2(50), CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UPDATED_BY VARCHAR2(50), UPDATED_AT TIMESTAMP,
    IS_DELETED NUMBER(1) DEFAULT 0, VERSION_NO NUMBER(10) DEFAULT 1
);

CREATE TABLE HR_PAYROLL.EMPLOYEE_SALARY_STRUCTURE (
    STRUCTURE_ID NUMBER(10) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    EMPLOYEE_ID NUMBER(10) NOT NULL,
    ELEMENT_ID NUMBER(3) NOT NULL,
    AMOUNT NUMBER(10, 2) DEFAULT 0,
    PERCENTAGE NUMBER(5, 2) DEFAULT 0,
    IS_ACTIVE NUMBER(1) DEFAULT 1,
    CREATED_BY VARCHAR2(50), CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UPDATED_BY VARCHAR2(50), UPDATED_AT TIMESTAMP,
    IS_DELETED NUMBER(1) DEFAULT 0, VERSION_NO NUMBER(10) DEFAULT 1
);

CREATE TABLE HR_PAYROLL.LOANS (
    LOAN_ID NUMBER(10) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    EMPLOYEE_ID NUMBER(10) NOT NULL,
    LOAN_AMOUNT NUMBER(10, 2) NOT NULL,
    REQUEST_DATE DATE DEFAULT SYSDATE,
    INSTALLMENT_COUNT NUMBER(3) NOT NULL,
    STATUS VARCHAR2(20) DEFAULT 'ACTIVE' CHECK (STATUS IN ('PENDING', 'ACTIVE', 'CLOSED')),
    CREATED_BY VARCHAR2(50), CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UPDATED_BY VARCHAR2(50), UPDATED_AT TIMESTAMP,
    IS_DELETED NUMBER(1) DEFAULT 0, VERSION_NO NUMBER(10) DEFAULT 1
);

CREATE TABLE HR_PAYROLL.LOAN_INSTALLMENTS (
    INSTALLMENT_ID NUMBER(15) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    LOAN_ID NUMBER(10) NOT NULL,
    INSTALLMENT_NUMBER NUMBER(3) NOT NULL,
    DUE_DATE DATE NOT NULL,
    AMOUNT NUMBER(10, 2) NOT NULL,
    IS_PAID NUMBER(1) DEFAULT 0,
    PAID_IN_PAYROLL_RUN NUMBER(10),
    CREATED_BY VARCHAR2(50), CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UPDATED_BY VARCHAR2(50), UPDATED_AT TIMESTAMP,
    IS_DELETED NUMBER(1) DEFAULT 0, VERSION_NO NUMBER(10) DEFAULT 1
);

CREATE TABLE HR_PAYROLL.PAYROLL_RUNS (
    RUN_ID NUMBER(10) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    YEAR NUMBER(4) NOT NULL,
    MONTH NUMBER(2) NOT NULL,
    RUN_DATE DATE DEFAULT SYSDATE,
    STATUS VARCHAR2(20) DEFAULT 'DRAFT' CHECK (STATUS IN ('DRAFT', 'APPROVED', 'PAID')),
    TOTAL_PAYOUT NUMBER(15, 2),
    NOTES VARCHAR2(200),
    CREATED_BY VARCHAR2(50), CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UPDATED_BY VARCHAR2(50), UPDATED_AT TIMESTAMP,
    IS_DELETED NUMBER(1) DEFAULT 0, VERSION_NO NUMBER(10) DEFAULT 1
);

CREATE TABLE HR_PAYROLL.PAYSLIPS (
    PAYSLIP_ID NUMBER(15) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    RUN_ID NUMBER(10) NOT NULL,
    EMPLOYEE_ID NUMBER(10) NOT NULL,
    BASIC_SALARY NUMBER(10, 2),
    TOTAL_ALLOWANCES NUMBER(10, 2),
    TOTAL_DEDUCTIONS NUMBER(10, 2),
    NET_SALARY NUMBER(10, 2),
    CREATED_BY VARCHAR2(50), CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UPDATED_BY VARCHAR2(50), UPDATED_AT TIMESTAMP,
    IS_DELETED NUMBER(1) DEFAULT 0, VERSION_NO NUMBER(10) DEFAULT 1
);

CREATE TABLE HR_PAYROLL.PAYSLIP_DETAILS (
    DETAIL_ID NUMBER(15) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    PAYSLIP_ID NUMBER(15) NOT NULL,
    ELEMENT_ID NUMBER(3) NOT NULL,
    ELEMENT_NAME_AR VARCHAR2(100),
    AMOUNT NUMBER(10, 2) NOT NULL,
    TYPE VARCHAR2(10),
    CREATED_BY VARCHAR2(50), CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UPDATED_BY VARCHAR2(50), UPDATED_AT TIMESTAMP,
    IS_DELETED NUMBER(1) DEFAULT 0, VERSION_NO NUMBER(10) DEFAULT 1
);

CREATE TABLE HR_PAYROLL.END_OF_SERVICE_CALC (
    EOS_ID NUMBER(10) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    EMPLOYEE_ID NUMBER(10) NOT NULL,
    TERMINATION_DATE DATE NOT NULL,
    SERVICE_YEARS NUMBER(5, 2) NOT NULL,
    LAST_BASIC_SALARY NUMBER(10, 2) NOT NULL,
    TOTAL_AMOUNT NUMBER(12, 2) NOT NULL,
    CALCULATION_NOTES VARCHAR2(500),
    IS_PAID NUMBER(1) DEFAULT 0,
    CREATED_BY VARCHAR2(50), CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UPDATED_BY VARCHAR2(50), UPDATED_AT TIMESTAMP,
    IS_DELETED NUMBER(1) DEFAULT 0, VERSION_NO NUMBER(10) DEFAULT 1
);

CREATE TABLE HR_PAYROLL.PAYROLL_ADJUSTMENTS (
    ADJUSTMENT_ID NUMBER(10) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    EMPLOYEE_ID NUMBER(10) NOT NULL,
    PAYROLL_RUN_ID NUMBER(10),
    ADJUSTMENT_TYPE VARCHAR2(20) CHECK (ADJUSTMENT_TYPE IN ('BONUS', 'DEDUCTION', 'CORRECTION')),
    AMOUNT NUMBER(10, 2) NOT NULL,
    REASON VARCHAR2(200) NOT NULL,
    APPROVED_BY NUMBER(10),
    CREATED_BY VARCHAR2(50), CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UPDATED_BY VARCHAR2(50), UPDATED_AT TIMESTAMP,
    IS_DELETED NUMBER(1) DEFAULT 0, VERSION_NO NUMBER(10) DEFAULT 1
);

PROMPT تم إنشاء 10 جداول في HR_PAYROLL

PROMPT ========================================
PROMPT إنشاء جداول HR_RECRUITMENT (5 جداول)
PROMPT ========================================

CREATE TABLE HR_RECRUITMENT.JOB_VACANCIES (
    VACANCY_ID NUMBER(10) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    JOB_ID NUMBER(5) NOT NULL,
    DEPT_ID NUMBER(5) NOT NULL,
    REQUIRED_COUNT NUMBER(3) DEFAULT 1,
    JOB_DESCRIPTION CLOB,
    REQUIREMENTS CLOB,
    STATUS VARCHAR2(20) DEFAULT 'OPEN' CHECK (STATUS IN ('OPEN', 'CLOSED', 'ON_HOLD', 'CANCELLED')),
    PUBLISH_DATE DATE,
    CLOSING_DATE DATE,
    CREATED_BY VARCHAR2(50), CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UPDATED_BY VARCHAR2(50), UPDATED_AT TIMESTAMP,
    IS_DELETED NUMBER(1) DEFAULT 0, VERSION_NO NUMBER(10) DEFAULT 1
);

CREATE TABLE HR_RECRUITMENT.CANDIDATES (
    CANDIDATE_ID NUMBER(10) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    FIRST_NAME_AR VARCHAR2(50),
    FAMILY_NAME_AR VARCHAR2(50),
    FULL_NAME_EN VARCHAR2(200) NOT NULL,
    EMAIL VARCHAR2(100) UNIQUE NOT NULL,
    PHONE VARCHAR2(20),
    NATIONALITY_ID NUMBER(3),
    CV_FILE_PATH VARCHAR2(500),
    LINKEDIN_PROFILE VARCHAR2(200),
    CREATED_BY VARCHAR2(50), CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UPDATED_BY VARCHAR2(50), UPDATED_AT TIMESTAMP,
    IS_DELETED NUMBER(1) DEFAULT 0, VERSION_NO NUMBER(10) DEFAULT 1
);

CREATE TABLE HR_RECRUITMENT.APPLICATIONS (
    APP_ID NUMBER(10) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    VACANCY_ID NUMBER(10) NOT NULL,
    CANDIDATE_ID NUMBER(10) NOT NULL,
    APPLICATION_DATE DATE DEFAULT SYSDATE,
    STATUS VARCHAR2(20) DEFAULT 'APPLIED' CHECK (STATUS IN ('APPLIED', 'SCREENING', 'SHORTLISTED', 'INTERVIEW', 'OFFERED', 'HIRED', 'REJECTED')),
    REJECTION_REASON VARCHAR2(200),
    RX_SOURCE VARCHAR2(50),
    CREATED_BY VARCHAR2(50), CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UPDATED_BY VARCHAR2(50), UPDATED_AT TIMESTAMP,
    IS_DELETED NUMBER(1) DEFAULT 0, VERSION_NO NUMBER(10) DEFAULT 1
);

CREATE TABLE HR_RECRUITMENT.INTERVIEWS (
    INTERVIEW_ID NUMBER(10) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    APP_ID NUMBER(10) NOT NULL,
    INTERVIEWER_ID NUMBER(10),
    SCHEDULED_TIME TIMESTAMP NOT NULL,
    INTERVIEW_TYPE VARCHAR2(20) DEFAULT 'IN_PERSON' CHECK (INTERVIEW_TYPE IN ('PHONE', 'ONLINE', 'IN_PERSON')),
    RATING NUMBER(1),
    FEEDBACK CLOB,
    RESULT VARCHAR2(20) CHECK (RESULT IN ('PASS', 'FAIL', 'PENDING')),
    CREATED_BY VARCHAR2(50), CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UPDATED_BY VARCHAR2(50), UPDATED_AT TIMESTAMP,
    IS_DELETED NUMBER(1) DEFAULT 0, VERSION_NO NUMBER(10) DEFAULT 1
);

CREATE TABLE HR_RECRUITMENT.OFFERS (
    OFFER_ID NUMBER(10) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    APP_ID NUMBER(10) NOT NULL,
    OFFER_DATE DATE DEFAULT SYSDATE,
    BASIC_SALARY NUMBER(10, 2),
    HOUSING_ALLOWANCE NUMBER(10, 2),
    TRANSPORT_ALLOWANCE NUMBER(10, 2),
    JOINING_DATE DATE,
    STATUS VARCHAR2(20) DEFAULT 'DRAFT' CHECK (STATUS IN ('DRAFT', 'SENT', 'ACCEPTED', 'DECLINED')),
    CREATED_BY VARCHAR2(50), CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UPDATED_BY VARCHAR2(50), UPDATED_AT TIMESTAMP,
    IS_DELETED NUMBER(1) DEFAULT 0, VERSION_NO NUMBER(10) DEFAULT 1
);

PROMPT تم إنشاء 5 جداول في HR_RECRUITMENT

PROMPT ========================================
PROMPT إنشاء جداول HR_PERFORMANCE (7 جداول)
PROMPT ========================================

CREATE TABLE HR_PERFORMANCE.KPI_LIBRARIES (
    KPI_ID NUMBER(5) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    KPI_NAME_AR VARCHAR2(200) NOT NULL,
    KPI_DESCRIPTION VARCHAR2(500),
    CATEGORY VARCHAR2(50),
    MEASUREMENT_UNIT VARCHAR2(20),
    CREATED_BY VARCHAR2(50), CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UPDATED_BY VARCHAR2(50), UPDATED_AT TIMESTAMP,
    IS_DELETED NUMBER(1) DEFAULT 0, VERSION_NO NUMBER(10) DEFAULT 1
);

CREATE TABLE HR_PERFORMANCE.APPRAISAL_CYCLES (
    CYCLE_ID NUMBER(5) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    CYCLE_NAME_AR VARCHAR2(100) NOT NULL,
    START_DATE DATE NOT NULL,
    END_DATE DATE NOT NULL,
    IS_ACTIVE NUMBER(1) DEFAULT 1,
    CREATED_BY VARCHAR2(50), CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UPDATED_BY VARCHAR2(50), UPDATED_AT TIMESTAMP,
    IS_DELETED NUMBER(1) DEFAULT 0, VERSION_NO NUMBER(10) DEFAULT 1
);

CREATE TABLE HR_PERFORMANCE.EMPLOYEE_APPRAISALS (
    APPRAISAL_ID NUMBER(10) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    EMPLOYEE_ID NUMBER(10) NOT NULL,
    CYCLE_ID NUMBER(5) NOT NULL,
    EVALUATOR_ID NUMBER(10) NOT NULL,
    APPRAISAL_DATE DATE DEFAULT SYSDATE,
    FINAL_SCORE NUMBER(5, 2),
    GRADE VARCHAR2(20),
    STATUS VARCHAR2(20) DEFAULT 'DRAFT' CHECK (STATUS IN ('DRAFT', 'SUBMITTED', 'APPROVED', 'ACKNOWLEDGED')),
    EMPLOYEE_COMMENT VARCHAR2(500),
    CREATED_BY VARCHAR2(50), CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UPDATED_BY VARCHAR2(50), UPDATED_AT TIMESTAMP,
    IS_DELETED NUMBER(1) DEFAULT 0, VERSION_NO NUMBER(10) DEFAULT 1
);

CREATE TABLE HR_PERFORMANCE.APPRAISAL_DETAILS (
    DETAIL_ID NUMBER(15) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    APPRAISAL_ID NUMBER(10) NOT NULL,
    KPI_ID NUMBER(5) NOT NULL,
    TARGET_VALUE NUMBER(10, 2),
    ACTUAL_VALUE NUMBER(10, 2),
    SCORE NUMBER(5, 2) NOT NULL,
    COMMENTS VARCHAR2(200),
    CREATED_BY VARCHAR2(50), CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UPDATED_BY VARCHAR2(50), UPDATED_AT TIMESTAMP,
    IS_DELETED NUMBER(1) DEFAULT 0, VERSION_NO NUMBER(10) DEFAULT 1
);

CREATE TABLE HR_PERFORMANCE.VIOLATION_TYPES (
    VIOLATION_TYPE_ID NUMBER(3) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    VIOLATION_NAME_AR VARCHAR2(100) NOT NULL,
    SEVERITY_LEVEL NUMBER(1) DEFAULT 1 CHECK (SEVERITY_LEVEL IN (1, 2, 3)),
    CREATED_BY VARCHAR2(50), CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UPDATED_BY VARCHAR2(50), UPDATED_AT TIMESTAMP,
    IS_DELETED NUMBER(1) DEFAULT 0, VERSION_NO NUMBER(10) DEFAULT 1
);

CREATE TABLE HR_PERFORMANCE.DISCIPLINARY_ACTIONS (
    ACTION_ID NUMBER(3) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    ACTION_NAME_AR VARCHAR2(100) NOT NULL,
    DEDUCTION_DAYS NUMBER(3, 1) DEFAULT 0,
    IS_TERMINATION NUMBER(1) DEFAULT 0,
    CREATED_BY VARCHAR2(50), CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UPDATED_BY VARCHAR2(50), UPDATED_AT TIMESTAMP,
    IS_DELETED NUMBER(1) DEFAULT 0, VERSION_NO NUMBER(10) DEFAULT 1
);

CREATE TABLE HR_PERFORMANCE.EMPLOYEE_VIOLATIONS (
    VIOLATION_ID NUMBER(10) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    EMPLOYEE_ID NUMBER(10) NOT NULL,
    VIOLATION_TYPE_ID NUMBER(3) NOT NULL,
    VIOLATION_DATE DATE NOT NULL,
    DESCRIPTION VARCHAR2(500),
    ACTION_ID NUMBER(3),
    IS_EXECUTED NUMBER(1) DEFAULT 0,
    STATUS VARCHAR2(20) DEFAULT 'PENDING' CHECK (STATUS IN ('PENDING', 'INVESTIGATION', 'APPROVED', 'CANCELLED')),
    INVESTIGATION_NOTES CLOB,
    CREATED_BY VARCHAR2(50), CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UPDATED_BY VARCHAR2(50), UPDATED_AT TIMESTAMP,
    IS_DELETED NUMBER(1) DEFAULT 0, VERSION_NO NUMBER(10) DEFAULT 1
);

PROMPT تم إنشاء 7 جداول في HR_PERFORMANCE

PROMPT ========================================
PROMPT اكتمل إنشاء جميع الجداول!
PROMPT ========================================

-- التحقق النهائي
SELECT owner, COUNT(*) as table_count 
FROM all_tables 
WHERE owner IN ('HR_CORE', 'HR_PERSONNEL', 'HR_ATTENDANCE', 'HR_LEAVES', 'HR_PAYROLL', 'HR_RECRUITMENT', 'HR_PERFORMANCE')
GROUP BY owner
ORDER BY owner;

SELECT 'تم إنشاء ' || COUNT(*) || ' جدول بنجاح!' AS FINAL_STATUS
FROM all_tables 
WHERE owner IN ('HR_CORE', 'HR_PERSONNEL', 'HR_ATTENDANCE', 'HR_LEAVES', 'HR_PAYROLL', 'HR_RECRUITMENT', 'HR_PERFORMANCE');
