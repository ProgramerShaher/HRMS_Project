-- -- =================================================================================
-- -- المخطط: HR_PERSONNEL
-- -- الوصف: الموظفين، العقود، والمعلومات الشخصية
-- -- =================================================================================

-- -- جدول الموظفين الرئيسي
-- CREATE TABLE HR_PERSONNEL.EMPLOYEES (
--     EMPLOYEE_ID NUMBER(10) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
--     EMPLOYEE_NUMBER VARCHAR2(20) NOT NULL UNIQUE,
--     FIRST_NAME_AR VARCHAR2(50) NOT NULL,
--     SECOND_NAME_AR VARCHAR2(50),
--     THIRD_NAME_AR VARCHAR2(50),
--     HIJRI_LAST_NAME_AR VARCHAR2(50) NOT NULL,
--     FULL_NAME_EN VARCHAR2(200) NOT NULL,
    
--     GENDER CHAR(1) CHECK (GENDER IN ('M', 'F')),
--     BIRTH_DATE DATE NOT NULL,
--     MARITAL_STATUS VARCHAR2(20) CHECK (MARITAL_STATUS IN ('SINGLE', 'MARRIED', 'DIVORCED', 'WIDOWED')),
    
--     NATIONALITY_ID NUMBER(3) NOT NULL,
--     JOB_ID NUMBER(5) NOT NULL,
--     DEPT_ID NUMBER(5) NOT NULL,
--     MANAGER_ID NUMBER(10),
    
--     JOINING_DATE DATE NOT NULL,
--     STATUS VARCHAR2(20) DEFAULT 'ACTIVE' CHECK (STATUS IN ('ACTIVE', 'ON_LEAVE', 'TERMINATED', 'RESIGNED')),
--     EMAIL VARCHAR2(100),
--     MOBILE VARCHAR2(20),
    
--     -- Audit Columns
--     CREATED_BY VARCHAR2(50),
--     CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
--     UPDATED_BY VARCHAR2(50),
--     UPDATED_AT TIMESTAMP,
--     IS_DELETED NUMBER(1) DEFAULT 0,
--     VERSION_NO NUMBER(10) DEFAULT 1,
    
--     CONSTRAINT FK_EMP_NATIONALITY FOREIGN KEY (NATIONALITY_ID) REFERENCES HR_CORE.COUNTRIES(COUNTRY_ID),
--     CONSTRAINT FK_EMP_JOB FOREIGN KEY (JOB_ID) REFERENCES HR_CORE.JOBS(JOB_ID),
--     CONSTRAINT FK_EMP_DEPT FOREIGN KEY (DEPT_ID) REFERENCES HR_CORE.DEPARTMENTS(DEPT_ID),
--     CONSTRAINT FK_EMP_MANAGER FOREIGN KEY (MANAGER_ID) REFERENCES HR_PERSONNEL.EMPLOYEES(EMPLOYEE_ID)
-- );

-- -- وثائق الموظف
-- CREATE TABLE HR_PERSONNEL.EMPLOYEE_DOCUMENTS (
--     DOC_ID NUMBER(10) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
--     EMPLOYEE_ID NUMBER(10) NOT NULL,
--     DOC_TYPE_ID NUMBER(3) NOT NULL,
--     DOC_NUMBER VARCHAR2(50),
--     ISSUE_DATE DATE,
--     EXPIRY_DATE DATE,
--     ISSUE_PLACE VARCHAR2(100),
--     ATTACHMENT_PATH VARCHAR2(500),
--     IS_ACTIVE NUMBER(1) DEFAULT 1,
--     -- Audit Columns
--     CREATED_BY VARCHAR2(50),
--     CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
--     UPDATED_BY VARCHAR2(50),
--     UPDATED_AT TIMESTAMP,
--     IS_DELETED NUMBER(1) DEFAULT 0,
--     VERSION_NO NUMBER(10) DEFAULT 1,
    
--     CONSTRAINT FK_DOC_EMP FOREIGN KEY (EMPLOYEE_ID) REFERENCES HR_PERSONNEL.EMPLOYEES(EMPLOYEE_ID),
--     CONSTRAINT FK_DOC_TYPE FOREIGN KEY (DOC_TYPE_ID) REFERENCES HR_CORE.DOCUMENT_TYPES(DOC_TYPE_ID)
-- );

-- -- العقود
-- CREATE TABLE HR_PERSONNEL.CONTRACTS (
--     CONTRACT_ID NUMBER(10) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
--     EMPLOYEE_ID NUMBER(10) NOT NULL,
--     CONTRACT_TYPE VARCHAR2(50) CHECK (CONTRACT_TYPE IN ('FULL_TIME', 'PART_TIME', 'LOCUM', 'VISITING')),
--     START_DATE DATE NOT NULL,
--     END_DATE DATE,
--     IS_RENEWABLE NUMBER(1) DEFAULT 1,
    
--     BASIC_SALARY NUMBER(10, 2) NOT NULL,
--     HOUSING_ALLOWANCE NUMBER(10, 2) DEFAULT 0,
--     TRANSPORT_ALLOWANCE NUMBER(10, 2) DEFAULT 0,
--     OTHER_ALLOWANCES NUMBER(10, 2) DEFAULT 0,
    
--     VACATION_DAYS NUMBER(3) DEFAULT 30,
--     WORKING_HOURS_DAILY NUMBER(2) DEFAULT 8,
    
--     CONTRACT_STATUS VARCHAR2(20) DEFAULT 'ACTIVE' CHECK (CONTRACT_STATUS IN ('ACTIVE', 'EXPIRED', 'TERMINATED')),
--     -- Audit Columns
--     CREATED_BY VARCHAR2(50),
--     CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
--     UPDATED_BY VARCHAR2(50),
--     UPDATED_AT TIMESTAMP,
--     IS_DELETED NUMBER(1) DEFAULT 0,
--     VERSION_NO NUMBER(10) DEFAULT 1,
    
--     CONSTRAINT FK_CONT_EMP FOREIGN KEY (EMPLOYEE_ID) REFERENCES HR_PERSONNEL.EMPLOYEES(EMPLOYEE_ID)
-- );

-- -- تجديد العقود
-- CREATE TABLE HR_PERSONNEL.CONTRACT_RENEWALS (
--     RENEWAL_ID NUMBER(10) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
--     CONTRACT_ID NUMBER(10) NOT NULL,
--     OLD_END_DATE DATE NOT NULL,
--     NEW_START_DATE DATE NOT NULL,
--     NEW_END_DATE DATE NOT NULL,
--     RENEWAL_DATE DATE DEFAULT SYSDATE,
--     NOTES VARCHAR2(500),
--     -- Audit Columns
--     CREATED_BY VARCHAR2(50),
--     CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
--     UPDATED_BY VARCHAR2(50),
--     UPDATED_AT TIMESTAMP,
--     IS_DELETED NUMBER(1) DEFAULT 0,
--     VERSION_NO NUMBER(10) DEFAULT 1,
--     CONSTRAINT FK_RENEW_CONT FOREIGN KEY (CONTRACT_ID) REFERENCES HR_PERSONNEL.CONTRACTS(CONTRACT_ID)
-- );

-- -- التابعين (المرافقين)
-- CREATE TABLE HR_PERSONNEL.DEPENDENTS (
--     DEPENDENT_ID NUMBER(10) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
--     EMPLOYEE_ID NUMBER(10) NOT NULL,
--     NAME_AR VARCHAR2(100) NOT NULL,
--     RELATIONSHIP VARCHAR2(50) NOT NULL,
--     BIRTH_DATE DATE,
--     NATIONAL_ID VARCHAR2(20),
--     IS_ELIGIBLE_FOR_TICKET NUMBER(1) DEFAULT 1,
--     IS_ELIGIBLE_FOR_INSURANCE NUMBER(1) DEFAULT 1,
--     -- Audit Columns
--     CREATED_BY VARCHAR2(50),
--     CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
--     UPDATED_BY VARCHAR2(50),
--     UPDATED_AT TIMESTAMP,
--     IS_DELETED NUMBER(1) DEFAULT 0,
--     VERSION_NO NUMBER(10) DEFAULT 1,
--     CONSTRAINT FK_DEP_EMP FOREIGN KEY (EMPLOYEE_ID) REFERENCES HR_PERSONNEL.EMPLOYEES(EMPLOYEE_ID)
-- );

-- -- المؤهلات العلمية
-- CREATE TABLE HR_PERSONNEL.EMPLOYEE_QUALIFICATIONS (
--     QUALIFICATION_ID NUMBER(10) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
--     EMPLOYEE_ID NUMBER(10) NOT NULL,
--     DEGREE_TYPE VARCHAR2(50) NOT NULL, -- بكالوريوس، ماجستير، دكتوراه، دبلوم
--     MAJOR_AR VARCHAR2(100) NOT NULL, -- التخصص
--     UNIVERSITY_AR VARCHAR2(200),
--     COUNTRY_ID NUMBER(3),
--     GRADUATION_YEAR NUMBER(4),
--     GRADE VARCHAR2(20), -- ممتاز، جيد جداً
--     ATTACHMENT_PATH VARCHAR2(500),
--     -- Audit Columns
--     CREATED_BY VARCHAR2(50),
--     CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
--     UPDATED_BY VARCHAR2(50),
--     UPDATED_AT TIMESTAMP,
--     IS_DELETED NUMBER(1) DEFAULT 0,
--     VERSION_NO NUMBER(10) DEFAULT 1,
--     CONSTRAINT FK_QUAL_EMP FOREIGN KEY (EMPLOYEE_ID) REFERENCES HR_PERSONNEL.EMPLOYEES(EMPLOYEE_ID),
--     CONSTRAINT FK_QUAL_COUNTRY FOREIGN KEY (COUNTRY_ID) REFERENCES HR_CORE.COUNTRIES(COUNTRY_ID)
-- );

-- -- الخبرات السابقة
-- CREATE TABLE HR_PERSONNEL.EMPLOYEE_EXPERIENCES (
--     EXPERIENCE_ID NUMBER(10) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
--     EMPLOYEE_ID NUMBER(10) NOT NULL,
--     COMPANY_NAME_AR VARCHAR2(200) NOT NULL,
--     JOB_TITLE_AR VARCHAR2(100),
--     START_DATE DATE NOT NULL,
--     END_DATE DATE,
--     IS_CURRENT NUMBER(1) DEFAULT 0,
--     RESPONSIBILITIES VARCHAR2(500),
--     REASON_FOR_LEAVING VARCHAR2(200),
--     -- Audit Columns
--     CREATED_BY VARCHAR2(50),
--     CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
--     UPDATED_BY VARCHAR2(50),
--     UPDATED_AT TIMESTAMP,
--     IS_DELETED NUMBER(1) DEFAULT 0,
--     VERSION_NO NUMBER(10) DEFAULT 1,
--     CONSTRAINT FK_EXP_EMP FOREIGN KEY (EMPLOYEE_ID) REFERENCES HR_PERSONNEL.EMPLOYEES(EMPLOYEE_ID)
-- );

-- -- الشهادات المهنية والتراخيص (مهم جداً للأطباء)
-- CREATE TABLE HR_PERSONNEL.EMPLOYEE_CERTIFICATIONS (
--     CERT_ID NUMBER(10) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
--     EMPLOYEE_ID NUMBER(10) NOT NULL,
--     CERT_NAME_AR VARCHAR2(200) NOT NULL, -- BLS, ACLS, رخصة هيئة التخصصات
--     ISSUING_AUTHORITY VARCHAR2(200), -- الجهة المانحة
--     ISSUE_DATE DATE,
--     EXPIRY_DATE DATE,
--     CERT_NUMBER VARCHAR2(100),
--     IS_MANDATORY NUMBER(1) DEFAULT 0, -- إلزامية لمزاولة المهنة
--     ATTACHMENT_PATH VARCHAR2(500),
--     -- Audit Columns
--     CREATED_BY VARCHAR2(50),
--     CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
--     UPDATED_BY VARCHAR2(50),
--     UPDATED_AT TIMESTAMP,
--     IS_DELETED NUMBER(1) DEFAULT 0,
--     VERSION_NO NUMBER(10) DEFAULT 1,
--     CONSTRAINT FK_CERT_EMP FOREIGN KEY (EMPLOYEE_ID) REFERENCES HR_PERSONNEL.EMPLOYEES(EMPLOYEE_ID)
-- );

-- -- العناوين (الحالي، الدائم)
-- CREATE TABLE HR_PERSONNEL.EMPLOYEE_ADDRESSES (
--     ADDRESS_ID NUMBER(10) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
--     EMPLOYEE_ID NUMBER(10) NOT NULL,
--     ADDRESS_TYPE VARCHAR2(20) CHECK (ADDRESS_TYPE IN ('CURRENT', 'PERMANENT', 'EMERGENCY')),
--     CITY_ID NUMBER(5),
--     DISTRICT VARCHAR2(100), -- الحي
--     STREET VARCHAR2(200),
--     BUILDING_NO VARCHAR2(20),
--     POSTAL_CODE VARCHAR2(20),
--     -- Audit Columns
--     CREATED_BY VARCHAR2(50),
--     CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
--     UPDATED_BY VARCHAR2(50),
--     UPDATED_AT TIMESTAMP,
--     IS_DELETED NUMBER(1) DEFAULT 0,
--     VERSION_NO NUMBER(10) DEFAULT 1,
--     CONSTRAINT FK_ADDR_EMP FOREIGN KEY (EMPLOYEE_ID) REFERENCES HR_PERSONNEL.EMPLOYEES(EMPLOYEE_ID),
--     CONSTRAINT FK_ADDR_CITY FOREIGN KEY (CITY_ID) REFERENCES HR_CORE.CITIES(CITY_ID)
-- );

-- -- جهات الاتصال للطوارئ
-- CREATE TABLE HR_PERSONNEL.EMERGENCY_CONTACTS (
--     CONTACT_ID NUMBER(10) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
--     EMPLOYEE_ID NUMBER(10) NOT NULL,
--     CONTACT_NAME_AR VARCHAR2(100) NOT NULL,
--     RELATIONSHIP VARCHAR2(50), -- أب، أخ، زوجة
--     PHONE_PRIMARY VARCHAR2(20) NOT NULL,
--     PHONE_SECONDARY VARCHAR2(20),
--     IS_PRIMARY NUMBER(1) DEFAULT 0, -- جهة الاتصال الرئيسية
--     -- Audit Columns
--     CREATED_BY VARCHAR2(50),
--     CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
--     UPDATED_BY VARCHAR2(50),
--     UPDATED_AT TIMESTAMP,
--     IS_DELETED NUMBER(1) DEFAULT 0,
--     VERSION_NO NUMBER(10) DEFAULT 1,
--     CONSTRAINT FK_EMERG_EMP FOREIGN KEY (EMPLOYEE_ID) REFERENCES HR_PERSONNEL.EMPLOYEES(EMPLOYEE_ID)
-- );

-- -- الحسابات البنكية (قد يكون للموظف أكثر من حساب)
-- CREATE TABLE HR_PERSONNEL.EMPLOYEE_BANK_ACCOUNTS (
--     ACCOUNT_ID NUMBER(10) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
--     EMPLOYEE_ID NUMBER(10) NOT NULL,
--     BANK_ID NUMBER(3) NOT NULL,
--     ACCOUNT_NUMBER VARCHAR2(50) NOT NULL,
--     IBAN VARCHAR2(50),
--     IS_PRIMARY NUMBER(1) DEFAULT 1, -- الحساب الرئيسي لتحويل الراتب
--     IS_ACTIVE NUMBER(1) DEFAULT 1,
--     -- Audit Columns
--     CREATED_BY VARCHAR2(50),
--     CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
--     UPDATED_BY VARCHAR2(50),
--     UPDATED_AT TIMESTAMP,
--     IS_DELETED NUMBER(1) DEFAULT 0,
--     VERSION_NO NUMBER(10) DEFAULT 1,
--     CONSTRAINT FK_BANK_ACC_EMP FOREIGN KEY (EMPLOYEE_ID) REFERENCES HR_PERSONNEL.EMPLOYEES(EMPLOYEE_ID),
--     CONSTRAINT FK_BANK_ACC_BANK FOREIGN KEY (BANK_ID) REFERENCES HR_CORE.BANKS(BANK_ID)
-- );

-- -- ملاحظة: الصلاحيات سيتم منحها في ملف منفصل
